!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="http://localhost:8082/dist/bluesharkmap/",r(r.s=59)}([function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),o)}var i,a}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=e.color||Cesium.Color.fromBytes(0,255,255,255),this.speed=e.speed||1}var e,r,n;return e=t,(r=[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(t){return null}},{key:"getValue",value:function(t,e){return e=Cesium.defaultValue(e,{})}},{key:"equals",value:function(t){return this===t}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=i},function(t,e){t.exports=ol},,function(t,e,r){(function(t,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",h="[object Number]",y="[object Object]",d="[object RegExp]",v="[object Set]",m="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",g="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",x="[object Uint32Array]",A=/\w*$/,R=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,I={};I[s]=I["[object Array]"]=I[_]=I[g]=I[u]=I[l]=I[w]=I[O]=I[P]=I[C]=I[S]=I[p]=I[h]=I[y]=I[d]=I[v]=I[m]=I[b]=I[E]=I[T]=I[j]=I[x]=!0,I["[object Error]"]=I[c]=I["[object WeakMap]"]=!1;var M="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t,D="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,L=M||D||Function("return this")(),N="object"==n(e)&&e&&!e.nodeType&&e,F=N&&"object"==n(r)&&r&&!r.nodeType&&r,B=F&&F.exports===N;function W(t,e){return t.set(e[0],e[1]),t}function G(t,e){return t.add(e),t}function z(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function U(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function V(t,e){return function(r){return t(e(r))}}function Z(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Y,X=Array.prototype,K=Function.prototype,Q=Object.prototype,q=L["__core-js_shared__"],J=(Y=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",$=K.toString,tt=Q.hasOwnProperty,et=Q.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=B?L.Buffer:void 0,ot=L.Symbol,it=L.Uint8Array,at=V(Object.getPrototypeOf,Object),st=Object.create,ut=Q.propertyIsEnumerable,lt=X.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,pt=V(Object.keys,Object),ht=Ft(L,"DataView"),yt=Ft(L,"Map"),dt=Ft(L,"Promise"),vt=Ft(L,"Set"),mt=Ft(L,"WeakMap"),bt=Ft(Object,"create"),_t=Ht(ht),gt=Ht(yt),wt=Ht(dt),Ot=Ht(vt),Pt=Ht(mt),Ct=ot?ot.prototype:void 0,St=Ct?Ct.valueOf:void 0;function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function xt(t){this.__data__=new Tt(t)}function At(t,e){var r=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Zt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Gt(a,o))||r.push(a);return r}function Rt(t,e,r){var n=t[e];tt.call(t,e)&&Ut(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function kt(t,e){for(var r=t.length;r--;)if(Ut(t[r][0],e))return r;return-1}function It(t,e,r,n,o,i,a){var R;if(n&&(R=i?n(t,o,i,a):n(t)),void 0!==R)return R;if(!Kt(t))return t;var k=Vt(t);if(k){if(R=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,R)}else{var M=Wt(t),D=M==c||M==f;if(Yt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(M==y||M==s||D&&!i){if(H(t))return i?t:{};if(R=function(t){return"function"!=typeof t.constructor||zt(t)?{}:(e=at(t),Kt(e)?st(e):{});var e}(D?{}:t),!e)return function(t,e){return Lt(t,Bt(t),e)}(t,function(t,e){return t&&Lt(e,Qt(e),t)}(R,t))}else{if(!I[M])return i?t:{};R=function(t,e,r,n){var o=t.constructor;switch(e){case _:return Dt(t);case u:case l:return new o(+t);case g:return function(t,e){var r=e?Dt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case O:case P:case C:case S:case E:case T:case j:case x:return function(t,e){var r=e?Dt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case p:return function(t,e,r){return z(e?r(U(t),!0):U(t),W,new t.constructor)}(t,n,r);case h:case m:return new o(t);case d:return(s=new(a=t).constructor(a.source,A.exec(a))).lastIndex=a.lastIndex,s;case v:return function(t,e,r){return z(e?r(Z(t),!0):Z(t),G,new t.constructor)}(t,n,r);case b:return i=t,St?Object(St.call(i)):{}}var i;var a,s}(t,M,It,e)}}a||(a=new xt);var L=a.get(t);if(L)return L;if(a.set(t,R),!k)var N=r?function(t){return function(t,e,r){var n=e(t);return Vt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Qt,Bt)}(t):Qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(N||t,function(o,i){N&&(o=t[i=o]),Rt(R,i,It(o,e,r,n,i,t,a))}),R}function Mt(t){return!(!Kt(t)||J&&J in t)&&(Xt(t)||H(t)?rt:R).test(Ht(t))}function Dt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Lt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;Rt(r,a,void 0===s?t[a]:s)}return r}function Nt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(r)?r:void 0}Et.prototype.clear=function(){this.__data__=bt?bt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=kt(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=kt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return kt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=kt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new Et,map:new(yt||Tt),string:new Et}},jt.prototype.delete=function(t){return Nt(this,t).delete(t)},jt.prototype.get=function(t){return Nt(this,t).get(t)},jt.prototype.has=function(t){return Nt(this,t).has(t)},jt.prototype.set=function(t,e){return Nt(this,t).set(t,e),this},xt.prototype.clear=function(){this.__data__=new Tt},xt.prototype.delete=function(t){return this.__data__.delete(t)},xt.prototype.get=function(t){return this.__data__.get(t)},xt.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new jt(n)}return r.set(t,e),this};var Bt=ct?V(ct,Object):function(){return[]},Wt=function(t){return et.call(t)};function Gt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)}function Ht(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(ht&&Wt(new ht(new ArrayBuffer(1)))!=g||yt&&Wt(new yt)!=p||dt&&"[object Promise]"!=Wt(dt.resolve())||vt&&Wt(new vt)!=v||mt&&"[object WeakMap]"!=Wt(new mt))&&(Wt=function(t){var e=et.call(t),r=e==y?t.constructor:void 0,n=r?Ht(r):void 0;if(n)switch(n){case _t:return g;case gt:return p;case wt:return"[object Promise]";case Ot:return v;case Pt:return"[object WeakMap]"}return e});var Vt=Array.isArray;function Zt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Xt(t)}var Yt=ft||function(){return!1};function Xt(t){var e=Kt(t)?et.call(t):"";return e==c||e==f}function Kt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Qt(t){return Zt(t)?At(t):function(t){if(!zt(t))return pt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}r.exports=function(t){return It(t,!1,!0)}}).call(this,r(41),r(42)(t))},function(t,e){t.exports=Cesium},function(t,e,r){(function(t,n){var o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){var a,s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,h="__lodash_placeholder__",y=1,d=2,v=4,m=1,b=2,_=1,g=2,w=4,O=8,P=16,C=32,S=64,E=128,T=256,j=512,x=30,A="...",R=800,k=16,I=1,M=2,D=1/0,L=9007199254740991,N=1.7976931348623157e308,F=NaN,B=4294967295,W=B-1,G=B>>>1,z=[["ary",E],["bind",_],["bindKey",g],["curry",O],["curryRight",P],["flip",j],["partial",C],["partialRight",S],["rearg",T]],H="[object Arguments]",U="[object Array]",V="[object AsyncFunction]",Z="[object Boolean]",Y="[object Date]",X="[object DOMException]",K="[object Error]",Q="[object Function]",q="[object GeneratorFunction]",J="[object Map]",$="[object Number]",tt="[object Null]",et="[object Object]",rt="[object Proxy]",nt="[object RegExp]",ot="[object Set]",it="[object String]",at="[object Symbol]",st="[object Undefined]",ut="[object WeakMap]",lt="[object WeakSet]",ct="[object ArrayBuffer]",ft="[object DataView]",pt="[object Float32Array]",ht="[object Float64Array]",yt="[object Int8Array]",dt="[object Int16Array]",vt="[object Int32Array]",mt="[object Uint8Array]",bt="[object Uint8ClampedArray]",_t="[object Uint16Array]",gt="[object Uint32Array]",wt=/\b__p \+= '';/g,Ot=/\b(__p \+=) '' \+/g,Pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Et=RegExp(Ct.source),Tt=RegExp(St.source),jt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(Mt.source),Lt=/^\s+/,Nt=/\s/,Ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Wt=/,? & /,Gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/[()=,{}\[\]\/\s]/,Ht=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Zt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,Kt=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jt=/($^)/,$t=/['\n\r\u2028\u2029\\]/g,te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",re="[\\ud800-\\udfff]",ne="["+ee+"]",oe="["+te+"]",ie="\\d+",ae="[\\u2700-\\u27bf]",se="[a-z\\xdf-\\xf6\\xf8-\\xff]",ue="[^\\ud800-\\udfff"+ee+ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",le="\\ud83c[\\udffb-\\udfff]",ce="[^\\ud800-\\udfff]",fe="(?:\\ud83c[\\udde6-\\uddff]){2}",pe="[\\ud800-\\udbff][\\udc00-\\udfff]",he="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ye="(?:"+se+"|"+ue+")",de="(?:"+he+"|"+ue+")",ve="(?:"+oe+"|"+le+")"+"?",me="[\\ufe0e\\ufe0f]?"+ve+("(?:\\u200d(?:"+[ce,fe,pe].join("|")+")[\\ufe0e\\ufe0f]?"+ve+")*"),be="(?:"+[ae,fe,pe].join("|")+")"+me,_e="(?:"+[ce+oe+"?",oe,fe,pe,re].join("|")+")",ge=RegExp("['’]","g"),we=RegExp(oe,"g"),Oe=RegExp(le+"(?="+le+")|"+_e+me,"g"),Pe=RegExp([he+"?"+se+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ne,he,"$"].join("|")+")",de+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ne,he+ye,"$"].join("|")+")",he+"?"+ye+"+(?:['’](?:d|ll|m|re|s|t|ve))?",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie,be].join("|"),"g"),Ce=RegExp("[\\u200d\\ud800-\\udfff"+te+"\\ufe0e\\ufe0f]"),Se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Te=-1,je={};je[pt]=je[ht]=je[yt]=je[dt]=je[vt]=je[mt]=je[bt]=je[_t]=je[gt]=!0,je[H]=je[U]=je[ct]=je[Z]=je[ft]=je[Y]=je[K]=je[Q]=je[J]=je[$]=je[et]=je[nt]=je[ot]=je[it]=je[ut]=!1;var xe={};xe[H]=xe[U]=xe[ct]=xe[ft]=xe[Z]=xe[Y]=xe[pt]=xe[ht]=xe[yt]=xe[dt]=xe[vt]=xe[J]=xe[$]=xe[et]=xe[nt]=xe[ot]=xe[it]=xe[at]=xe[mt]=xe[bt]=xe[_t]=xe[gt]=!0,xe[K]=xe[Q]=xe[ut]=!1;var Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Re=parseFloat,ke=parseInt,Ie="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,Me="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,De=Ie||Me||Function("return this")(),Le="object"==i(e)&&e&&!e.nodeType&&e,Ne=Le&&"object"==i(n)&&n&&!n.nodeType&&n,Fe=Ne&&Ne.exports===Le,Be=Fe&&Ie.process,We=function(){try{var t=Ne&&Ne.require&&Ne.require("util").types;return t||Be&&Be.binding&&Be.binding("util")}catch(t){}}(),Ge=We&&We.isArrayBuffer,ze=We&&We.isDate,He=We&&We.isMap,Ue=We&&We.isRegExp,Ve=We&&We.isSet,Ze=We&&We.isTypedArray;function Ye(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Xe(t,e,r,n){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(n,a,r(a),t)}return n}function Ke(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Qe(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function qe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Je(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function $e(t,e){return!!(null==t?0:t.length)&&lr(t,e,0)>-1}function tr(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}function er(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function rr(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function nr(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function or(t,e,r,n){var o=null==t?0:t.length;for(n&&o&&(r=t[--o]);o--;)r=e(r,t[o],o,t);return r}function ir(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var ar=hr("length");function sr(t,e,r){var n;return r(t,function(t,r,o){if(e(t,r,o))return n=r,!1}),n}function ur(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function lr(t,e,r){return e==e?function(t,e,r){var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):ur(t,fr,r)}function cr(t,e,r,n){for(var o=r-1,i=t.length;++o<i;)if(n(t[o],e))return o;return-1}function fr(t){return t!=t}function pr(t,e){var r=null==t?0:t.length;return r?vr(t,e)/r:F}function hr(t){return function(e){return null==e?a:e[t]}}function yr(t){return function(e){return null==t?a:t[e]}}function dr(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}function vr(t,e){for(var r,n=-1,o=t.length;++n<o;){var i=e(t[n]);i!==a&&(r=r===a?i:r+i)}return r}function mr(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function br(t){return t?t.slice(0,Dr(t)+1).replace(Lt,""):t}function _r(t){return function(e){return t(e)}}function gr(t,e){return er(e,function(e){return t[e]})}function wr(t,e){return t.has(e)}function Or(t,e){for(var r=-1,n=t.length;++r<n&&lr(e,t[r],0)>-1;);return r}function Pr(t,e){for(var r=t.length;r--&&lr(e,t[r],0)>-1;);return r}var Cr=yr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Sr=yr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Er(t){return"\\"+Ae[t]}function Tr(t){return Ce.test(t)}function jr(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function xr(t,e){return function(r){return t(e(r))}}function Ar(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var a=t[r];a!==e&&a!==h||(t[r]=h,i[o++]=r)}return i}function Rr(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function kr(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Ir(t){return Tr(t)?function(t){var e=Oe.lastIndex=0;for(;Oe.test(t);)++e;return e}(t):ar(t)}function Mr(t){return Tr(t)?function(t){return t.match(Oe)||[]}(t):function(t){return t.split("")}(t)}function Dr(t){for(var e=t.length;e--&&Nt.test(t.charAt(e)););return e}var Lr=yr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Nr=function t(e){var r,n=(e=null==e?De:Nr.defaults(De.Object(),e,Nr.pick(De,Ee))).Array,o=e.Date,Nt=e.Error,te=e.Function,ee=e.Math,re=e.Object,ne=e.RegExp,oe=e.String,ie=e.TypeError,ae=n.prototype,se=te.prototype,ue=re.prototype,le=e["__core-js_shared__"],ce=se.toString,fe=ue.hasOwnProperty,pe=0,he=(r=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",ye=ue.toString,de=ce.call(re),ve=De._,me=ne("^"+ce.call(fe).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=Fe?e.Buffer:a,_e=e.Symbol,Oe=e.Uint8Array,Ce=be?be.allocUnsafe:a,Ae=xr(re.getPrototypeOf,re),Ie=re.create,Me=ue.propertyIsEnumerable,Le=ae.splice,Ne=_e?_e.isConcatSpreadable:a,Be=_e?_e.iterator:a,We=_e?_e.toStringTag:a,ar=function(){try{var t=zi(re,"defineProperty");return t({},"",{}),t}catch(t){}}(),yr=e.clearTimeout!==De.clearTimeout&&e.clearTimeout,Fr=o&&o.now!==De.Date.now&&o.now,Br=e.setTimeout!==De.setTimeout&&e.setTimeout,Wr=ee.ceil,Gr=ee.floor,zr=re.getOwnPropertySymbols,Hr=be?be.isBuffer:a,Ur=e.isFinite,Vr=ae.join,Zr=xr(re.keys,re),Yr=ee.max,Xr=ee.min,Kr=o.now,Qr=e.parseInt,qr=ee.random,Jr=ae.reverse,$r=zi(e,"DataView"),tn=zi(e,"Map"),en=zi(e,"Promise"),rn=zi(e,"Set"),nn=zi(e,"WeakMap"),on=zi(re,"create"),an=nn&&new nn,sn={},un=ya($r),ln=ya(tn),cn=ya(en),fn=ya(rn),pn=ya(nn),hn=_e?_e.prototype:a,yn=hn?hn.valueOf:a,dn=hn?hn.toString:a;function vn(t){if(Rs(t)&&!gs(t)&&!(t instanceof gn)){if(t instanceof _n)return t;if(fe.call(t,"__wrapped__"))return da(t)}return new _n(t)}var mn=function(){function t(){}return function(e){if(!As(e))return{};if(Ie)return Ie(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function bn(){}function _n(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function wn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function On(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Cn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Pn;++e<r;)this.add(t[e])}function Sn(t){var e=this.__data__=new On(t);this.size=e.size}function En(t,e){var r=gs(t),n=!r&&_s(t),o=!r&&!n&&Cs(t),i=!r&&!n&&!o&&Bs(t),a=r||n||o||i,s=a?mr(t.length,oe):[],u=s.length;for(var l in t)!e&&!fe.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ki(l,u))||s.push(l);return s}function Tn(t){var e=t.length;return e?t[So(0,e-1)]:a}function jn(t,e){return fa(ai(t),Nn(e,0,t.length))}function xn(t){return fa(ai(t))}function An(t,e,r){(r===a||vs(t[e],r))&&(r!==a||e in t)||Dn(t,e,r)}function Rn(t,e,r){var n=t[e];fe.call(t,e)&&vs(n,r)&&(r!==a||e in t)||Dn(t,e,r)}function kn(t,e){for(var r=t.length;r--;)if(vs(t[r][0],e))return r;return-1}function In(t,e,r,n){return zn(t,function(t,o,i){e(n,t,r(t),i)}),n}function Mn(t,e){return t&&si(e,su(e),t)}function Dn(t,e,r){"__proto__"==e&&ar?ar(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Ln(t,e){for(var r=-1,o=e.length,i=n(o),s=null==t;++r<o;)i[r]=s?a:ru(t,e[r]);return i}function Nn(t,e,r){return t==t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function Fn(t,e,r,n,o,i){var s,u=e&y,l=e&d,c=e&v;if(r&&(s=o?r(t,n,o,i):r(t)),s!==a)return s;if(!As(t))return t;var f=gs(t);if(f){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&fe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!u)return ai(t,s)}else{var p=Vi(t),h=p==Q||p==q;if(Cs(t))return ti(t,u);if(p==et||p==H||h&&!o){if(s=l||h?{}:Yi(t),!u)return l?function(t,e){return si(t,Ui(t),e)}(t,function(t,e){return t&&si(e,uu(e),t)}(s,t)):function(t,e){return si(t,Hi(t),e)}(t,Mn(s,t))}else{if(!xe[p])return o?t:{};s=function(t,e,r){var n,o,i,a=t.constructor;switch(e){case ct:return ei(t);case Z:case Y:return new a(+t);case ft:return function(t,e){var r=e?ei(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case pt:case ht:case yt:case dt:case vt:case mt:case bt:case _t:case gt:return ri(t,r);case J:return new a;case $:case it:return new a(t);case nt:return(i=new(o=t).constructor(o.source,Vt.exec(o))).lastIndex=o.lastIndex,i;case ot:return new a;case at:return n=t,yn?re(yn.call(n)):{}}}(t,p,u)}}i||(i=new Sn);var m=i.get(t);if(m)return m;i.set(t,s),Ls(t)?t.forEach(function(n){s.add(Fn(n,e,r,n,t,i))}):ks(t)&&t.forEach(function(n,o){s.set(o,Fn(n,e,r,o,t,i))});var b=f?a:(c?l?Di:Mi:l?uu:su)(t);return Ke(b||t,function(n,o){b&&(n=t[o=n]),Rn(s,o,Fn(n,e,r,o,t,i))}),s}function Bn(t,e,r){var n=r.length;if(null==t)return!n;for(t=re(t);n--;){var o=r[n],i=e[o],s=t[o];if(s===a&&!(o in t)||!i(s))return!1}return!0}function Wn(t,e,r){if("function"!=typeof t)throw new ie(l);return sa(function(){t.apply(a,r)},e)}function Gn(t,e,r,n){var o=-1,i=$e,a=!0,u=t.length,l=[],c=e.length;if(!u)return l;r&&(e=er(e,_r(r))),n?(i=tr,a=!1):e.length>=s&&(i=wr,a=!1,e=new Cn(e));t:for(;++o<u;){var f=t[o],p=null==r?f:r(f);if(f=n||0!==f?f:0,a&&p==p){for(var h=c;h--;)if(e[h]===p)continue t;l.push(f)}else i(e,p,n)||l.push(f)}return l}vn.templateSettings={escape:jt,evaluate:xt,interpolate:At,variable:"",imports:{_:vn}},vn.prototype=bn.prototype,vn.prototype.constructor=vn,_n.prototype=mn(bn.prototype),_n.prototype.constructor=_n,gn.prototype=mn(bn.prototype),gn.prototype.constructor=gn,wn.prototype.clear=function(){this.__data__=on?on(null):{},this.size=0},wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wn.prototype.get=function(t){var e=this.__data__;if(on){var r=e[t];return r===f?a:r}return fe.call(e,t)?e[t]:a},wn.prototype.has=function(t){var e=this.__data__;return on?e[t]!==a:fe.call(e,t)},wn.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=on&&e===a?f:e,this},On.prototype.clear=function(){this.__data__=[],this.size=0},On.prototype.delete=function(t){var e=this.__data__,r=kn(e,t);return!(r<0||(r==e.length-1?e.pop():Le.call(e,r,1),--this.size,0))},On.prototype.get=function(t){var e=this.__data__,r=kn(e,t);return r<0?a:e[r][1]},On.prototype.has=function(t){return kn(this.__data__,t)>-1},On.prototype.set=function(t,e){var r=this.__data__,n=kn(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Pn.prototype.clear=function(){this.size=0,this.__data__={hash:new wn,map:new(tn||On),string:new wn}},Pn.prototype.delete=function(t){var e=Wi(this,t).delete(t);return this.size-=e?1:0,e},Pn.prototype.get=function(t){return Wi(this,t).get(t)},Pn.prototype.has=function(t){return Wi(this,t).has(t)},Pn.prototype.set=function(t,e){var r=Wi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Cn.prototype.add=Cn.prototype.push=function(t){return this.__data__.set(t,f),this},Cn.prototype.has=function(t){return this.__data__.has(t)},Sn.prototype.clear=function(){this.__data__=new On,this.size=0},Sn.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Sn.prototype.get=function(t){return this.__data__.get(t)},Sn.prototype.has=function(t){return this.__data__.has(t)},Sn.prototype.set=function(t,e){var r=this.__data__;if(r instanceof On){var n=r.__data__;if(!tn||n.length<s-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Pn(n)}return r.set(t,e),this.size=r.size,this};var zn=ci(Qn),Hn=ci(qn,!0);function Un(t,e){var r=!0;return zn(t,function(t,n,o){return r=!!e(t,n,o)}),r}function Vn(t,e,r){for(var n=-1,o=t.length;++n<o;){var i=t[n],s=e(i);if(null!=s&&(u===a?s==s&&!Fs(s):r(s,u)))var u=s,l=i}return l}function Zn(t,e){var r=[];return zn(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function Yn(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=Xi),o||(o=[]);++i<a;){var s=t[i];e>0&&r(s)?e>1?Yn(s,e-1,r,n,o):rr(o,s):n||(o[o.length]=s)}return o}var Xn=fi(),Kn=fi(!0);function Qn(t,e){return t&&Xn(t,e,su)}function qn(t,e){return t&&Kn(t,e,su)}function Jn(t,e){return Je(e,function(e){return Ts(t[e])})}function $n(t,e){for(var r=0,n=(e=Qo(e,t)).length;null!=t&&r<n;)t=t[ha(e[r++])];return r&&r==n?t:a}function to(t,e,r){var n=e(t);return gs(t)?n:rr(n,r(t))}function eo(t){return null==t?t===a?st:tt:We&&We in re(t)?function(t){var e=fe.call(t,We),r=t[We];try{t[We]=a;var n=!0}catch(t){}var o=ye.call(t);return n&&(e?t[We]=r:delete t[We]),o}(t):function(t){return ye.call(t)}(t)}function ro(t,e){return t>e}function no(t,e){return null!=t&&fe.call(t,e)}function oo(t,e){return null!=t&&e in re(t)}function io(t,e,r){for(var o=r?tr:$e,i=t[0].length,s=t.length,u=s,l=n(s),c=1/0,f=[];u--;){var p=t[u];u&&e&&(p=er(p,_r(e))),c=Xr(p.length,c),l[u]=!r&&(e||i>=120&&p.length>=120)?new Cn(u&&p):a}p=t[0];var h=-1,y=l[0];t:for(;++h<i&&f.length<c;){var d=p[h],v=e?e(d):d;if(d=r||0!==d?d:0,!(y?wr(y,v):o(f,v,r))){for(u=s;--u;){var m=l[u];if(!(m?wr(m,v):o(t[u],v,r)))continue t}y&&y.push(v),f.push(d)}}return f}function ao(t,e,r){var n=null==(t=oa(t,e=Qo(e,t)))?t:t[ha(Ea(e))];return null==n?a:Ye(n,t,r)}function so(t){return Rs(t)&&eo(t)==H}function uo(t,e,r,n,o){return t===e||(null==t||null==e||!Rs(t)&&!Rs(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var s=gs(t),u=gs(e),l=s?U:Vi(t),c=u?U:Vi(e),f=(l=l==H?et:l)==et,p=(c=c==H?et:c)==et,h=l==c;if(h&&Cs(t)){if(!Cs(e))return!1;s=!0,f=!1}if(h&&!f)return i||(i=new Sn),s||Bs(t)?ki(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case ft:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!i(new Oe(t),new Oe(e)));case Z:case Y:case $:return vs(+t,+e);case K:return t.name==e.name&&t.message==e.message;case nt:case it:return t==e+"";case J:var s=jr;case ot:var u=n&m;if(s||(s=Rr),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;n|=b,a.set(t,e);var c=ki(s(t),s(e),n,o,i,a);return a.delete(t),c;case at:if(yn)return yn.call(t)==yn.call(e)}return!1}(t,e,l,r,n,o,i);if(!(r&m)){var y=f&&fe.call(t,"__wrapped__"),d=p&&fe.call(e,"__wrapped__");if(y||d){var v=y?t.value():t,_=d?e.value():e;return i||(i=new Sn),o(v,_,r,n,i)}}return!!h&&(i||(i=new Sn),function(t,e,r,n,o,i){var s=r&m,u=Mi(t),l=u.length,c=Mi(e).length;if(l!=c&&!s)return!1;for(var f=l;f--;){var p=u[f];if(!(s?p in e:fe.call(e,p)))return!1}var h=i.get(t),y=i.get(e);if(h&&y)return h==e&&y==t;var d=!0;i.set(t,e),i.set(e,t);for(var v=s;++f<l;){p=u[f];var b=t[p],_=e[p];if(n)var g=s?n(_,b,p,e,t,i):n(b,_,p,t,e,i);if(!(g===a?b===_||o(b,_,r,n,i):g)){d=!1;break}v||(v="constructor"==p)}if(d&&!v){var w=t.constructor,O=e.constructor;w!=O&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof O&&O instanceof O)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,o,i))}(t,e,r,n,uo,o))}function lo(t,e,r,n){var o=r.length,i=o,s=!n;if(null==t)return!i;for(t=re(t);o--;){var u=r[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var l=(u=r[o])[0],c=t[l],f=u[1];if(s&&u[2]){if(c===a&&!(l in t))return!1}else{var p=new Sn;if(n)var h=n(c,f,l,t,e,p);if(!(h===a?uo(f,c,m|b,n,p):h))return!1}}return!0}function co(t){return!(!As(t)||he&&he in t)&&(Ts(t)?me:Xt).test(ya(t))}function fo(t){return"function"==typeof t?t:null==t?Iu:"object"==i(t)?gs(t)?bo(t[0],t[1]):mo(t):zu(t)}function po(t){if(!ta(t))return Zr(t);var e=[];for(var r in re(t))fe.call(t,r)&&"constructor"!=r&&e.push(r);return e}function ho(t){if(!As(t))return function(t){var e=[];if(null!=t)for(var r in re(t))e.push(r);return e}(t);var e=ta(t),r=[];for(var n in t)("constructor"!=n||!e&&fe.call(t,n))&&r.push(n);return r}function yo(t,e){return t<e}function vo(t,e){var r=-1,o=Os(t)?n(t.length):[];return zn(t,function(t,n,i){o[++r]=e(t,n,i)}),o}function mo(t){var e=Gi(t);return 1==e.length&&e[0][2]?ra(e[0][0],e[0][1]):function(r){return r===t||lo(r,t,e)}}function bo(t,e){return qi(t)&&ea(e)?ra(ha(t),e):function(r){var n=ru(r,t);return n===a&&n===e?nu(r,t):uo(e,n,m|b)}}function _o(t,e,r,n,o){t!==e&&Xn(e,function(i,s){if(o||(o=new Sn),As(i))!function(t,e,r,n,o,i,s){var u=ia(t,r),l=ia(e,r),c=s.get(l);if(c)An(t,r,c);else{var f=i?i(u,l,r+"",t,e,s):a,p=f===a;if(p){var h=gs(l),y=!h&&Cs(l),d=!h&&!y&&Bs(l);f=l,h||y||d?gs(u)?f=u:Ps(u)?f=ai(u):y?(p=!1,f=ti(l,!0)):d?(p=!1,f=ri(l,!0)):f=[]:Ms(l)||_s(l)?(f=u,_s(u)?f=Ys(u):As(u)&&!Ts(u)||(f=Yi(l))):p=!1}p&&(s.set(l,f),o(f,l,n,i,s),s.delete(l)),An(t,r,f)}}(t,e,s,r,_o,n,o);else{var u=n?n(ia(t,s),i,s+"",t,e,o):a;u===a&&(u=i),An(t,s,u)}},uu)}function go(t,e){var r=t.length;if(r)return Ki(e+=e<0?r:0,r)?t[e]:a}function wo(t,e,r){var n=-1;return e=er(e=e.length?er(e,function(t){return gs(t)?function(e){return $n(e,1===t.length?t[0]:t)}:t}):[Iu],_r(Bi())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(vo(t,function(t,r,o){return{criteria:er(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return function(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,a=o.length,s=r.length;++n<a;){var u=ni(o[n],i[n]);if(u){if(n>=s)return u;var l=r[n];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,r)})}function Oo(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],s=$n(t,a);r(s,a)&&Ao(i,Qo(a,t),s)}return i}function Po(t,e,r,n){var o=n?cr:lr,i=-1,a=e.length,s=t;for(t===e&&(e=ai(e)),r&&(s=er(t,_r(r)));++i<a;)for(var u=0,l=e[i],c=r?r(l):l;(u=o(s,c,u,n))>-1;)s!==t&&Le.call(s,u,1),Le.call(t,u,1);return t}function Co(t,e){for(var r=t?e.length:0,n=r-1;r--;){var o=e[r];if(r==n||o!==i){var i=o;Ki(o)?Le.call(t,o,1):zo(t,o)}}return t}function So(t,e){return t+Gr(qr()*(e-t+1))}function Eo(t,e){var r="";if(!t||e<1||e>L)return r;do{e%2&&(r+=t),(e=Gr(e/2))&&(t+=t)}while(e);return r}function To(t,e){return ua(na(t,e,Iu),t+"")}function jo(t){return Tn(vu(t))}function xo(t,e){var r=vu(t);return fa(r,Nn(e,0,r.length))}function Ao(t,e,r,n){if(!As(t))return t;for(var o=-1,i=(e=Qo(e,t)).length,s=i-1,u=t;null!=u&&++o<i;){var l=ha(e[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var f=u[l];(c=n?n(f,l,u):a)===a&&(c=As(f)?f:Ki(e[o+1])?[]:{})}Rn(u,l,c),u=u[l]}return t}var Ro=an?function(t,e){return an.set(t,e),t}:Iu,ko=ar?function(t,e){return ar(t,"toString",{configurable:!0,enumerable:!1,value:Au(e),writable:!0})}:Iu;function Io(t){return fa(vu(t))}function Mo(t,e,r){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=n(i);++o<i;)a[o]=t[o+e];return a}function Do(t,e){var r;return zn(t,function(t,n,o){return!(r=e(t,n,o))}),!!r}function Lo(t,e,r){var n=0,o=null==t?n:t.length;if("number"==typeof e&&e==e&&o<=G){for(;n<o;){var i=n+o>>>1,a=t[i];null!==a&&!Fs(a)&&(r?a<=e:a<e)?n=i+1:o=i}return o}return No(t,e,Iu,r)}function No(t,e,r,n){var o=0,i=null==t?0:t.length;if(0===i)return 0;for(var s=(e=r(e))!=e,u=null===e,l=Fs(e),c=e===a;o<i;){var f=Gr((o+i)/2),p=r(t[f]),h=p!==a,y=null===p,d=p==p,v=Fs(p);if(s)var m=n||d;else m=c?d&&(n||h):u?d&&h&&(n||!y):l?d&&h&&!y&&(n||!v):!y&&!v&&(n?p<=e:p<e);m?o=f+1:i=f}return Xr(i,W)}function Fo(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var a=t[r],s=e?e(a):a;if(!r||!vs(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function Bo(t){return"number"==typeof t?t:Fs(t)?F:+t}function Wo(t){if("string"==typeof t)return t;if(gs(t))return er(t,Wo)+"";if(Fs(t))return dn?dn.call(t):"";var e=t+"";return"0"==e&&1/t==-D?"-0":e}function Go(t,e,r){var n=-1,o=$e,i=t.length,a=!0,u=[],l=u;if(r)a=!1,o=tr;else if(i>=s){var c=e?null:Ei(t);if(c)return Rr(c);a=!1,o=wr,l=new Cn}else l=e?[]:u;t:for(;++n<i;){var f=t[n],p=e?e(f):f;if(f=r||0!==f?f:0,a&&p==p){for(var h=l.length;h--;)if(l[h]===p)continue t;e&&l.push(p),u.push(f)}else o(l,p,r)||(l!==u&&l.push(p),u.push(f))}return u}function zo(t,e){return null==(t=oa(t,e=Qo(e,t)))||delete t[ha(Ea(e))]}function Ho(t,e,r,n){return Ao(t,e,r($n(t,e)),n)}function Uo(t,e,r,n){for(var o=t.length,i=n?o:-1;(n?i--:++i<o)&&e(t[i],i,t););return r?Mo(t,n?0:i,n?i+1:o):Mo(t,n?i+1:0,n?o:i)}function Vo(t,e){var r=t;return r instanceof gn&&(r=r.value()),nr(e,function(t,e){return e.func.apply(e.thisArg,rr([t],e.args))},r)}function Zo(t,e,r){var o=t.length;if(o<2)return o?Go(t[0]):[];for(var i=-1,a=n(o);++i<o;)for(var s=t[i],u=-1;++u<o;)u!=i&&(a[i]=Gn(a[i]||s,t[u],e,r));return Go(Yn(a,1),e,r)}function Yo(t,e,r){for(var n=-1,o=t.length,i=e.length,s={};++n<o;){var u=n<i?e[n]:a;r(s,t[n],u)}return s}function Xo(t){return Ps(t)?t:[]}function Ko(t){return"function"==typeof t?t:Iu}function Qo(t,e){return gs(t)?t:qi(t,e)?[t]:pa(Xs(t))}var qo=To;function Jo(t,e,r){var n=t.length;return r=r===a?n:r,!e&&r>=n?t:Mo(t,e,r)}var $o=yr||function(t){return De.clearTimeout(t)};function ti(t,e){if(e)return t.slice();var r=t.length,n=Ce?Ce(r):new t.constructor(r);return t.copy(n),n}function ei(t){var e=new t.constructor(t.byteLength);return new Oe(e).set(new Oe(t)),e}function ri(t,e){var r=e?ei(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ni(t,e){if(t!==e){var r=t!==a,n=null===t,o=t==t,i=Fs(t),s=e!==a,u=null===e,l=e==e,c=Fs(e);if(!u&&!c&&!i&&t>e||i&&s&&l&&!u&&!c||n&&s&&l||!r&&l||!o)return 1;if(!n&&!i&&!c&&t<e||c&&r&&o&&!n&&!i||u&&r&&o||!s&&o||!l)return-1}return 0}function oi(t,e,r,o){for(var i=-1,a=t.length,s=r.length,u=-1,l=e.length,c=Yr(a-s,0),f=n(l+c),p=!o;++u<l;)f[u]=e[u];for(;++i<s;)(p||i<a)&&(f[r[i]]=t[i]);for(;c--;)f[u++]=t[i++];return f}function ii(t,e,r,o){for(var i=-1,a=t.length,s=-1,u=r.length,l=-1,c=e.length,f=Yr(a-u,0),p=n(f+c),h=!o;++i<f;)p[i]=t[i];for(var y=i;++l<c;)p[y+l]=e[l];for(;++s<u;)(h||i<a)&&(p[y+r[s]]=t[i++]);return p}function ai(t,e){var r=-1,o=t.length;for(e||(e=n(o));++r<o;)e[r]=t[r];return e}function si(t,e,r,n){var o=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var u=e[i],l=n?n(r[u],t[u],u,r,t):a;l===a&&(l=t[u]),o?Dn(r,u,l):Rn(r,u,l)}return r}function ui(t,e){return function(r,n){var o=gs(r)?Xe:In,i=e?e():{};return o(r,t,Bi(n,2),i)}}function li(t){return To(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:a,s=o>2?r[2]:a;for(i=t.length>3&&"function"==typeof i?(o--,i):a,s&&Qi(r[0],r[1],s)&&(i=o<3?a:i,o=1),e=re(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})}function ci(t,e){return function(r,n){if(null==r)return r;if(!Os(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=re(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}function fi(t){return function(e,r,n){for(var o=-1,i=re(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}function pi(t){return function(e){var r=Tr(e=Xs(e))?Mr(e):a,n=r?r[0]:e.charAt(0),o=r?Jo(r,1).join(""):e.slice(1);return n[t]()+o}}function hi(t){return function(e){return nr(Tu(_u(e).replace(ge,"")),t,"")}}function yi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=mn(t.prototype),n=t.apply(r,e);return As(n)?n:r}}function di(t){return function(e,r,n){var o=re(e);if(!Os(e)){var i=Bi(r,3);e=su(e),r=function(t){return i(o[t],t,o)}}var s=t(e,r,n);return s>-1?o[i?e[s]:s]:a}}function vi(t){return Ii(function(e){var r=e.length,n=r,o=_n.prototype.thru;for(t&&e.reverse();n--;){var i=e[n];if("function"!=typeof i)throw new ie(l);if(o&&!s&&"wrapper"==Ni(i))var s=new _n([],!0)}for(n=s?n:r;++n<r;){var u=Ni(i=e[n]),c="wrapper"==u?Li(i):a;s=c&&Ji(c[0])&&c[1]==(E|O|C|T)&&!c[4].length&&1==c[9]?s[Ni(c[0])].apply(s,c[3]):1==i.length&&Ji(i)?s[u]():s.thru(i)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&gs(n))return s.plant(n).value();for(var o=0,i=r?e[o].apply(this,t):n;++o<r;)i=e[o].call(this,i);return i}})}function mi(t,e,r,o,i,s,u,l,c,f){var p=e&E,h=e&_,y=e&g,d=e&(O|P),v=e&j,m=y?a:yi(t);return function b(){for(var _=arguments.length,g=n(_),w=_;w--;)g[w]=arguments[w];if(d)var O=Fi(b),P=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}(g,O);if(o&&(g=oi(g,o,i,d)),s&&(g=ii(g,s,u,d)),_-=P,d&&_<f){var C=Ar(g,O);return Ci(t,e,mi,b.placeholder,r,g,C,l,c,f-_)}var S=h?r:this,E=y?S[t]:t;return _=g.length,l?g=function(t,e){for(var r=t.length,n=Xr(e.length,r),o=ai(t);n--;){var i=e[n];t[n]=Ki(i,r)?o[i]:a}return t}(g,l):v&&_>1&&g.reverse(),p&&c<_&&(g.length=c),this&&this!==De&&this instanceof b&&(E=m||yi(E)),E.apply(S,g)}}function bi(t,e){return function(r,n){return function(t,e,r,n){return Qn(t,function(t,o,i){e(n,r(t),o,i)}),n}(r,t,e(n),{})}}function _i(t,e){return function(r,n){var o;if(r===a&&n===a)return e;if(r!==a&&(o=r),n!==a){if(o===a)return n;"string"==typeof r||"string"==typeof n?(r=Wo(r),n=Wo(n)):(r=Bo(r),n=Bo(n)),o=t(r,n)}return o}}function gi(t){return Ii(function(e){return e=er(e,_r(Bi())),To(function(r){var n=this;return t(e,function(t){return Ye(t,n,r)})})})}function wi(t,e){var r=(e=e===a?" ":Wo(e)).length;if(r<2)return r?Eo(e,t):e;var n=Eo(e,Wr(t/Ir(e)));return Tr(e)?Jo(Mr(n),0,t).join(""):n.slice(0,t)}function Oi(t){return function(e,r,o){return o&&"number"!=typeof o&&Qi(e,r,o)&&(r=o=a),e=Hs(e),r===a?(r=e,e=0):r=Hs(r),function(t,e,r,o){for(var i=-1,a=Yr(Wr((e-t)/(r||1)),0),s=n(a);a--;)s[o?a:++i]=t,t+=r;return s}(e,r,o=o===a?e<r?1:-1:Hs(o),t)}}function Pi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Zs(e),r=Zs(r)),t(e,r)}}function Ci(t,e,r,n,o,i,s,u,l,c){var f=e&O;e|=f?C:S,(e&=~(f?S:C))&w||(e&=~(_|g));var p=[t,e,o,f?i:a,f?s:a,f?a:i,f?a:s,u,l,c],h=r.apply(a,p);return Ji(t)&&aa(h,p),h.placeholder=n,la(h,t,e)}function Si(t){var e=ee[t];return function(t,r){if(t=Zs(t),(r=null==r?0:Xr(Us(r),292))&&Ur(t)){var n=(Xs(t)+"e").split("e");return+((n=(Xs(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Ei=rn&&1/Rr(new rn([,-0]))[1]==D?function(t){return new rn(t)}:Fu;function Ti(t){return function(e){var r=Vi(e);return r==J?jr(e):r==ot?kr(e):function(t,e){return er(e,function(e){return[e,t[e]]})}(e,t(e))}}function ji(t,e,r,o,i,s,u,c){var f=e&g;if(!f&&"function"!=typeof t)throw new ie(l);var p=o?o.length:0;if(p||(e&=~(C|S),o=i=a),u=u===a?u:Yr(Us(u),0),c=c===a?c:Us(c),p-=i?i.length:0,e&S){var y=o,d=i;o=i=a}var v=f?a:Li(t),m=[t,e,r,o,i,y,d,s,u,c];if(v&&function(t,e){var r=t[1],n=e[1],o=r|n,i=o<(_|g|E),a=n==E&&r==O||n==E&&r==T&&t[7].length<=e[8]||n==(E|T)&&e[7].length<=e[8]&&r==O;if(!i&&!a)return t;n&_&&(t[2]=e[2],o|=r&_?0:w);var s=e[3];if(s){var u=t[3];t[3]=u?oi(u,s,e[4]):s,t[4]=u?Ar(t[3],h):e[4]}(s=e[5])&&(u=t[5],t[5]=u?ii(u,s,e[6]):s,t[6]=u?Ar(t[5],h):e[6]),(s=e[7])&&(t[7]=s),n&E&&(t[8]=null==t[8]?e[8]:Xr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(m,v),t=m[0],e=m[1],r=m[2],o=m[3],i=m[4],!(c=m[9]=m[9]===a?f?0:t.length:Yr(m[9]-p,0))&&e&(O|P)&&(e&=~(O|P)),e&&e!=_)b=e==O||e==P?function(t,e,r){var o=yi(t);return function i(){for(var s=arguments.length,u=n(s),l=s,c=Fi(i);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:Ar(u,c);return(s-=f.length)<r?Ci(t,e,mi,i.placeholder,a,u,f,a,a,r-s):Ye(this&&this!==De&&this instanceof i?o:t,this,u)}}(t,e,c):e!=C&&e!=(_|C)||i.length?mi.apply(a,m):function(t,e,r,o){var i=e&_,a=yi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=o.length,f=n(c+u),p=this&&this!==De&&this instanceof e?a:t;++l<c;)f[l]=o[l];for(;u--;)f[l++]=arguments[++s];return Ye(p,i?r:this,f)}}(t,e,r,o);else var b=function(t,e,r){var n=e&_,o=yi(t);return function e(){return(this&&this!==De&&this instanceof e?o:t).apply(n?r:this,arguments)}}(t,e,r);return la((v?Ro:aa)(b,m),t,e)}function xi(t,e,r,n){return t===a||vs(t,ue[r])&&!fe.call(n,r)?e:t}function Ai(t,e,r,n,o,i){return As(t)&&As(e)&&(i.set(e,t),_o(t,e,a,Ai,i),i.delete(e)),t}function Ri(t){return Ms(t)?a:t}function ki(t,e,r,n,o,i){var s=r&m,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=i.get(t),f=i.get(e);if(c&&f)return c==e&&f==t;var p=-1,h=!0,y=r&b?new Cn:a;for(i.set(t,e),i.set(e,t);++p<u;){var d=t[p],v=e[p];if(n)var _=s?n(v,d,p,e,t,i):n(d,v,p,t,e,i);if(_!==a){if(_)continue;h=!1;break}if(y){if(!ir(e,function(t,e){if(!wr(y,e)&&(d===t||o(d,t,r,n,i)))return y.push(e)})){h=!1;break}}else if(d!==v&&!o(d,v,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h}function Ii(t){return ua(na(t,a,wa),t+"")}function Mi(t){return to(t,su,Hi)}function Di(t){return to(t,uu,Ui)}var Li=an?function(t){return an.get(t)}:Fu;function Ni(t){for(var e=t.name+"",r=sn[e],n=fe.call(sn,e)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==t)return o.name}return e}function Fi(t){return(fe.call(vn,"placeholder")?vn:t).placeholder}function Bi(){var t=vn.iteratee||Mu;return t=t===Mu?fo:t,arguments.length?t(arguments[0],arguments[1]):t}function Wi(t,e){var r,n,o=t.__data__;return("string"==(n=i(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Gi(t){for(var e=su(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,ea(o)]}return e}function zi(t,e){var r=function(t,e){return null==t?a:t[e]}(t,e);return co(r)?r:a}var Hi=zr?function(t){return null==t?[]:(t=re(t),Je(zr(t),function(e){return Me.call(t,e)}))}:Vu,Ui=zr?function(t){for(var e=[];t;)rr(e,Hi(t)),t=Ae(t);return e}:Vu,Vi=eo;function Zi(t,e,r){for(var n=-1,o=(e=Qo(e,t)).length,i=!1;++n<o;){var a=ha(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&xs(o)&&Ki(a,o)&&(gs(t)||_s(t))}function Yi(t){return"function"!=typeof t.constructor||ta(t)?{}:mn(Ae(t))}function Xi(t){return gs(t)||_s(t)||!!(Ne&&t&&t[Ne])}function Ki(t,e){var r=i(t);return!!(e=null==e?L:e)&&("number"==r||"symbol"!=r&&Qt.test(t))&&t>-1&&t%1==0&&t<e}function Qi(t,e,r){if(!As(r))return!1;var n=i(e);return!!("number"==n?Os(r)&&Ki(e,r.length):"string"==n&&e in r)&&vs(r[e],t)}function qi(t,e){if(gs(t))return!1;var r=i(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Fs(t))||kt.test(t)||!Rt.test(t)||null!=e&&t in re(e)}function Ji(t){var e=Ni(t),r=vn[e];if("function"!=typeof r||!(e in gn.prototype))return!1;if(t===r)return!0;var n=Li(r);return!!n&&t===n[0]}($r&&Vi(new $r(new ArrayBuffer(1)))!=ft||tn&&Vi(new tn)!=J||en&&"[object Promise]"!=Vi(en.resolve())||rn&&Vi(new rn)!=ot||nn&&Vi(new nn)!=ut)&&(Vi=function(t){var e=eo(t),r=e==et?t.constructor:a,n=r?ya(r):"";if(n)switch(n){case un:return ft;case ln:return J;case cn:return"[object Promise]";case fn:return ot;case pn:return ut}return e});var $i=le?Ts:Zu;function ta(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ue)}function ea(t){return t==t&&!As(t)}function ra(t,e){return function(r){return null!=r&&r[t]===e&&(e!==a||t in re(r))}}function na(t,e,r){return e=Yr(e===a?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=Yr(o.length-e,0),s=n(a);++i<a;)s[i]=o[e+i];i=-1;for(var u=n(e+1);++i<e;)u[i]=o[i];return u[e]=r(s),Ye(t,this,u)}}function oa(t,e){return e.length<2?t:$n(t,Mo(e,0,-1))}function ia(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var aa=ca(Ro),sa=Br||function(t,e){return De.setTimeout(t,e)},ua=ca(ko);function la(t,e,r){var n=e+"";return ua(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ft,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ke(z,function(r){var n="_."+r[0];e&r[1]&&!$e(t,n)&&t.push(n)}),t.sort()}(function(t){var e=t.match(Bt);return e?e[1].split(Wt):[]}(n),r)))}function ca(t){var e=0,r=0;return function(){var n=Kr(),o=k-(n-r);if(r=n,o>0){if(++e>=R)return arguments[0]}else e=0;return t.apply(a,arguments)}}function fa(t,e){var r=-1,n=t.length,o=n-1;for(e=e===a?n:e;++r<e;){var i=So(r,o),s=t[i];t[i]=t[r],t[r]=s}return t.length=e,t}var pa=function(t){var e=cs(t,function(t){return r.size===p&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(It,function(t,r,n,o){e.push(n?o.replace(Ht,"$1"):r||t)}),e});function ha(t){if("string"==typeof t||Fs(t))return t;var e=t+"";return"0"==e&&1/t==-D?"-0":e}function ya(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function da(t){if(t instanceof gn)return t.clone();var e=new _n(t.__wrapped__,t.__chain__);return e.__actions__=ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var va=To(function(t,e){return Ps(t)?Gn(t,Yn(e,1,Ps,!0)):[]}),ma=To(function(t,e){var r=Ea(e);return Ps(r)&&(r=a),Ps(t)?Gn(t,Yn(e,1,Ps,!0),Bi(r,2)):[]}),ba=To(function(t,e){var r=Ea(e);return Ps(r)&&(r=a),Ps(t)?Gn(t,Yn(e,1,Ps,!0),a,r):[]});function _a(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:Us(r);return o<0&&(o=Yr(n+o,0)),ur(t,Bi(e,3),o)}function ga(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return r!==a&&(o=Us(r),o=r<0?Yr(n+o,0):Xr(o,n-1)),ur(t,Bi(e,3),o,!0)}function wa(t){return null!=t&&t.length?Yn(t,1):[]}function Oa(t){return t&&t.length?t[0]:a}var Pa=To(function(t){var e=er(t,Xo);return e.length&&e[0]===t[0]?io(e):[]}),Ca=To(function(t){var e=Ea(t),r=er(t,Xo);return e===Ea(r)?e=a:r.pop(),r.length&&r[0]===t[0]?io(r,Bi(e,2)):[]}),Sa=To(function(t){var e=Ea(t),r=er(t,Xo);return(e="function"==typeof e?e:a)&&r.pop(),r.length&&r[0]===t[0]?io(r,a,e):[]});function Ea(t){var e=null==t?0:t.length;return e?t[e-1]:a}var Ta=To(ja);function ja(t,e){return t&&t.length&&e&&e.length?Po(t,e):t}var xa=Ii(function(t,e){var r=null==t?0:t.length,n=Ln(t,e);return Co(t,er(e,function(t){return Ki(t,r)?+t:t}).sort(ni)),n});function Aa(t){return null==t?t:Jr.call(t)}var Ra=To(function(t){return Go(Yn(t,1,Ps,!0))}),ka=To(function(t){var e=Ea(t);return Ps(e)&&(e=a),Go(Yn(t,1,Ps,!0),Bi(e,2))}),Ia=To(function(t){var e=Ea(t);return e="function"==typeof e?e:a,Go(Yn(t,1,Ps,!0),a,e)});function Ma(t){if(!t||!t.length)return[];var e=0;return t=Je(t,function(t){if(Ps(t))return e=Yr(t.length,e),!0}),mr(e,function(e){return er(t,hr(e))})}function Da(t,e){if(!t||!t.length)return[];var r=Ma(t);return null==e?r:er(r,function(t){return Ye(e,a,t)})}var La=To(function(t,e){return Ps(t)?Gn(t,e):[]}),Na=To(function(t){return Zo(Je(t,Ps))}),Fa=To(function(t){var e=Ea(t);return Ps(e)&&(e=a),Zo(Je(t,Ps),Bi(e,2))}),Ba=To(function(t){var e=Ea(t);return e="function"==typeof e?e:a,Zo(Je(t,Ps),a,e)}),Wa=To(Ma);var Ga=To(function(t){var e=t.length,r=e>1?t[e-1]:a;return Da(t,r="function"==typeof r?(t.pop(),r):a)});function za(t){var e=vn(t);return e.__chain__=!0,e}function Ha(t,e){return e(t)}var Ua=Ii(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,o=function(e){return Ln(e,t)};return!(e>1||this.__actions__.length)&&n instanceof gn&&Ki(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:Ha,args:[o],thisArg:a}),new _n(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(a),t})):this.thru(o)});var Va=ui(function(t,e,r){fe.call(t,r)?++t[r]:Dn(t,r,1)});var Za=di(_a),Ya=di(ga);function Xa(t,e){return(gs(t)?Ke:zn)(t,Bi(e,3))}function Ka(t,e){return(gs(t)?Qe:Hn)(t,Bi(e,3))}var Qa=ui(function(t,e,r){fe.call(t,r)?t[r].push(e):Dn(t,r,[e])});var qa=To(function(t,e,r){var o=-1,i="function"==typeof e,a=Os(t)?n(t.length):[];return zn(t,function(t){a[++o]=i?Ye(e,t,r):ao(t,e,r)}),a}),Ja=ui(function(t,e,r){Dn(t,r,e)});function $a(t,e){return(gs(t)?er:vo)(t,Bi(e,3))}var ts=ui(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});var es=To(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Qi(t,e[0],e[1])?e=[]:r>2&&Qi(e[0],e[1],e[2])&&(e=[e[0]]),wo(t,Yn(e,1),[])}),rs=Fr||function(){return De.Date.now()};function ns(t,e,r){return e=r?a:e,e=t&&null==e?t.length:e,ji(t,E,a,a,a,a,e)}function os(t,e){var r;if("function"!=typeof e)throw new ie(l);return t=Us(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var is=To(function(t,e,r){var n=_;if(r.length){var o=Ar(r,Fi(is));n|=C}return ji(t,n,e,r,o)}),as=To(function(t,e,r){var n=_|g;if(r.length){var o=Ar(r,Fi(as));n|=C}return ji(e,n,t,r,o)});function ss(t,e,r){var n,o,i,s,u,c,f=0,p=!1,h=!1,y=!0;if("function"!=typeof t)throw new ie(l);function d(e){var r=n,i=o;return n=o=a,f=e,s=t.apply(i,r)}function v(t){var r=t-c;return c===a||r>=e||r<0||h&&t-f>=i}function m(){var t=rs();if(v(t))return b(t);u=sa(m,function(t){var r=e-(t-c);return h?Xr(r,i-(t-f)):r}(t))}function b(t){return u=a,y&&n?d(t):(n=o=a,s)}function _(){var t=rs(),r=v(t);if(n=arguments,o=this,c=t,r){if(u===a)return function(t){return f=t,u=sa(m,e),p?d(t):s}(c);if(h)return $o(u),u=sa(m,e),d(c)}return u===a&&(u=sa(m,e)),s}return e=Zs(e)||0,As(r)&&(p=!!r.leading,i=(h="maxWait"in r)?Yr(Zs(r.maxWait)||0,e):i,y="trailing"in r?!!r.trailing:y),_.cancel=function(){u!==a&&$o(u),f=0,n=c=o=u=a},_.flush=function(){return u===a?s:b(rs())},_}var us=To(function(t,e){return Wn(t,1,e)}),ls=To(function(t,e,r){return Wn(t,Zs(e)||0,r)});function cs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(l);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(cs.Cache||Pn),r}function fs(t){if("function"!=typeof t)throw new ie(l);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}cs.Cache=Pn;var ps=qo(function(t,e){var r=(e=1==e.length&&gs(e[0])?er(e[0],_r(Bi())):er(Yn(e,1),_r(Bi()))).length;return To(function(n){for(var o=-1,i=Xr(n.length,r);++o<i;)n[o]=e[o].call(this,n[o]);return Ye(t,this,n)})}),hs=To(function(t,e){var r=Ar(e,Fi(hs));return ji(t,C,a,e,r)}),ys=To(function(t,e){var r=Ar(e,Fi(ys));return ji(t,S,a,e,r)}),ds=Ii(function(t,e){return ji(t,T,a,a,a,e)});function vs(t,e){return t===e||t!=t&&e!=e}var ms=Pi(ro),bs=Pi(function(t,e){return t>=e}),_s=so(function(){return arguments}())?so:function(t){return Rs(t)&&fe.call(t,"callee")&&!Me.call(t,"callee")},gs=n.isArray,ws=Ge?_r(Ge):function(t){return Rs(t)&&eo(t)==ct};function Os(t){return null!=t&&xs(t.length)&&!Ts(t)}function Ps(t){return Rs(t)&&Os(t)}var Cs=Hr||Zu,Ss=ze?_r(ze):function(t){return Rs(t)&&eo(t)==Y};function Es(t){if(!Rs(t))return!1;var e=eo(t);return e==K||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!Ms(t)}function Ts(t){if(!As(t))return!1;var e=eo(t);return e==Q||e==q||e==V||e==rt}function js(t){return"number"==typeof t&&t==Us(t)}function xs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=L}function As(t){var e=i(t);return null!=t&&("object"==e||"function"==e)}function Rs(t){return null!=t&&"object"==i(t)}var ks=He?_r(He):function(t){return Rs(t)&&Vi(t)==J};function Is(t){return"number"==typeof t||Rs(t)&&eo(t)==$}function Ms(t){if(!Rs(t)||eo(t)!=et)return!1;var e=Ae(t);if(null===e)return!0;var r=fe.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ce.call(r)==de}var Ds=Ue?_r(Ue):function(t){return Rs(t)&&eo(t)==nt};var Ls=Ve?_r(Ve):function(t){return Rs(t)&&Vi(t)==ot};function Ns(t){return"string"==typeof t||!gs(t)&&Rs(t)&&eo(t)==it}function Fs(t){return"symbol"==i(t)||Rs(t)&&eo(t)==at}var Bs=Ze?_r(Ze):function(t){return Rs(t)&&xs(t.length)&&!!je[eo(t)]};var Ws=Pi(yo),Gs=Pi(function(t,e){return t<=e});function zs(t){if(!t)return[];if(Os(t))return Ns(t)?Mr(t):ai(t);if(Be&&t[Be])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Be]());var e=Vi(t);return(e==J?jr:e==ot?Rr:vu)(t)}function Hs(t){return t?(t=Zs(t))===D||t===-D?(t<0?-1:1)*N:t==t?t:0:0===t?t:0}function Us(t){var e=Hs(t),r=e%1;return e==e?r?e-r:e:0}function Vs(t){return t?Nn(Us(t),0,B):0}function Zs(t){if("number"==typeof t)return t;if(Fs(t))return F;if(As(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=As(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=br(t);var r=Yt.test(t);return r||Kt.test(t)?ke(t.slice(2),r?2:8):Zt.test(t)?F:+t}function Ys(t){return si(t,uu(t))}function Xs(t){return null==t?"":Wo(t)}var Ks=li(function(t,e){if(ta(e)||Os(e))si(e,su(e),t);else for(var r in e)fe.call(e,r)&&Rn(t,r,e[r])}),Qs=li(function(t,e){si(e,uu(e),t)}),qs=li(function(t,e,r,n){si(e,uu(e),t,n)}),Js=li(function(t,e,r,n){si(e,su(e),t,n)}),$s=Ii(Ln);var tu=To(function(t,e){t=re(t);var r=-1,n=e.length,o=n>2?e[2]:a;for(o&&Qi(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],s=uu(i),u=-1,l=s.length;++u<l;){var c=s[u],f=t[c];(f===a||vs(f,ue[c])&&!fe.call(t,c))&&(t[c]=i[c])}return t}),eu=To(function(t){return t.push(a,Ai),Ye(cu,a,t)});function ru(t,e,r){var n=null==t?a:$n(t,e);return n===a?r:n}function nu(t,e){return null!=t&&Zi(t,e,oo)}var ou=bi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=ye.call(e)),t[e]=r},Au(Iu)),iu=bi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=ye.call(e)),fe.call(t,e)?t[e].push(r):t[e]=[r]},Bi),au=To(ao);function su(t){return Os(t)?En(t):po(t)}function uu(t){return Os(t)?En(t,!0):ho(t)}var lu=li(function(t,e,r){_o(t,e,r)}),cu=li(function(t,e,r,n){_o(t,e,r,n)}),fu=Ii(function(t,e){var r={};if(null==t)return r;var n=!1;e=er(e,function(e){return e=Qo(e,t),n||(n=e.length>1),e}),si(t,Di(t),r),n&&(r=Fn(r,y|d|v,Ri));for(var o=e.length;o--;)zo(r,e[o]);return r});var pu=Ii(function(t,e){return null==t?{}:function(t,e){return Oo(t,e,function(e,r){return nu(t,r)})}(t,e)});function hu(t,e){if(null==t)return{};var r=er(Di(t),function(t){return[t]});return e=Bi(e),Oo(t,r,function(t,r){return e(t,r[0])})}var yu=Ti(su),du=Ti(uu);function vu(t){return null==t?[]:gr(t,su(t))}var mu=hi(function(t,e,r){return e=e.toLowerCase(),t+(r?bu(e):e)});function bu(t){return Eu(Xs(t).toLowerCase())}function _u(t){return(t=Xs(t))&&t.replace(qt,Cr).replace(we,"")}var gu=hi(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),wu=hi(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Ou=pi("toLowerCase");var Pu=hi(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});var Cu=hi(function(t,e,r){return t+(r?" ":"")+Eu(e)});var Su=hi(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Eu=pi("toUpperCase");function Tu(t,e,r){return t=Xs(t),(e=r?a:e)===a?function(t){return Se.test(t)}(t)?function(t){return t.match(Pe)||[]}(t):function(t){return t.match(Gt)||[]}(t):t.match(e)||[]}var ju=To(function(t,e){try{return Ye(t,a,e)}catch(t){return Es(t)?t:new Nt(t)}}),xu=Ii(function(t,e){return Ke(e,function(e){e=ha(e),Dn(t,e,is(t[e],t))}),t});function Au(t){return function(){return t}}var Ru=vi(),ku=vi(!0);function Iu(t){return t}function Mu(t){return fo("function"==typeof t?t:Fn(t,y))}var Du=To(function(t,e){return function(r){return ao(r,t,e)}}),Lu=To(function(t,e){return function(r){return ao(t,r,e)}});function Nu(t,e,r){var n=su(e),o=Jn(e,n);null!=r||As(e)&&(o.length||!n.length)||(r=e,e=t,t=this,o=Jn(e,su(e)));var i=!(As(r)&&"chain"in r&&!r.chain),a=Ts(t);return Ke(o,function(r){var n=e[r];t[r]=n,a&&(t.prototype[r]=function(){var e=this.__chain__;if(i||e){var r=t(this.__wrapped__);return(r.__actions__=ai(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,rr([this.value()],arguments))})}),t}function Fu(){}var Bu=gi(er),Wu=gi(qe),Gu=gi(ir);function zu(t){return qi(t)?hr(ha(t)):function(t){return function(e){return $n(e,t)}}(t)}var Hu=Oi(),Uu=Oi(!0);function Vu(){return[]}function Zu(){return!1}var Yu=_i(function(t,e){return t+e},0),Xu=Si("ceil"),Ku=_i(function(t,e){return t/e},1),Qu=Si("floor");var qu,Ju=_i(function(t,e){return t*e},1),$u=Si("round"),tl=_i(function(t,e){return t-e},0);return vn.after=function(t,e){if("function"!=typeof e)throw new ie(l);return t=Us(t),function(){if(--t<1)return e.apply(this,arguments)}},vn.ary=ns,vn.assign=Ks,vn.assignIn=Qs,vn.assignInWith=qs,vn.assignWith=Js,vn.at=$s,vn.before=os,vn.bind=is,vn.bindAll=xu,vn.bindKey=as,vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return gs(t)?t:[t]},vn.chain=za,vn.chunk=function(t,e,r){e=(r?Qi(t,e,r):e===a)?1:Yr(Us(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var i=0,s=0,u=n(Wr(o/e));i<o;)u[s++]=Mo(t,i,i+=e);return u},vn.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,o=[];++e<r;){var i=t[e];i&&(o[n++]=i)}return o},vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],o=t;o--;)e[o-1]=arguments[o];return rr(gs(r)?ai(r):[r],Yn(e,1))},vn.cond=function(t){var e=null==t?0:t.length,r=Bi();return t=e?er(t,function(t){if("function"!=typeof t[1])throw new ie(l);return[r(t[0]),t[1]]}):[],To(function(r){for(var n=-1;++n<e;){var o=t[n];if(Ye(o[0],this,r))return Ye(o[1],this,r)}})},vn.conforms=function(t){return function(t){var e=su(t);return function(r){return Bn(r,t,e)}}(Fn(t,y))},vn.constant=Au,vn.countBy=Va,vn.create=function(t,e){var r=mn(t);return null==e?r:Mn(r,e)},vn.curry=function t(e,r,n){var o=ji(e,O,a,a,a,a,a,r=n?a:r);return o.placeholder=t.placeholder,o},vn.curryRight=function t(e,r,n){var o=ji(e,P,a,a,a,a,a,r=n?a:r);return o.placeholder=t.placeholder,o},vn.debounce=ss,vn.defaults=tu,vn.defaultsDeep=eu,vn.defer=us,vn.delay=ls,vn.difference=va,vn.differenceBy=ma,vn.differenceWith=ba,vn.drop=function(t,e,r){var n=null==t?0:t.length;return n?Mo(t,(e=r||e===a?1:Us(e))<0?0:e,n):[]},vn.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?Mo(t,0,(e=n-(e=r||e===a?1:Us(e)))<0?0:e):[]},vn.dropRightWhile=function(t,e){return t&&t.length?Uo(t,Bi(e,3),!0,!0):[]},vn.dropWhile=function(t,e){return t&&t.length?Uo(t,Bi(e,3),!0):[]},vn.fill=function(t,e,r,n){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&Qi(t,e,r)&&(r=0,n=o),function(t,e,r,n){var o=t.length;for((r=Us(r))<0&&(r=-r>o?0:o+r),(n=n===a||n>o?o:Us(n))<0&&(n+=o),n=r>n?0:Vs(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},vn.filter=function(t,e){return(gs(t)?Je:Zn)(t,Bi(e,3))},vn.flatMap=function(t,e){return Yn($a(t,e),1)},vn.flatMapDeep=function(t,e){return Yn($a(t,e),D)},vn.flatMapDepth=function(t,e,r){return r=r===a?1:Us(r),Yn($a(t,e),r)},vn.flatten=wa,vn.flattenDeep=function(t){return null!=t&&t.length?Yn(t,D):[]},vn.flattenDepth=function(t,e){return null!=t&&t.length?Yn(t,e=e===a?1:Us(e)):[]},vn.flip=function(t){return ji(t,j)},vn.flow=Ru,vn.flowRight=ku,vn.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n},vn.functions=function(t){return null==t?[]:Jn(t,su(t))},vn.functionsIn=function(t){return null==t?[]:Jn(t,uu(t))},vn.groupBy=Qa,vn.initial=function(t){return null!=t&&t.length?Mo(t,0,-1):[]},vn.intersection=Pa,vn.intersectionBy=Ca,vn.intersectionWith=Sa,vn.invert=ou,vn.invertBy=iu,vn.invokeMap=qa,vn.iteratee=Mu,vn.keyBy=Ja,vn.keys=su,vn.keysIn=uu,vn.map=$a,vn.mapKeys=function(t,e){var r={};return e=Bi(e,3),Qn(t,function(t,n,o){Dn(r,e(t,n,o),t)}),r},vn.mapValues=function(t,e){var r={};return e=Bi(e,3),Qn(t,function(t,n,o){Dn(r,n,e(t,n,o))}),r},vn.matches=function(t){return mo(Fn(t,y))},vn.matchesProperty=function(t,e){return bo(t,Fn(e,y))},vn.memoize=cs,vn.merge=lu,vn.mergeWith=cu,vn.method=Du,vn.methodOf=Lu,vn.mixin=Nu,vn.negate=fs,vn.nthArg=function(t){return t=Us(t),To(function(e){return go(e,t)})},vn.omit=fu,vn.omitBy=function(t,e){return hu(t,fs(Bi(e)))},vn.once=function(t){return os(2,t)},vn.orderBy=function(t,e,r,n){return null==t?[]:(gs(e)||(e=null==e?[]:[e]),gs(r=n?a:r)||(r=null==r?[]:[r]),wo(t,e,r))},vn.over=Bu,vn.overArgs=ps,vn.overEvery=Wu,vn.overSome=Gu,vn.partial=hs,vn.partialRight=ys,vn.partition=ts,vn.pick=pu,vn.pickBy=hu,vn.property=zu,vn.propertyOf=function(t){return function(e){return null==t?a:$n(t,e)}},vn.pull=Ta,vn.pullAll=ja,vn.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Po(t,e,Bi(r,2)):t},vn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Po(t,e,a,r):t},vn.pullAt=xa,vn.range=Hu,vn.rangeRight=Uu,vn.rearg=ds,vn.reject=function(t,e){return(gs(t)?Je:Zn)(t,fs(Bi(e,3)))},vn.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,o=[],i=t.length;for(e=Bi(e,3);++n<i;){var a=t[n];e(a,n,t)&&(r.push(a),o.push(n))}return Co(t,o),r},vn.rest=function(t,e){if("function"!=typeof t)throw new ie(l);return To(t,e=e===a?e:Us(e))},vn.reverse=Aa,vn.sampleSize=function(t,e,r){return e=(r?Qi(t,e,r):e===a)?1:Us(e),(gs(t)?jn:xo)(t,e)},vn.set=function(t,e,r){return null==t?t:Ao(t,e,r)},vn.setWith=function(t,e,r,n){return n="function"==typeof n?n:a,null==t?t:Ao(t,e,r,n)},vn.shuffle=function(t){return(gs(t)?xn:Io)(t)},vn.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Qi(t,e,r)?(e=0,r=n):(e=null==e?0:Us(e),r=r===a?n:Us(r)),Mo(t,e,r)):[]},vn.sortBy=es,vn.sortedUniq=function(t){return t&&t.length?Fo(t):[]},vn.sortedUniqBy=function(t,e){return t&&t.length?Fo(t,Bi(e,2)):[]},vn.split=function(t,e,r){return r&&"number"!=typeof r&&Qi(t,e,r)&&(e=r=a),(r=r===a?B:r>>>0)?(t=Xs(t))&&("string"==typeof e||null!=e&&!Ds(e))&&!(e=Wo(e))&&Tr(t)?Jo(Mr(t),0,r):t.split(e,r):[]},vn.spread=function(t,e){if("function"!=typeof t)throw new ie(l);return e=null==e?0:Yr(Us(e),0),To(function(r){var n=r[e],o=Jo(r,0,e);return n&&rr(o,n),Ye(t,this,o)})},vn.tail=function(t){var e=null==t?0:t.length;return e?Mo(t,1,e):[]},vn.take=function(t,e,r){return t&&t.length?Mo(t,0,(e=r||e===a?1:Us(e))<0?0:e):[]},vn.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?Mo(t,(e=n-(e=r||e===a?1:Us(e)))<0?0:e,n):[]},vn.takeRightWhile=function(t,e){return t&&t.length?Uo(t,Bi(e,3),!1,!0):[]},vn.takeWhile=function(t,e){return t&&t.length?Uo(t,Bi(e,3)):[]},vn.tap=function(t,e){return e(t),t},vn.throttle=function(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new ie(l);return As(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),ss(t,e,{leading:n,maxWait:e,trailing:o})},vn.thru=Ha,vn.toArray=zs,vn.toPairs=yu,vn.toPairsIn=du,vn.toPath=function(t){return gs(t)?er(t,ha):Fs(t)?[t]:ai(pa(Xs(t)))},vn.toPlainObject=Ys,vn.transform=function(t,e,r){var n=gs(t),o=n||Cs(t)||Bs(t);if(e=Bi(e,4),null==r){var i=t&&t.constructor;r=o?n?new i:[]:As(t)&&Ts(i)?mn(Ae(t)):{}}return(o?Ke:Qn)(t,function(t,n,o){return e(r,t,n,o)}),r},vn.unary=function(t){return ns(t,1)},vn.union=Ra,vn.unionBy=ka,vn.unionWith=Ia,vn.uniq=function(t){return t&&t.length?Go(t):[]},vn.uniqBy=function(t,e){return t&&t.length?Go(t,Bi(e,2)):[]},vn.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?Go(t,a,e):[]},vn.unset=function(t,e){return null==t||zo(t,e)},vn.unzip=Ma,vn.unzipWith=Da,vn.update=function(t,e,r){return null==t?t:Ho(t,e,Ko(r))},vn.updateWith=function(t,e,r,n){return n="function"==typeof n?n:a,null==t?t:Ho(t,e,Ko(r),n)},vn.values=vu,vn.valuesIn=function(t){return null==t?[]:gr(t,uu(t))},vn.without=La,vn.words=Tu,vn.wrap=function(t,e){return hs(Ko(e),t)},vn.xor=Na,vn.xorBy=Fa,vn.xorWith=Ba,vn.zip=Wa,vn.zipObject=function(t,e){return Yo(t||[],e||[],Rn)},vn.zipObjectDeep=function(t,e){return Yo(t||[],e||[],Ao)},vn.zipWith=Ga,vn.entries=yu,vn.entriesIn=du,vn.extend=Qs,vn.extendWith=qs,Nu(vn,vn),vn.add=Yu,vn.attempt=ju,vn.camelCase=mu,vn.capitalize=bu,vn.ceil=Xu,vn.clamp=function(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=(r=Zs(r))==r?r:0),e!==a&&(e=(e=Zs(e))==e?e:0),Nn(Zs(t),e,r)},vn.clone=function(t){return Fn(t,v)},vn.cloneDeep=function(t){return Fn(t,y|v)},vn.cloneDeepWith=function(t,e){return Fn(t,y|v,e="function"==typeof e?e:a)},vn.cloneWith=function(t,e){return Fn(t,v,e="function"==typeof e?e:a)},vn.conformsTo=function(t,e){return null==e||Bn(t,e,su(e))},vn.deburr=_u,vn.defaultTo=function(t,e){return null==t||t!=t?e:t},vn.divide=Ku,vn.endsWith=function(t,e,r){t=Xs(t),e=Wo(e);var n=t.length,o=r=r===a?n:Nn(Us(r),0,n);return(r-=e.length)>=0&&t.slice(r,o)==e},vn.eq=vs,vn.escape=function(t){return(t=Xs(t))&&Tt.test(t)?t.replace(St,Sr):t},vn.escapeRegExp=function(t){return(t=Xs(t))&&Dt.test(t)?t.replace(Mt,"\\$&"):t},vn.every=function(t,e,r){var n=gs(t)?qe:Un;return r&&Qi(t,e,r)&&(e=a),n(t,Bi(e,3))},vn.find=Za,vn.findIndex=_a,vn.findKey=function(t,e){return sr(t,Bi(e,3),Qn)},vn.findLast=Ya,vn.findLastIndex=ga,vn.findLastKey=function(t,e){return sr(t,Bi(e,3),qn)},vn.floor=Qu,vn.forEach=Xa,vn.forEachRight=Ka,vn.forIn=function(t,e){return null==t?t:Xn(t,Bi(e,3),uu)},vn.forInRight=function(t,e){return null==t?t:Kn(t,Bi(e,3),uu)},vn.forOwn=function(t,e){return t&&Qn(t,Bi(e,3))},vn.forOwnRight=function(t,e){return t&&qn(t,Bi(e,3))},vn.get=ru,vn.gt=ms,vn.gte=bs,vn.has=function(t,e){return null!=t&&Zi(t,e,no)},vn.hasIn=nu,vn.head=Oa,vn.identity=Iu,vn.includes=function(t,e,r,n){t=Os(t)?t:vu(t),r=r&&!n?Us(r):0;var o=t.length;return r<0&&(r=Yr(o+r,0)),Ns(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&lr(t,e,r)>-1},vn.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:Us(r);return o<0&&(o=Yr(n+o,0)),lr(t,e,o)},vn.inRange=function(t,e,r){return e=Hs(e),r===a?(r=e,e=0):r=Hs(r),function(t,e,r){return t>=Xr(e,r)&&t<Yr(e,r)}(t=Zs(t),e,r)},vn.invoke=au,vn.isArguments=_s,vn.isArray=gs,vn.isArrayBuffer=ws,vn.isArrayLike=Os,vn.isArrayLikeObject=Ps,vn.isBoolean=function(t){return!0===t||!1===t||Rs(t)&&eo(t)==Z},vn.isBuffer=Cs,vn.isDate=Ss,vn.isElement=function(t){return Rs(t)&&1===t.nodeType&&!Ms(t)},vn.isEmpty=function(t){if(null==t)return!0;if(Os(t)&&(gs(t)||"string"==typeof t||"function"==typeof t.splice||Cs(t)||Bs(t)||_s(t)))return!t.length;var e=Vi(t);if(e==J||e==ot)return!t.size;if(ta(t))return!po(t).length;for(var r in t)if(fe.call(t,r))return!1;return!0},vn.isEqual=function(t,e){return uo(t,e)},vn.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:a)?r(t,e):a;return n===a?uo(t,e,a,r):!!n},vn.isError=Es,vn.isFinite=function(t){return"number"==typeof t&&Ur(t)},vn.isFunction=Ts,vn.isInteger=js,vn.isLength=xs,vn.isMap=ks,vn.isMatch=function(t,e){return t===e||lo(t,e,Gi(e))},vn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:a,lo(t,e,Gi(e),r)},vn.isNaN=function(t){return Is(t)&&t!=+t},vn.isNative=function(t){if($i(t))throw new Nt(u);return co(t)},vn.isNil=function(t){return null==t},vn.isNull=function(t){return null===t},vn.isNumber=Is,vn.isObject=As,vn.isObjectLike=Rs,vn.isPlainObject=Ms,vn.isRegExp=Ds,vn.isSafeInteger=function(t){return js(t)&&t>=-L&&t<=L},vn.isSet=Ls,vn.isString=Ns,vn.isSymbol=Fs,vn.isTypedArray=Bs,vn.isUndefined=function(t){return t===a},vn.isWeakMap=function(t){return Rs(t)&&Vi(t)==ut},vn.isWeakSet=function(t){return Rs(t)&&eo(t)==lt},vn.join=function(t,e){return null==t?"":Vr.call(t,e)},vn.kebabCase=gu,vn.last=Ea,vn.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n;return r!==a&&(o=(o=Us(r))<0?Yr(n+o,0):Xr(o,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,o):ur(t,fr,o,!0)},vn.lowerCase=wu,vn.lowerFirst=Ou,vn.lt=Ws,vn.lte=Gs,vn.max=function(t){return t&&t.length?Vn(t,Iu,ro):a},vn.maxBy=function(t,e){return t&&t.length?Vn(t,Bi(e,2),ro):a},vn.mean=function(t){return pr(t,Iu)},vn.meanBy=function(t,e){return pr(t,Bi(e,2))},vn.min=function(t){return t&&t.length?Vn(t,Iu,yo):a},vn.minBy=function(t,e){return t&&t.length?Vn(t,Bi(e,2),yo):a},vn.stubArray=Vu,vn.stubFalse=Zu,vn.stubObject=function(){return{}},vn.stubString=function(){return""},vn.stubTrue=function(){return!0},vn.multiply=Ju,vn.nth=function(t,e){return t&&t.length?go(t,Us(e)):a},vn.noConflict=function(){return De._===this&&(De._=ve),this},vn.noop=Fu,vn.now=rs,vn.pad=function(t,e,r){t=Xs(t);var n=(e=Us(e))?Ir(t):0;if(!e||n>=e)return t;var o=(e-n)/2;return wi(Gr(o),r)+t+wi(Wr(o),r)},vn.padEnd=function(t,e,r){t=Xs(t);var n=(e=Us(e))?Ir(t):0;return e&&n<e?t+wi(e-n,r):t},vn.padStart=function(t,e,r){t=Xs(t);var n=(e=Us(e))?Ir(t):0;return e&&n<e?wi(e-n,r)+t:t},vn.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),Qr(Xs(t).replace(Lt,""),e||0)},vn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&Qi(t,e,r)&&(e=r=a),r===a&&("boolean"==typeof e?(r=e,e=a):"boolean"==typeof t&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=Hs(t),e===a?(e=t,t=0):e=Hs(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=qr();return Xr(t+o*(e-t+Re("1e-"+((o+"").length-1))),e)}return So(t,e)},vn.reduce=function(t,e,r){var n=gs(t)?nr:dr,o=arguments.length<3;return n(t,Bi(e,4),r,o,zn)},vn.reduceRight=function(t,e,r){var n=gs(t)?or:dr,o=arguments.length<3;return n(t,Bi(e,4),r,o,Hn)},vn.repeat=function(t,e,r){return e=(r?Qi(t,e,r):e===a)?1:Us(e),Eo(Xs(t),e)},vn.replace=function(){var t=arguments,e=Xs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},vn.result=function(t,e,r){var n=-1,o=(e=Qo(e,t)).length;for(o||(o=1,t=a);++n<o;){var i=null==t?a:t[ha(e[n])];i===a&&(n=o,i=r),t=Ts(i)?i.call(t):i}return t},vn.round=$u,vn.runInContext=t,vn.sample=function(t){return(gs(t)?Tn:jo)(t)},vn.size=function(t){if(null==t)return 0;if(Os(t))return Ns(t)?Ir(t):t.length;var e=Vi(t);return e==J||e==ot?t.size:po(t).length},vn.snakeCase=Pu,vn.some=function(t,e,r){var n=gs(t)?ir:Do;return r&&Qi(t,e,r)&&(e=a),n(t,Bi(e,3))},vn.sortedIndex=function(t,e){return Lo(t,e)},vn.sortedIndexBy=function(t,e,r){return No(t,e,Bi(r,2))},vn.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=Lo(t,e);if(n<r&&vs(t[n],e))return n}return-1},vn.sortedLastIndex=function(t,e){return Lo(t,e,!0)},vn.sortedLastIndexBy=function(t,e,r){return No(t,e,Bi(r,2),!0)},vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=Lo(t,e,!0)-1;if(vs(t[r],e))return r}return-1},vn.startCase=Cu,vn.startsWith=function(t,e,r){return t=Xs(t),r=null==r?0:Nn(Us(r),0,t.length),e=Wo(e),t.slice(r,r+e.length)==e},vn.subtract=tl,vn.sum=function(t){return t&&t.length?vr(t,Iu):0},vn.sumBy=function(t,e){return t&&t.length?vr(t,Bi(e,2)):0},vn.template=function(t,e,r){var n=vn.templateSettings;r&&Qi(t,e,r)&&(e=a),t=Xs(t),e=qs({},e,n,xi);var o,i,s=qs({},e.imports,n.imports,xi),u=su(s),l=gr(s,u),f=0,p=e.interpolate||Jt,h="__p += '",y=ne((e.escape||Jt).source+"|"+p.source+"|"+(p===At?Ut:Jt).source+"|"+(e.evaluate||Jt).source+"|$","g"),d="//# sourceURL="+(fe.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Te+"]")+"\n";t.replace(y,function(e,r,n,a,s,u){return n||(n=a),h+=t.slice(f,u).replace($t,Er),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),s&&(i=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),h+="';\n";var v=fe.call(e,"variable")&&e.variable;if(v){if(zt.test(v))throw new Nt(c)}else h="with (obj) {\n"+h+"\n}\n";h=(i?h.replace(wt,""):h).replace(Ot,"$1").replace(Pt,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=ju(function(){return te(u,d+"return "+h).apply(a,l)});if(m.source=h,Es(m))throw m;return m},vn.times=function(t,e){if((t=Us(t))<1||t>L)return[];var r=B,n=Xr(t,B);e=Bi(e),t-=B;for(var o=mr(n,e);++r<t;)e(r);return o},vn.toFinite=Hs,vn.toInteger=Us,vn.toLength=Vs,vn.toLower=function(t){return Xs(t).toLowerCase()},vn.toNumber=Zs,vn.toSafeInteger=function(t){return t?Nn(Us(t),-L,L):0===t?t:0},vn.toString=Xs,vn.toUpper=function(t){return Xs(t).toUpperCase()},vn.trim=function(t,e,r){if((t=Xs(t))&&(r||e===a))return br(t);if(!t||!(e=Wo(e)))return t;var n=Mr(t),o=Mr(e);return Jo(n,Or(n,o),Pr(n,o)+1).join("")},vn.trimEnd=function(t,e,r){if((t=Xs(t))&&(r||e===a))return t.slice(0,Dr(t)+1);if(!t||!(e=Wo(e)))return t;var n=Mr(t);return Jo(n,0,Pr(n,Mr(e))+1).join("")},vn.trimStart=function(t,e,r){if((t=Xs(t))&&(r||e===a))return t.replace(Lt,"");if(!t||!(e=Wo(e)))return t;var n=Mr(t);return Jo(n,Or(n,Mr(e))).join("")},vn.truncate=function(t,e){var r=x,n=A;if(As(e)){var o="separator"in e?e.separator:o;r="length"in e?Us(e.length):r,n="omission"in e?Wo(e.omission):n}var i=(t=Xs(t)).length;if(Tr(t)){var s=Mr(t);i=s.length}if(r>=i)return t;var u=r-Ir(n);if(u<1)return n;var l=s?Jo(s,0,u).join(""):t.slice(0,u);if(o===a)return l+n;if(s&&(u+=l.length-u),Ds(o)){if(t.slice(u).search(o)){var c,f=l;for(o.global||(o=ne(o.source,Xs(Vt.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var p=c.index;l=l.slice(0,p===a?u:p)}}else if(t.indexOf(Wo(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+n},vn.unescape=function(t){return(t=Xs(t))&&Et.test(t)?t.replace(Ct,Lr):t},vn.uniqueId=function(t){var e=++pe;return Xs(t)+e},vn.upperCase=Su,vn.upperFirst=Eu,vn.each=Xa,vn.eachRight=Ka,vn.first=Oa,Nu(vn,(qu={},Qn(vn,function(t,e){fe.call(vn.prototype,e)||(qu[e]=t)}),qu),{chain:!1}),vn.VERSION="4.17.21",Ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){vn[t].placeholder=vn}),Ke(["drop","take"],function(t,e){gn.prototype[t]=function(r){r=r===a?1:Yr(Us(r),0);var n=this.__filtered__&&!e?new gn(this):this.clone();return n.__filtered__?n.__takeCount__=Xr(r,n.__takeCount__):n.__views__.push({size:Xr(r,B),type:t+(n.__dir__<0?"Right":"")}),n},gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ke(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==I||3==r;gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Bi(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),Ke(["head","last"],function(t,e){var r="take"+(e?"Right":"");gn.prototype[t]=function(){return this[r](1).value()[0]}}),Ke(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");gn.prototype[t]=function(){return this.__filtered__?new gn(this):this[r](1)}}),gn.prototype.compact=function(){return this.filter(Iu)},gn.prototype.find=function(t){return this.filter(t).head()},gn.prototype.findLast=function(t){return this.reverse().find(t)},gn.prototype.invokeMap=To(function(t,e){return"function"==typeof t?new gn(this):this.map(function(r){return ao(r,t,e)})}),gn.prototype.reject=function(t){return this.filter(fs(Bi(t)))},gn.prototype.slice=function(t,e){t=Us(t);var r=this;return r.__filtered__&&(t>0||e<0)?new gn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(r=(e=Us(e))<0?r.dropRight(-e):r.take(e-t)),r)},gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gn.prototype.toArray=function(){return this.take(B)},Qn(gn.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=vn[n?"take"+("last"==e?"Right":""):e],i=n||/^find/.test(e);o&&(vn.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,u=e instanceof gn,l=s[0],c=u||gs(e),f=function(t){var e=o.apply(vn,rr([t],s));return n&&p?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var p=this.__chain__,h=!!this.__actions__.length,y=i&&!p,d=u&&!h;if(!i&&c){e=d?e:new gn(this);var v=t.apply(e,s);return v.__actions__.push({func:Ha,args:[f],thisArg:a}),new _n(v,p)}return y&&d?t.apply(this,s):(v=this.thru(f),y?n?v.value()[0]:v.value():v)})}),Ke(["pop","push","shift","sort","splice","unshift"],function(t){var e=ae[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);vn.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var o=this.value();return e.apply(gs(o)?o:[],t)}return this[r](function(r){return e.apply(gs(r)?r:[],t)})}}),Qn(gn.prototype,function(t,e){var r=vn[e];if(r){var n=r.name+"";fe.call(sn,n)||(sn[n]=[]),sn[n].push({name:e,func:r})}}),sn[mi(a,g).name]=[{name:"wrapper",func:a}],gn.prototype.clone=function(){var t=new gn(this.__wrapped__);return t.__actions__=ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ai(this.__views__),t},gn.prototype.reverse=function(){if(this.__filtered__){var t=new gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=gs(t),n=e<0,o=r?t.length:0,i=function(t,e,r){for(var n=-1,o=r.length;++n<o;){var i=r[n],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Xr(e,t+a);break;case"takeRight":t=Yr(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,l=n?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=Xr(u,this.__takeCount__);if(!r||!n&&o==u&&h==u)return Vo(t,this.__actions__);var y=[];t:for(;u--&&p<h;){for(var d=-1,v=t[l+=e];++d<f;){var m=c[d],b=m.iteratee,_=m.type,g=b(v);if(_==M)v=g;else if(!g){if(_==I)continue t;break t}}y[p++]=v}return y},vn.prototype.at=Ua,vn.prototype.chain=function(){return za(this)},vn.prototype.commit=function(){return new _n(this.value(),this.__chain__)},vn.prototype.next=function(){this.__values__===a&&(this.__values__=zs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},vn.prototype.plant=function(t){for(var e,r=this;r instanceof bn;){var n=da(r);n.__index__=0,n.__values__=a,e?o.__wrapped__=n:e=n;var o=n;r=r.__wrapped__}return o.__wrapped__=t,e},vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gn){var e=t;return this.__actions__.length&&(e=new gn(this)),(e=e.reverse()).__actions__.push({func:Ha,args:[Aa],thisArg:a}),new _n(e,this.__chain__)}return this.thru(Aa)},vn.prototype.toJSON=vn.prototype.valueOf=vn.prototype.value=function(){return Vo(this.__wrapped__,this.__actions__)},vn.prototype.first=vn.prototype.head,Be&&(vn.prototype[Be]=function(){return this}),vn}();"object"==i(r(43))&&r(43)?(De._=Nr,(o=function(){return Nr}.call(e,r,e,n))===a||(n.exports=o)):Ne?((Ne.exports=Nr)._=Nr,Le._=Nr):De._=Nr}).call(this)}).call(this,r(41),r(42)(t))},function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(r,n,Math.max(o,Math.floor(n-u*c/s+f)),Math.min(i,Math.floor(n+(s-u)*c/s+f)),a)}var p=r[n],h=o,y=i;for(e(r,o,n),a(r[i],p)>0&&e(r,o,i);h<y;){for(e(r,h,y),h++,y--;a(r[h],p)<0;)h++;for(;a(r[y],p)>0;)y--}0===a(r[o],p)?e(r,o,y):e(r,++y,i),y<=n&&(o=y+1),n<=y&&(i=y-1)}}(t,n,o||0,i||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function i(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=e;i<r;i++){var a=t.children[i];s(o,t.leaf?n(a):a)}return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function h(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,r,n,o,i){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=o)){var s=r+Math.ceil((n-r)/o/2)*o;t(e,s,r,n,i),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!h(t,e))return r;for(var n=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var a=e.children[i],s=e.leaf?n(a):a;h(t,s)&&(e.leaf?r.push(a):p(t,s)?this._all(a,r):o.push(a))}e=o.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!h(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],i=e.leaf?this.toBBox(o):o;if(h(t,i)){if(e.leaf||p(t,i))return!0;r.push(o)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=y([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,i,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),i=!0),a.leaf){var c=o(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}i||a.leaf||!p(a,s)?n?(r++,a=n.children[r],i=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var o,a=r-e+1,s=this._maxEntries;if(a<=s)return i(o=y(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=y([])).leaf=!1,o.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));d(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var f=Math.min(c+l-1,r);d(t,c,f,u,this.compareMinY);for(var p=c;p<=f;p+=u){var h=Math.min(p+u-1,f);o.children.push(this._build(t,p,h,n-1))}}return i(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var o=1/0,i=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),f=(p=t,h=u,(Math.max(h.maxX,p.maxX)-Math.min(h.minX,p.minX))*(Math.max(h.maxY,p.maxY)-Math.min(h.minY,p.minY))-l);f<i?(i=f,o=l<o?l:o,a=u):f===i&&l<o&&(o=l,a=u)}e=a||e.children[0]}var p,h;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),o=[],i=this._chooseSubtree(n,this.data,e,o);for(i.children.push(t),s(i,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var a=this._chooseSplitIndex(r,o,n),s=y(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,i(r,this.toBBox),i(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,o,i,s,u,l,f,p=1/0,h=1/0,y=e;y<=r-e;y++){var d=a(t,0,y,this.toBBox),v=a(t,y,r,this.toBBox),m=(o=d,i=v,s=void 0,u=void 0,l=void 0,f=void 0,s=Math.max(o.minX,i.minX),u=Math.max(o.minY,i.minY),l=Math.min(o.maxX,i.maxX),f=Math.min(o.maxY,i.maxY),Math.max(0,l-s)*Math.max(0,f-u)),b=c(d)+c(v);m<p?(p=m,n=y,h=b<h?b:h):m===p&&b<h&&(h=b,n=y)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var o=this.toBBox,i=a(t,0,e,o),u=a(t,r-e,r,o),l=f(i)+f(u),c=e;c<r-e;c++){var p=t.children[c];s(i,t.leaf?o(p):p),l+=f(i)}for(var h=r-e-1;h>=e;h--){var y=t.children[h];s(u,t.leaf?o(y):y),l+=f(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},n},"object"==a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},function(t,e,r){var n=r(60),o=r(61),i=r(62),a=r(8),s=r(8),u=r(63),l=r(64),c=r(65),f=r(66),p=r(67),h=r(68),y=r(69),d=r(70),v=r(71);Cesium.ShaderSource._czmBuiltinsAndUniforms.czm_cellular=n,Cesium.ShaderSource._czmBuiltinsAndUniforms.czm_snoise=o,Cesium.Material.AsphaltType="Asphalt",Cesium.Material._materialCache.addMaterial(Cesium.Material.AsphaltType,{fabric:{type:Cesium.Material.AsphaltType,uniforms:{asphaltColor:new Cesium.Color(.15,.15,.15,1),bumpSize:.02,roughness:.2},source:i},translucent:function(t){return t.uniforms.asphaltColor.alpha<1}}),Cesium.Material.BlobType="Blob",Cesium.Material._materialCache.addMaterial(Cesium.Material.BlobType,{fabric:{type:Cesium.Material.BlobType,uniforms:{lightColor:new Cesium.Color(1,1,1,.5),darkColor:new Cesium.Color(0,0,1,.5),frequency:10},source:a},translucent:function(t){var e=t.uniforms;return e.lightColor.alpha<1||e.darkColor.alpha<0}}),Cesium.Material.BrickType="Brick",Cesium.Material._materialCache.addMaterial(Cesium.Material.BrickType,{fabric:{type:Cesium.Material.BrickType,uniforms:{brickColor:new Cesium.Color(.6,.3,.1,1),mortarColor:new Cesium.Color(.8,.8,.7,1),brickSize:new Cesium.Cartesian2(.3,.15),brickPct:new Cesium.Cartesian2(.9,.85),brickRoughness:.2,mortarRoughness:.1},source:s},translucent:function(t){var e=t.uniforms;return e.brickColor.alpha<1||e.mortarColor.alpha<1}}),Cesium.Material.CementType="Cement",Cesium.Material._materialCache.addMaterial(Cesium.Material.CementType,{fabric:{type:Cesium.Material.CementType,uniforms:{cementColor:new Cesium.Color(.95,.95,.85,1),grainScale:.01,roughness:.3},source:u},translucent:function(t){return t.uniforms.cementColor.alpha<1}}),Cesium.Material.ErosionType="Erosion",Cesium.Material._materialCache.addMaterial(Cesium.Material.ErosionType,{fabric:{type:Cesium.Material.ErosionType,uniforms:{color:new Cesium.Color(1,0,0,.5),time:1},source:l},translucent:function(t){return t.uniforms.color.alpha<1}}),Cesium.Material.FacetType="Facet",Cesium.Material._materialCache.addMaterial(Cesium.Material.FacetType,{fabric:{type:Cesium.Material.FacetType,uniforms:{lightColor:new Cesium.Color(.25,.25,.25,.75),darkColor:new Cesium.Color(.75,.75,.75,.75),frequency:10},source:c},translucent:function(t){var e=t.uniforms;return e.lightColor.alpha<1||e.darkColor.alpha<0}}),Cesium.Material.FresnelType="Fresnel",Cesium.Material._materialCache.addMaterial(Cesium.Material.FresnelType,{fabric:{type:Cesium.Material.FresnelType,materials:{reflection:{type:Cesium.Material.ReflectionType},refraction:{type:Cesium.Material.RefractionType}},source:f},translucent:!1}),Cesium.Material.GrassType="Grass",Cesium.Material._materialCache.addMaterial(Cesium.Material.GrassType,{fabric:{type:Cesium.Material.GrassType,uniforms:{grassColor:new Cesium.Color(.25,.4,.1,1),dirtColor:new Cesium.Color(.1,.1,.1,1),patchiness:1.5},source:p},translucent:function(t){var e=t.uniforms;return e.grassColor.alpha<1||e.dirtColor.alpha<1}}),Cesium.Material.ReflectionType="Reflection",Cesium.Material._materialCache.addMaterial(Cesium.Material.ReflectionType,{fabric:{type:Cesium.Material.ReflectionType,uniforms:{cubeMap:Cesium.Material.DefaultCubeMapId,channels:"rgb"},source:h},translucent:!1}),Cesium.Material.RefractionType="Refraction",Cesium.Material._materialCache.addMaterial(Cesium.Material.RefractionType,{fabric:{type:Cesium.Material.RefractionType,uniforms:{cubeMap:Cesium.Material.DefaultCubeMapId,channels:"rgb",indexOfRefractionRatio:.9},source:y},translucent:!1}),Cesium.Material.TyeDyeType="TieDye",Cesium.Material._materialCache.addMaterial(Cesium.Material.TyeDyeType,{fabric:{type:Cesium.Material.TyeDyeType,uniforms:{lightColor:new Cesium.Color(1,1,0,.75),darkColor:new Cesium.Color(1,0,0,.75),frequency:5},source:d},translucent:function(t){var e=t.uniforms;return e.lightColor.alpha<1||e.darkColor.alpha<0}}),Cesium.Material.WoodType="Wood",Cesium.Material._materialCache.addMaterial(Cesium.Material.WoodType,{fabric:{type:Cesium.Material.WoodType,uniforms:{lightWoodColor:new Cesium.Color(.6,.3,.1,1),darkWoodColor:new Cesium.Color(.4,.2,.07,1),ringFrequency:3,noiseScale:new Cesium.Cartesian2(.7,.5),grainFrequency:27},source:v},translucent:function(t){var e=t.uniforms;return e.lightWoodColor.alpha<1||e.darkWoodColor.alpha<1}})},function(t,e){t.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  vec2 F = czm_cellular(materialInput.st * frequency);\r\n  float t = 1.0 - F.x * F.x;\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e,r){var n=r(72),o=r(73),i=r(74),a=r(75),s=r(76),u=r(77),l=r(78),c=r(79),f=r(80),p=r(81);Cesium.Material.CircleBlurType="CircleBlur",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleBlurType,{fabric:{type:Cesium.Material.CircleBlurType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:n},translucent:function(t){return!0}}),Cesium.Material.CircleDiffuseType="CircleDiffuse",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleDiffuseType,{fabric:{type:Cesium.Material.CircleDiffuseType,uniforms:{color:new Cesium.Color(1,0,0,1),speed:3,time:0},source:o},translucent:function(t){return!0}}),Cesium.Material.CircleFadeType="CircleFade",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleFadeType,{fabric:{type:Cesium.Material.CircleFadeType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:i},translucent:function(t){return!0}}),Cesium.Material.CirclePulseType="CirclePulse",Cesium.Material._materialCache.addMaterial(Cesium.Material.CirclePulseType,{fabric:{type:Cesium.Material.CirclePulseType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:12},source:a},translucent:function(t){return!0}}),Cesium.Material.CircleRingType="CircleRing",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleRingType,{fabric:{type:Cesium.Material.CircleRingType,uniforms:{color:new Cesium.Color(1,0,0,.7)},source:s},translucent:function(t){return!0}}),Cesium.Material.CircleRotateType="CircleRotate",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleRotateType,{fabric:{type:Cesium.Material.CircleRotateType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId},source:u},translucent:function(t){return!0}}),Cesium.Material.CircleScanType="CircleScan",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleScanType,{fabric:{type:Cesium.Material.CircleScanType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:1},source:l},translucent:function(t){return!0}}),Cesium.Material.CircleSpiralType="CircleSpiral",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleSpiralType,{fabric:{type:Cesium.Material.CircleSpiralType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:c},translucent:function(t){return!0}}),Cesium.Material.CircleVaryType="CircleVary",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleVaryType,{fabric:{type:Cesium.Material.CircleVaryType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:f},translucent:function(t){return!0}}),Cesium.Material.CircleWaveType="CircleWave",Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleWaveType,{fabric:{type:Cesium.Material.CircleWaveType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3,count:1,gradient:.1},source:p},translucent:function(t){return!0}}),Cesium.Material.EllipsoidFadeType="EllipsoidFade",Cesium.Material.EllipsoidFadeSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n{\nczm_material material = czm_getDefaultMaterial(materialInput);\nmaterial.diffuse = 1.5 * color.rgb;\nvec2 st = materialInput.st;\nfloat dis = distance(st, vec2(0.5, 0.5));\nfloat per = fract(time);\nif(dis > per * 0.5){\nmaterial.alpha = 0.0;\ndiscard;\n}else {\nmaterial.alpha = color.a  * dis / per / 1.0;\n}\nreturn material;\n}",Cesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidFadeType,{fabric:{type:Cesium.Material.EllipsoidFadeType,uniforms:{color:new Cesium.Color(1,0,0,1),time:0},source:Cesium.Material.EllipsoidFadeSource},translucent:function(t){return!0}})},function(t,e,r){var n=r(82),o=r(83);Cesium.Material.CylinderFadeType="CylinderFade",Cesium.Material._materialCache.addMaterial(Cesium.Material.CylinderFadeType,{fabric:{type:Cesium.Material.CylinderFadeType,uniforms:{color:new Cesium.Color(1,0,0,.7)},source:n},translucent:function(t){return!0}}),Cesium.Material.CylinderParticlesType="CylinderParticles",Cesium.Material._materialCache.addMaterial(Cesium.Material.CylinderParticlesType,{fabric:{type:Cesium.Material.CylinderParticlesType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId},source:o},translucent:function(t){return!0}})},function(t,e,r){var n=r(84),o=r(85);Cesium.Material.EllipsoidElectricType="EllipsoidElectric",Cesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidElectricType,{fabric:{type:Cesium.Material.EllipsoidElectricType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:1},source:n},translucent:function(t){return!0}}),Cesium.Material.EllipsoidTrailType="EllipsoidTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidTrailType,{fabric:{type:Cesium.Material.EllipsoidTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:o},translucent:function(t){return!0}})},function(t,e,r){var n=r(86),o=r(87),i=r(88),a=r(89),s=r(90),u=r(91);Cesium.Material.PolylineFlickerType="PolylineFlicker",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineFlickerType,{fabric:{type:Cesium.Material.PolylineFlickerType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:1},source:n},translucent:function(t){return!0}}),Cesium.Material.PolylineFlowType="PolylineFlow",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineFlowType,{fabric:{type:Cesium.Material.PolylineFlowType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:1,percent:.03,gradient:.1},source:o},translucent:function(t){return!0}}),Cesium.Material.PolylineImageTrailType="PolylineImageTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineImageTrailType,{fabric:{type:Cesium.Material.PolylineImageTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId,speed:1,repeat:new Cesium.Cartesian2(1,1)},source:i},translucent:function(t){return!0}}),Cesium.Material.PolylineLightingType="PolylineLighting",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineLightingType,{fabric:{type:Cesium.Material.PolylineLightingType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId},source:a},translucent:function(t){return!0}}),Cesium.Material.PolylineLightingTrailType="PolylineLightingTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineLightingTrailType,{fabric:{type:Cesium.Material.PolylineLightingTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId,speed:3},source:s},translucent:function(t){return!0}}),Cesium.Material.PolylineTrailType="PolylineTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailType,{fabric:{type:Cesium.Material.PolylineTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId,speed:1,repeat:new Cesium.Cartesian2(1,1)},source:u},translucent:function(t){return!0}})},function(t,e,r){var n=r(92),o=r(93),i=r(94),a=r(95);Cesium.Material.RadarLineType="RadarLine",Cesium.Material._materialCache.addMaterial(Cesium.Material.RadarLineType,{fabric:{type:Cesium.Material.RadarLineType,uniforms:{color:new Cesium.Color(1,0,0,.5),speed:3},source:n},translucent:function(t){return!0}}),Cesium.Material.RadarSweepType="RadarSweep",Cesium.Material._materialCache.addMaterial(Cesium.Material.RadarSweepType,{fabric:{type:Cesium.Material.RadarSweepType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:o},translucent:function(t){return!0}}),Cesium.Material.RadarWaveType="RadarWave",Cesium.Material._materialCache.addMaterial(Cesium.Material.RadarWaveType,{fabric:{type:Cesium.Material.RadarWaveType,uniforms:{color:new Cesium.Color(1,0,0,.7),speed:3},source:i},translucent:function(t){return!0}}),Cesium.Material.RadarScanMaterialType="RadarScanMaterialType",Cesium.Material._materialCache.addMaterial(Cesium.Material.RadarScanMaterialType,{fabric:{type:Cesium.Material.RadarScanMaterialType,uniforms:{color:new Cesium.Color(1,0,0,1),speed:10},source:a},translucent:function(t){return!0}})},function(t,e,r){var n=r(96),o=r(97),i=r(98),a=r(99);Cesium.Material.WallDiffuseType="WallDiffuse",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallDiffuseType,{fabric:{type:Cesium.Material.WallDiffuseType,uniforms:{color:new Cesium.Color(1,0,0,.7)},source:n},translucent:function(t){return!0}}),Cesium.Material.WallImageTrailType="WallImageTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallImageTrailType,{fabric:{type:Cesium.Material.WallImageTrailType,uniforms:{image:Cesium.Material.DefaultImageId,color:new Cesium.Color(1,0,0,.7),speed:3,repeat:new Cesium.Cartesian2(1,1)},source:o},translucent:function(t){return!0}}),Cesium.Material.WallLineTrailType="WallLineTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallLineTrailType,{fabric:{type:Cesium.Material.WallLineTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId,repeat:new Cesium.Cartesian2(1,1),speed:3},source:i},translucent:function(t){return!0}}),Cesium.Material.WallTrailType="WallTrail",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallTrailType,{fabric:{type:Cesium.Material.WallTrailType,uniforms:{color:new Cesium.Color(1,0,0,.7),image:Cesium.Material.DefaultImageId,speed:1},source:a},translucent:function(t){return!0}})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleBlurType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleDiffuseType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleFadeType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CirclePulseType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleScanType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleSpiralType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.CircleVaryType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).count=Math.max(e.count||3,1),t.gradient=Cesium.Math.clamp(e.gradient||.1,0,1),t}return e=l,(r=[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(t){return Cesium.Material.CircleWaveType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e.count=this.count,e.gradient=this.gradient,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).duration=e.speed,t._speed=(new Date).getTime(),t}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.EllipsoidFadeType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=((new Date).getTime()-this._speed)%this.duration/this.duration,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.EllipsoidElectricType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.EllipsoidTrailType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineFlickerType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e))._percent=void 0,t._percentSubscription=void 0,t._gradient=void 0,t._gradientSubscription=void 0,t.percent=e.percent||.03,t.gradient=e.gradient||.1,t}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineFlowType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e.percent=this._percent,e.gradient=this._gradient,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)&&Cesium.Property.equals(this._percent,t._percent)&&Cesium.Property.equals(this._gradient,t._gradient)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),percent:Cesium.createPropertyDescriptor("percent"),gradient:Cesium.createPropertyDescriptor("gradient")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=u.call(this,n))._image=void 0,r._imageSubscription=void 0,r._repeat=void 0,r._repeatSubscription=void 0,r.image=n.image,r.repeat=new Cesium.Cartesian2((null===(t=n.repeat)||void 0===t?void 0:t.x)||1,(null===(e=n.repeat)||void 0===e?void 0:e.y)||1),r}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineImageTrailType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e.repeat=Cesium.Property.getValueOrUndefined(this._repeat,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._image,t._image)&&Cesium.Property.equals(this._repeat,t._repeat)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),image:Cesium.createPropertyDescriptor("image"),repeat:Cesium.createPropertyDescriptor("repeat")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(30),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,n["a"]);var e,r,o,u=s(c);function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e))._image=void 0,t._imageSubscription=void 0,t.image=l,t}return e=c,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineLightingType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e}},{key:"equals",value:function(t){return this===t||t instanceof c&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._image,t._image)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}();Object.defineProperties(c.prototype,{color:Cesium.createPropertyDescriptor("color"),image:Cesium.createPropertyDescriptor("image")})},function(t,e,r){"use strict";r.r(e),e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAACYCAYAAACS0lH9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJ0GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgMTE2LjE2NDY1NSwgMjAyMS8wMS8yNi0xNTo0MToyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplODY0YmNmNy1lZGIyLWIyNDQtYWI0NC04OWZkNmMwOTQ4MDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjIyOGMxMDUtODFmZS00MjAxLWIwOTEtZDkwMGI0NTI0NWMwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjcxNzA5OEJGODAwODNEREJGRDQyQzAzMzQ5NDlDRDFDIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IiIgdGlmZjpJbWFnZVdpZHRoPSI1MTIiIHRpZmY6SW1hZ2VMZW5ndGg9IjE1MiIgdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPSIyIiB0aWZmOlNhbXBsZXNQZXJQaXhlbD0iMyIgdGlmZjpYUmVzb2x1dGlvbj0iMS8xIiB0aWZmOllSZXNvbHV0aW9uPSIxLzEiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjEiIGV4aWY6RXhpZlZlcnNpb249IjAyMzEiIGV4aWY6Q29sb3JTcGFjZT0iNjU1MzUiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSI1MTIiIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSIxNTIiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTIzVDEwOjAyOjQxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gaW1hZ2UvanBlZyB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjYyMjhjMTA1LTgxZmUtNDIwMS1iMDkxLWQ5MDBiNDUyNDVjMCIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxMDowODo0NCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmZmYTk5ZjhhLTdiZmQtNDcxNi04MTgwLWJmZTUyMmFmNGUzNSIgc3RSZWY6ZG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0iNzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUMiLz4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+NzE3MDk4QkY4MDA4M0REQkZENDJDMDMzNDk0OUNEMUM8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHRpZmY6Qml0c1BlclNhbXBsZT4gPHJkZjpTZXE+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPHJkZjpsaT44PC9yZGY6bGk+IDwvcmRmOlNlcT4gPC90aWZmOkJpdHNQZXJTYW1wbGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+h9EbuwAAA01JREFUeJzt3TuOFVkQBNDoJhmEkDBgZv8L5GMgIcRvHg5ryDTiHKn98Co67q16T4/HYwIAVHm+DgAA7FMAAKCQAgAAhSbJ03UIAGCXBQAACikAAFDIEQAAFLIAAEAhBQAACikAAFBoogQAQB0PfwAopAAAQCGvAQJAIQsAABSyAABAIQsAABSyAABAIQUAAAo5AgCAQr4ECACFPPwBoJACAACFHAEAQCEPfwAoZAEAgEIe/gBQyAIAAIU8/AGgkAUAAAr5LQAAKOS/fwAoZAEAgELuAABAIQsAABRSAACgkAIAAIXcAQCAQhYAAChkAQCAQgoAABRSAACgkIc/ABSaJC+uQwAAu7wFAACFFAAAKDR//wCAIhYAACjkEiAAFLIAAEChSfLyOgQAsMuXAAGgkLcAAKCQAgAAhbwFAACFFAAAKOQIAAAKTZJ/rkMAALsUAAAo5AgAAAr5EiAAFFIAAKCQOwAAUEgBAIBCk+TVdQgAYNckeXMdAgDYNUneXocAAHZNkvfXIQCAXZPkv+sQAMCuSfLvdQgAYNckeXcdAgDY5RIgABSaJK+vQwAAu/wWAAAUmiRP1yEAgF2T5HEdAgDYNUl+XocAAHZNkm/XIQCAXZPky3UIAGDXJPl8HQIA2DVJPl6HAAB2TZIP1yEAgF2T5NN1CABgl0uAAFBokny9DgEA7Jok369DAAC7JsmP6xAAwC4FAAAK+S0AACikAABAoUny6zoEALDLHQAAKKQAAEAhRwAAUGiS/L4OAQDsUgAAoJAjAAAopAAAQKFJ8v91CABgly8BAkChSfK4DgEA7PIWAAAUsgAAQCFvAQBAIQsAABRSAACgkEuAAFDo+ToAALDPlwABoJACAACFFAAAKOQtAAAoZAEAgEIWAAAopAAAQCEFAAAKuQMAAIUsAABQyKeAAaCQBQAACrkDAACFHAEAQCELAAAUsgAAQCELAAAUsgAAQCELAAAUsgAAQCEFAAAKOQIAgEIWAAAo5LcAAKCQAgAAhRwBAEAhCwAAFLIAAEAhCwAAFLIAAEAhBQAACvkSIAAUsgAAQCEFAAAKKQAAUMhrgABQyAIAAIUUAAAo5AgAAApZAACgkAIAAIUUAAAo5A4AABT6A6gaPQ6/wRIfAAAAAElFTkSuQmCC"},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(30),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,n["a"]);var e,r,o,u=s(c);function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e))._image=void 0,t._imageSubscription=void 0,t.image=l,t}return e=c,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineLightingTrailType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof c&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}();Object.defineProperties(c.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),image:Cesium.createPropertyDescriptor("image")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.PolylineTrailType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.RadarLineType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.RadarSweepType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,t)}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.RadarWaveType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";r(0);function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),o)}var i,a}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._definitionChanged=new Cesium.Event,this._color=void 0,this._speed=void 0,this.color=e.color,this.speed=e.speed}var e,r,n;return e=t,(r=[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(t){return Cesium.Material.RadarScanMaterialType}},{key:"getValue",value:function(t,e){return Cesium.defined(e)||(e={}),e.color=Cesium.Property.getValueOrDefault(this._color,t,Cesium.Color.RED,e.color),e.speed=Cesium.Property.getValueOrDefault(this._speed,t,10,e.speed),e}},{key:"equals",value:function(e){return this===e||e instanceof t&&Cesium.Property.equals(this._color,e._color)&&Cesium.Property.equals(this._speed,e._speed)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.defineProperties(i.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed")}),e.a=i},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,n["a"]);var e,r,o,u=s(l);function l(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=u.call(this,n))._image=void 0,r._imageSubscription=void 0,r._repeat=void 0,r._repeatSubscription=void 0,r.image=n.image,r.repeat=new Cesium.Cartesian2((null===(t=n.repeat)||void 0===t?void 0:t.x)||1,(null===(e=n.repeat)||void 0===e?void 0:e.y)||1),r}return e=l,(r=[{key:"getType",value:function(t){return Cesium.Material.WallImageTrailType}},{key:"getValue",value:function(t,e){return(e=Cesium.defaultValue(e,{})).color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e.repeat=Cesium.Property.getValueOrUndefined(this._repeat,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof l&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._image,t._image)&&Cesium.Property.equals(this._repeat,t._repeat)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();Object.defineProperties(l.prototype,{image:Cesium.createPropertyDescriptor("image"),color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),repeat:Cesium.createPropertyDescriptor("repeat")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(100),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,n["a"]);var e,r,o,u=s(c);function c(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(r=u.call(this,n))._image=void 0,r._imageSubscription=void 0,r._repeat=void 0,r._repeatSubscription=void 0,r.image=l,r.repeat=new Cesium.Cartesian2((null===(t=n.repeat)||void 0===t?void 0:t.x)||1,(null===(e=n.repeat)||void 0===e?void 0:e.y)||1),r}return e=c,(r=[{key:"getType",value:function(t){return Cesium.Material.WallLineTrailType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e.repeat=Cesium.Property.getValueOrUndefined(this._repeat,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof c&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)&&Cesium.Property.equals(this._repeat,t._repeat)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}();Object.defineProperties(c.prototype,{color:Cesium.createPropertyDescriptor("color"),image:Cesium.createPropertyDescriptor("image"),repeat:Cesium.createPropertyDescriptor("repeat"),speed:Cesium.createPropertyDescriptor("speed")})},function(t,e,r){"use strict";var n=r(0);function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,void 0,"symbol"===o(a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(101),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,n["a"]);var e,r,o,u=s(c);function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e))._image=void 0,t._imageSubscription=void 0,t.image=l,t}return e=c,(r=[{key:"getType",value:function(t){return Cesium.Material.WallTrailType}},{key:"getValue",value:function(t,e){return e||(e={}),e.color=Cesium.Property.getValueOrUndefined(this._color,t),e.image=Cesium.Property.getValueOrUndefined(this._image,t),e.speed=this._speed,e}},{key:"equals",value:function(t){return this===t||t instanceof c&&Cesium.Property.equals(this._color,t._color)&&Cesium.Property.equals(this._speed,t._speed)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}();Object.defineProperties(c.prototype,{color:Cesium.createPropertyDescriptor("color"),speed:Cesium.createPropertyDescriptor("speed"),image:Cesium.createPropertyDescriptor("image")})},function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,void 0,"symbol"===n(a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),o)}var i,a}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this._definitionChanged=new Cesium.Event,this._baseWaterColor=void 0,this._baseWaterColorSubscription=void 0,this.baseWaterColor=e.baseWaterColor||new Cesium.Color(.2,.3,.6,1),this._blendColor=void 0,this._blendColorSubscription=void 0,this.blendColor=e.blendColor||new Cesium.Color(0,1,.699,1),this._specularMap=void 0,this._specularMapSubscription=void 0,this.specularMap=e.specularMap||Cesium.Material.DefaultImageId,this._normalMap=void 0,this._normalMapSubscription=void 0,this.normalMap=e.normalMap||Cesium.Material.DefaultImageId,this.frequency=Cesium.defaultValue(e.frequency,1e3),this.animationSpeed=Cesium.defaultValue(e.animationSpeed,.01),this.amplitude=Cesium.defaultValue(e.amplitude,10),this.specularIntensity=Cesium.defaultValue(e.specularIntensity,.5)}var e,r,n;return e=t,(r=[{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}},{key:"getType",value:function(t){return Cesium.Material.WaterType}},{key:"getValue",value:function(t,e){return e||(e={}),e.baseWaterColor=Cesium.Property.getValueOrUndefined(this._baseWaterColor,t),e.blendColor=Cesium.Property.getValueOrUndefined(this._blendColor,t),e.specularMap=Cesium.Property.getValueOrUndefined(this._specularMap,t),e.normalMap=Cesium.Property.getValueOrUndefined(this._normalMap,t),e.frequency=this.frequency,e.animationSpeed=this.animationSpeed,e.amplitude=this.amplitude,e.specularIntensity=this.specularIntensity,e}},{key:"equals",value:function(e){return this===e||e instanceof t&&Cesium.Property.equals(this._baseWaterColor,e._baseWaterColor)}}])&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.defineProperties(i.prototype,{baseWaterColor:Cesium.createPropertyDescriptor("baseWaterColor"),blendColor:Cesium.createPropertyDescriptor("blendColor"),specularMap:Cesium.createPropertyDescriptor("specularMap"),normalMap:Cesium.createPropertyDescriptor("normalMap")})},function(t,e){function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,r){"use strict";r(7),r(9),r(10),r(11),r(12),r(13),r(14),r(15),r(16),r(17),r(18),r(19),r(20),r(21),r(22),r(23),r(24),r(25),r(26),r(27),r(28),r(29),r(31),r(32),r(33),r(34),r(35);var n=r(36);r.d(e,"RadarScanMaterialProperty",function(){return n.a});r(37),r(38),r(39),r(40)},,,,,,,,,,,,,,,function(t,e,r){r(110),t.exports=r(102)},function(t,e){t.exports='/**\r\n * @license\r\n * Cellular noise ("Worley noise") in 2D in GLSL.\r\n * Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\r\n * This code is released under the conditions of the MIT license.\r\n * See LICENSE file for details.\r\n */\r\n\r\n//#ifdef GL_OES_standard_derivatives\r\n//    #extension GL_OES_standard_derivatives : enable\r\n//#endif\r\n//\r\n//float aastep (float threshold , float value)\r\n//{\r\n//    float afwidth = 0.7 * length ( vec2 ( dFdx ( value ), dFdy ( value )));\r\n//    return smoothstep ( threshold - afwidth , threshold + afwidth , value );\r\n//}\r\n\r\n// Permutation polynomial: (34x^2 + x) mod 289\r\nvec3 _czm_permute289(vec3 x)\r\n{\r\n    return mod((34.0 * x + 1.0) * x, 289.0);\r\n}\r\n\r\n/**\r\n * DOC_TBA\r\n *\r\n * Implemented by Stefan Gustavson, and distributed under the MIT License.  {@link http://openglinsights.git.sourceforge.net/git/gitweb.cgi?p=openglinsights/openglinsights;a=tree;f=proceduraltextures}\r\n *\r\n * @name czm_cellular\r\n * @glslFunction\r\n *\r\n * @see Stefan Gustavson\'s chapter, <i>Procedural Textures in GLSL</i>, in <a href="http://www.openglinsights.com/">OpenGL Insights</a>.\r\n */\r\nvec2 czm_cellular(vec2 P)\r\n// Cellular noise, returning F1 and F2 in a vec2.\r\n// Standard 3x3 search window for good F1 and F2 values\r\n{\r\n#define K 0.142857142857 // 1/7\r\n#define Ko 0.428571428571 // 3/7\r\n#define jitter 1.0 // Less gives more regular pattern\r\n    vec2 Pi = mod(floor(P), 289.0);\r\n    vec2 Pf = fract(P);\r\n    vec3 oi = vec3(-1.0, 0.0, 1.0);\r\n    vec3 of = vec3(-0.5, 0.5, 1.5);\r\n    vec3 px = _czm_permute289(Pi.x + oi);\r\n    vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13\r\n    vec3 ox = fract(p*K) - Ko;\r\n    vec3 oy = mod(floor(p*K),7.0)*K - Ko;\r\n    vec3 dx = Pf.x + 0.5 + jitter*ox;\r\n    vec3 dy = Pf.y - of + jitter*oy;\r\n    vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared\r\n    p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod(floor(p*K),7.0)*K - Ko;\r\n    dx = Pf.x - 0.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared\r\n    p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33\r\n    ox = fract(p*K) - Ko;\r\n    oy = mod(floor(p*K),7.0)*K - Ko;\r\n    dx = Pf.x - 1.5 + jitter*ox;\r\n    dy = Pf.y - of + jitter*oy;\r\n    vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared\r\n    // Sort out the two smallest distances (F1, F2)\r\n    vec3 d1a = min(d1, d2);\r\n    d2 = max(d1, d2); // Swap to keep candidates for F2\r\n    d2 = min(d2, d3); // neither F1 nor F2 are now in d3\r\n    d1 = min(d1a, d2); // F1 is now in d1\r\n    d2 = max(d1a, d2); // Swap to keep candidates for F2\r\n    d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller\r\n    d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x\r\n    d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz\r\n    d1.y = min(d1.y, d1.z); // nor in  d1.z\r\n    d1.y = min(d1.y, d2.x); // F2 is in d1.y, we\'re done.\r\n    return sqrt(d1.xy);\r\n}\r\n'},function(t,e){t.exports='/**\r\n * @license\r\n * Description : Array and textureless GLSL 2D/3D/4D simplex\r\n *               noise functions.\r\n *      Author : Ian McEwan, Ashima Arts.\r\n *  Maintainer : ijm\r\n *     Lastmod : 20110822 (ijm)\r\n *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n *               Distributed under the MIT License. See LICENSE file.\r\n *               https://github.com/ashima/webgl-noise\r\n */\r\n\r\nvec4 _czm_mod289(vec4 x)\r\n{\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec3 _czm_mod289(vec3 x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec2 _czm_mod289(vec2 x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nfloat _czm_mod289(float x)\r\n{\r\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 _czm_permute(vec4 x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec3 _czm_permute(vec3 x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat _czm_permute(float x)\r\n{\r\n    return _czm_mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 _czm_taylorInvSqrt(vec4 r)\r\n{\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat _czm_taylorInvSqrt(float r)\r\n{\r\n    return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec4 _czm_grad4(float j, vec4 ip)\r\n{\r\n    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\r\n    vec4 p,s;\r\n\r\n    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\r\n    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\r\n    s = vec4(lessThan(p, vec4(0.0)));\r\n    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\r\n\r\n    return p;\r\n}\r\n\r\n/**\r\n * DOC_TBA\r\n *\r\n * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}\r\n *\r\n * @name czm_snoise\r\n * @glslFunction\r\n *\r\n * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>\r\n * @see Stefan Gustavson\'s paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>\r\n */\r\nfloat czm_snoise(vec2 v)\r\n{\r\n    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\r\n                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\r\n                       -0.577350269189626,  // -1.0 + 2.0 * C.x\r\n                        0.024390243902439); // 1.0 / 41.0\r\n    // First corner\r\n    vec2 i  = floor(v + dot(v, C.yy) );\r\n    vec2 x0 = v -   i + dot(i, C.xx);\r\n\r\n    // Other corners\r\n    vec2 i1;\r\n    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\r\n    //i1.y = 1.0 - i1.x;\r\n    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\r\n    // x0 = x0 - 0.0 + 0.0 * C.xx ;\r\n    // x1 = x0 - i1 + 1.0 * C.xx ;\r\n    // x2 = x0 - 1.0 + 2.0 * C.xx ;\r\n    vec4 x12 = x0.xyxy + C.xxzz;\r\n    x12.xy -= i1;\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i); // Avoid truncation effect in permutation\r\n    vec3 p = _czm_permute( _czm_permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\r\n\r\n    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\r\n    m = m*m ;\r\n    m = m*m ;\r\n\r\n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\r\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\r\n    vec3 x = 2.0 * fract(p * C.www) - 1.0;\r\n    vec3 h = abs(x) - 0.5;\r\n    vec3 ox = floor(x + 0.5);\r\n    vec3 a0 = x - ox;\r\n\r\n    // Normalise gradients implicitly by scaling m\r\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\r\n    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\r\n\r\n    // Compute final noise value at P\r\n    vec3 g;\r\n    g.x  = a0.x  * x0.x  + h.x  * x0.y;\r\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\r\n    return 130.0 * dot(m, g);\r\n}\r\n\r\nfloat czm_snoise(vec3 v)\r\n{\r\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\r\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\r\n\r\n    // First corner\r\n    vec3 i  = floor(v + dot(v, C.yyy) );\r\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\r\n\r\n    // Other corners\r\n    vec3 g = step(x0.yzx, x0.xyz);\r\n    vec3 l = 1.0 - g;\r\n    vec3 i1 = min( g.xyz, l.zxy );\r\n    vec3 i2 = max( g.xyz, l.zxy );\r\n\r\n    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\r\n    //   x1 = x0 - i1  + 1.0 * C.xxx;\r\n    //   x2 = x0 - i2  + 2.0 * C.xxx;\r\n    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\r\n    vec3 x1 = x0 - i1 + C.xxx;\r\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\r\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i);\r\n    vec4 p = _czm_permute( _czm_permute( _czm_permute(\r\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\r\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\r\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\r\n\r\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\r\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\r\n    float n_ = 0.142857142857; // 1.0/7.0\r\n    vec3  ns = n_ * D.wyz - D.xzx;\r\n\r\n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\r\n\r\n    vec4 x_ = floor(j * ns.z);\r\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\r\n\r\n    vec4 x = x_ *ns.x + ns.yyyy;\r\n    vec4 y = y_ *ns.x + ns.yyyy;\r\n    vec4 h = 1.0 - abs(x) - abs(y);\r\n\r\n    vec4 b0 = vec4( x.xy, y.xy );\r\n    vec4 b1 = vec4( x.zw, y.zw );\r\n\r\n    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\r\n    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\r\n    vec4 s0 = floor(b0)*2.0 + 1.0;\r\n    vec4 s1 = floor(b1)*2.0 + 1.0;\r\n    vec4 sh = -step(h, vec4(0.0));\r\n\r\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\r\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\r\n\r\n    vec3 p0 = vec3(a0.xy,h.x);\r\n    vec3 p1 = vec3(a0.zw,h.y);\r\n    vec3 p2 = vec3(a1.xy,h.z);\r\n    vec3 p3 = vec3(a1.zw,h.w);\r\n\r\n    //Normalise gradients\r\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n    p0 *= norm.x;\r\n    p1 *= norm.y;\r\n    p2 *= norm.z;\r\n    p3 *= norm.w;\r\n\r\n    // Mix final noise value\r\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\r\n    m = m * m;\r\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\r\n                                dot(p2,x2), dot(p3,x3) ) );\r\n}\r\n\r\nfloat czm_snoise(vec4 v)\r\n{\r\n    const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\r\n                          0.276393202250021,  // 2 * G4\r\n                          0.414589803375032,  // 3 * G4\r\n                         -0.447213595499958); // -1 + 4 * G4\r\n\r\n    // (sqrt(5) - 1)/4 = F4, used once below\r\n    #define F4 0.309016994374947451\r\n\r\n    // First corner\r\n    vec4 i  = floor(v + dot(v, vec4(F4)) );\r\n    vec4 x0 = v -   i + dot(i, C.xxxx);\r\n\r\n    // Other corners\r\n\r\n    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\r\n    vec4 i0;\r\n    vec3 isX = step( x0.yzw, x0.xxx );\r\n    vec3 isYZ = step( x0.zww, x0.yyz );\r\n    //  i0.x = dot( isX, vec3( 1.0 ) );\r\n    i0.x = isX.x + isX.y + isX.z;\r\n    i0.yzw = 1.0 - isX;\r\n    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\r\n    i0.y += isYZ.x + isYZ.y;\r\n    i0.zw += 1.0 - isYZ.xy;\r\n    i0.z += isYZ.z;\r\n    i0.w += 1.0 - isYZ.z;\r\n\r\n    // i0 now contains the unique values 0,1,2,3 in each channel\r\n    vec4 i3 = clamp( i0, 0.0, 1.0 );\r\n    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\r\n    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\r\n\r\n    //  x0 = x0 - 0.0 + 0.0 * C.xxxx\r\n    //  x1 = x0 - i1  + 1.0 * C.xxxx\r\n    //  x2 = x0 - i2  + 2.0 * C.xxxx\r\n    //  x3 = x0 - i3  + 3.0 * C.xxxx\r\n    //  x4 = x0 - 1.0 + 4.0 * C.xxxx\r\n    vec4 x1 = x0 - i1 + C.xxxx;\r\n    vec4 x2 = x0 - i2 + C.yyyy;\r\n    vec4 x3 = x0 - i3 + C.zzzz;\r\n    vec4 x4 = x0 + C.wwww;\r\n\r\n    // Permutations\r\n    i = _czm_mod289(i);\r\n    float j0 = _czm_permute( _czm_permute( _czm_permute( _czm_permute(i.w) + i.z) + i.y) + i.x);\r\n    vec4 j1 = _czm_permute( _czm_permute( _czm_permute( _czm_permute (\r\n               i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\r\n             + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\r\n             + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\r\n             + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\r\n\r\n    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\r\n    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\r\n    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\r\n\r\n    vec4 p0 = _czm_grad4(j0,   ip);\r\n    vec4 p1 = _czm_grad4(j1.x, ip);\r\n    vec4 p2 = _czm_grad4(j1.y, ip);\r\n    vec4 p3 = _czm_grad4(j1.z, ip);\r\n    vec4 p4 = _czm_grad4(j1.w, ip);\r\n\r\n    // Normalise gradients\r\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n    p0 *= norm.x;\r\n    p1 *= norm.y;\r\n    p2 *= norm.z;\r\n    p3 *= norm.w;\r\n    p4 *= _czm_taylorInvSqrt(dot(p4,p4));\r\n\r\n    // Mix contributions from the five corners\r\n    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\r\n    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\r\n    m0 = m0 * m0;\r\n    m1 = m1 * m1;\r\n    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\r\n                  + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\r\n}\r\n'},function(t,e){t.exports="uniform vec4 asphaltColor;\r\nuniform float bumpSize;\r\nuniform float roughness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  //Main cellular pattern\r\n  vec4 color = asphaltColor;\r\n  vec2 st = materialInput.st;\r\n  vec2 F = czm_cellular(st / bumpSize);\r\n  color.rgb -= (F.x / F.y) * 0.1;\r\n\r\n  //Extra bumps for roughness\r\n  float noise = czm_snoise(st / bumpSize);\r\n  noise = pow(noise, 5.0) * roughness;\r\n  color.rgb += noise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 cementColor;\r\nuniform float grainScale;\r\nuniform float roughness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  float noise = czm_snoise(materialInput.st / grainScale);\r\n  noise = pow(noise, 5.0) * roughness;\r\n\r\n  vec4 color = cementColor;\r\n  color.rgb += noise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float time;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float alpha = 1.0;\r\n  if (time != 1.0)\r\n  {\r\n      float t = 0.5 + (0.5 * czm_snoise(materialInput.str / (1.0 / 10.0)));   // Scale [-1, 1] to [0, 1]\r\n\r\n      if (t > time)\r\n      {\r\n          alpha = 0.0;\r\n      }\r\n  }\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a * alpha;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\r\n  vec2 F = czm_cellular(materialInput.st * frequency);\r\n  float t = 0.1 + (F.y - F.x);\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="czm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  float cosAngIncidence = max(dot(normalWC, positionWC), 0.0);\r\n\r\n  material.diffuse = mix(reflection.diffuse, refraction.diffuse, cosAngIncidence);\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 grassColor;\r\nuniform vec4 dirtColor;\r\nuniform float patchiness;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec2 st = materialInput.st;\r\n  float noise1 = (czm_snoise(st * patchiness * 1.0)) * 1.0;\r\n  float noise2 = (czm_snoise(st * patchiness * 2.0)) * 0.5;\r\n  float noise3 = (czm_snoise(st * patchiness * 4.0)) * 0.25;\r\n  float noise = sin(noise1 + noise2 + noise3) * 0.1;\r\n\r\n  vec4 color = mix(grassColor, dirtColor, noise);\r\n\r\n  //Make thatch patterns\r\n  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;\r\n  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;\r\n  float stripeNoise = min(verticalNoise, horizontalNoise);\r\n\r\n  color.rgb += stripeNoise;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform samplerCube cubeMap;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  vec3 reflectedWC = reflect(positionWC, normalWC);\r\n  material.diffuse = textureCube(cubeMap, reflectedWC).channels;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform samplerCube cubeMap;\r\nuniform float indexOfRefractionRatio;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\r\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\r\n  vec3 refractedWC = refract(positionWC, -normalWC, indexOfRefractionRatio);\r\n  material.diffuse = textureCube(cubeMap, refractedWC).channels;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 lightColor;\r\nuniform vec4 darkColor;\r\nuniform float frequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  vec3 scaled = materialInput.str * frequency;\r\n  float t = abs(czm_snoise(scaled));\r\n\r\n  vec4 color = mix(lightColor, darkColor, t);\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 lightWoodColor;\r\nuniform vec4 darkWoodColor;\r\nuniform float ringFrequency;\r\nuniform vec2 noiseScale;\r\nuniform float grainFrequency;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n\r\n  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455\r\n  vec2 st = materialInput.st;\r\n\r\n  vec2 noisevec;\r\n  noisevec.x = czm_snoise(st * noiseScale.x);\r\n  noisevec.y = czm_snoise(st * noiseScale.y);\r\n\r\n  vec2 location = st + noisevec;\r\n  float dist = sqrt(location.x * location.x + location.y * location.y);\r\n  dist *= ringFrequency;\r\n\r\n  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;\r\n  if(r > 1.0)\r\n      r = 2.0 - r;\r\n\r\n  vec4 color = mix(lightWoodColor, darkWoodColor, r);\r\n\r\n  //streaks\r\n  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;\r\n  color.rgb += lightWoodColor.rgb * r;\r\n\r\n  material.diffuse = color.rgb;\r\n  material.alpha = color.a;\r\n\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st ;\r\n  vec2 center = vec2(0.5);\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float r = 0.5 + sin(time) / 3.0;\r\n  float dis = distance(st, center);\r\n  float a = 0.0;\r\n  if(dis < r) {\r\n    a = 1.0 - smoothstep(0.0, r, dis);\r\n  }\r\n  material.alpha = pow(a,10.0) ;\r\n  material.diffuse = color.rgb * a * 3.0;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nvec3 circlePing(float r, float innerTail,  float frontierBorder, float timeResetSeconds,  float radarPingSpeed,  float fadeDistance){\r\n  float t = fract(czm_frameNumber * speed / 1000.0);\r\n  float time = mod(t, timeResetSeconds) * radarPingSpeed;\r\n  float circle;\r\n  circle += smoothstep(time - innerTail, time, r) * smoothstep(time + frontierBorder,time, r);\r\n  circle *= smoothstep(fadeDistance, 0.0, r);\r\n  return vec3(circle);\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0  - 1.0 ;\r\n  vec2 center = vec2(0.);\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec3 flagColor;\r\n  float r = length(st - center) / 4.;\r\n  flagColor += circlePing(r, 0.25, 0.025, 4.0, 0.3, 1.0) * color.rgb;\r\n  material.alpha = length(flagColor);\r\n  material.diffuse = flagColor.rgb;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  material.diffuse = 1.5 * color.rgb;\r\n  vec2 st = materialInput.st;\r\n  float dis = distance(st, vec2(0.5, 0.5));\r\n  float per = fract(czm_frameNumber * speed / 1000.0);\r\n  if(dis > per * 0.5){\r\n    material.alpha = color.a;\r\n  }else {\r\n    discard;\r\n  }\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float r = length(st) * 1.2;\r\n  float a = pow(r, 2.0);\r\n  float b = sin(r * 0.8 - 1.6);\r\n  float c = sin(r - 0.010);\r\n  float s = sin(a - time * 2.0 + b) * c;\r\n  float d = abs(1.0 / (s * 10.8)) - 0.01;\r\n  material.alpha = pow(d,10.0) ;\r\n  material.diffuse = color.rgb * d;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 center = st - vec2(0.5,0.5);\r\n  float length = length(center) / 0.5;\r\n  float time = 1. - abs(czm_frameNumber / 360. - 0.5);\r\n  float param = 1. - step(length, 0.6); //大于0.6模糊，rate = 0.6\r\n  float scale = param * length; // 0.6< length 返回0，反之返回1.\r\n  float alpha = param * (1.0 - abs(scale - 0.8) / 0.2); // 0.8 < length 返回0，反之返回1.\r\n  float param1 = step(length, 0.7); //小于0.5模糊\r\n  float scale1 = param1 * length; // 0.6< length 返回0，反之返回1.\r\n  alpha += param1 * (1.0 - abs(scale1 - 0.35) / 0.35); // 0.8 < length 返回0，反之返回1.\r\n  material.diffuse = color.rgb * vec3(color.a);\r\n  material.alpha = pow(alpha, 4.0);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform sampler2D image;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 center = st - vec2(0.5,0.5);\r\n  float time = -czm_frameNumber * 3.1415926 / 180.;\r\n  float sin_t = sin(time);\r\n  float cos_t = cos(time);\r\n  vec2 center_rotate = vec2(center.s * cos_t - center.t * sin_t + 0.5,center.s * sin_t + center.t * cos_t + 0.5);\r\n  vec4 colorImage = texture2D(image,center_rotate);\r\n  vec3 temp = colorImage.rgb * color.rgb;\r\n  temp *= color.a;\r\n  material.diffuse = temp;\r\n  float length = 2. - length(center) / 0.5;\r\n  material.alpha = colorImage.a * pow(length, 0.5);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nfloat circle(vec2 uv, float r, float blur) {\r\n  float d = length(uv) * 2.0;\r\n  float c = smoothstep(r+blur, r, d);\r\n  return c;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st - .5;\r\n  material.diffuse = color.rgb;\r\n  material.emission = vec3(0);\r\n  float t =fract(czm_frameNumber * speed / 1000.0);\r\n  float s = 0.3;\r\n  float radius1 = smoothstep(.0, s, t) * 0.98;\r\n  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);\r\n  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);\r\n  float radius2 = 0.99 + smoothstep(s, 1.0, t) * 0.5;\r\n  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);\r\n  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\r\n  material.alpha *= color.a;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nvec2 rotate2D (vec2 _st, float _angle) {\r\n  _st =  mat2(cos(_angle),-sin(_angle),  sin(_angle),cos(_angle)) * _st;\r\n  return _st;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  st *= 1.6;\r\n  float time = czm_frameNumber * speed / 1000.0;\r\n  float r = length(st);\r\n  float w = .3;\r\n  st = rotate2D(st,(r*PI*6.-time*2.));\r\n  float a = smoothstep(-w,.2,st.x) * smoothstep(w,.2,st.x);\r\n  float b = abs(1./(sin(pow(r,2.)*2.-time*1.3)*6.))*.4;\r\n  material.alpha = a * b ;\r\n  material.diffuse = color.rgb * a * b  * 3.0;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st  * 2.0 - 1.0;\r\n  float time =czm_frameNumber * speed / 1000.0;\r\n  float radius = length(st);\r\n  float angle = atan(st.y/st.x);\r\n  float radius1 = sin(time * 2.0) + sin(40.0*angle+time)*0.01;\r\n  float radius2 = cos(time * 3.0);\r\n  vec3 fragColor = 0.2 + 0.5 * cos( time + color.rgb + vec3(0,2,4));\r\n  float inten1 = 1.0 - sqrt(abs(radius1 - radius));\r\n  float inten2 = 1.0 - sqrt(abs(radius2 - radius));\r\n  material.alpha = pow(inten1 + inten2 , 5.0) ;\r\n  material.diffuse = fragColor * (inten1 + inten2);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nuniform float count;\r\nuniform float gradient;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  material.diffuse = 1.5 * color.rgb;\r\n  vec2 st = materialInput.st;\r\n  float dis = distance(st, vec2(0.5, 0.5));\r\n  float per = fract(czm_frameNumber * speed / 1000.0);\r\n  if(count == 1.0){\r\n    if(dis > per * 0.5){\r\n      discard;\r\n    }else {\r\n      material.alpha = color.a  * dis / per / 2.0;\r\n    }\r\n  } else {\r\n    vec3 str = materialInput.str;\r\n    if(abs(str.z)  > 0.001){\r\n      discard;\r\n    }\r\n    if(dis > 0.5){\r\n      discard;\r\n    } else {\r\n      float perDis = 0.5 / count;\r\n      float disNum;\r\n      float bl = 0.0;\r\n      for(int i = 0; i <= 999; i++){\r\n        if(float(i) <= count){\r\n          disNum = perDis * float(i) - dis + per / count;\r\n          if(disNum > 0.0){\r\n            if(disNum < perDis){\r\n              bl = 1.0 - disNum / perDis;\r\n            }\r\n            else if(disNum - perDis < perDis){\r\n              bl = 1.0 - abs(1.0 - disNum / perDis);\r\n            }\r\n            material.alpha = pow(bl,(1.0 + 10.0 * (1.0 - gradient)));\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return material;\r\n}\r\n\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float powerRatio = 1. / (fract(czm_frameNumber / 30.0) +  1.) ;\r\n  float alpha = pow(1. - st.t,powerRatio);\r\n  vec4 temp = vec4(color.rgb, alpha * color.a);\r\n  material.diffuse = temp.rgb;\r\n  material.alpha = temp.a;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform sampler2D image;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber / 90.) ;\r\n  vec2 new_st = fract(st- vec2(time,time));\r\n  vec4 colorImage = texture2D(image, new_st);\r\n  vec3 diffuse = colorImage.rgb;\r\n  float alpha = colorImage.a;\r\n  diffuse *= color.rgb;\r\n  alpha *= color.a;\r\n  material.diffuse = diffuse;\r\n  material.alpha = alpha * pow(1. - st.t,color.a);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define pi 3.1415926535\r\n#define PI2RAD 0.01745329252\r\n#define TWO_PI (2. * PI)\r\n\r\nfloat rands(float p){\r\n  return fract(sin(p) * 10000.0);\r\n}\r\n\r\nfloat noise(vec2 p){\r\n  float time = fract( czm_frameNumber * speed / 1000.0);\r\n  float t = time / 20000.0;\r\n  if(t > 1.0) t -= floor(t);\r\n  return rands(p.x * 14. + p.y * sin(t) * 0.5);\r\n}\r\n\r\nvec2 sw(vec2 p){\r\n  return vec2(floor(p.x), floor(p.y));\r\n}\r\n\r\nvec2 se(vec2 p){\r\n  return vec2(ceil(p.x), floor(p.y));\r\n}\r\n\r\nvec2 nw(vec2 p){\r\n  return vec2(floor(p.x), ceil(p.y));\r\n}\r\n\r\nvec2 ne(vec2 p){\r\n  return vec2(ceil(p.x), ceil(p.y));\r\n}\r\n\r\nfloat smoothNoise(vec2 p){\r\n  vec2 inter = smoothstep(0.0, 1.0, fract(p));\r\n  float s = mix(noise(sw(p)), noise(se(p)), inter.x);\r\n  float n = mix(noise(nw(p)), noise(ne(p)), inter.x);\r\n  return mix(s, n, inter.y);\r\n}\r\n\r\nfloat fbm(vec2 p){\r\n  float z = 2.0;\r\n  float rz = 0.0;\r\n  vec2 bp = p;\r\n  for(float i = 1.0; i < 6.0; i++){\r\n    rz += abs((smoothNoise(p) - 0.5)* 2.0) / z;\r\n    z *= 2.0;\r\n    p *= 2.0;\r\n  }\r\n  return rz;\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 st2 = materialInput.st;\r\n  float time = fract( czm_frameNumber * speed / 1000.0);\r\n  if (st.t < 0.5) {\r\n    discard;\r\n  }\r\n  st *= 4.;\r\n  float rz = fbm(st);\r\n  st /= exp(mod( time * 2.0, pi));\r\n  rz *= pow(15., 0.9);\r\n  vec4 temp = vec4(0);\r\n  temp = mix( color / rz, vec4(color.rgb, 0.1), 0.2);\r\n  if (st2.s < 0.05) {\r\n    temp = mix(vec4(color.rgb, 0.1), temp, st2.s / 0.05);\r\n  }\r\n  if (st2.s > 0.95){\r\n    temp = mix(temp, vec4(color.rgb, 0.1), (st2.s - 0.95) / 0.05);\r\n  }\r\n  material.diffuse = temp.rgb;\r\n  material.alpha = temp.a * 2.0;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  float alpha = abs(smoothstep(0.5,1.,fract( -st.t - time)));\r\n  alpha += .1;\r\n  material.alpha = alpha;\r\n  material.diffuse = color.rgb;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float time = fract( czm_frameNumber  *  speed / 1000.0);\r\n  vec2 st = materialInput.st;\r\n  float scalar = smoothstep(0.0,1.0,time);\r\n  material.diffuse = color.rgb * scalar;\r\n  material.alpha = color.a * scalar ;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\nuniform float percent;\r\nuniform float gradient;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float t =fract(czm_frameNumber * speed / 1000.0);\r\n  t *= (1.0 + percent);\r\n  float alpha = smoothstep(t- percent, t, st.s) * step(-t, -st.s);\r\n  alpha += gradient;\r\n  material.diffuse = color.rgb;\r\n  material.alpha = alpha;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform vec2 repeat;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n   czm_material material = czm_getDefaultMaterial(materialInput);\r\n   vec2 st = repeat * materialInput.st;\r\n   float time = fract(czm_frameNumber * speed / 1000.0);\r\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\r\n   if(color.a == 0.0){\r\n     if(colorImage.rgb == vec3(1.0) || colorImage.rgb == vec3(0.0)){\r\n       discard;\r\n     }\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n   }else{\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n   }\r\n   return material;\r\n}\r\n"},function(t,e){t.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec4 colorImage = texture2D(image,st);\r\n  vec3 fragColor = color.rgb;\r\n  material.alpha = colorImage.a * color.a * 3.;\r\n  material.diffuse = max(fragColor.rgb  +  colorImage.rgb , fragColor.rgb);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nuniform float speed;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image,st);\r\n  vec3 fragColor = color.rgb;\r\n  if(st.t > 0.45 && st.t < 0.55 ) {\r\n    fragColor = vec3(1.0);\r\n  }\r\n  if(color.a == 0.0){\r\n    material.alpha = colorImage.a * 1.5 * fract(st.s - time);\r\n    material.diffuse = colorImage.rgb;\r\n  }else{\r\n    material.alpha = colorImage.a * color.a * 1.5 * smoothstep(.0,1., fract(st.s - time));\r\n    material.diffuse = max(fragColor.rgb * material.alpha , fragColor.rgb);\r\n  }\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n   czm_material material = czm_getDefaultMaterial(materialInput);\r\n   vec2 st = materialInput.st;\r\n   float time = fract(czm_frameNumber * speed / 1000.0);\r\n   material.diffuse = color.rgb;\r\n   material.alpha = color.a * fract(st.s-time);\r\n   return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * 2.0 - 1.0;\r\n  float t = czm_frameNumber * speed / 1000.0 ;\r\n  vec3 col = vec3(0.0);\r\n  vec2 p = vec2(sin(t), cos(t));\r\n  float d = length(st - dot(p, st) * p);\r\n  if (dot(st, p) < 0.) {\r\n    d = length(st);\r\n  }\r\n\r\n  col = .006 / d * color.rgb;\r\n\r\n  if(distance(st,vec2(0)) >  0.99 ){\r\n    col =color.rgb;\r\n  }\r\n\r\n  material.alpha  = pow(length(col),2.0);\r\n  material.diffuse = col * 3.0 ;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 scrPt = st * 2.0 - 1.0;\r\n  float time = czm_frameNumber * speed / 1000.0 ;\r\n  vec3 col = vec3(0.0);\r\n  mat2 rot;\r\n  float theta = -time * 1.0 * PI - 2.2;\r\n  float cosTheta, sinTheta;\r\n  cosTheta = cos(theta);\r\n  sinTheta = sin(theta);\r\n  rot[0][0] = cosTheta;\r\n  rot[0][1] = -sinTheta;\r\n  rot[1][0] = sinTheta;\r\n  rot[1][1] = cosTheta;\r\n  vec2 scrPtRot = rot * scrPt;\r\n  float angle = 1.0 - (atan(scrPtRot.y, scrPtRot.x) / 6.2831 + 0.5);\r\n  float falloff = 1.0 - length(scrPtRot);\r\n  float ringSpacing = 0.23;\r\n  if(mod(length(scrPtRot), ringSpacing) < 0.015 && length(scrPtRot) / ringSpacing < 5.0) {\r\n    col += vec3(0, 0.5, 0);\r\n  }\r\n  col += vec3(0, 0.8, 0) * step(mod(length(scrPtRot), ringSpacing), 0.01) * step(length(scrPtRot), 1.0);\r\n  material.alpha =pow(length(col + vec3(.5)),5.0);\r\n  material.diffuse =  (0.5 +  pow(angle, 2.0) * falloff ) *   color.rgb    ;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nuniform float speed;\r\n\r\n#define PI 3.14159265359\r\n\r\nfloat rand(vec2 co){\r\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\r\n}\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  vec2 pos = st - vec2(0.5);\r\n  float time = czm_frameNumber * speed / 1000.0 ;\r\n  float r = length(pos);\r\n  float t = atan(pos.y, pos.x) - time * 2.5;\r\n  float a = (atan(sin(t), cos(t)) + PI)/(2.0*PI);\r\n  float ta = 0.5;\r\n  float v = smoothstep(ta-0.05,ta+0.05,a) * smoothstep(ta+0.05,ta-0.05,a);\r\n  vec3 flagColor = color.rgb * v;\r\n  float blink = pow(sin(time*1.5)*0.5+0.5, 0.8);\r\n  flagColor = color.rgb *  pow(a, 8.0*(.2+blink))*(sin(r*500.0)*.5+.5) ;\r\n  flagColor = flagColor * pow(r, 0.4);\r\n  material.alpha = length(flagColor) * 1.3;\r\n  material.diffuse = flagColor * 3.0;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports=" uniform vec4 color;\r\n    uniform float speed;\r\n\r\n    #define PI 3.14159265359\r\n\r\n    czm_material czm_getMaterial(czm_materialInput materialInput){\r\n      czm_material material = czm_getDefaultMaterial(materialInput);\r\n      vec2 st = materialInput.st;\r\n      vec2 scrPt = st * 2.0 - 1.0;\r\n      float time = czm_frameNumber * speed / 1000.0 ;\r\n      vec3 col = vec3(0.0);\r\n      mat2 rot;\r\n      float theta = -time * 1.0 * PI - 2.2;\r\n      float cosTheta, sinTheta;\r\n      cosTheta = cos(theta);\r\n      sinTheta = sin(theta);\r\n      rot[0][0] = cosTheta;\r\n      rot[0][1] = -sinTheta;\r\n      rot[1][0] = sinTheta;\r\n      rot[1][1] = cosTheta;\r\n      vec2 scrPtRot = rot * scrPt;\r\n      float angle = 1.0 - (atan(scrPtRot.y, scrPtRot.x) / 6.2831 + 0.5);\r\n      float falloff = length(scrPtRot);\r\n      material.alpha = pow(length(col + vec3(0.5)),5.0);\r\n      material.diffuse =  (0.5 +  pow(angle, 2.0) * falloff ) *   color.rgb    ;\r\n      return material;\r\n    }\r\n"},function(t,e){t.exports="uniform vec4 color;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st;\r\n  material.diffuse = color.rgb * 2.0;\r\n  material.alpha = color.a * (1.0-fract(st.t)) * 0.8;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform sampler2D image;\r\nuniform vec4 color;\r\nuniform float speed;\r\nuniform vec2 repeat;\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  vec2 st = materialInput.st * repeat;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\r\n  material.alpha =  colorImage.a * color.a ;\r\n  material.diffuse = colorImage.rgb * color.rgb * 3.0 ;\r\n  return material;\r\n}\r\n"},function(t,e){t.exports="uniform sampler2D image;\r\nuniform float speed;\r\nuniform vec4 color;\r\nuniform vec2 repeat;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n  czm_material material = czm_getDefaultMaterial(materialInput);\r\n  float perDis = 1.0 / repeat.y / 3.0  ;\r\n  vec2 st = materialInput.st * repeat;\r\n  float time = fract(czm_frameNumber * speed / 1000.0);\r\n  vec4 colorImage = texture2D(image, vec2(st.s, fract(st.t - time)));\r\n  material.alpha =  colorImage.a * smoothstep(.2 ,1. ,distance(st.t * perDis ,1. + perDis ));\r\n  material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);\r\n  return material;\r\n}\r\n"},function(t,e){t.exports=" uniform sampler2D image;\r\n uniform float speed;\r\n uniform vec4 color;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput){\r\n   czm_material material = czm_getDefaultMaterial(materialInput);\r\n   vec2 st = materialInput.st;\r\n   float time = fract(czm_frameNumber * speed / 1000.0);\r\n   vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\r\n   if(color.a == 0.0){\r\n    material.alpha = colorImage.a;\r\n    material.diffuse = colorImage.rgb;\r\n   }else{\r\n    material.alpha = colorImage.a * color.a;\r\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\r\n   }\r\n   return material;\r\n}\r\n"},function(t,e,r){"use strict";r.r(e),e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAABACAYAAABWdc94AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGx2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgMTE2LjE2NDY1NSwgMjAyMS8wMS8yNi0xNTo0MToyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAyLTIzVDE3OjE0OjMyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTI0VDE0OjIwOjE2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMi0yNFQxNDoyMDoxNiswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NzQzY2I0NC0zMzk3LTQ5OTAtYjg4OC0yNDFlNmExYmQyYWYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5YWYxZDY1MC1jNWRlLTVmNDgtYWYzNi1hZDE4ZWRkN2QzYTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiMmZjZmU2Zi1hZWQwLTRjMWQtYjZmOS1lNjAwMjJiNmEwOGUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmIyZmNmZTZmLWFlZDAtNGMxZC1iNmY5LWU2MDAyMmI2YTA4ZSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxNzoxNDozMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNjM2JjM2I5LTkwNDEtNDk1ZS04MTc5LTdkZjc3NDIwZDczOSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yM1QxNzoxNDozMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjU3NDNjYjQ0LTMzOTctNDk5MC1iODg4LTI0MWU2YTFiZDJhZiIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0yNFQxNDoyMDoxNiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+eAiLkwAAAQZJREFUeJzt3LERwDAMxDAl5/1XdqYIXRiYQBULFf/svQeA/72nDwC4heACRAQXICK4ABHBBYgILkBEcAEiggsQEVyAiOACRAQXICK4ABHBBYgILkBkzYx9RoDAmpnn9BEAN/BSAIgILkBEcAEiggsQEVyAiOACRAQXICK4ABHBBYgILkBEcAEiggsQEVyAiOACRAQXIGKAHCBigBwg4qUAEBFcgIjgAkQEFyAiuAARwQWICC5ARHABIoILEBFcgIjgAkQEFyAiuAARwQWI2MMFiNjDBYh4KQBEBBcgIrgAEcEFiAguQERwASKCCxARXICI4AJEBBcgIrgAEcEFiAguQERwASIfRmAGiWTgoMYAAAAASUVORK5CYII="},function(t,e,r){"use strict";r.r(e),e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAOhlWElmTU0AKgAAAAgABgESAAMAAAABAAEAAAEaAAUAAAABAAAAVgEbAAUAAAABAAAAXgExAAIAAAAkAAAAZgEyAAIAAAAUAAAAiodpAAQAAAABAAAAngAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkAMjAxODoxMDoyNiAxNTozMDozNAAABJAEAAIAAAAUAAAA1KABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAAAyMDE4OjEwOjI2IDE1OjI0OjI1ALUCxicAAAAJcEhZcwAACxMAAAsTAQCanBgAAAdgaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6MjgyZGYxNWEtYzg5MC00ODUzLWJlZDQtOWEyZjQxMmY0NjljPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxOC0xMC0yNlQxNToyNDoyNSswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDoyODJkZjE1YS1jODkwLTQ4NTMtYmVkNC05YTJmNDEyZjQ2OWM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE4LTEwLTI2VDE1OjMwOjM0KzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE4LTEwLTI2VDE1OjMwOjM0KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxOC0xMC0yNlQxNToyNDoyNSswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgr82RRBAAAQ+0lEQVR4AZWaWZIkNw5Ea5M00khnmi/d/zgyLV017znhTEZWdk8PzCIAAg4QABlLRtXz77///p8//vjjy/v7+5ePj48vf/755xfo/eXl5f2ff/55R/f8NPTDDz9s+dRrfnt7i+3Un/Jpf319feF4lj8/P78yV8bKhHplnpcV8u0Fv1cOx8BxAPrjjz+GL7fXYEZ+09c4Hsj6Nubrzz///C+OX3799dd///LLL7/+9ttvP+tM7O+jv/766xPQIj3+/vvvJ4/SWXx195x4u2knnsbvRutz2hyzQNFRtLiXsdukJxZSbhOelQ9b9NqKwfbyRrAPJkT++MDwgV8OivlggsiYkpA29JHprvN9ImJV90FzdyHVE0v7OwfhX96Z/1nu2ByUWWh1FmBzYe8WtHNTVm+jyCMLoMLA6mHRibMm4rmTE18ddsfyjxcbMMon+XnYGI9TV9kGeXQsJ2BiyKXqTrn46s6xOslmNS+5RahvPHQOQ9jCLUga9SemTWzxBeQSwLZXSkMLK4ixSV2SaOJthNgmWF7/8nu98xpbOm1elto8LF5b7eWfCnnJFdCpwvG/NOSM0zlzCbjtwL5zA0y3BXblTaKTtgk4X7a3wVqINrflxLAIzfsmObGeWcUsHXO72t4QnTvb31U3JwiWS2E3QX9tcCsOB8c0WWG3u80Tn3mVI8wJrHZH2RG5ttxyJSfwuB+fOm02w6KLL9fmrpCfuqN5ezeJkcQ1B7nj6gP4ysk6a6oMX9UpPKDGtRHS3jctJto5NZFTV9kb3NduhGLOJ0bjnE1onHv+PU8l6tqF3/t3zC6JyNyfsPrXnpugyCbZAOVf09d+z4u/58VV77gNOS6fwvZNcCsOwRg9DvWuwYV/pB/dxfbmIwdDrmnuAX2kPLsSXps63Xfc1Z9g23ZilHlZ+WTTz9yKbRw5hwXs+RyLG5XPzDwanVd5bDsP9eqql6Pa8QwkqVtMD+5NAm2C3ETaBECoVsBHW12bAcq98Z1j9LEZs3p1kjr9nJdrcc+PKS8vbk/mh+V9JoWLr0/1jhNwTuo5doWVz4oPWfG5b0pnIbuTJnpffBMpd6Ufkfaz+HtMm1BM7eR02aKdp/ZH4xZejFzcOa7O+BZeW97BO2jwrmb15Q1arl5ZfH3LW9iJFd/CT3195nL0pX/H00eySPmZ/Oj3gmkTN/yCre6cF93TGw4vFPDGjegfktt3b4GY8qw4nSq3QJOQqleurTp5d5LyJOPUZhuO3R8wLoi37/yIIU50/vhBpy1j3cRB+VEELjE8Jfhx2gYEYwiBp1Hyt0ng6aeffnrh0eWLhEHIM+/ll8JMHqcQclc/L0Fn0fOycSm6z11w+cEyBSQ/i8ee5MzHgpikY8vZhU0BaZwGSaxcm9Tx1BKdJ8bZFcXB1w5QoCDsr/v6Q/aHyqVIV7FNKDcYzdv6dGdO2jouft763HW5/4ApX1tBp2mCIoer3CKyQxjf8+2rTbCcucOpJf6MdyBtHjT7zQnyI8HVIdH80jCATQCUa5II4Y5PamHaJWJ8KtoEtBVrbCjJTa7Z9uI4srdHv78FTJ57yxMuTZBLuinjZwgpek+jkxeHuCiXAI5GMUHf47OlfUkRos3tqx1+2dbaStO8S6FtRgs3HInlBofchMPVm7WFalMejGKSd7zqWX1i7hSkfQzlQIPVLthxOLkk1sRZO6CJznt4Hl8AqDe/MhynzhbioD4xzIk5ssrlxNhjISZiDLmZgpNJNi6rrY7YbQrQfD3KyoPrjmjhbVhukviGEpGTcSSLljCGOX/JN0GD7JUD4aexvKC44v+r6NNukcY6dU6m/tBlblRd1SynyYGNTo4dditeOdlPg5Bvezy1rV1j0cYq3cXdu0E9x/NuAAkmSXeByc6Enx6DFiMxQQpbo1uB+G39xEm8owHZCZNAboaVTQh/l8fiIsOz+qotigI7FpqdYjoOIItKY6YR7t7upjQGextkvNUAHPcqAfjwTr12/9quLfLkLcgg1atjwnO1HzbKJHwK6Kc8yWbVLfKwpyjzQ53tPkUGVqwgYphHijXeUD6Ijv9uALYU7/TZAQJMxgLcAV77BPGDQbYzsuaQdsdtQDkxto4CduG1N4ZjC8wpta6bIUkR4nYJWIA49Z7w73XeHaA9Nu3E7X3BYX0zz8wX/TLl5r52AIoEoTrv8L6NaPBLix88cgmo853AIvvu38LQ7R0gzi7VpqyPVJ2YI6GuxKp++QMJJS+bAu1CbcQyv9yWGZCELXGMH6d1iUQ/Y+eu/9otGFS4LP78TbLEEqjO7wUpoisYACd8LsXej4sj1i7eJjg2rvihrBb66DghrmubBUkiGiSLx8cjzowNsQsSo00arOJSKEHEdqxfCNzbG6vqRzUL0uJTwKvAt0KfH60ljRAHwdZrscEEOCZ4sG1aMadNWZokTChJqyMVZQsyVmS59wv8EFdjFMCmEWDTMX0VJ0ZiioMyB4kl3vA0InPaZba6D/0vNMJ7QD5Y4uh3ulwCqUrPKdZx5RZZjJyYaQgTbJz6+gxvkgzTxDbD5iRxDRZAnIhyDVBumHJpdkps0+y97fVBt2+0NCjBVjo8BQAY0JX2E/UXAE3er0ROvn8fnMWKP4ty1cWqnyT21h+crLGNKwHPDkuhLQhdtn7H4PY2V6dfbRZP2ARybn3N26IdYztjd05x2vIU8EkA/sNP0i/uBn7c5DM5uwLMlYygxiLl+MguTwaCR1eMg5kw3BhDaYTzeghTD3YXjLwJzNZb5FB0mnQ9MBGJ6aWVe4e8ToPVlj8+uspufRUWlj+MAs494CyEqJhvDciAE9jdGOSoT7/qBhfAqhUNvso5TfHKUIrYQqC3LT/DNA9MischjXBsXBLpvUI5Om3GZHzbAQx89H3RMI1wG6UB2EItiCi7YLe+NJNFNkaEOZ02Y5TUc7SAyCvU6kiqX5iucjqCf4qVlyzcUMYeuabsLG0u7umjnBchb1pQ/tgoJ4Cyme7rX4DJY1PstZxqHDNBdOXqSujSkNrk0C7cAXOlAvhuin7VkzzDVWCEtdKks9y0jb5NyMpPvOAMPfGcw1qe/Xt6/jxmDiYF+b8CvhD5Suyu2Kupk8meVHv5IxsTRd0dNNhUp+ykkrIFqVKeomsL1y6J0S4nOOpdd/3b4HB9BMklfDzWqzCB8vqLIn+bswEk64P3sgPw+2oD8HUVY8f9siO0lWzCSU2GHPTdzTgKEi4shVlDx+o6Vqd8jtW1SWIl7M4Tjn3fA0zYukMAvP27+ikEOWTy4DrcOgWD1VDMqatN3Ulgd1LqO5bPcEQ3R4rfu0QD1KX/tPIajaFfqXJj5x6AMTVgzIuQYDsBaF/jLWBWcOvB7MKLqU4OPruoOkJnpTMhSuZsAefKZIuOyXQkm9NKDJfCTq4s6Uf82Jk+utoySF+S97OvwW/Uaj5ZfQB+DLXAfBTV8IjAtfDyDcN3605ZQMcmojxFKmZc/c18W3Xd0acJ+g02q1zZS0kZbOIxboNVb9JuDG+t8GDSAF9/0Vm8hsvq4bTJjDtwV+BjcS54ZG02Vpw2SZtc3czpODIcWJqaxJabqt2XyPj1LS+Fi1PnMaHjpJ/CxA1WzNCe00uAJuX5SM1ftOcGiM6nwH4RYqJ9QzyLRL+qhjNZSF3lqs6x9oNSoWPmTtLl+GTc4uTCFjTYuD3QW8eJq7z52NebICtlEXYrr8DIIUB7B6hwtvKzIGVtpw7fveLKkjsCWegm1JHRS9UnUQpLU1DWEBA+2SV1aAOMpTxkrPg5Hn2Mhz4NOO8B/v7PpUCwNMEoyBdSZT9OJXM80gUDPn2bnZYni/4lfBWbbFad2NGZ/AjFHKq1Y/QVNoYtqxubOimYco25BOw0E/pOm1um2doFxybC8Yl0PpX3Yya5NES4ReujjXGyGz+ZyQ3bdlRLVpACHF/z1s2j8kCCc9UDiGeK7w5Yjuj3q7D1Ak7tngwES43oTV57xsgmG7knJ6o8/DI+7cpQlhieJPHpjdHAZzMCNp/BIu66uqJRBDjNKIZYtemnvJslPjvAgiDvgIj7a5BF7xufRWGX7ZVUxk+2CZdLc+7HAJ1LqpAE1RsfvG9v2hmudwYHUMY5rXGud/VjDDt2gnrnSNEaId0tYofJbwEtTswugH3kZEWO5SVgFXcTVrylxjdFbNAS4iRudpnj4pw6YzmYHNqHkqh6zYcy4xhHqQwZK/yUB7xvkF4ac+THkL9UcvMDmAa0cIJcGmBiHBeaiS46G6EC20V/jFPo5N4GZLWMJ+G4G8Lw02UBTjpxu0Hju7o2GGJ4/VP3ekqYnjj3mpeBwaj7tgMoIpcAenC3l5qVW1Q5MU6xN81Nqg1uI+2uqi0bm7Fzq8+yi3MMP69Vg4oJdvDBqRNbnaCh+qdJ6MRk5cVSc2BvfP7yv0OyAzB457cTTujNwFndFTokew0lbDZpDxWI0ee9wzRHjFhpYoWbgcloUxyehEdfHcPb9hbnmFjRM04c57vDaZKCc6HBKBs3LDdBCrUzsOwA4oZSvEmX0BqswwvXAJ0NuRRdsJggh4++iV94AlKUq8XcSdjc8UkIZQ9tKpRPGixs+dgADzB9HOY/RLjp5itqPoJYOhNkWZWhVIxT5HKCtqZwcdBF18G9QRyHiQgxsMlnVR2b8D2pP20tajgsPi7A3vrF1I8x9Yc6x1OfAlazdwByG4C4iIQuDZjkaw4HIDf3i/6RcpLThJhmngV2l2wduCQtr+xEpVM3sWva3Ikgx70U0gDvBvmF5SVAIAtNJcocvV63rA4f2Scy+iclCtWEjU15cGGeJO3QLj6DuGZ7G1ZVG2ExF92JrzwFO9yPQR3ZB8Z52k8BJt+XwK3+JzNyEpNPERms08NCa7cYJ3hA5tKmttiMuRTluTTwNX4O8TpJ6iTtJXXFz5wdJ9bg1t0PAKTK00dehQngLjgvAVRrK0T4xslIj8yqbcLXbCaBrfY2K2NjlsQUO4kbMr6HPrp7H8bVn8VbeA//DSDvnb4M+SqsQx5/ClAvhTV6fG7yj61La27049IQdbnxqVeGGisFqhuDTAoenAV0V2xMG6LNWBNPP0nfXO5w/UPnDnALuGo+b2TfU3wnlzvpI3pkWBmuHPTJKhuDadU2XhBjDy6KNVdEa9FeY8fFGQ9d8tTGIY15/jDCyB0QoIVLBoTkgtdg7gM1n/oTF/DdySCQBaY4eMYDi+wJ6oRrNMWKU0HyxugOiFqTeu3KA43Nm92QdovX93YT9KmIwr+OanD7I6b+cHQJ5OlbNLhvQWJb86+gA8Z1F22SqqMbriyd+gBGmYKJm90jP/wizzj3gcNmve/5HYDgDsgHkJkoxdsIx6Mz2P8kfIAn2a9iBUDaw0+fi2FF2KppXpz0sdgxbgzCjjvxt01/dXCLj957oO/A2QEYvf7tpFsgLCgG/w9NjGZycTU0MdXlJD/H5hbjUQg+G2PssYuLXvvowwdfn8AH23cBbfrnH43yc5ixj0Fv1TpIiJ+SXZbvOBu/xRBX2WzzhDHBFmKolcu6dtdw9WB8srVP3IlXngN28cvgLl6uf4Gl/F2AidwB6pzMuWC7EUm89gOTiU+cjicN1i+vW80tp3ITbJw0RR/IE+J6KkyzMlZuLsUMHrZ8yo9YMeBrjMQezPoW4CWgYYpJ5a7aSfp1cvitOyfo27JTbIRFdHAaBhObskmLG0zYyOoO04IY1zy13TcKnR3Q5lMA2MuHfxp75VN4LgOi4ZNtf74MOUnIwCWDV/5e7uSlkbfCcRMuH2yrvBRlLgcO9xXqjIP/9lUeTLjFI3z8F+ualIvlptDJAAAAAElFTkSuQmCC"},function(t,e,r){"use strict";r.r(e);r(103),r(104),r(105),r(106),r(107),r(108),r(109)},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(e,r,n){"use strict";n.r(r);var o={};n.r(o),n.d(o,"OverlayType",function(){return _e}),n.d(o,"Overlay",function(){return Te}),n.d(o,"DivIcon",function(){return Fe}),n.d(o,"Model",function(){return pr}),n.d(o,"Tileset",function(){return Pr}),n.d(o,"AssaultDirection",function(){return $r}),n.d(o,"AttackArrow",function(){return un}),n.d(o,"ClosedCurve",function(){return gn}),n.d(o,"DoubleArrow",function(){return jn}),n.d(o,"FineArrow",function(){return Zr}),n.d(o,"GatheringPlace",function(){return Ln}),n.d(o,"Sector",function(){return Hn}),n.d(o,"SquadCombat",function(){return Qn}),n.d(o,"TailedAttackArrow",function(){return no}),n.d(o,"TailedSquadCombat",function(){return co}),n.d(o,"ArrowLine",function(){return Po}),n.d(o,"Billboard",function(){return Io}),n.d(o,"Box",function(){return Wo}),n.d(o,"Circle",function(){return Jo}),n.d(o,"Corridor",function(){return ui}),n.d(o,"Cylinder",function(){return di}),n.d(o,"DiffuseCircle",function(){return Ei}),n.d(o,"Ellipse",function(){return Ii}),n.d(o,"Ellipsoid",function(){return Wi}),n.d(o,"FlashPoint",function(){return Qi}),n.d(o,"Label",function(){return aa}),n.d(o,"Plane",function(){return ha}),n.d(o,"Point",function(){return Ke}),n.d(o,"Polygon",function(){return Fr}),n.d(o,"Polyline",function(){return Ca}),n.d(o,"PolylineVolume",function(){return Ma}),n.d(o,"Rectangle",function(){return Xa}),n.d(o,"ScanCircle",function(){return rs});var i={};n.r(i),n.d(i,"TRANSFORM",function(){return oj}),n.d(i,"TRANSITION",function(){return ij}),n.d(i,"TRANSITION_END",function(){return aj}),n.d(i,"get",function(){return sj}),n.d(i,"getStyle",function(){return uj}),n.d(i,"create",function(){return lj}),n.d(i,"remove",function(){return cj}),n.d(i,"empty",function(){return fj}),n.d(i,"toFront",function(){return pj}),n.d(i,"toBack",function(){return hj}),n.d(i,"hasClass",function(){return yj}),n.d(i,"addClass",function(){return dj}),n.d(i,"removeClass",function(){return vj}),n.d(i,"setClass",function(){return mj}),n.d(i,"getClass",function(){return bj}),n.d(i,"setOpacity",function(){return _j}),n.d(i,"testProp",function(){return gj}),n.d(i,"disableTextSelection",function(){return $T}),n.d(i,"enableTextSelection",function(){return tj}),n.d(i,"disableImageDrag",function(){return Oj}),n.d(i,"enableImageDrag",function(){return Pj}),n.d(i,"preventOutline",function(){return Cj}),n.d(i,"restoreOutline",function(){return Sj}),n.d(i,"getSizedParentNode",function(){return Ej}),n.d(i,"getScale",function(){return Tj});var a={};n.r(a),n.d(a,"on",function(){return xj}),n.d(a,"off",function(){return Rj}),n.d(a,"stopPropagation",function(){return Lj}),n.d(a,"disableScrollPropagation",function(){return Nj}),n.d(a,"disableClickPropagation",function(){return Fj}),n.d(a,"preventDefault",function(){return Bj}),n.d(a,"stop",function(){return Wj}),n.d(a,"getPropagationPath",function(){return Gj}),n.d(a,"getMousePosition",function(){return zj}),n.d(a,"getWheelPxFactor",function(){return Hj}),n.d(a,"getWheelDelta",function(){return Uj}),n.d(a,"isExternalTarget",function(){return Vj}),n.d(a,"addListener",function(){return xj}),n.d(a,"removeListener",function(){return Rj});var s=window.Chrtc=window.Chrtc||{};function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach(function(e){f(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={ADD:"add",REMOVE:"remove"},h={LEFT_DOWN:Cesium.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:Cesium.ScreenSpaceEventType.LEFT_UP,CLICK:Cesium.ScreenSpaceEventType.LEFT_CLICK,RIGHT_DOWN:Cesium.ScreenSpaceEventType.RIGHT_DOWN,RIGHT_UP:Cesium.ScreenSpaceEventType.RIGHT_UP,RIGHT_CLICK:Cesium.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:Cesium.ScreenSpaceEventType.MOUSE_MOVE,WHEEL:Cesium.ScreenSpaceEventType.WHEEL,MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout"},y={ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_EFFECT:"addEffect",REMOVE_EFFECT:"removeEffect",LEFT_DOWN:Cesium.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:Cesium.ScreenSpaceEventType.LEFT_UP,CLICK:Cesium.ScreenSpaceEventType.LEFT_CLICK,RIGHT_DOWN:Cesium.ScreenSpaceEventType.RIGHT_DOWN,RIGHT_UP:Cesium.ScreenSpaceEventType.RIGHT_UP,RIGHT_CLICK:Cesium.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:Cesium.ScreenSpaceEventType.MOUSE_MOVE,WHEEL:Cesium.ScreenSpaceEventType.WHEEL},d="cameraMoveEnd",v="cameraChanged",m="preUpdate",b="postUpdate",_="preRender",g="postRender",w="morphComplete",O="clockTick",P="renderError",C=c(c({},p),{},{LEFT_DOWN:Cesium.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:Cesium.ScreenSpaceEventType.LEFT_UP,CLICK:Cesium.ScreenSpaceEventType.LEFT_CLICK,RIGHT_DOWN:Cesium.ScreenSpaceEventType.RIGHT_DOWN,RIGHT_UP:Cesium.ScreenSpaceEventType.RIGHT_UP,RIGHT_CLICK:Cesium.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,MOUSE_MOVE:Cesium.ScreenSpaceEventType.MOUSE_MOVE,MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",POSITION_UPDATE:"positionUpdate"}),S=c(c({},p),{},{LEFT_DOWN:Cesium.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:Cesium.ScreenSpaceEventType.LEFT_UP,CLICK:Cesium.ScreenSpaceEventType.LEFT_CLICK,RIGHT_DOWN:Cesium.ScreenSpaceEventType.RIGHT_DOWN,RIGHT_UP:Cesium.ScreenSpaceEventType.RIGHT_UP,RIGHT_CLICK:Cesium.ScreenSpaceEventType.RIGHT_CLICK,DB_CLICK:Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK}),E=c(c({},p),{},{POST_RENDER:"postRender",ACTIVATE:"activate",DEACTIVATE:"deactivate",RESET_TIME_LINE:"restTimeLine"}),T=(c(c({},p),{},{POST_RENDER:"postRender",RESET_TIME_LINE:"restTimeLine"}),{DRAW_START:"drawStart",DRAW_STOP:"drawStop",EDIT_START:"editStart",EDIT_STOP:"editEnd",DRAW_ANCHOR:"drawAnchor",CREATE_ANCHOR:"createAnchor",UPDATE_ANCHOR:"updateAnchor",ANCHOR_MOVING:"anchorMoving",EDIT_ANCHOR_STOP:"editAnchorStop",CLEAR_ANCHOR:"clearAnchor"});function j(t){"@babel/helpers - typeof";return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===j(i=function(t,e){if("object"!==j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cache={},this._registerEvent()}var e,r,n;return e=t,(r=[{key:"_registerEvent",value:function(){}},{key:"_on",value:function(t,e,r){var n=this.getEvent(t),o=void 0;return n&&e&&(o=n.addEventListener(e,r||this)),o}},{key:"_off",value:function(t,e,r){var n=this.getEvent(t),o=!1;return n&&e&&(o=n.removeEventListener(e,r||this)),o}},{key:"_fire",value:function(t,e){var r=this.getEvent(t);r&&r.raiseEvent(e)}},{key:"on",value:function(t,e,r){return this._on(t,e,r)}},{key:"once",value:function(t,e,r){var n=this._on(t,function(t){e(t),n&&n()},r)}},{key:"off",value:function(t,e,r){return this._off(t,e,r)}},{key:"fire",value:function(t,e){this._fire(t,e)}},{key:"getEvent",value:function(t){return this._cache[t]||void 0}}])&&x(e.prototype,r),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t){"@babel/helpers - typeof";return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach(function(e){M(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function M(t,e,r){return(e=N(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function N(t){var e=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===R(e)?e:String(e)}function F(t,e){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=G(t);if(e){var o=G(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return W(t)}(this,r)}}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(i,A);var e,r,n,o=B(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).map3d=t,e._viewer=t.viewer,e._selected=void 0,e._setInputAction(),e.on(h.LEFT_DOWN,e._leftDownHandler,W(e)),e.on(h.LEFT_UP,e._leftUpHandler,W(e)),e.on(h.CLICK,e._clickHandler,W(e)),e.on(h.DB_CLICK,e._dbClickHandler,W(e)),e.on(h.RIGHT_DOWN,e._rightDownHandler,W(e)),e.on(h.RIGHT_UP,e._rightUpHandler,W(e)),e.on(h.RIGHT_CLICK,e._rightClickHandler,W(e)),e.on(h.MOUSE_MOVE,e._mouseMoveHandler,W(e)),e.on(h.WHEEL,e._mouseWheelHandler,W(e)),e}return e=i,(r=[{key:"_setInputAction",value:function(){var t=this,e=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas);Object.keys(Cesium.ScreenSpaceEventType).forEach(function(r){var n=Cesium.ScreenSpaceEventType[r];t._cache[n]=new Cesium.Event,e.setInputAction(function(e){t._cache[n].raiseEvent(e)},n)})}},{key:"_getMouseInfo",value:function(t){var e=this._viewer.scene,r=e.pick(t),n=void 0,o=void 0,i=void 0,a=void 0;if(e.pickPositionSupported&&(n=e.pickPosition(t)),n){var s=Cesium.Ellipsoid.WGS84.cartesianToCartographic(n);s&&(i={lng:Cesium.Math.toDegrees(s.longitude),lat:Cesium.Math.toDegrees(s.latitude),alt:s.height})}if(e.mode!==Cesium.SceneMode.SCENE3D||this._viewer.terrainProvider instanceof Cesium.EllipsoidTerrainProvider)o=e.camera.pickEllipsoid(t,Cesium.Ellipsoid.WGS84);else{var u=e.camera.getPickRay(t);o=e.globe.pick(u,e)}if(o){var l=Cesium.Ellipsoid.WGS84.cartesianToCartographic(o);l&&(a={lng:Cesium.Math.toDegrees(l.longitude),lat:Cesium.Math.toDegrees(l.latitude),alt:l.height})}return{target:r,windowPosition:t,position:n,wgs84Position:i,surfacePosition:o,wgs84SurfacePosition:a}}},{key:"_getDrillInfos",value:function(t){var e=this,r=[],n=this._viewer.scene.drillPick(t);return n&&n.length&&n.forEach(function(t){r.push(e._getTargetInfo(t))}),r}},{key:"_getOverlayId",value:function(t){var e=void 0;return(null===t||void 0===t?void 0:t.id)instanceof Cesium.Entity?e=t.id.overlayId:t instanceof Cesium.Cesium3DTileFeature?e=t.tileset.overlayId:(null===t||void 0===t?void 0:t.primitive)instanceof Cesium.Cesium3DTileset?e=t.primitive.overlayId:null!==t&&void 0!==t&&t.primitive&&(e=t.primitive.overlayId),e}},{key:"_getTargetInfo",value:function(t){var e,r=void 0,n=void 0,o=void 0;if((null===t||void 0===t?void 0:t.id)instanceof Cesium.Entity)null!==(e=n=this.map3d.getLayers().filter(function(e){return e.layerId===t.id.layerId})[0])&&void 0!==e&&e.getOverlay&&(r=n.getOverlay(t.id.overlayId));else if(t instanceof Cesium.Cesium3DTileFeature){var i;if(n=this.map3d.getLayers().filter(function(e){return e.layerId===t.tileset.layerId})[0],o=t,null!==(i=n)&&void 0!==i&&i.getOverlay)if(r=n.getOverlay(t.tileset.overlayId),o&&o.getPropertyNames)o.getPropertyNames().forEach(function(t){r.attr[t]=o.getProperty(t)})}else if((null===t||void 0===t?void 0:t.primitive)instanceof Cesium.Cesium3DTileset){var a;null!==(a=n=this.map3d.getLayers().filter(function(e){return e.layerId===t.primitive.layerId})[0])&&void 0!==a&&a.getOverlay&&(r=n.getOverlay(t.primitive.overlayId))}else if(null!==t&&void 0!==t&&t.primitive){var s;null!==(s=n=this.map3d.getLayers().filter(function(e){return e.layerId===t.primitive.layerId})[0])&&void 0!==s&&s.getOverlay&&(r=n.getOverlay(t.primitive.overlayId))}return{layer:n,overlay:r,feature:o,instanceId:null===t||void 0===t?void 0:t.instanceId}}},{key:"_raiseEvent",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,o=this._getTargetInfo(r.target),i=null===o||void 0===o?void 0:o.overlay,a=null===o||void 0===o?void 0:o.layer;(null!==i&&void 0!==i&&i.overlayEvent&&(n=i.overlayEvent.getEvent(t)),n&&0!==n.numberOfListeners||null===a||void 0===a||!a.layerEvent||(n=a.layerEvent.getEvent(t)),n&&0!==n.numberOfListeners||null===(e=this.map3d)||void 0===e||!e._viewerEvent||(n=this.map3d._viewerEvent.getEvent(t)),n&&n.numberOfListeners>0&&n.raiseEvent(I(I({},o),r)),null!==i&&void 0!==i&&i.allowDrillPicking)&&this._getDrillInfos(r.windowPosition).forEach(function(e){var o=null===e||void 0===e?void 0:e.overlay,a=null===e||void 0===e?void 0:e.layer;(null===o||void 0===o?void 0:o.overlayId)!==i.overlayId&&null!==o&&void 0!==o&&o.overlayEvent&&((n=o.overlayEvent.getEvent(t))&&0!==n.numberOfListeners||null===a||void 0===a||!a.layerEvent||(n=a.layerEvent.getEvent(t)),n&&n.numberOfListeners>0&&n.raiseEvent(I(I({},e),r)))})}},{key:"_clickHandler",value:function(t){if(null===t||void 0===t||!t.position)return!1;var e=this._getMouseInfo(t.position);this._raiseEvent(h.CLICK,e)}},{key:"_dbClickHandler",value:function(t){if(null===t||void 0===t||!t.position)return!1;var e=this._getMouseInfo(t.position);this._raiseEvent(h.DB_CLICK,e)}},{key:"_rightClickHandler",value:function(t){if(null===t||void 0===t||!t.position)return!1;var e=this._getMouseInfo(t.position);this._raiseEvent(h.RIGHT_CLICK,e)}},{key:"_mouseMoveHandler",value:function(t){if(null===t||void 0===t||!t.endPosition)return!1;var e=this._getMouseInfo(t.endPosition);this._raiseEvent(h.MOUSE_MOVE,e),this._selected&&this._getOverlayId(this._selected.target)===this._getOverlayId(e.target)||(this._raiseEvent(h.MOUSE_OUT,this._selected),this._raiseEvent(h.MOUSE_OVER,e),this._selected=e)}},{key:"_leftDownHandler",value:function(t){if(null===t||void 0===t||!t.position)return!1;var e=this._getMouseInfo(t.position);this._raiseEvent(h.LEFT_DOWN,e)}},{key:"_leftUpHandler",value:function(t){this._raiseEvent(h.LEFT_UP,{movement:t})}},{key:"_rightDownHandler",value:function(t){if(null===t||void 0===t||!t.position)return!1;var e=this._getMouseInfo(t.position);this._raiseEvent(h.RIGHT_DOWN,e)}},{key:"_rightUpHandler",value:function(t){this._raiseEvent(h.RIGHT_UP,{movement:t})}},{key:"_mouseWheelHandler",value:function(t){this._raiseEvent(h.WHEEL,{movement:t})}}])&&D(e.prototype,r),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function H(t){"@babel/helpers - typeof";return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===H(i=function(t,e){if("object"!==H(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function V(t,e){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Y(t);if(e){var o=Y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(i,A);var e,r,n,o=Z(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(r=[{key:"_registerEvent",value:function(){var t=this;Object.keys(y).forEach(function(e){var r=y[e];t._cache[r]=new Cesium.Event})}}])&&U(e.prototype,r),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function K(t){"@babel/helpers - typeof";return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===K(i=function(t,e){if("object"!==K(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function q(t,e){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$(t);if(e){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(i,A);var e,r,n,o=J(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._camera=t.viewer.camera,e._scene=t.viewer.scene,e._clock=t.viewer.clock,e}return e=i,(r=[{key:"on",value:function(t,e,r){var n=void 0;switch(t){case d:n=this._camera.moveEnd.addEventListener(e,r||this);break;case v:n=this._camera.changed.addEventListener(e,r||this);break;case m:n=this._scene.preUpdate.addEventListener(e,r||this);break;case b:n=this._scene.postUpdate.addEventListener(e,r||this);break;case _:n=this._scene.preRender.addEventListener(e,r||this);break;case g:n=this._scene.postRender.addEventListener(e,r||this);break;case w:n=this._scene.morphComplete.addEventListener(e,r||this);break;case O:n=this._clock.onTick.addEventListener(e,r||this);break;case P:n=this._scene.renderError.addEventListener(e,r||this)}return n}},{key:"off",value:function(t,e,r){var n=!1;switch(t){case d:n=this._camera.moveEnd.removeEventListener(e,r||this);break;case v:n=this._camera.changed.removeEventListener(e,r||this);break;case m:n=this._scene.preUpdate.removeEventListener(e,r||this);break;case b:n=this._scene.postUpdate.removeEventListener(e,r||this);break;case _:n=this._scene.preRender.removeEventListener(e,r||this);break;case g:n=this._scene.postRender.removeEventListener(e,r||this);break;case w:n=this._scene.morphComplete.removeEventListener(e,r||this);break;case O:n=this._clock.onTick.removeEventListener(e,r||this);break;case P:n=this._scene.renderError.removeEventListener(e,r||this)}return n}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function et(t){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===et(i=function(t,e){if("object"!==et(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function nt(t,e){return(nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=it(t);if(e){var o=it(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nt(t,e)}(i,A);var e,r,n,o=ot(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(r=[{key:"_registerEvent",value:function(){var t=this;Object.keys(S).forEach(function(e){var r=S[e];t._cache[r]=new Cesium.Event})}}])&&rt(e.prototype,r),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function st(t){"@babel/helpers - typeof";return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===st(i=function(t,e){if("object"!==st(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function lt(t,e){return(lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ft(t);if(e){var o=ft(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(i,A);var e,r,n,o=ct(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(r=[{key:"_registerEvent",value:function(){var t=this;Object.keys(C).forEach(function(e){var r=C[e];t._cache[r]=new Cesium.Event})}}])&&ut(e.prototype,r),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ht(t){"@babel/helpers - typeof";return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ht(i=function(t,e){if("object"!==ht(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function dt(t,e){return(dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mt(t);if(e){var o=mt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(i,A);var e,r,n,o=vt(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(r=[{key:"_registerEvent",value:function(){var t=this;Object.keys(E).forEach(function(e){var r=E[e];t._cache[r]=new Cesium.Event})}}])&&yt(e.prototype,r),n&&yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _t(t){"@babel/helpers - typeof";return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===_t(i=function(t,e){if("object"!==_t(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pt(t);if(e){var o=Pt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(i,A);var e,r,n,o=Ot(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(r=[{key:"_registerEvent",value:function(){var t=this;Object.keys(T).forEach(function(e){var r=T[e];t._cache[r]=new Cesium.Event})}}])&&gt(e.prototype,r),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function St(t){"@babel/helpers - typeof";return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===St(i=function(t,e){if("object"!==St(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Tt=n(4),jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=e,this.mouseEventJson={},this.baseEventType={LEFT_CLICK:Tt.ScreenSpaceEventType.LEFT_CLICK,LEFT_DOUBLE_CLICK:Tt.ScreenSpaceEventType.LEFT_DOUBLE_CLICK,LEFT_DOWN:Tt.ScreenSpaceEventType.LEFT_DOWN,LEFT_UP:Tt.ScreenSpaceEventType.LEFT_UP,MIDDLE_CLICK:Tt.ScreenSpaceEventType.MIDDLE_CLICK,MIDDLE_DOUBLE_CLICK:Tt.ScreenSpaceEventType.MIDDLE_DOUBLE_CLICK,MIDDLE_DOWN:Tt.ScreenSpaceEventType.MIDDLE_DOWN,MIDDLE_UP:Tt.ScreenSpaceEventType.MIDDLE_UP,MOUSE_MOVE:Tt.ScreenSpaceEventType.MOUSE_MOVE,RIGHT_CLICK:Tt.ScreenSpaceEventType.RIGHT_CLICK,RIGHT_DOUBLE_CLICK:Tt.ScreenSpaceEventType.RIGHT_DOUBLE_CLICK,RIGHT_DOWN:Tt.ScreenSpaceEventType.RIGHT_DOWN,RIGHT_UP:Tt.ScreenSpaceEventType.RIGHT_UP,WHEEL:Tt.ScreenSpaceEventType.WHEEL}}var e,r,n;return e=t,(r=[{key:"mouseEvent",value:function(t,e){this.mouseEventJson[t.eventType]&&(this.mouseEventJson[t.eventType].destroy(),this.mouseEventJson[t.eventType]=void 0),this.mouseEventJson[t.eventType]=new Tt.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.mouseEventJson[t.eventType].setInputAction(function(t){e&&e(t)},this.baseEventType[t.eventType])}},{key:"mouseEventDestroy",value:function(t,e){this.mouseEventJson[t.eventType]&&(this.mouseEventJson[t.eventType].destroy(),this.mouseEventJson[t.eventType]=null),e&&e()}},{key:"mouseEventRemoveAll",value:function(t){for(var e in this.mouseEventJson)this.mouseEventJson[e]&&(this.mouseEventJson[e].destroy(),this.mouseEventJson[e]=null);t&&t()}}])&&Et(e.prototype,r),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();n(4);function xt(t){"@babel/helpers - typeof";return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===xt(i=function(t,e){if("object"!==xt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=e}var e,r,n;return e=t,(r=[{key:"preRender",value:function(t){this.viewer.scene.preRender.addEventListener(t)}},{key:"preRenderRemove",value:function(t){this.viewer.scene.preRender.removeEventListener(t)}}])&&At(e.prototype,r),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kt(t){"@babel/helpers - typeof";return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===kt(i=function(t,e){if("object"!==kt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=e,this.rotate=null,this._center=null,this._range=null,this._speed=null,this._moveHeading=null,this._movePitch=null,this._entity=null,this._type=null}var e,r,n;return e=t,(r=[{key:"add",value:function(t){var e=this;this.close();var r=this.viewer;this._center=t.center||this._getCenter(),this._range=t.range||this._getRange(),this._speed=t.speed||1,this._type=t.type||"right",this._moveHeading=t.heading||Cesium.Math.toDegrees(r.scene.camera.heading),this._movePitch=t.pitch||Cesium.Math.toDegrees(r.scene.camera.pitch),this._entity=r.entities.add({position:Cesium.Cartesian3.fromDegrees(this._center[0],this._center[1],this._center[2]),point:{color:Cesium.Color.RED.withAlpha(0),pixelSize:1}});var n=new Cesium.HeadingPitchRange(Cesium.Math.toRadians(this._moveHeading),Cesium.Math.toRadians(this._movePitch),this._range);r.zoomTo(this._entity,n).then(function(){r.scene.preRender.addEventListener(e._rotate,e)})}},{key:"_rotate",value:function(){var t=new Cesium.HeadingPitchRange(Cesium.Math.toRadians(this._moveHeading),Cesium.Math.toRadians(this._movePitch),this._range);"right"==this._type?this._moveHeading-=this._speed:"left"==this._type&&(this._moveHeading+=this._speed),this.viewer.zoomTo(this._entity,t),this.viewer.scene.screenSpaceCameraController.enableInputs=!1}},{key:"close",value:function(){this._entity&&this.viewer.entities.remove(this._entity),this.viewer.scene.preRender.removeEventListener(this._rotate,this),this.viewer.scene.screenSpaceCameraController.enableInputs=!0}},{key:"_getCenter",value:function(){var t=[.5*this._getCanvas().width,.5*this._getCanvas().height];return this._screenPos(t[0],t[1])}},{key:"_getCanvas",value:function(){return("string"===this.viewer.container?document.getElementById(this.viewer.container):this.viewer.container).querySelector("canvas")}},{key:"_getRange",value:function(){var t=this.viewer.scene.camera,e=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t.position),r=Cesium.Math.toDegrees(e.latitude),n=Cesium.Math.toDegrees(e.longitude),o=e.height,i=this._getCenter();return Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(n,r,o),Cesium.Cartesian3.fromDegrees(i[0],i[1],2))}},{key:"_screenPos",value:function(t,e){var r=this.viewer,n=new Cesium.Cartesian2(t,e);if(!n)return!1;var o=r.scene.globe.pick(r.camera.getPickRay(n),r.scene);if(o){var i=r.scene.globe.ellipsoid,a=new Cesium.Cartesian3(o.x,o.y,o.z),s=i.cartesianToCartographic(a),u=Cesium.Math.toDegrees(s.latitude);return[Cesium.Math.toDegrees(s.longitude),u,s.height]}}}])&&It(e.prototype,r),n&&It(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Dt={INITIALIZED:"initialized",ADDED:"added",REMOVED:"removed",CLEARED:"cleared",INSTALLED:"installed",ENABLED:"enabled",DISABLED:"disabled",PLAY:"play",PAUSE:"pause",RESTORE:"restore"};function Lt(t){"@babel/helpers - typeof";return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Lt(i=function(t,e){if("object"!==Lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Ft="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"uuid",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"D",r=[];r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(var n=0;n<36;n++)r[n]||(t=0|16*Math.random(),r[n]=Ft[19===n?3&t|8:t]);return e+"-"+r.join("")}},{key:"merge",value:function(t){for(var e,r,n,o,i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];for(r=0,n=a.length;r<n;r++)for(e in o=a[r])t[e]=o[e];return t}},{key:"splitWords",value:function(t){return this.trim(t).split(/\s+/)}},{key:"setOptions",value:function(t,e){for(var r in t.hasOwnProperty("options")||(t.options=t.options?Object.create(t.options):{}),e)t.options[r]=e[r];return t.options}},{key:"formatNum",value:function(t,e){var r=Math.pow(10,void 0===e?6:e);return Math.round(t*r)/r}},{key:"trim",value:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}},{key:"emptyImageUrl",value:function(){return"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}},{key:"checkPosition",value:function(t){return t&&t.hasOwnProperty("_lng")&&t.hasOwnProperty("_lat")&&t.hasOwnProperty("_alt")}},{key:"debounce",value:function(t,e){var r=null;return function(){r&&clearTimeout(r),r=setTimeout(t,e)}}},{key:"throttle",value:function(t,e){var r=!0;return function(){if(!r)return!1;r=!1,setTimeout(function(){t(),r=!0},e)}}},{key:"dataURLtoBlob",value:function(t){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return new Blob([i],{type:r})}}],(r=null)&&Nt(e.prototype,r),n&&Nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wt(t){"@babel/helpers - typeof";return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Wt(i=function(t,e){if("object"!==Wt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"get",value:function(t){return"string"==typeof t?document.getElementById(t):t}},{key:"getStyle",value:function(t,e){var r=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!r||"auto"===r)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);r=n?n[e]:null}return"auto"===r?null:r}},{key:"create",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=document.createElement(t);return n.className=e||"",r&&r.appendChild(n),n}},{key:"remove",value:function(t){var e=t.parentNode;e&&e.removeChild(t)}},{key:"empty",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"hasClass",value:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var r=this.getClass(t);return r.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(r)}},{key:"addClass",value:function(t,e){if(void 0!==t.classList)for(var r=Bt.splitWords(e),n=0,o=r.length;n<o;n++)t.classList.add(r[n]);else if(!this.hasClass(t,e)){var i=this.getClass(t);this.setClass(t,(i?i+" ":"")+e)}}},{key:"removeClass",value:function(t,e){void 0!==t.classList?t.classList.remove(e):this.setClass(t,Bt.trim((" "+this.getClass(t)+" ").replace(" "+e+" "," ")))}},{key:"setClass",value:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}},{key:"getClass",value:function(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}},{key:"createSvg",value:function(t,e,r,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");o.setAttribute("class","svg-path"),o.setAttribute("width",t),o.setAttribute("height",e),o.setAttribute("viewBox","0 0 ".concat(t," ").concat(e));var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",r),o.appendChild(i),n&&n.appendChild(o),o}},{key:"parseDom",value:function(t,e,r){var n;e=null!==(n=e)&&void 0!==n&&n;var o=document.createElement("div");return o.className=r||"",o.innerHTML=t,e?o:o.childNodes}},{key:"enterFullscreen",value:function(t){t&&(t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"createVideo",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.create("video",e,r),o=this.create("source","",n);o.setAttribute("src",t),o.setAttribute("type","video/map4");var i=this.create("source","",n);return i.setAttribute("src",t),i.setAttribute("type","video/quicktime"),n}}],(r=null)&&Gt(e.prototype,r),n&&Gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t){"@babel/helpers - typeof";return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Ht(i=function(t,e){if("object"!==Ht(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Vt=2*Math.PI,Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"wholeDistance",value:function(t){for(var e=0,r=0;r<t.length-1;r++)e+=this.distance(t[r],t[r+1]);return e}},{key:"getBaseLength",value:function(t){return Math.pow(this.wholeDistance(t),.99)}},{key:"mid",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},{key:"getCircleCenterOfThreePoints",value:function(t,e,r){var n=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=[n[0]-t[1]+e[1],n[1]+t[0]-e[0]],i=[(t[0]+r[0])/2,(t[1]+r[1])/2],a=[i[0]-t[1]+r[1],i[1]+t[0]-r[0]];return this.getIntersectPoint(n,o,i,a)}},{key:"getIntersectPoint",value:function(t,e,r,n){var o,i,a;return t[1]===e[1]?[(i=(n[0]-r[0])/(n[1]-r[1]))*(t[1]-r[1])+r[0],o=t[1]]:r[1]===n[1]?[(a=(e[0]-t[0])/(e[1]-t[1]))*(r[1]-t[1])+t[0],o=r[1]]:(a=(e[0]-t[0])/(e[1]-t[1]),i=(n[0]-r[0])/(n[1]-r[1]),[a*(o=(a*t[1]-t[0]-i*r[1]+r[0])/(a-i))-a*t[1]+t[0],o])}},{key:"getAzimuth",value:function(t,e){var r,n=Math.asin(Math.abs(e[1]-t[1])/this.distance(t,e));return e[1]>=t[1]&&e[0]>=t[0]?r=n+Math.PI:e[1]>=t[1]&&e[0]<t[0]?r=Vt-n:e[1]<t[1]&&e[0]<t[0]?r=n:e[1]<t[1]&&e[0]>=t[0]&&(r=Math.PI-n),r}},{key:"getAngleOfThreePoints",value:function(t,e,r){var n=this.getAzimuth(e,t)-this.getAzimuth(e,r);return n<0?n+Vt:n}},{key:"isClockWise",value:function(t,e,r){return(r[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(r[0]-t[0])}},{key:"getPointOnLine",value:function(t,e,r){return[e[0]+t*(r[0]-e[0]),e[1]+t*(r[1]-e[1])]}},{key:"getCubicValue",value:function(t,e,r,n,o){var i=1-(t=Math.max(Math.min(t,1),0)),a=t*t,s=a*t,u=i*i,l=u*i;return[l*e[0]+3*u*t*r[0]+3*i*a*n[0]+s*o[0],l*e[1]+3*u*t*r[1]+3*i*a*n[1]+s*o[1]]}},{key:"getThirdPoint",value:function(t,e,r,n,o){var i=this.getAzimuth(t,e),a=o?i+r:i-r,s=n*Math.cos(a),u=n*Math.sin(a);return[e[0]+s,e[1]+u]}},{key:"getArcPoints",value:function(t,e,r,n){var o,i,a=[],s=n-r;s=s<0?s+Vt:s;for(var u=0;u<=100;u++){var l=r+s*u/100;o=t[0]+e*Math.cos(l),i=t[1]+e*Math.sin(l),a.push([o,i])}return a}},{key:"getBisectorNormals",value:function(t,e,r,n){var o,i,a,s=this.getNormal(e,r,n),u=Math.sqrt(s[0]*s[0]+s[1]*s[1]),l=s[0]/u,c=s[1]/u,f=this.distance(e,r),p=this.distance(r,n);return u>1e-4?this.isClockWise(e,r,n)?(o=t*f,a=[r[0]-o*c,r[1]+o*l],o=t*p,i=[r[0]+o*c,r[1]-o*l]):(o=t*f,a=[r[0]+o*c,r[1]-o*l],o=t*p,i=[r[0]-o*c,r[1]+o*l]):(a=[r[0]+t*(e[0]-r[0]),r[1]+t*(e[1]-r[1])],i=[r[0]+t*(n[0]-r[0]),r[1]+t*(n[1]-r[1])]),[a,i]}},{key:"getNormal",value:function(t,e,r){var n=t[0]-e[0],o=t[1]-e[1],i=Math.sqrt(n*n+o*o);n/=i,o/=i;var a=r[0]-e[0],s=r[1]-e[1],u=Math.sqrt(a*a+s*s);return[n+(a/=u),o+(s/=u)]}},{key:"getCurvePoints",value:function(t,e){for(var r,n,o,i,a=[this.getLeftMostControlPoint(t,e)],s=0;s<e.length-2;s++)r=e[s],n=e[s+1],o=e[s+2],i=this.getBisectorNormals(t,r,n,o),a=a.concat(i);var u=this.getRightMostControlPoint(t,e);a.push(u);for(var l=[],c=0;c<e.length-1;c++){r=e[c],n=e[c+1],l.push(r);for(var f=0;f<100;f++){var p=this.getCubicValue(f/100,r,a[2*c],a[2*c+1],n);l.push(p)}l.push(n)}return l}},{key:"getLeftMostControlPoint",value:function(t,e){var r,n,o=e[0],i=e[1],a=e[2],s=this.getBisectorNormals(0,o,i,a)[0],u=this.getNormal(o,i,a);if(Math.sqrt(u[0]*u[0]+u[1]*u[1])>1e-4){var l=this.mid(o,i),c=o[0]-l[0],f=o[1]-l[1],p=2/this.distance(o,i),h=-p*f,y=p*c,d=h*h-y*y,v=2*h*y,m=y*y-h*h,b=s[0]-l[0],_=s[1]-l[1];r=l[0]+d*b+v*_,n=l[1]+v*b+m*_}else r=o[0]+t*(i[0]-o[0]),n=o[1]+t*(i[1]-o[1]);return[r,n]}},{key:"getRightMostControlPoint",value:function(t,e){var r,n,o=e.length,i=e[o-3],a=e[o-2],s=e[o-1],u=this.getBisectorNormals(0,i,a,s)[1],l=this.getNormal(i,a,s);if(Math.sqrt(l[0]*l[0]+l[1]*l[1])>1e-4){var c=this.mid(a,s),f=s[0]-c[0],p=s[1]-c[1],h=2/this.distance(a,s),y=-h*p,d=h*f,v=y*y-d*d,m=2*y*d,b=d*d-y*y,_=u[0]-c[0],g=u[1]-c[1];r=c[0]+v*_+m*g,n=c[1]+m*_+b*g}else r=s[0]+t*(a[0]-s[0]),n=s[1]+t*(a[1]-s[1]);return[r,n]}},{key:"getBezierPoints",value:function(t){if(t.length<=2)return t;for(var e=[],r=t.length-1,n=0;n<=1;n+=.01){for(var o=0,i=0,a=0;a<=r;a++){var s=this.getBinomialFactor(r,a),u=Math.pow(n,a),l=Math.pow(1-n,r-a);o+=s*u*l*t[a][0],i+=s*u*l*t[a][1]}e.push([o,i])}return e.push(t[r]),e}},{key:"getBinomialFactor",value:function(t,e){return this.getFactorial(t)/(this.getFactorial(e)*this.getFactorial(t-e))}},{key:"getFactorial",value:function(t){if(t<=1)return 1;if(2===t)return 2;if(3===t)return 6;if(4===t)return 24;if(5===t)return 120;for(var e=1,r=1;r<=t;r++)e*=r;return e}},{key:"getQBSplinePoints",value:function(t){if(t.length<=2)return t;var e=[],r=t.length-2-1;e.push(t[0]);for(var n=0;n<=r;n++)for(var o=0;o<=1;o+=.05){for(var i=0,a=0,s=0;s<=2;s++){var u=this.getQuadricBSplineFactor(s,o);i+=u*t[n+s][0],a+=u*t[n+s][1]}e.push([i,a])}return e.push(t[t.length-1]),e}},{key:"getQuadricBSplineFactor",value:function(t,e){return 0===t?Math.pow(e-1,2)/2:1===t?(-2*Math.pow(e,2)+2*e+1)/2:2===t?Math.pow(e,2)/2:0}}],(r=null)&&Ut(e.prototype,r),n&&Ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yt(t){"@babel/helpers - typeof";return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Yt(i=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Kt=function(){function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._lng=+e||0,this._lat=+r||0,this._alt=+n||0,this._heading=+o||0,this._pitch=+i||0,this._roll=+a||0}var e,r,n;return e=t,n=[{key:"fromArray",value:function(e){var r=new t;return Array.isArray(e)&&(r.lng=e[0]||0,r.lat=e[1]||0,r.alt=e[2]||0,r.heading=e[3]||0,r.pitch=e[4]||0,r.roll=e[5]||0),r}},{key:"fromString",value:function(e){var r=new t;if(e&&"string"==typeof e){var n=e.split(",");r=this.fromArray(n)}return r}},{key:"fromObject",value:function(e){return new t(e.lng,e.lat,e.alt,e.heading,e.pitch,e.roll)}},{key:"deserialize",value:function(e){var r=new t,n=JSON.parse(e);return n&&(r.lng=n.lng||0,r.lat=n.lat||0,r.alt=n.alt||0,r.heading=n.heading||0,r.pitch=n.pitch||0,r.roll=n.roll||0),r}}],(r=[{key:"lng",get:function(){return this._lng},set:function(t){this._lng=+t}},{key:"lat",get:function(){return this._lat},set:function(t){this._lat=+t}},{key:"alt",get:function(){return this._alt},set:function(t){this._alt=+t}},{key:"heading",get:function(){return this._heading},set:function(t){this._heading=+t}},{key:"pitch",get:function(){return this._pitch},set:function(t){this._pitch=+t}},{key:"roll",get:function(){return this._roll},set:function(t){this._roll=+t}},{key:"serialize",value:function(){var e=new t(this._lng,this._lat,this._alt,this._heading,this._pitch,this._roll);return JSON.stringify(e)}},{key:"distance",value:function(e){return e&&e instanceof t?Cesium.Cartesian3.distance($t.transformWGS84ToCartesian(this),$t.transformWGS84ToCartesian(e)):0}},{key:"clone",value:function(){var e=new t;return e.lng=this.lng||0,e.lat=this.lat||0,e.alt=this.alt||0,e.heading=this.heading||0,e.pitch=this.pitch||0,e.roll=this.roll||0,e}},{key:"copy",value:function(){return this.clone()}},{key:"toArray",value:function(){return[this.lng,this.lat,this.alt,this.heading,this.pitch,this.roll]}},{key:"toString",value:function(){return"".concat(this.lng,",").concat(this.lat,",").concat(this.alt,",").concat(this.heading,",").concat(this.pitch,",").concat(this.roll)}},{key:"toObject",value:function(){return{lng:this.lng,lat:this.lat,alt:this.alt,heading:this.heading,pitch:this.pitch,roll:this.roll}}}])&&Xt(e.prototype,r),n&&Xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qt(t){"@babel/helpers - typeof";return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Qt(i=function(t,e){if("object"!==Qt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Jt=new Cesium.WebMercatorProjection,$t=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"transformCartesianToWGS84",value:function(t){if(t){var e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t);return new Kt(Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height)}return new Kt(0,0)}},{key:"transformWGS84ToCartesian",value:function(t){return t?Cesium.Cartesian3.fromDegrees(t.lng,t.lat,t.alt,Cesium.Ellipsoid.WGS84):Cesium.Cartesian3.ZERO}},{key:"transformWGS84ToCartographic",value:function(t){return t?Cesium.Cartographic.fromDegrees(t.lng,t.lat,t.alt):Cesium.Cartographic.ZERO}},{key:"transformCartesianArrayToWGS84Array",value:function(t){var e=this;return t?t.map(function(t){return e.transformCartesianToWGS84(t)}):[]}},{key:"transformWGS84ArrayToCartesianArray",value:function(t){var e=this;return t?t.map(function(t){return e.transformWGS84ToCartesian(t)}):[]}},{key:"transformWGS84ToMercator",value:function(t){var e=Jt.project(Cesium.Cartographic.fromDegrees(t.lng,t.lat,t.alt));return new Kt(e.x,e.y,e.z)}},{key:"transformMercatorToWGS84",value:function(t){var e=Jt.unproject(new Cesium.Cartesian3(t.lng,t.lat,t.alt));return new Kt(Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height)}},{key:"transformWindowToWGS84",value:function(t,e){var r,n=e.scene;if(n.mode===Cesium.SceneMode.SCENE3D){var o=n.camera.getPickRay(t);r=n.globe.pick(o,n)}else r=n.camera.pickEllipsoid(t,Cesium.Ellipsoid.WGS84);return this.transformCartesianToWGS84(r)}},{key:"transformWGS84ToWindow",value:function(t,e){var r=e.scene;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(r,this.transformWGS84ToCartesian(t))}}],(r=null)&&qt(e.prototype,r),n&&qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var te={};function ee(t){"@babel/helpers - typeof";return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ee(i=function(t,e){if("object"!==ee(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var ne=n(4),oe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._bid=e||Bt.uuid(),this._delegate=void 0,this._viewer=void 0,this._state=void 0,this._show=!0,this._isGround=!1,this._cache={},this._attr={},this._layerEvent=new at,this._layerEvent.on(S.ADD,this._onAdd,this),this._layerEvent.on(S.REMOVE,this._onRemove,this)}var e,r,n;return e=t,n=[{key:"registerType",value:function(t){t&&(te[t.toLocaleUpperCase()]=t.toLocaleLowerCase())}},{key:"getLayerType",value:function(t){return te[t.toLocaleUpperCase()]||void 0}}],(r=[{key:"layerId",get:function(){return this._id}},{key:"id",get:function(){return this._bid}},{key:"delegate",get:function(){return this._delegate}},{key:"show",get:function(){return this._show},set:function(t){this._show=t,this._delegate&&(this._delegate.show=this._show)}},{key:"layerEvent",get:function(){return this._layerEvent}},{key:"attr",get:function(){return this._attr},set:function(t){this._attr=t}},{key:"state",get:function(){return this._state}},{key:"_addedHook",value:function(){}},{key:"_removedHook",value:function(){}},{key:"_onAdd",value:function(t){this._viewer=t,this._delegate&&(this._delegate instanceof ne.PrimitiveCollection?this._isGround?this._viewer.scene.groundPrimitives.add(this._delegate):this._viewer.scene.primitives.add(this._delegate):this._viewer.dataSources.add(this._delegate),this._addedHook&&this._addedHook(),this._state=Dt.ADDED)}},{key:"_onRemove",value:function(){this._delegate&&this._viewer&&(this._cache={},this._delegate instanceof ne.PrimitiveCollection?(this._delegate.removeAll(),this._isGround?this._viewer.scene.groundPrimitives.remove(this._delegate):this._viewer.scene.primitives.remove(this._delegate)):this._delegate.then?(this._delegate.then(function(t){t.entities.removeAll()}),this._viewer.dataSources.remove(this._delegate)):(this._delegate.entities&&this._delegate.entities.removeAll(),this._viewer.dataSources.remove(this._delegate)),this._removedHook&&this._removedHook(),this._state=Dt.REMOVED)}},{key:"_addOverlay",value:function(t){this._cache.hasOwnProperty(t.overlayId)||(this._cache[t.overlayId]=t,this._delegate&&t.fire(C.ADD,this),this._state===Dt.CLEARED&&(this._state=Dt.ADDED))}},{key:"_removeOverlay",value:function(t){this._cache.hasOwnProperty(t.overlayId)&&(this._delegate&&t.fire(C.REMOVE,this),delete this._cache[t.overlayId])}},{key:"addOverlay",value:function(t){return this._addOverlay(t),this}},{key:"addOverlays",value:function(t){var e=this;return Array.isArray(t)&&t.forEach(function(t){e._addOverlay(t)}),this}},{key:"removeOverlay",value:function(t){return this._removeOverlay(t),this}},{key:"getOverlay",value:function(t){return this._cache[t]||void 0}},{key:"getOverlayById",value:function(t){var e=this,r=void 0;return Object.keys(this._cache).forEach(function(n){e._cache[n].id===t&&(r=e._cache[n])}),r}},{key:"getOverlaysByAttr",value:function(t,e){var r=[];return this.eachOverlay(function(n){n.attr[t]===e&&r.push(n)},this),r}},{key:"eachOverlay",value:function(t,e){var r=this;return Object.keys(this._cache).forEach(function(n){t&&t.call(e||r,r._cache[n])}),this}},{key:"getOverlays",value:function(){var t=this,e=[];return Object.keys(this._cache).forEach(function(r){e.push(t._cache[r])}),e}},{key:"clear",value:function(){}},{key:"remove",value:function(){this._viewer&&this._viewer.removeLayer(this)}},{key:"addTo",value:function(t){return null!==t&&void 0!==t&&t.addLayer&&t.addLayer(this),this}},{key:"setStyle",value:function(t){}},{key:"on",value:function(t,e,r){return this._layerEvent.on(t,e,r||this),this}},{key:"off",value:function(t,e,r){return this._layerEvent.off(t,e,r||this),this}},{key:"fire",value:function(t,e){return this._layerEvent.fire(t,e),this}}])&&re(e.prototype,r),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ie(t){"@babel/helpers - typeof";return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ie(i=function(t,e){if("object"!==ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function se(t,e){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=le(t);if(e){var o=le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(i,oe);var e,r,n,o=ue(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._delegate=zt.create("div","html-layer",void 0),e._delegate.setAttribute("id",e._id),e._renderRemoveCallback=void 0,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return oe.getLayerType("html")}},{key:"show",get:function(){return this._show},set:function(t){var e=this;return this._show=t,this._delegate.style.visibility=this._show?"visible":"hidden",Object.keys(this._cache).forEach(function(r){e._cache[r].show=t}),this}},{key:"_onAdd",value:function(t){var e=this;this._viewer=t.viewer,this.customContainer=t.customContainer,this.customContainer.appendChild(this._delegate);var r=this._viewer.scene;this._renderRemoveCallback=r.postRender.addEventListener(function(){var t=e._viewer.camera.positionWC,n=e._viewer.camera.direction;e.eachOverlay(function(e){if(e&&e.position){var o=$t.transformWGS84ToCartesian(e.position),i=r.globe.ellipsoid.geodeticSurfaceNormal(o,new Cesium.Cartesian3),a=Cesium.SceneTransforms.wgs84ToWindowCoordinates(r,o);e._updateStyle(a,Cesium.Cartesian3.distance(o,t),Cesium.Cartesian3.dot(n,i)<=0)}},e)},this),this._state=Dt.ADDED}},{key:"_onRemove",value:function(){this._renderRemoveCallback&&this._renderRemoveCallback(),this.customContainer.removeChild(this._delegate),this._state=Dt.REMOVED}},{key:"clear",value:function(){for(;this._delegate.hasChildNodes();)this._delegate.removeChild(this._delegate.firstChild);return this._cache={},this._state=Dt.CLEARED,this}}])&&ae(e.prototype,r),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();oe.registerType("html");var fe=ce;function pe(t){"@babel/helpers - typeof";return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===pe(i=function(t,e){if("object"!==pe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var ye=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"parsePosition",value:function(t){var e=new Kt;return t?("string"==typeof t?e=Kt.fromString(t):Array.isArray(t)?e=Kt.fromArray(t):Object(t)instanceof Kt||!Object(t).hasOwnProperty("lng")||!Object(t).hasOwnProperty("lat")?Object(t)instanceof Kt&&(e=t):e=Kt.fromObject(t),e):e}},{key:"parsePositions",value:function(t){if("string"==typeof t){if(t.indexOf("#")>=0)throw new Error("the positions invalid");t=t.split(";").filter(function(t){return!!t})}return t.map(function(t){return"string"==typeof t?Kt.fromString(t):Array.isArray(t)?Kt.fromArray(t):Object(t)instanceof Kt||!Object(t).hasOwnProperty("lng")||!Object(t).hasOwnProperty("lat")?Object(t)instanceof Kt?t:void 0:Kt.fromObject(t)})}},{key:"parsePointCoordToArray",value:function(t){return[(t=this.parsePosition(t)).lng,t.lat]}},{key:"parsePolylineCoordToArray",value:function(t){var e=[];return(t=this.parsePositions(t)).forEach(function(t){e.push([t.lng,t.lat])}),e}},{key:"parsePolygonCoordToArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return(t=this.parsePositions(t)).forEach(function(t){r.push([t.lng,t.lat])}),e&&r.length>0&&r.push(r[0]),[r]}}],(r=null)&&he(e.prototype,r),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function de(t,e,r){var n=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),o=Cesium.Cartesian3.subtract(r,e,new Cesium.Cartesian3),i=Cesium.Cartesian3.cross(n,o,n);return.5*Cesium.Cartesian3.magnitude(i)}function ve(t){var e=0;if(!Array.isArray(t))return e;t[0]instanceof Cesium.Cartesian3||(t=$t.transformWGS84ArrayToCartesianArray(t));var r=Cesium.CoplanarPolygonGeometry.createGeometry(Cesium.CoplanarPolygonGeometry.fromPositions({positions:t,vertexFormat:Cesium.VertexFormat.POSITION_ONLY}));if(!r)return e;for(var n=r.attributes.position.values,o=r.indices,i=0;i<o.length;i+=3){e+=de(Cesium.Cartesian3.unpack(n,3*o[i],new Cesium.Cartesian3),Cesium.Cartesian3.unpack(n,3*o[i+1],new Cesium.Cartesian3),Cesium.Cartesian3.unpack(n,3*o[i+2],new Cesium.Cartesian3))}return e}function me(t){if(t&&Array.isArray(t)){var e=Cesium.BoundingSphere.fromPoints($t.transformWGS84ArrayToCartesianArray(t));return $t.transformCartesianToWGS84(e.center)}return new Kt}function be(t){var e=0;if(t&&Array.isArray(t))for(var r=0;r<t.length-1;r++){var n=$t.transformWGS84ToCartographic(t[r]),o=$t.transformWGS84ToCartographic(t[r+1]),i=new Cesium.EllipsoidGeodesic;i.setEndPoints(n,o);var a=i.surfaceDistance;e+=a=Math.sqrt(Math.pow(a,2)+Math.pow(o.height-n.height,2))}return e.toFixed(3)}var _e={};function ge(t){"@babel/helpers - typeof";return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?we(Object(r),!0).forEach(function(e){Pe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Pe(t,e,r){return(e=Se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function Se(t){var e=function(t,e){if("object"!==ge(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ge(e)?e:String(e)}var Ee={font:"14px sans-serif",pixelOffset:{x:0,y:0},showBackground:!1,backgroundColor:"#ff0",fillColor:"#fff",outlineColor:"#000",outlineWidth:0,verticalOrigin:"CENTER",horizontalOrigin:"CENTER"},Te=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._bid=Bt.uuid(),this._delegate=void 0,this._layer=void 0,this._state=void 0,this._show=!0,this._style={},this._attr={},this._allowDrillPicking=!1,this._contextMenu=[],this._overlayEvent=new pt,this._overlayEvent.on(C.ADD,this._onAdd,this),this._overlayEvent.on(C.REMOVE,this._onRemove,this)}var e,r,n;return e=t,n=[{key:"registerType",value:function(t){t&&(_e[t.toLocaleUpperCase()]=t.toLocaleLowerCase())}},{key:"getOverlayType",value:function(t){return _e[t.toLocaleUpperCase()]||void 0}}],(r=[{key:"overlayId",get:function(){return this._id}},{key:"type",get:function(){return""}},{key:"id",get:function(){return this._bid},set:function(t){return this._bid=t,t}},{key:"show",get:function(){return this._show},set:function(t){return this._show=t,this._delegate&&(this._delegate.show=this._show),this}},{key:"attr",get:function(){return this._attr},set:function(t){return this._attr=t,this}},{key:"allowDrillPicking",get:function(){return this._allowDrillPicking},set:function(t){return this._allowDrillPicking=t,this}},{key:"overlayEvent",get:function(){return this._overlayEvent}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}},{key:"contextMenu",get:function(){return this._contextMenu},set:function(t){return this._contextMenu=t,this}},{key:"_getLayerCollection",value:function(t){var e=void 0;switch(t){case"point_primitive":e=this._layer.points;break;case"billboard_primitive":case"bounce_billboard_primitive":e=this._layer.billboards;break;case"label_primitive":case"bounce_label_primitive":e=this._layer.labels;break;case"polyline_primitive":e=this._layer.polylines;break;case"cloud_primitive":e=this._layer.clouds}return e}},{key:"_mountedHook",value:function(){}},{key:"_addedHook",value:function(){var t;if(!this._delegate)return!1;this._delegate.layerId=null===(t=this._layer)||void 0===t?void 0:t.layerId,this._delegate.overlayId=this._id}},{key:"_removedHook",value:function(){}},{key:"_onAdd",value:function(t){var e,r,n,o;if(t){if(this._layer=t,this._mountedHook&&this._mountedHook(),null!==(e=this._layer)&&void 0!==e&&null!==(r=e.delegate)&&void 0!==r&&r.entities&&this._delegate)this._layer.delegate.entities.add(this._delegate);else if(null!==(n=this._layer)&&void 0!==n&&null!==(o=n.delegate)&&void 0!==o&&o.add){var i=this._getLayerCollection(this.type);i?(this._delegate&&(this._delegate=i.add(this._delegate)),"function"==typeof this.update&&"function"==typeof this.destroy&&this._layer.delegate.add(this)):"function"==typeof this.update&&"function"==typeof this.destroy?this._layer.delegate.add(this):this._delegate&&this._layer.delegate.add(this._delegate)}this._addedHook&&this._addedHook(),this._state=Dt.ADDED}}},{key:"_onRemove",value:function(){var t,e,r,n;if(this._layer&&this._delegate){if(null!==(t=this._layer)&&void 0!==t&&null!==(e=t.delegate)&&void 0!==e&&e.entities)this._layer.delegate.entities.remove(this._delegate);else if(null!==(r=this._layer)&&void 0!==r&&null!==(n=r.delegate)&&void 0!==n&&n.remove){var o=this._getLayerCollection(this.type);o?(this._delegate&&o.remove(this._delegate),"function"==typeof this.update&&"function"==typeof this.destroy&&this._layer.delegate.remove(this)):"function"==typeof this.update&&"function"==typeof this.destroy?this._layer.delegate.remove(this):this._delegate&&this._layer.delegate.remove(this._delegate)}this._removedHook&&this._removedHook(),this._state=Dt.REMOVED}}},{key:"setLabel",value:function(t,e){if(!this._delegate)return this;var r={};return Bt.merge(r,Ee),Bt.merge(r,e),r.fillColor=Cesium.Color.fromCssColorString(r.fillColor),r.outlineColor=Cesium.Color.fromCssColorString(r.outlineColor),r.backgroundColor=Cesium.Color.fromCssColorString(r.backgroundColor),r.verticalOrigin=Cesium.VerticalOrigin[r.verticalOrigin],r.horizontalOrigin=Cesium.VerticalOrigin[r.horizontalOrigin],this._delegate instanceof Cesium.Entity&&(this._delegate.label=Oe(Oe({},r),{},{text:t})),this}},{key:"setStyle",value:function(t){return this}},{key:"remove",value:function(){return this._layer&&this._layer.removeOverlay(this),this}},{key:"addTo",value:function(t){return t&&t.addOverlay&&t.addOverlay(this),this}},{key:"on",value:function(t,e,r){return this._overlayEvent.on(t,e,r||this),this}},{key:"off",value:function(t,e,r){return this._overlayEvent.off(t,e,r||this),this}},{key:"fire",value:function(t,e){return this._overlayEvent.fire(t,e),this}}])&&Ce(e.prototype,r),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),je={BOTTOM_LEFT:"bottom_left",BOTTOM_CENTER:"bottom_center",BOTTOM_RIGHT:"bottom_right",CENTER_LEFT:"center_left",CENTER_CENTER:"center_center",CENTER_RIGHT:"center_right",TOP_LEFT:"top_left",TOP_CENTER:"top_center",TOP_RIGHT:"top_right"};function xe(t){"@babel/helpers - typeof";return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Re(t,e,r){return(e=Ie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ie(n.key),n)}}function Ie(t){var e=function(t,e){if("object"!==xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xe(e)?e:String(e)}function Me(t,e){return(Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function De(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Le(t);if(e){var o=Le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Me(t,e)}(i,Te);var e,r,n,o=De(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._delegate=zt.create("div","div-icon"),r._position=ye.parsePosition(t),r._delegate.setAttribute("id",r._id),Bt.merge(r._delegate.style,{position:"absolute",top:"0",left:"0"}),r.content=e,r._state=Dt.INITIALIZED,r}return e=i,n=[{key:"fromEntity",value:function(t,e){var r,n,o=Cesium.JulianDate.now();(r=new i($t.transformCartesianToWGS84(t.position.getValue(o)),e),t.billboard)&&(r.attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach(function(e){Re(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(n=t.properties)||void 0===n?void 0:n.getValue(o)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("div_icon")}},{key:"show",get:function(){return this._show},set:function(t){return this._show=t,this._delegate.style.visibility=this._show?"visible":"hidden",this}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this}},{key:"content",get:function(){return this._delegate.childNodes||[]},set:function(t){if(t&&"string"==typeof t)this._delegate.innerHTML=t;else if(t&&t instanceof Element){for(;this._delegate.hasChildNodes();)this._delegate.removeChild(this._delegate.firstChild);this._delegate.appendChild(t)}return this}},{key:"setWrapper",value:function(t){return t&&t instanceof Element&&(this._wrapper=t,zt.addClass(this._wrapper,"div-icon")),this}},{key:"_updateStyle",value:function(t,e,r){if(this._show&&t){var n=t.x-this._delegate.offsetWidth/2,o=t.y-this._delegate.offsetHeight/2;this._style.position===je.TOP_LEFT?(n=t.x-this._delegate.offsetWidth,o=t.y-this._delegate.offsetHeight):this._style.position===je.TOP_CENTER?(n=t.x-this._delegate.offsetWidth/2,o=t.y-this._delegate.offsetHeight):this._style.position===je.TOP_RIGHT?(n=t.x,o=t.y-this._delegate.offsetHeight):this._style.position===je.BOTTOM_LEFT?(n=t.x-this._delegate.offsetWidth,o=t.y):this._style.position===je.BOTTOM_RIGHT&&(n=t.x,o=t.y);var i="translate3d(".concat(Math.round(n),"px,").concat(Math.round(o),"px, 0)"),a="scale3d(1,1,1)",s=this._style.scaleByDistance;if(e&&s){var u=s.near||0,l=s.nearValue||1,c=s.far||Number.MAX_VALUE,f=s.farValue||0,p=e/c;if(e<u)a="scale3d(".concat(l,",").concat(l,",1)");else if(e>c)a="scale3d(".concat(f,",").concat(f,",1)");else{var h=f+p*(l-f);a="scale3d(".concat(h,",").concat(h,",1)")}}var y,d,v,m=!0,b=this._style.distanceDisplayCondition;e&&b&&(y=e,d=b.near||0,v=b.far||Number.MAX_VALUE,m=(y=parseFloat(y)||0)>=parseFloat(d)&&y<=parseFloat(v)),this._delegate.style.transform="".concat(i," ").concat(a),this._delegate.style.visibility=m&&r?"visible":"hidden"}}},{key:"_onAdd",value:function(t){var e=this;this._layer=t,this._layer.delegate.appendChild(this._delegate);var r={layer:t,overlay:this,position:$t.transformWGS84ToCartesian(this._position)};this._delegate.addEventListener("click",function(){e._overlayEvent.fire(h.CLICK,r)}),this._delegate.addEventListener("mouseover",function(){e._overlayEvent.fire(h.MOUSE_OVER,r)}),this._delegate.addEventListener("mouseout",function(){e._overlayEvent.fire(h.MOUSE_OUT,r)}),this._state=Dt.ADDED}},{key:"_onRemove",value:function(){this._layer&&(this._layer.delegate.removeChild(this._delegate),this._state=Dt.REMOVED)}},{key:"setLabel",value:function(t,e){return this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(Bt.merge(this._style,t),this._style.className&&zt.addClass(this._delegate,this._style.className),delete t.className&&delete t.position,Bt.merge(this._delegate.style,t),this):this}}])&&ke(e.prototype,r),n&&ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("div_icon");var Fe=Ne;function Be(t){"@babel/helpers - typeof";return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ge(t,e,r){return(e=He(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,He(n.key),n)}}function He(t){var e=function(t,e){if("object"!==Be(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Be(e)?e:String(e)}function Ue(t,e){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ze(t);if(e){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ye={pixelSize:8,outlineColor:Cesium.Color.BLUE,outlineWidth:2},Xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(i,Te);var e,r,n,o=Ve(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._delegate=new Cesium.Entity({point:{}}),e._position=ye.parsePosition(t),e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();return(r=new i($t.transformCartesianToWGS84(t.position.getValue(n)))).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?We(Object(r),!0).forEach(function(e){Ge(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)),r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("point")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this}},{key:"_mountedHook",value:function(){this.position=this._position,Bt.merge(this._delegate.point,Ye,this._style)}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.position,Bt.merge(this._style,t),Bt.merge(this._delegate.point,Ye,this._style),this):this}}])&&ze(e.prototype,r),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("point");var Ke=Xe;function Qe(t){"@babel/helpers - typeof";return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Qe(i=function(t,e){if("object"!==Qe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Je(t,e){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tr(t);if(e){var o=tr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tr(t){return(tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(i,oe);var e,r,n,o=$e(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._delegate=new Cesium.CustomDataSource(t),e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return oe.getLayerType("vector")}},{key:"clear",value:function(){return this._delegate.entities&&this._delegate.entities.removeAll(),this._cache={},this._state=Dt.CLEARED,this}}])&&qe(e.prototype,r),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();oe.registerType("vector");var rr=er;function nr(t){"@babel/helpers - typeof";return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ir(t,e,r){return(e=sr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sr(n.key),n)}}function sr(t){var e=function(t,e){if("object"!==nr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nr(e)?e:String(e)}function ur(t,e){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cr(t);if(e){var o=cr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ur(t,e)}(i,Te);var e,r,n,o=lr(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._delegate=new Cesium.Entity({model:{}}),r._position=ye.parsePosition(t),r._modelUrl=e,r._rotateAmount=0,r._state=Dt.INITIALIZED,r}return e=i,n=[{key:"fromEntity",value:function(t,e){var r=Cesium.JulianDate.now(),n=new i($t.transformCartesianToWGS84(t.position.getValue(r)),e);return n.attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach(function(e){ir(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t.properties.getValue(r)),n}}],(r=[{key:"type",get:function(){return Te.getOverlayType("model")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),0===this._rotateAmount&&(this._delegate.orientation=Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(this._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._position.heading),Cesium.Math.toRadians(this._position.pitch),Cesium.Math.toRadians(this._position.roll)))),this}},{key:"modelUrl",get:function(){return this._modelUrl},set:function(t){return this._modelUrl=t,this._delegate.model.uri=this._modelUrl,this}},{key:"rotateAmount",get:function(){return this._rotateAmount},set:function(t){var e=this;return this._rotateAmount=+t,this._delegate.orientation=new Cesium.CallbackProperty(function(){return e._position.heading+=e._rotateAmount,(e._position.heading>=360||e._position.heading<=-360)&&(e._position.heading=0),Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(e._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(e._position.heading),Cesium.Math.toRadians(e._position.pitch),Cesium.Math.toRadians(e._position.roll)))},!1),this}},{key:"_mountedHook",value:function(){this.position=this._position,this.modelUrl=this._modelUrl}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.uri,Bt.merge(this._style,t),Bt.merge(this._delegate.model,t),this):this}}])&&ar(e.prototype,r),n&&ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("model");var pr=fr;function hr(t){"@babel/helpers - typeof";return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function dr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(r),!0).forEach(function(e){vr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vr(t,e,r){return(e=br(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function br(t){var e=function(t,e){if("object"!==hr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hr(e)?e:String(e)}function _r(t,e){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wr(t);if(e){var o=wr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}(i,Te);var e,r,n,o=gr(i);function i(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._delegate=new Cesium.Cesium3DTileset(dr(dr({},r),{},{url:t})),e._tileVisibleCallback=void 0,e._properties=void 0,e._fragmentShader=void 0,e._replaceFS=!1,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("tileset")}},{key:"readyPromise",get:function(){return this._delegate.readyPromise}},{key:"_bindVisibleEvent",value:function(){this._tileVisibleCallback&&this._tileVisibleCallback(),this._tileVisibleCallback=this._delegate.tileVisible.addEventListener(this._updateTile,this)}},{key:"_updateTile",value:function(t){for(var e=this,r=t.content,n=r._model,o=function(t){var n=r.getFeature(t);e._properties&&e._properties.length&&e._properties.forEach(function(t){n.hasProperty(t.key)&&n.getProperty(t.key)===t.keyValue&&n.setProperty(t.propertyName,t.propertyValue)})},i=0;i<r.featuresLength;i++)o(i);this._fragmentShader&&n&&n._sourcePrograms&&n._rendererResources&&(Object.keys(n._sourcePrograms).forEach(function(t){var r=n._sourcePrograms[t],o=n._rendererResources.sourceShaders;if(e._replaceFS)o[r.fragmentShader]=e._fragmentShader;else{var i=o[r.fragmentShader];o[r.fragmentShader]=i.replace("gl_FragColor = vec4(color, 1.0);\n}","gl_FragColor = vec4(color, 1.0);\n             ".concat(e._fragmentShader,"\n}\n            "))}}),n._shouldRegenerateShaders=!0)}},{key:"setPosition",value:function(t){return t=ye.parsePosition(t),this.readyPromise.then(function(e){var r=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(t.lng,t.lat,t.alt)),n=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(t.heading),Cesium.Math.toRadians(t.pitch),Cesium.Math.toRadians(t.roll))));Cesium.Matrix4.multiply(r,n,r),e.root.transform=r}),this}},{key:"setHeadingPitchRoll",value:function(t,e,r){return this.readyPromise.then(function(n){var o=n.root.transform,i=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(t||0),Cesium.Math.toRadians(e||0),Cesium.Math.toRadians(r||0))));Cesium.Matrix4.multiply(o,i,o),n.root.transform=o}),this}},{key:"setLabel",value:function(t,e){return this}},{key:"clampToGround",value:function(){return this.readyPromise.then(function(t){var e=Cesium.Cartographic.fromCartesian(t.boundingSphere.center),r=Cesium.Cartesian3.fromRadians(e.longitude,e.latitude,e.height),n=Cesium.Cartesian3.fromRadians(e.longitude,e.latitude,0),o=Cesium.Cartesian3.subtract(n,r,new Cesium.Cartesian3);t.modelMatrix=Cesium.Matrix4.fromTranslation(o)}),this}},{key:"setHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.readyPromise.then(function(r){var n=Cesium.Cartographic.fromCartesian(r.boundingSphere.center),o=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height),i=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,e?t:n.height+t),a=Cesium.Cartesian3.subtract(i,o,new Cesium.Cartesian3);r.modelMatrix=Cesium.Matrix4.fromTranslation(a)}),this}},{key:"setScale",value:function(t){return this.readyPromise.then(function(e){var r=e.root.transform;t>0&&1!==t&&Cesium.Matrix4.multiplyByUniformScale(r,t,r),e.root.transform=r}),this}},{key:"setProperties",value:function(t){return this._properties=t,this._bindVisibleEvent(),this}},{key:"setCustomShader",value:function(t){return this._replaceFS=!0,this._fragmentShader=t,this._bindVisibleEvent(),this}},{key:"replaceFS",value:function(t){return this._replaceFS=!0,this._fragmentShader=t,this._bindVisibleEvent(),this}},{key:"appendFS",value:function(t){return this._replaceFS=!1,this._fragmentShader=t,this._bindVisibleEvent(),this}},{key:"setSplitDirection",value:function(t){return this.readyPromise.then(function(e){e.splitDirection=t}),this}},{key:"setStyle",value:function(t){return t&&t instanceof Cesium.Cesium3DTileStyle&&(this._style=t,this._delegate.style=this._style),this}}])&&mr(e.prototype,r),n&&mr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("tileset");var Pr=Or;function Cr(t){"@babel/helpers - typeof";return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(r),!0).forEach(function(e){Tr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Tr(t,e,r){return(e=Rr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jr(t){return function(t){if(Array.isArray(t))return xr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rr(n.key),n)}}function Rr(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Cr(e)?e:String(e)}function kr(t,e){return(kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Mr(t);if(e){var o=Mr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Cr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cesium.Color.RED.withAlpha(.6);var Dr="#f00",Lr={font:"14px sans-serif",pixelOffset:{x:0,y:0},showBackground:!1,backgroundColor:"#ff0",fillColor:"#fff",outlineColor:"#000",outlineWidth:0,verticalOrigin:"CENTER",horizontalOrigin:"CENTER"},Nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kr(t,e)}(i,Te);var e,r,n,o=Ir(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._delegate=new Cesium.Entity({polygon:{}}),e._positions=ye.parsePositions(t),e._holes=[],e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();t.polygon&&((r=new i($t.transformCartesianArrayToWGS84Array(t.polygon.hierarchy.getValue(n).positions))).attr=Er({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("polygon")}},{key:"positions",get:function(){return this._positions},set:function(t){this._positions=ye.parsePositions(t),this._delegate.polygon.hierarchy=this._computeHierarchy()}},{key:"holes",get:function(){return this._holes},set:function(t){return t&&t.length&&(this._holes=t.map(function(t){return ye.parsePositions(t)}),this._delegate.polygon.hierarchy=this._computeHierarchy()),this}},{key:"center",get:function(){return me([].concat(jr(this._positions),[this._positions[0]]))}},{key:"area",get:function(){return ve(this._positions)}},{key:"_computeHierarchy",value:function(){var t=new Cesium.PolygonHierarchy;return t.positions=$t.transformWGS84ArrayToCartesianArray(this._positions),t.holes=this._holes.map(function(t){return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(t))}),t}},{key:"_mountedHook",value:function(){this.positions=this._positions}},{key:"setLabel",value:function(t,e){var r={};return Bt.merge(r,Lr),Bt.merge(r,e),r.fillColor=Cesium.Color.fromCssColorString(r.fillColor),r.outlineColor=Cesium.Color.fromCssColorString(r.outlineColor),r.backgroundColor=Cesium.Color.fromCssColorString(r.backgroundColor),r.verticalOrigin=Cesium.VerticalOrigin[r.verticalOrigin],r.horizontalOrigin=Cesium.VerticalOrigin[r.horizontalOrigin],this._delegate.position=$t.transformWGS84ToCartesian(this.center),this._delegate.label=Er({text:t},e),this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.positions,t.material=Cesium.Color.fromCssColorString(t.fillColor||Dr),Bt.merge(this._style,t),Bt.merge(this._delegate.polygon,t),this):this}}])&&Ar(e.prototype,r),n&&Ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("polygon");var Fr=Nr;function Br(t){"@babel/helpers - typeof";return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Br(i=function(t,e){if("object"!==Br(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Gr(t,e){return(Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hr(t);if(e){var o=Hr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Hr(t){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ur=Math.PI/2,Vr=(Cesium.Color.RED.withAlpha(.6),function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gr(t,e)}(i,Fr);var e,r,n,o=zr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).tailWidthFactor=.15,e.neckWidthFactor=.2,e.headWidthFactor=.25,e.headAngle=Math.PI/8.5,e.neckAngle=Math.PI/13,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("fine_arrow")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.polygon.hierarchy=this._computeHierarchy(),this}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=t[0],r=t[1],n=Zt.getBaseLength(t),o=n*this.tailWidthFactor,i=n*this.neckWidthFactor,a=n*this.headWidthFactor,s=Zt.getThirdPoint(r,e,Ur,o,!0),u=Zt.getThirdPoint(r,e,Ur,o,!1),l=Zt.getThirdPoint(e,r,this.headAngle,a,!1),c=Zt.getThirdPoint(e,r,this.headAngle,a,!0),f=Zt.getThirdPoint(e,r,this.neckAngle,i,!1),p=Zt.getThirdPoint(e,r,this.neckAngle,i,!0);return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions([s,f,l,r,c,p,u])))}}])&&Wr(e.prototype,r),n&&Wr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}());Te.registerType("fine_arrow");var Zr=Vr;function Yr(t){"@babel/helpers - typeof";return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Yr(i=function(t,e){if("object"!==Yr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Kr(t,e){return(Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qr(t);if(e){var o=qr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Math.PI;var Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e)}(i,Zr);var e,r,n,o=Qr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).tailWidthFactor=.2,e.neckWidthFactor=.25,e.headWidthFactor=.3,e.headAngle=Math.PI/4,e.neckAngle=.17741*Math.PI,e.fixPointCount=2,e}return e=i,r&&Xr(e.prototype,r),n&&Xr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();Te.registerType("assault_direction");var $r=Jr;function tn(t){"@babel/helpers - typeof";return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===tn(i=function(t,e){if("object"!==tn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function rn(t,e){return(rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=on(t);if(e){var o=on(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cesium.Color.RED.withAlpha(.6);var an=Math.PI/2,sn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e)}(i,Fr);var e,r,n,o=nn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.headTailFactor=.8,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("attack_arrow")}},{key:"_getArrowHeadPoints",value:function(t,e,r){var n=Zt.getBaseLength(t),o=n*this.headHeightFactor,i=t[t.length-1];n=Zt.distance(i,t[t.length-2]);var a=Zt.distance(e,r);o>a*this.headTailFactor&&(o=a*this.headTailFactor);var s=o*this.headWidthFactor,u=o*this.neckWidthFactor,l=(o=o>n?n:o)*this.neckHeightFactor,c=Zt.getThirdPoint(t[t.length-2],i,0,o,!0),f=Zt.getThirdPoint(t[t.length-2],i,0,l,!0),p=Zt.getThirdPoint(i,c,an,s,!1),h=Zt.getThirdPoint(i,c,an,s,!0);return[Zt.getThirdPoint(i,f,an,u,!1),p,i,h,Zt.getThirdPoint(i,f,an,u,!0)]}},{key:"_getArrowBodyPoints",value:function(t,e,r,n){for(var o=Zt.wholeDistance(t),i=Zt.getBaseLength(t)*n,a=(i-Zt.distance(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Zt.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Zt.distance(t[c-1],t[c]))/o*a)/Math.sin(f),h=Zt.getThirdPoint(t[c-1],t[c],Math.PI-f,p,!0),y=Zt.getThirdPoint(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=t[0],r=t[1];Zt.isClockWise(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Zt.mid(e,r)].concat(t.slice(2)),o=this._getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Zt.distance(e,r)/Zt.getBaseLength(n),u=this._getArrowBodyPoints(n,i,a,s),l=u.length,c=[e].concat(u.slice(0,l/2));c.push(i);var f=[r].concat(u.slice(l/2,l));return f.push(a),c=Zt.getQBSplinePoints(c),f=Zt.getQBSplinePoints(f),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(c.concat(o,f.reverse()))))}}])&&en(e.prototype,r),n&&en(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("attack_arrow");var un=sn,ln=Math.PI/2;Math.PI;var cn=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},fn=function(t,e,r,n,o){var i=1-(t=Math.max(Math.min(t,1),0)),a=t*t,s=a*t,u=i*i,l=u*i;return[l*e[0]+3*u*t*r[0]+3*i*a*n[0]+s*o[0],l*e[1]+3*u*t*r[1]+3*i*a*n[1]+s*o[1]]},pn=function(t,e,r,n){var o=hn(e,r,n),i=null,a=null,s=null,u=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=o[0]/u,c=o[1]/u,f=cn(e,r),p=cn(r,n);return u>3e-6?!function(t,e,r){return(r[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(r[0]-t[0])}(e,r,n)?(s=t*f,i=[r[0]+s*c,r[1]-s*l],s=t*p,a=[r[0]-s*c,r[1]+s*l]):(s=t*f,i=[r[0]-s*c,r[1]+s*l],s=t*p,a=[r[0]+s*c,r[1]-s*l]):(i=[r[0]+t*(e[0]-r[0]),r[1]+t*(e[1]-r[1])],a=[r[0]+t*(n[0]-r[0]),r[1]+t*(n[1]-r[1])]),[i,a]},hn=function(t,e,r){var n=t[0]-e[0],o=t[1]-e[1],i=Math.sqrt(n*n+o*o);n/=i,o/=i;var a=r[0]-e[0],s=r[1]-e[1],u=Math.sqrt(a*a+s*s);return[n+(a/=u),o+(s/=u)]};function yn(t){"@babel/helpers - typeof";return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===yn(i=function(t,e){if("object"!==yn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function vn(t,e){return(vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bn(t);if(e){var o=bn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cesium.Color.RED.withAlpha(.6),Math.PI;var _n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vn(t,e)}(i,Fr);var e,r,n,o=mn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).t=.3,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("closed_curve")}},{key:"_computeHierarchy",value:function(){if(2===this._positions.length)return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(this._positions)));var t=ye.parsePolygonCoordToArray(this._positions)[0];t.push(t[0],t[1]);for(var e=[],r=0;r<t.length-2;r++){var n=pn(this.t,t[r],t[r+1],t[r+2]);e=e.concat(n)}var o=e.length;e=[e[o-1]].concat(e.slice(0,o-1));for(var i=[],a=0;a<t.length-2;a++){var s=t[a],u=t[a+1];i.push(s);for(var l=0;l<=100;l++){var c=fn(l/100,s,e[2*a],e[2*a+1],u);i.push(c)}i.push(u)}return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(i)))}}])&&dn(e.prototype,r),n&&dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("closed_curve");var gn=_n;function wn(t){"@babel/helpers - typeof";return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===wn(i=function(t,e){if("object"!==wn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Pn(t,e){return(Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Sn(t);if(e){var o=Sn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cesium.Color.RED.withAlpha(.6);var En=Math.PI/2,Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pn(t,e)}(i,Fr);var e,r,n,o=Cn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.25,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("double_arrow")}},{key:"_getArrowPoints",value:function(t,e,r,n){var o=Zt.mid(t,e),i=Zt.distance(o,r),a=Zt.getThirdPoint(r,o,0,.3*i,!0),s=Zt.getThirdPoint(r,o,0,.5*i,!0),u=[o,a=Zt.getThirdPoint(o,a,En,i/5,n),s=Zt.getThirdPoint(o,s,En,i/4,n),r],l=this._getArrowHeadPoints(u),c=l[0],f=l[4],p=Zt.distance(t,e)/Zt.getBaseLength(u)/2,h=this._getArrowBodyPoints(u,c,f,p),y=h.length,d=h.slice(0,y/2),v=h.slice(y/2,y);return d.push(c),v.push(f),(d=d.reverse()).push(e),(v=v.reverse()).push(t),d.reverse().concat(l,v)}},{key:"_getArrowHeadPoints",value:function(t){var e=Zt.getBaseLength(t)*this.headHeightFactor,r=t[t.length-1],n=e*this.headWidthFactor,o=e*this.neckWidthFactor,i=e*this.neckHeightFactor,a=Zt.getThirdPoint(t[t.length-2],r,0,e,!0),s=Zt.getThirdPoint(t[t.length-2],r,0,i,!0),u=Zt.getThirdPoint(r,a,En,n,!1),l=Zt.getThirdPoint(r,a,En,n,!0);return[Zt.getThirdPoint(r,s,En,o,!1),u,r,l,Zt.getThirdPoint(r,s,En,o,!0)]}},{key:"_getArrowBodyPoints",value:function(t,e,r,n){for(var o=Zt.wholeDistance(t),i=Zt.getBaseLength(t)*n,a=(i-Zt.distance(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Zt.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Zt.distance(t[c-1],t[c]))/o*a)/Math.sin(f),h=Zt.getThirdPoint(t[c-1],t[c],Math.PI-f,p,!0),y=Zt.getThirdPoint(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}},{key:"_getTempPoint4",value:function(t,e,r){var n,o,i,a,s=Zt.mid(t,e),u=Zt.distance(s,r),l=Zt.getAngleOfThreePoints(t,s,r);return l<En?(o=u*Math.sin(l),i=u*Math.cos(l),a=Zt.getThirdPoint(t,s,En,o,!1),n=Zt.getThirdPoint(s,a,En,i,!0)):l>=En&&l<Math.PI?(o=u*Math.sin(Math.PI-l),i=u*Math.cos(Math.PI-l),a=Zt.getThirdPoint(t,s,En,o,!1),n=Zt.getThirdPoint(s,a,En,i,!1)):l>=Math.PI&&l<1.5*Math.PI?(o=u*Math.sin(l-Math.PI),i=u*Math.cos(l-Math.PI),a=Zt.getThirdPoint(t,s,En,o,!0),n=Zt.getThirdPoint(s,a,En,i,!0)):(o=u*Math.sin(2*Math.PI-l),i=u*Math.cos(2*Math.PI-l),a=Zt.getThirdPoint(t,s,En,o,!0),n=Zt.getThirdPoint(s,a,En,i,!1)),n}},{key:"_computeHierarchy",value:function(){var t,e,r=this._positions.length,n=void 0,o=void 0,i=ye.parsePolygonCoordToArray(this._positions)[0],a=i[0],s=i[1],u=i[2];n=3===r?this._getTempPoint4(a,s,u):i[3],o=3===r||4===r?Zt.mid(a,s):i[4],Zt.isClockWise(a,s,u)?(t=this._getArrowPoints(a,o,n,!1),e=this._getArrowPoints(o,s,u,!0)):(t=this._getArrowPoints(s,o,u,!1),e=this._getArrowPoints(o,a,n,!0));var l=t.length,c=(l-5)/2,f=t.slice(0,c),p=t.slice(c,c+5),h=t.slice(c+5,l),y=e.slice(0,c),d=e.slice(c,c+5),v=e.slice(c+5,l);y=Zt.getBezierPoints(y);var m=Zt.getBezierPoints(v.concat(f.slice(1)));return h=Zt.getBezierPoints(h),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(y.concat(d,m,p,h))))}}])&&On(e.prototype,r),n&&On(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("double_arrow");var jn=Tn;function xn(t){"@babel/helpers - typeof";return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===xn(i=function(t,e){if("object"!==xn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Rn(t,e){return(Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=In(t);if(e){var o=In(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mn=Math.PI/2,Dn=(Cesium.Color.RED.withAlpha(.6),function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rn(t,e)}(i,Fr);var e,r,n,o=kn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).t=.4,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("gathering_place")}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0];if(2===this._positions.length){var e=Zt.mid(t[0],t[1]),r=Zt.distance(t[0],e)/.9,n=Zt.getThirdPoint(t[0],e,Mn,r,!0);t=[t[0],n,t[1]]}var o=Zt.mid(t[0],t[2]);t.push(o,t[0],t[1]);for(var i=[],a=0;a<t.length-2;a++){var s=t[a],u=t[a+1],l=t[a+2],c=Zt.getBisectorNormals(this.t,s,u,l);i=i.concat(c)}var f=i.length;i=[i[f-1]].concat(i.slice(0,f-1));for(var p=[],h=0;h<t.length-2;h++){var y=t[h],d=t[h+1];p.push(y);for(var v=0;v<=100;v++){var m=Zt.getCubicValue(v/100,y,i[2*h],i[2*h+1],d);p.push(m)}p.push(d)}return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(p)))}}])&&An(e.prototype,r),n&&An(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}());Te.registerType("gathering_place");var Ln=Dn;function Nn(t){"@babel/helpers - typeof";return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Nn(i=function(t,e){if("object"!==Nn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Bn(t,e){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Gn(t);if(e){var o=Gn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Math.PI,Cesium.Color.RED.withAlpha(.6);var zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e)}(i,Fr);var e,r,n,o=Wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).t=.1,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("sector")}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=t[0],r=t[1],n=t[2],o=(Zt.distance(r,e),180*Zt.getAzimuth(r,e)/3.14),i=180*Zt.getAzimuth(n,e)/3.14,a=this.distance(r,e),s=this.generatSectorPoints(e,a,o,i);return s.push(e,s[0]),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s)))}},{key:"distance",value:function(t,e){var r=t[1]*Math.PI/180,n=e[1]*Math.PI/180,o=r-n,i=t[0]*Math.PI/180-e[0]*Math.PI/180,a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(r)*Math.cos(n)*Math.pow(Math.sin(i/2),2)));return a*=6378.137,a=Math.round(1e4*a)/10}},{key:"generatSectorPoints",value:function(t,e,r,n){var o=[];if((r=90-r)<(n=90-n))for(var i=r;i<n;i+=2)o.push(this.getCirclePoint(t[0],t[1],i,e));else for(var a=r;a>n;a-=2)o.push(this.getCirclePoint(t[0],t[1],a,e));return o}},{key:"getCirclePoint",value:function(t,e,r,n){var o=n*Math.sin(r*Math.PI/180),i=n*Math.cos(r*Math.PI/180),a=6356725+21412*(90-e)/90;return[180*(o/(a*Math.cos(e*Math.PI/180))+t*Math.PI/180)/Math.PI,180*(i/a+e*Math.PI/180)/Math.PI]}}])&&Fn(e.prototype,r),n&&Fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("sector");var Hn=zn;function Un(t){"@babel/helpers - typeof";return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Un(i=function(t,e){if("object"!==Un(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Zn(t,e){return(Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xn(t);if(e){var o=Xn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(i,un);var e,r,n,o=Yn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("squad_combat")}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=this.getTailPoints(t),r=this._getArrowHeadPoints(t,e[0],e[1]),n=r[0],o=r[4],i=this._getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[1]].concat(i.slice(a/2,a));return u.push(o),s=Zt.getQBSplinePoints(s),u=Zt.getQBSplinePoints(u),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s.concat(r,u.reverse()))))}},{key:"getTailPoints",value:function(t){var e=Zt.getBaseLength(t)*this.tailWidthFactor;return[Zt.getThirdPoint(t[1],t[0],ln,e,!1),Zt.getThirdPoint(t[1],t[0],ln,e,!0)]}}])&&Vn(e.prototype,r),n&&Vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("squad_combat");var Qn=Kn;function qn(t){"@babel/helpers - typeof";return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qn(i=function(t,e){if("object"!==qn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $n(t,e){return($n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function to(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eo(t);if(e){var o=eo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$n(t,e)}(i,un);var e,r,n,o=to(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.headTailFactor=.8,e.swallowTailFactor=1,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("tailed_attack_arrow")}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=t[0],r=t[1];Zt.isClockWise(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Zt.mid(e,r)].concat(t.slice(2)),o=this._getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Zt.distance(e,r),u=Zt.getBaseLength(n),l=u*this.tailWidthFactor*this.swallowTailFactor,c=Zt.getThirdPoint(n[1],n[0],0,l,!0),f=s/u,p=this._getArrowBodyPoints(n,i,a,f),h=p.length,y=[e].concat(p.slice(0,h/2));y.push(i);var d=[r].concat(p.slice(h/2,h));return d.push(a),y=Zt.getQBSplinePoints(y),d=Zt.getQBSplinePoints(d),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(y.concat(o,d.reverse(),[c,y[0]]))))}}])&&Jn(e.prototype,r),n&&Jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("tailed_attack_arrow");var no=ro;function oo(t){"@babel/helpers - typeof";return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===oo(i=function(t,e){if("object"!==oo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function ao(t,e){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function so(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uo(t);if(e){var o=uo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uo(t){return(uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}(i,un);var e,r,n,o=so(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.swallowTailFactor=1,e.swallowTailPnt=null,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("tailed_squad_combat")}},{key:"_computeHierarchy",value:function(){var t=ye.parsePolygonCoordToArray(this._positions)[0],e=this.getTailPoints(t),r=this._getArrowHeadPoints(t,e[0],e[2]),n=r[0],o=r[4],i=this._getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[2]].concat(i.slice(a/2,a));return u.push(o),s=Zt.getQBSplinePoints(s),u=Zt.getQBSplinePoints(u),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s.concat(r,u.reverse(),[e[1],s[0]]))))}},{key:"getTailPoints",value:function(t){var e=Zt.getBaseLength(t)*this.tailWidthFactor,r=Zt.getThirdPoint(t[1],t[0],ln,e,!1),n=Zt.getThirdPoint(t[1],t[0],ln,e,!0),o=e*this.swallowTailFactor;return[r,Zt.getThirdPoint(t[1],t[0],0,o,!0),n]}}])&&io(e.prototype,r),n&&io(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("tailed_squad_combat");var co=lo,fo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAPvklEQVR4Xu2decxeRRXGz6MNiMhWlQqIAlIFWUQglrCDFCkIyCYoRUpYRSwKYTMgRdk1IDZYKQQs0ihNWLQkFmkCiBBtWEIQA6EkkGCJEG0CCRJi85gTpvpZvuVd7p2Zc+6Z5At/cO+c5zxnfr3LOzMXEi0cCAfGdADhTTgQDoztQAASoyMcGMeBACSGRzgQgMQYCAcGcyCuIIP5Fmd1xIEApCOFjjQHcyAAGcy3OKsjDgQgHSl0pDmYAwHIYL7FWR1xIADpSKEjzcEcCEAG8y3O6ogDAUhHCh1pDuZAZwEhuZWI7Ckih4nIliIyOf2tIyL/HPH3kIgsFZE/Avj3YDbHWVYd6BwgJE8SkdNEZLc+i/aqiCwWkfkAnujz3DjcqAOdAYTkESJylojs30Ct5gcoDbhooItOAELyNhGZ1UI9zgJwYwv9RpeVOOAaEJKfSs8PW7To9xwAl7XYf3Rd0AG3gJDcWkReyORtQJLJ6NxhXAJCcmMR+XtmM68AcHHmmBGuZQfcAUJybRG5R0RmtOzdaN1fC+CCAnEjZEsOeATkpvQatyXLJuz2OgDnTnhUHGDCAVeAkNxFRB6vwPm5AGZXoCMkDOmAN0BKXz1GlmMegDOHrE+cXtgBN4CkqSMvFvZzzfC3ADi1Mk0hpw8HPAGi00f0ClJbWwCgjR8pa8vTpR5PgCwSkWMqrdJCADMr1RayxnHAEyA6A3ejiqu9CMCxFesLaaM44AIQkpuJyCsGKnw3gKMM6AyJyQEvgOwrIg8aqepiALoGJZoBB7wAcoqI3GzA79USlwAo8Uu/IYvqkOoFEJ3ecXUdlvasYimA6T0fHQcWccALIPr2St9iWWsPA9Dbw2iVOuAFkFqmmAxS5kcB6Nr4aBU64AUQfb2rr3mttmUAplkV71m3C0C0QCT/IiLbGS7WUwB2NqzfpXRPgFwqInOMV+kZADsaz8GVfE+AWPotZLxB9ByAbV2NMsPJuAEk3Wb9WUS+YLgeq6UvBzDVQR7mU/AGyAkicrv5qrybwMsA2tyNxYlN7abhCpB0FblfRA5s17Zsva8AoPPMohVywCMgh4rIbwv52UbY1wBMaaPj6HNiB9wBkq4iHt5ojazeSgC6uXa0zA64BCRBcreI6H68XtqbANb3koyVPDwDotuO/sb4j4drjqO3AejnGaJlcsAtIOkqor8n3CkiO2TyM0eYVQAm5QgUMURcA5Ig+XSa6fs5ZwWfBGCVs5yqS8c9IAkS3charyTe5jqtA+Dt6kaVI0GdACRBop9cU0h2dVQ/TWV9AG86y6madDoDSIJEf5lWSDxMRxk5iCYDWFnNqHIkpFOAJEg2T88k/X6jsPayTwHwWu0irenrHCAJEp2+oVeSPawVbAK9mwFY4Synoul0EpAEySYJkr2KVqD54FsAeLn5brvZY2cBSZDol6h0s4d9nJV/KoDlznIqkk6nAUmQfCRBsl+RCrQXdFsAz7XXfTd67jwgCRKdCKjPJAc4K/uOAJ5xllPWdAKQZDfJDRMkXtaSrB5IOwN4KuuochQsABlRTJLrpdutgxzVWFOZBmCZs5yypBOArGEzyXXTleSQLBXIF2RPAI/mC+cjUgAySh1J6pRyfSbR1Yme2r4AHvaUUNu5BCBjOExyrXS7dXjbRcjc/3QASzPHNBsuABmndCR13YX+TuJpZaJmPAPAErOjNqPwAGQCs0m+L91uHZ2xLjlCHQZgcY5AlmMEID1Wj6Q+k3y1x8OtHHYkgHusiC2hMwDpw3WSvxKR4/o4xcKhxwKw+G2VLN4GIH3aTHKhiHy9z9NqP3wmAM0r2hoOBCADDAmSur2pbnPqqc0CsMBTQk3kEoAM6CLJX4jIiQOeXutppwK4pVZxJXQFIEO4TvJWETlpiC5qPPWbAH5eo7ASmgKQIV0nqf/injxkN7WdPhvA3NpEldATgDTgOsmbROS0BrqqqYtzAVxXk6ASWgKQhlwnOU9Ezmiou1q6uQDAtbWIKaEjAGnQdZI3isiZDXZZQ1cXA7iiBiElNAQgDbtOUu/dz2q429LdzQFwWWkRJeIHIC24TvInInJ2C12X7PIKABeXFFAidgDSkusk9QH3uy11X6rbawFcUCp4ibgBSIuuk/yxiJzbYogSXV8HwFtOY/oYgLQ8xEjqW6DzWg6Tu/u5AGbnDloiXgCSwXWSV4nIhRlC5QwxD4C3N3bv8S8AyTSkSOqr0u9lCpcrzC0ATs0VrEScACSj6yR/KCLe3gQtADAro41ZQwUgWe0WITlHRPQz1Z7aQgAzPSW0OpcApEBVSX5fRLz98LYIwLEF7Gw1ZADSqr1jd05Sb7X0lstTuxvAUZ4SCkAKVpOkPrR7m+e0GMBhBW1tNHQA0qid/XdGUn+Zvrr/M6s+YwmAGVUr7FFcANKjUW0eRlJ/SPQ2rXwpgOlt+paj7wAkh8s9xCCp0zd0aoqn9jsAB1tOKACpqHokvyMi11ckqQkpppfvBiBNDIEG+yCpc5xuaLDLGroyu6VQAFLD8FlDA0ldcOVt04RdATxRod3jSgpAKq0YSZ0IqEt4vbT5AE63lkwAUnHFSOqA8rRHlbmrSABSMSAqjaTOlp1fucxe5d0AQF9EmGkBiIFSkdSN6TxsCfosgO0NWP5fiQGIkWqR1CnltxmRO57M7QD81UoeAYiVSr17u/UNEbG+A/vZAH5qxfYAxEqlkk6Suu7il8Zkj5RrahViAGJwpJHUD/hY/eDNQwD2s2J7AGKlUmvoJKmLk35tUP7fAHzciu4AxEqlRtFJ8pj0mWpTWQAwM+7MCDU1AjKIJakfE9WPilprywFMtSI6ALFSqRE6SR4vIncYlK6STU2BD0CMjTIHr3pN7coYgBgChKR+D1G/i2i5fQ2AmZcLAYiRoUbyFBG52Yjc8WROAfCalTwCEAOVcjSr19w69QCkckCcrQsx96WqAKRiQEh+W0TMzFuawMoVIqLrQV6t2PL3SAtAKq2Www0czF09dGgEIBUC4nALoBdFZC9rV48ApE44zheRayqUNoykIwHcM0wHpc6NK0gp50eJS/IiEbmyIklNSDkTwLwmOirRRwBSwvXR4fC427vJ546R5QlAKgCEpH5QRz+s46ldAuBy6wkFIIUrSPIHInJJYRlNh78IgIsd6wOQpodGH/2R1OcNfe7w1M4D4GYT7gCk0NAkqW+q9I2Vp3YOAFebbwcgBYYnSf0XVj934KmZ3sV9rEIEIJmHKEn9F9bU7oI9WGT6Ve54+QUgPVS/qUNI6rwqnV/lqZ0OwMvWqO+pSwCSaaiS1J3adcd2T+1kANYXcI1bjwAkw3AlqTu0m9v6fwJrTgRwewb7ioYIQFq2n6SuAtTVgJ7aTABWN67rqw4BSF929XcwSb390HXkntpxAO70lFA8pBeoJkndZFo3m/bUjgZwl6eEJsolriATOTTA/yepe1bp3lWe2hEA7vWUUC+5BCC9uNTHMSR1t0Pd9dBTOxTAfZ4S6jWXAKRXpyY4jqR6qffmul+upzYDwBJPCfWTSwDSj1tjHEtyUoLjyAa6q6mLAwE8UJOg3FoCkCEdJ7l2guPwIbuq7fT9ATxYm6jcegKQIRwn+cEEx5eH6KbGU/cG8EiNwnJrCkAGdJzkegmOGQN2UetpewB4rFZxuXUFIAM4TnLDBMeBA5xe8ynTACyrWWBubQFIn46T/HCC44t9nlr74bsAeLJ2kbn1BSB9OE5y4wTHvn2cZuHQnQA8bUFobo0BSI+Ok9wkwbFXj6dYOWx7AM9aEZtbZwDSg+Mk9aus+iPg7j0cbumQbQA8b0lwbq0ByASOk/xkgmNa7uK0HG8qgOUtxzDffQAyTglJbpXg2NV8pf8/gS0BvOQsp1bSCUDGsJWkfqpYb6s+34rz5TrdHMAr5cLbihyAjFIvktskOHa0Vc4J1W5q8RMEE2bV4gEByBrmktwuwaH/9dQ2BvC6p4Ry5BKAjHCZpF4xFonIZ3KYnzHGZAArM8ZzEyoASaUkqc8aCsfWbqr7biIbAHjDWU7Z0glARISkvqVSOLbM5nyeQOsCeCtPKJ9ROg8Iyd3SM8cnnJV4bQDvOMspezqdBoTkHgmOzbI7327ASQBWtRuiG713FhCSeyc4Puao1KsA6PLfaA050ElASO6X4PhoQz7W0M07AHT5b7QGHegcICQPSHBMbtDH0l29BWDd0iI8xu8UICS/lODYwFEx3wDgKZ+qStMZQEgenOD4UFUVGE7MSgCeroTDudHC2Z0AhOShCY51WvCwVJevA9AVjtFadMA9ICS/kuBYq0Ufc3f9KoBNcwftYjzXgJA8KsHxfkfFfQXA5o7yqToVt4CQ1C157q/a/f7FvQTA23SY/l3IeIZLQEhOEZHfi4in9RzLAegirmgZHfAKiH4774SMPrYd6nkAuogrWmYH3AFC8gwRmZfZxzbDPQtg+zYDRN9jO+AKEJL6G8efRMTLasCnAewUA7icA94AuVBEripnZ6ORnwSwS6M9Rmd9O+AGEJIbicgzIuJh6voyAN724ep7cNZwgidA9NNnuirQensMgK5TiVaBA54AuUlETqvA02Ek/AHAPsN0EOc264AnQF4UEd0J0Wp7EMD+VsV71e0CEJI6o/Ufhov0AABvH+MxXI7/SfcCiD7Q6utdi20JAG+fcbNYh1E1ewHkeBG5w2BV7gOgU/GjVeqAF0AuFZE5lXo8lqx7ARxhTHPn5HoBxNoV5C4AR3dutBlM2Asglp5B7gRwnMGx0knJXgCx8hZrIYCZnRxpRpN2AYh6T/K5yndlXwBgltFx0lnZngC5RkTOr7SStwI4uVJtIWscBzwBcoiI3FdhtecDOL1CXSGpBwc8AaKbp+ltVk177f4MwLd6qEMcUqkDbgBJzyG6FkTXhNTQ5gKYXYOQ0DC4A94A0XXbT4nIBwa3pJEzrwdwTiM9RSdFHXAFSLqK6Hp0XZdeqv0IQK0vC0p5YjauO0ASJI+KyO4FqnI1gIsKxI2QLTngEpAEyQoR2aQl30br9nIAl2SMF6EyOOAWkASJrhHJsfv5HACXZahXhMjsgGtAEiQ6DV4nM7bVpgNY2lbn0W9ZB9wDkiBp4/XvE/oyAMDjZUsY0dt0oBOAJEgOEpETRWTYmbQKhv46Pr/NwkTfdTjQGUBW252+i66Q6LcKe92B8V8iordRugIwwKhj7GZR0TlARrpK8rMJlB1EZGsR0d3T9aH+BRFZnv4eUTgAvJ2lIhGkKgc6DUhVlQgxVToQgFRZlhBViwMBSC2VCB1VOhCAVFmWEFWLAwFILZUIHVU6EIBUWZYQVYsDAUgtlQgdVToQgFRZlhBViwMBSC2VCB1VOhCAVFmWEFWLAwFILZUIHVU6EIBUWZYQVYsD/wESFnz2Lm3UggAAAABJRU5ErkJggg==";function po(t){"@babel/helpers - typeof";return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ho(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function yo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(r),!0).forEach(function(e){vo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vo(t,e,r){return(e=bo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}function bo(t){var e=function(t,e){if("object"!==po(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===po(e)?e:String(e)}function _o(t,e){return(_o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function go(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wo(t);if(e){var o=wo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_o(t,e)}(i,Te);var e,r,n,o=go(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._positions=ye.parsePositions(t),e._delegate=new Cesium.Entity({polyline:{}}),e._style={width:3},e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();t.polyline&&((r=new i($t.transformCartesianArrayToWGS84Array(t.polyline.positions.getValue(n)))).attr=yo({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("arrowLine")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.polyline.positions=$t.transformWGS84ArrayToCartesianArray(this._positions),this}},{key:"center",get:function(){return me(this._positions)}},{key:"distance",get:function(){return be(this._positions)}},{key:"_mountedHook",value:function(){this.positions=this._positions}},{key:"setLabel",value:function(t,e){return this._delegate.position=$t.transformWGS84ToCartesian(this.center),this._delegate.label=yo({text:t},e),this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.positions,t.material=new Cesium.ImageMaterialProperty({image:fo,repeat:new Cesium.Cartesian2(50,1),transparent:!0}),Bt.merge(this._style,t),Bt.merge(this._delegate.polyline,t),this):this}}])&&mo(e.prototype,r),n&&mo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("polyline");var Po=Oo;function Co(t){"@babel/helpers - typeof";return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function So(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Eo(t,e,r){return(e=jo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function To(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jo(n.key),n)}}function jo(t){var e=function(t,e){if("object"!==Co(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Co(e)?e:String(e)}function xo(t,e){return(xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ao(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ro(t);if(e){var o=Ro(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ro(t){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(i,Te);var e,r,n,o=Ao(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._delegate=new Cesium.Entity({billboard:{}}),r._position=ye.parsePosition(t),r._icon=e,r._size=[32,32],r._anchor=je.BOTTOM_CENTER,r._state=Dt.INITIALIZED,r}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now(),o=$t.transformCartesianToWGS84(t.position.getValue(n));t.billboard&&((r=new i(o,t.billboard.image.getValue(n))).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?So(Object(r),!0).forEach(function(e){Eo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("icon")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this}},{key:"icon",get:function(){return this._icon},set:function(t){var e=this;return t.get_canvas?t.get_loading()?(this._icon=new Cesium.CallbackProperty(function(){return t.get_canvas().toDataURL("image/png")},!1),this._delegate.billboard.image=this._icon):t.load(function(){e._icon=new Cesium.CallbackProperty(function(){return t.get_canvas().toDataURL("image/png")},!1),e._delegate.billboard.image=e._icon}):(this._icon=t,this._delegate.billboard.image=this._icon),this}},{key:"size",get:function(){return this._size},set:function(t){if(!Array.isArray(t))throw new Error("Billboard: the size invalid");return this._size=t,this._delegate.billboard.width=this._size[0]||32,this._delegate.billboard.height=this._size[1]||32,this}},{key:"anchor",set:function(t){switch(this._anchor=t,t){case je.TOP_LEFT:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.LEFT,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.TOP;break;case je.TOP_CENTER:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.CENTER,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.TOP;break;case je.TOP_RIGHT:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.RIGHT,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.TOP;break;case je.BOTTOM_LEFT:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.LEFT,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.BOTTOM;break;case je.BOTTOM_CENTER:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.CENTER,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.BOTTOM;break;case je.BOTTOM_RIGHT:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.RIGHT,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.BOTTOM;break;case je.CENTER_CENTER:this._delegate.billboard.horizontalOrigin=Cesium.HorizontalOrigin.CENTER,this._delegate.billboard.verticalOrigin=Cesium.VerticalOrigin.CENTER}}},{key:"_mountedHook",value:function(){this.position=this._position,this.icon=this._icon,this.size=this._size,this.anchor=this._anchor}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.image&&delete t.width&&delete t.height,Bt.merge(this._style,t),Bt.merge(this._delegate.billboard,t),this):this}}])&&To(e.prototype,r),n&&To(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("icon");var Io=ko;function Mo(t){"@babel/helpers - typeof";return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mo(i=function(t,e){if("object"!==Mo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Lo(t,e){return(Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function No(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fo(t);if(e){var o=Fo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fo(t){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e)}(i,Te);var e,r,n,o=No(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this))._position=ye.parsePosition(t),a._length=e,a._width=r,a._height=n,a._delegate=new Cesium.Entity({box:{dimensions:{x:+a._length,y:+a._width,z:+a._height}}}),a._state=Dt.INITIALIZED,a}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("box")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this._delegate.orientation=Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(this._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._position.heading),Cesium.Math.toRadians(this._position.pitch),Cesium.Math.toRadians(this._position.roll))),this}},{key:"length",get:function(){return this._length},set:function(t){return this._length=t||0,this._delegate.box.dimensions.x=+this._length,this}},{key:"width",get:function(){return this._width},set:function(t){return this._width=t||0,this._delegate.box.dimensions.y=+this._width,this}},{key:"height",get:function(){return this._height},set:function(t){return this._height=t||0,this._delegate.box.dimensions.z=+this._height,this}},{key:"_mountedHook",value:function(){this.position=this._position}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.length&&delete t.width&&delete t.height,Bt.merge(this._style,t),Bt.merge(this._delegate.box,t),this)}}])&&Do(e.prototype,r),n&&Do(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("box");var Wo=Bo;function Go(t){"@babel/helpers - typeof";return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ho(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zo(Object(r),!0).forEach(function(e){Uo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Uo(t,e,r){return(e=Zo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zo(n.key),n)}}function Zo(t){var e=function(t,e){if("object"!==Go(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Go(e)?e:String(e)}function Yo(t,e){return(Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ko(t);if(e){var o=Ko(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ko(t){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cesium.Color.RED;var Qo="#f00",qo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yo(t,e)}(i,Te);var e,r,n,o=Xo(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._delegate=new Cesium.Entity({polygon:{}}),r._center=ye.parsePosition(t),r._radius=+e||0,r._rotateAmount=0,r._stRotation=0,r.pts=[],r._state=Dt.INITIALIZED,r}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("circle")}},{key:"center",get:function(){return this._center},set:function(t){this._center=ye.parsePosition(t),this._delegate.polygon.hierarchy=this._computeHierarchy()}},{key:"radius",get:function(){return this._radius},set:function(t){return this._radius=+t,this._delegate.polygon.hierarchy=this._computeHierarchy(),this._radius}},{key:"rotateAmount",get:function(){return this._rotateAmount},set:function(t){var e=this;return this._rotateAmount=+t,this._delegate.polygon.stRotation=new Cesium.CallbackProperty(function(){return e._stRotation+=e._rotateAmount,(e._stRotation>=360||e._stRotation<=-360)&&(e._stRotation=0),Cesium.Math.toRadians(e._stRotation)},!1),this}},{key:"_computeHierarchy",value:function(){var t=new Cesium.PolygonHierarchy,e=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:$t.transformWGS84ToCartesian(this._center),semiMajorAxis:this._radius,semiMinorAxis:this._radius,rotation:0,granularity:.005},!1,!0),r=Cesium.Cartesian3.unpackArray(e.outerPositions);return r.push(r[0]),t.positions=r,this.pts=$t.transformCartesianArrayToWGS84Array(r),t}},{key:"_mountedHook",value:function(){this.center=this._center}},{key:"setLabel",value:function(t,e){return this._delegate.position=$t.transformWGS84ToCartesian(this._center),this._delegate.label=Ho(Ho({},e),{},{text:t}),this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.positions,t.material=Cesium.Color.fromCssColorString(t.fillColor||Qo),Bt.merge(this._style,t),Bt.merge(this._delegate.polygon,t),this):this}}])&&Vo(e.prototype,r),n&&Vo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("circle");var Jo=qo;function $o(t){"@babel/helpers - typeof";return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ei(t,e,r){return(e=ni(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ni(n.key),n)}}function ni(t){var e=function(t,e){if("object"!==$o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$o(e)?e:String(e)}function oi(t,e){return(oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ai(t);if(e){var o=ai(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var si=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}(i,Te);var e,r,n,o=ii(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._positions=ye.parsePositions(t),e._delegate=new Cesium.Entity({corridor:{}}),e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();t.polyline&&((r=new i($t.transformCartesianArrayToWGS84Array(t.polyline.positions.getValue(n)))).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(r),!0).forEach(function(e){ei(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ti(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("corridor")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.corridor.positions=$t.transformWGS84ArrayToCartesianArray(this._positions),this}},{key:"_mountedHook",value:function(){this.positions=this._positions}},{key:"setLabel",value:function(t,e){return this}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.positions,Bt.merge(this._style,t),Bt.merge(this._delegate.corridor,t),this)}}])&&ri(e.prototype,r),n&&ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("corridor");var ui=si;function li(t){"@babel/helpers - typeof";return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===li(i=function(t,e){if("object"!==li(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function fi(t,e){return(fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hi(t);if(e){var o=hi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fi(t,e)}(i,Te);var e,r,n,o=pi(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this))._position=ye.parsePosition(t),a._length=+e||0,a._topRadius=+r||0,a._bottomRadius=+n||0,a._delegate=new Cesium.Entity({cylinder:{}}),a._state=Dt.INITIALIZED,a}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("cylinder")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this._delegate.orientation=Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(this._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._position.heading),Cesium.Math.toRadians(this._position.pitch),Cesium.Math.toRadians(this._position.roll))),this}},{key:"length",get:function(){return this._length},set:function(t){return this._length=+t||0,this._delegate.cylinder.length=this._length,this}},{key:"topRadius",get:function(){return this._topRadius},set:function(t){return this._topRadius=+t||0,this._delegate.cylinder.topRadius=this._topRadius,this}},{key:"bottomRadius",get:function(){return this._bottomRadius},set:function(t){return this._bottomRadius=+t||0,this._delegate.cylinder.bottomRadius=this._bottomRadius,this}},{key:"_mountedHook",value:function(){this.position=this._position,this.length=this._length,this.topRadius=this._topRadius,this.bottomRadius=this._bottomRadius}},{key:"setLabel",value:function(t,e){return this}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.length&&delete t.topRadius&&delete t.bottomRadius,Bt.merge(this._style,t),Bt.merge(this._delegate.cylinder,t),this)}}])&&ci(e.prototype,r),n&&ci(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("cylinder");var di=yi;function vi(t){"@babel/helpers - typeof";return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function bi(t,e,r){return(e=gi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!==vi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===vi(e)?e:String(e)}function wi(t,e){return(wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Oi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pi(t);if(e){var o=Pi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pi(t){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ci=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wi(t,e)}(i,Jo);var e,r,n,o=Oi(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._color="rgba(255,0,0,1.0)",r._duration=1e4,r}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();t.polygon&&((r=new i($t.transformCartesianToWGS84(t.position.getValue(n)),t.ellipse.semiMajorAxis.getValue(n))).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mi(Object(r),!0).forEach(function(e){bi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"fillColor",set:function(t){this._color=t,this._delegate.polygon.material&&(this._delegate.polygon.material.color=Cesium.Color.fromCssColorString(t))}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t,this._delegate.polygon.material&&(this._delegate.polygon.material.duration=t)}},{key:"_mountedHook",value:function(){this.center=this._center,this._delegate.polygon.material=new Cesium.EllipsoidFadeMaterialProperty(Cesium.Color.fromCssColorString(this._color),this._duration)}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.center,delete t.radius,Bt.merge(this._style,t),Bt.merge(this._delegate.polygon,t),this.fillColor=t.fillColor||this._color,this):this}}])&&_i(e.prototype,r),n&&_i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Si(t,e){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t,this.duration=e,this._time=(new Date).getTime()}Te.registerType("diffuse_circle"),Object.defineProperties(Si.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration")}),Si.prototype.getType=function(t){return"EllipsoidFade"},Si.prototype.getValue=function(t,e){return Cesium.defined(e)||(e={}),e.color=Cesium.Property.getValueOrClonedDefault(this._color,t,Cesium.Color.WHITE,e.color),e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e},Si.prototype.equals=function(t){return this===t||t instanceof Si&&Cesium.Property.equals(this._color,t._color)},Cesium.EllipsoidFadeMaterialProperty=Si;var Ei=Ci;function Ti(t){"@babel/helpers - typeof";return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Ti(i=function(t,e){if("object"!==Ti(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function xi(t,e){return(xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ri(t);if(e){var o=Ri(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ti(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ki=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xi(t,e)}(i,Fr);var e,r,n,o=Ai(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._color="rgba(255,0,0,1.0)",e._duration=1e4,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("ellipse")}},{key:"_computeHierarchy",value:function(){var t=[this._positions[0].lng,this._positions[0].lat],e=[this._positions[1].lng,this._positions[1].lat],r=Zt.mid(t,e),n=Math.abs((t[0]-e[0])/2),o=Math.abs((t[1]-e[1])/2),i=this._generatePoints(r,n,o);return $t.transformWGS84ArrayToCartesianArray(ye.parsePositions(i))}},{key:"_generatePoints",value:function(t,e,r){for(var n,o,i,a=[],s=0;s<=100;s++)i=2*Math.PI*s/100,n=t[0]+e*Math.cos(i),o=t[1]+r*Math.sin(i),a.push([n,o]);return a}}])&&ji(e.prototype,r),n&&ji(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("ellipse");var Ii=ki;function Mi(t){"@babel/helpers - typeof";return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Di(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mi(i=function(t,e){if("object"!==Mi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Li(t,e){return(Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ni(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fi(t);if(e){var o=Fi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Li(t,e)}(i,Te);var e,r,n,o=Ni(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._position=ye.parsePosition(t),r._radius=e||{x:10,y:10,z:10},r._delegate=new Cesium.Entity({ellipsoid:{}}),r._state=Dt.INITIALIZED,r}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("ellipsoid")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this._delegate.orientation=Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(this._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._position.heading),Cesium.Math.toRadians(this._position.pitch),Cesium.Math.toRadians(this._position.roll))),this}},{key:"radius",get:function(){return this._radius},set:function(t){return this._radius=t||{x:10,y:10,z:10},this._delegate.ellipsoid.radii=this._radius,this}},{key:"_mountedHook",value:function(){this.position=this._position,this.radius=this._radius}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.radius,Bt.merge(this._style,t),Bt.merge(this._delegate.ellipsoid,t),this)}}])&&Di(e.prototype,r),n&&Di(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("ellipsoid");var Wi=Bi;function Gi(t){"@babel/helpers - typeof";return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Hi(t,e,r){return(e=Vi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vi(n.key),n)}}function Vi(t){var e=function(t,e){if("object"!==Gi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Gi(e)?e:String(e)}function Zi(t,e){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xi(t);if(e){var o=Xi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xi(t){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ki=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}(i,Ke);var e,r,n,o=Yi(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._delegate=new Cesium.Entity({point:{}}),e._position=ye.parsePosition(t),e._color=Cesium.Color.fromCssColorString("#f00"),e._size=30,e._style={fillColor:"#f00",size:30},e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();return(r=new i($t.transformCartesianToWGS84(t.position.getValue(n)))).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zi(Object(r),!0).forEach(function(e){Hi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)),r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("flash_point")}},{key:"fillColor",set:function(t){this._color=Cesium.Color.fromCssColorString(t)}},{key:"size",set:function(t){this._size=t}},{key:"_mountedHook",value:function(){var t=this;this.position=this._position;var e=1,r=!0,n=.7,o=!0;this._delegate.point.color=new Cesium.CallbackProperty(function(){return r?(e-=.03)<=0&&(r=!1):(e=1,r=!0),t._color.withAlpha(e)},!1),this._delegate.point.outlineColor=new Cesium.CallbackProperty(function(){return o?(n-=.035)<=0&&(o=!1):(n=.7,o=!0),t._color.withAlpha(n)},!1);var i=2,a=!0;this._delegate.point.pixelSize=new Cesium.CallbackProperty(function(e,r){return a?(i+=2)>=t._size&&(a=!1):(i=2,a=!0),i},!1)}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.position,Bt.merge(this._style,t),Bt.merge(this._delegate.point,this._style),this.size=this._style.size,this.fillColor=this._style.fillColor,this):this}}])&&Ui(e.prototype,r),n&&Ui(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("flash_point");var Qi=Ki;function qi(t){"@babel/helpers - typeof";return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $i(t,e,r){return(e=ea(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ea(n.key),n)}}function ea(t){var e=function(t,e){if("object"!==qi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===qi(e)?e:String(e)}function ra(t,e){return(ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function na(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=oa(t);if(e){var o=oa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ra(t,e)}(i,Te);var e,r,n,o=na(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._delegate=new Cesium.Entity({label:{}}),r._position=ye.parsePosition(t),r._text=e,r._state=Dt.INITIALIZED,r}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=Cesium.JulianDate.now(),n=$t.transformCartesianToWGS84(t.position.getValue(r)),o=void 0;t.billboard&&((o=new i(n,t.name)).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(r),!0).forEach(function(e){$i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ji(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(r)));return o}}],(r=[{key:"type",get:function(){return Te.getOverlayType("label")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this}},{key:"text",get:function(){return this._text},set:function(t){return this._text=t,this._delegate.label.text=this._text,this}},{key:"_mountedHook",value:function(){this.position=this._position,this.text=this._text}},{key:"setLabel",value:function(t,e){return this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.text,Bt.merge(this._style,t),Bt.merge(this._delegate.label,t),this):this}}])&&ta(e.prototype,r),n&&ta(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("label");var aa=ia;function sa(t){"@babel/helpers - typeof";return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===sa(i=function(t,e){if("object"!==sa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function la(t,e){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ca(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fa(t);if(e){var o=fa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&la(t,e)}(i,Te);var e,r,n,o=ca(i);function i(t,e,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this))._position=ye.parsePosition(t),n._width=+e||0,n._height=+r||0,a.normal&&"string"==typeof a.normal){var s=String(a.normal).toLocaleUpperCase();a.normal="X"===s?Cesium.Cartesian3.UNIT_X:"Y"===s?Cesium.Cartesian3.UNIT_Y:Cesium.Cartesian3.UNIT_Z}else a.normal=Cesium.Cartesian3.UNIT_Z;return n._normal=a.normal,n._distance=a.distance||0,n._delegate=new Cesium.Entity({plane:{dimensions:{x:n._width,y:n._height},plane:new Cesium.Plane(n._normal,n._distance)}}),n._state=Dt.INITIALIZED,n}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("plane")}},{key:"position",get:function(){return this._position},set:function(t){return this._position=ye.parsePosition(t),this._delegate.position=$t.transformWGS84ToCartesian(this._position),this._delegate.orientation=Cesium.Transforms.headingPitchRollQuaternion($t.transformWGS84ToCartesian(this._position),new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._position.heading),Cesium.Math.toRadians(this._position.pitch),Cesium.Math.toRadians(this._position.roll))),this}},{key:"width",get:function(){return this._width},set:function(t){return this._width=+t||0,this._delegate.plan.dimensions.x=this._width,this}},{key:"height",get:function(){return this._height},set:function(t){return this._height=+t||0,this._delegate.plan.dimensions.y=this._height,this}},{key:"distance",get:function(){return this._distance},set:function(t){return this._distance=t,this._delegate.plane.plane.distance=t,this}},{key:"_mountedHook",value:function(){this.position=this._position,this.distance=this._distance}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.dimensions,Bt.merge(this._style,t),Bt.merge(this._delegate.plane,t),this)}}])&&ua(e.prototype,r),n&&ua(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("plane");var ha=pa;function ya(t){"@babel/helpers - typeof";return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function va(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?da(Object(r),!0).forEach(function(e){ma(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ma(t,e,r){return(e=_a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ba(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_a(n.key),n)}}function _a(t){var e=function(t,e){if("object"!==ya(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ya(e)?e:String(e)}function ga(t,e){return(ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Oa(t);if(e){var o=Oa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ya(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Oa(t){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ga(t,e)}(i,Te);var e,r,n,o=wa(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._positions=ye.parsePositions(t),e._delegate=new Cesium.Entity({polyline:{}}),e._style={width:3},e._state=Dt.INITIALIZED,e}return e=i,n=[{key:"fromEntity",value:function(t){var e,r=void 0,n=Cesium.JulianDate.now();t.polyline&&((r=new i($t.transformCartesianArrayToWGS84Array(t.polyline.positions.getValue(n)))).attr=va({},null===t||void 0===t?void 0:null===(e=t.properties)||void 0===e?void 0:e.getValue(n)));return r}}],(r=[{key:"type",get:function(){return Te.getOverlayType("polyline")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.polyline.positions=$t.transformWGS84ArrayToCartesianArray(this._positions),this}},{key:"center",get:function(){return me(this._positions)}},{key:"distance",get:function(){return be(this._positions)}},{key:"_mountedHook",value:function(){this.positions=this._positions}},{key:"setLabel",value:function(t,e){return this._delegate.position=$t.transformWGS84ToCartesian(this.center),this._delegate.label=va({text:t},e),this}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.positions,t.material=Cesium.Color.fromCssColorString(t.fillColor||"#f00"),Bt.merge(this._style,t),Bt.merge(this._delegate.polyline,t),this):this}}])&&ba(e.prototype,r),n&&ba(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("polyline");var Ca=Pa;function Sa(t){"@babel/helpers - typeof";return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ea(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ta(t,e,r){return(e=xa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ja(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xa(n.key),n)}}function xa(t){var e=function(t,e){if("object"!==Sa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Sa(e)?e:String(e)}function Aa(t,e){return(Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ka(t);if(e){var o=ka(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aa(t,e)}(i,Te);var e,r,n,o=Ra(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._positions=ye.parsePositions(t),r._shape=e||[],r._delegate=new Cesium.Entity({polylineVolume:{}}),r._state=Dt.INITIALIZED,r}return e=i,n=[{key:"fromEntity",value:function(t,e){var r,n=void 0,o=Cesium.JulianDate.now();t.polyline&&((n=new i($t.transformCartesianArrayToWGS84Array(t.polyline.positions.getValue(o)),e)).attr=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ea(Object(r),!0).forEach(function(e){Ta(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},null===t||void 0===t?void 0:null===(r=t.properties)||void 0===r?void 0:r.getValue(o)));return n}}],(r=[{key:"type",get:function(){return Te.getOverlayType("polyline_volume")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.polylineVolume.positions=$t.transformWGS84ArrayToCartesianArray(this._positions),this}},{key:"shape",get:function(){return this._shape},set:function(t){return this._shape=t||[],this._delegate.polylineVolume.shape=this._shape,this}},{key:"_mountedHook",value:function(){this.positions=this._positions,this.shape=this._shape}},{key:"setLabel",value:function(t,e){return this}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.positions&&delete t.shape,Bt.merge(this._style,t),Bt.merge(this._delegate.polylineVolume,t),this)}}])&&ja(e.prototype,r),n&&ja(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("polyline_volume");var Ma=Ia;function Da(t){"@babel/helpers - typeof";return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Na(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?La(Object(r),!0).forEach(function(e){Fa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):La(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Fa(t,e,r){return(e=za(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ba(t){return function(t){if(Array.isArray(t))return Wa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wa(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,za(n.key),n)}}function za(t){var e=function(t,e){if("object"!==Da(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Da(e)?e:String(e)}function Ha(t,e){return(Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ua(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Va(t);if(e){var o=Va(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Da(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Va(t){return(Va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Za="#f00",Ya=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ha(t,e)}(i,Te);var e,r,n,o=Ua(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._positions=ye.parsePositions(t),e._delegate=new Cesium.Entity({rectangle:{}}),e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("rectangle")}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._delegate.rectangle.coordinates=Cesium.Rectangle.fromCartesianArray($t.transformWGS84ArrayToCartesianArray(this._positions)),this}},{key:"center",get:function(){return me([].concat(Ba(this._positions),[this._positions[0]]))}},{key:"_mountedHook",value:function(){this.positions=this._positions}},{key:"setLabel",value:function(t,e){return this._delegate.position=Cesium.Cartographic.toCartesian(Cesium.Rectangle.center(this._delegate.rectangle,new Cesium.Cartographic)),this._delegate.label=Na(Na({},e),{},{text:t}),this}},{key:"setStyle",value:function(t){return 0===Object.keys(t).length?this:(delete t.positions,t.material=Cesium.Color.fromCssColorString(t.fillColor||Za),Bt.merge(this._style,t),Bt.merge(this._delegate.rectangle,t),this)}}])&&Ga(e.prototype,r),n&&Ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("rectangle");var Xa=Ya,Ka=n(44);function Qa(t){"@babel/helpers - typeof";return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Qa(i=function(t,e){if("object"!==Qa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Ja(t,e){return(Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ts(t);if(e){var o=ts(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Qa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ts(t){return(ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var es=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ja(t,e)}(i,Jo);var e,r,n,o=$a(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._color="rgba(255,0,0,1.0)",r._duration=1e4,r}return e=i,(r=[{key:"type",get:function(){return Te.getOverlayType("scan_circle")}},{key:"fillColor",set:function(t){this._color=t,this._delegate.polygon.material&&(this._delegate.polygon.material.color=Cesium.Color.fromCssColorString(t))}},{key:"duration",set:function(t){this._duration=t,this._delegate.polygon.material&&(this._delegate.polygon.material.duration=t)}},{key:"_mountedHook",value:function(){this.center=this._center,this._delegate.polygon.material=new Ka.RadarScanMaterialProperty({color:new Cesium.Color.fromCssColorString(this._color),speed:10})}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(delete t.positions,Bt.merge(this._style,t),Bt.merge(this._delegate.polygon,t),this.fillColor=t.fillColor||this._color,this):this}}])&&qa(e.prototype,r),n&&qa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Te.registerType("scan_circle");var rs=es,ns={MARKER:"icon",POLYLINE:"polyline",POLYGON:"polygon",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle",ATTACK_ARROW:"attack_arrow",CLOSED_CURVE:"closed_curve",DOUBLE_ARROW:"double_arrow",FINE_ARROW:"fine_arrow",ASSAULT_DIRECTION:"assault_direction",GATHERING_PLACE:"gathering_place",SECTOR:"sector",SQUAD_COMBAT:"squad_combat",TAILED_ATTACK_ARROW:"tailed_attack_arrow",TAILED_SQUAD_COMBAT:"tailed_squad_combat"};function os(t){"@babel/helpers - typeof";return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===os(i=function(t,e){if("object"!==os(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var as=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._style=e,this._viewer=void 0,this._map3d=void 0,this._layer=void 0,this._delegate=void 0,this._options={},this._positions=[],this._points=[],this._plotType=void 0}var e,r,n;return e=t,(r=[{key:"drawTool",get:function(){return this._map3d.drawTool}},{key:"_mountedHook",value:function(){}},{key:"_stopdHook",value:function(){}},{key:"_onDrawAnchor",value:function(t){}},{key:"setPoints",value:function(t){this._positions=t}},{key:"_onAnchorMoving",value:function(t){var e=this._points.concat([t]);this.setPoints(e)}},{key:"_initTip",value:function(){var t=this.getPlotNam();switch(this._plotType){case ns.MARKER:this.drawTool.tooltipMess="当前绘制类型：点，需要1个点<br/>按下鼠标左键确定位置<br/>按下鼠标右键取消绘制";break;case ns.TEXT:this.drawTool.tooltipMess="当前绘制类型：文本，需要1个点<br/>";break;case ns.POLYLINE:this.drawTool.tooltipMess="当前绘制类型：线，最少需要2个点<br/>按下鼠标左键确定第1个点<br/>按下鼠标右键取消绘制<br/>";break;case ns.POLYGON:this.drawTool.tooltipMess="当前绘制类型：面，最少需要3个点<br/>";break;case ns.CIRCLE:case ns.DIFFUSE_CIRCLE:case ns.SCAN_CIRCLE:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要2个点<br/>";break;case ns.RECTANGLE:this.drawTool.tooltipMess="当前绘制类型：矩形，需要2个点<br/>";break;case ns.SQUAD_COMBAT:case ns.TAILED_SQUAD_COMBAT:this.drawTool.tooltipMess="当前绘制类型：，最少需要2个点";break;case ns.ELLIPSE:case ns.FINE_ARROW:case ns.ASSAULT_DIRECTION:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要2个点<br/>";break;case ns.ATTACK_ARROW:case ns.TAILED_ATTACK_ARROW:case ns.CLOSED_CURVE:this.drawTool.tooltipMess="当前绘制类型："+t+"，最少需要3个点<br/>";break;case ns.GATHERING_PLACE:case ns.SECTOR:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要3个点<br/>";break;case ns.DOUBLE_ARROW:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要4个点<br/>"}}},{key:"getPlotNam",value:function(){switch(this._plotType){case ns.MARKER:return"点";case ns.POLYLINE:return"线";case ns.POLYGON:return"面";case ns.ELLIPSE:return"椭圆";case ns.CIRCLE:return"正圆";case ns.DIFFUSE_CIRCLE:return"扩散圆";case ns.SCAN_CIRCLE:return"扫描圆";case ns.RECTANGLE:return"矩形";case ns.CLOSED_CURVE:return"曲线面";case ns.SECTOR:return"扇形";case ns.FINE_ARROW:return"直箭头";case ns.ASSAULT_DIRECTION:return"突击方向";case ns.ATTACK_ARROW:return"点进攻方向";case ns.TAILED_ATTACK_ARROW:return"进攻方向尾";case ns.GATHERING_PLACE:return"集结地";case ns.SQUAD_COMBAT:return"分队作战";case ns.TAILED_SQUAD_COMBAT:return"分队作战尾";case ns.DOUBLE_ARROW:return"钳击"}}},{key:"_setTipContent",value:function(){var t=this.getPlotNam();switch(this._plotType){case ns.POLYLINE:this.drawTool.tooltipMess="当前绘制类型：线，最少需要2个点。<br/>已有"+this._points.length+"个点，按下鼠标左键确定第"+(this._points.length+1)+"个点<br/>"+(this._points.length<2?"按下鼠标右键取消绘制":"按下鼠标右键结束绘制");break;case ns.POLYGON:this.drawTool.tooltipMess="当前绘制类型：面，最少需要3个点。<br/>已有"+this._points.length+"个点，按下鼠标左键确定第"+(this._points.length+1)+"个点<br/>"+(this._points.length<3?"按下鼠标右键取消绘制":"按下鼠标右键结束绘制");break;case ns.CIRCLE:case ns.DIFFUSE_CIRCLE:case ns.SCAN_CIRCLE:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要2个点。<br/>已有"+this._points.length+"个点，按下鼠标左键确定第"+(this._points.length+1)+"个点<br/>按下鼠标右键取消绘制";break;case ns.RECTANGLE:this.drawTool.tooltipMess="当前绘制类型：矩形，需要2个点。<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>按下鼠标右键取消绘制";break;case ns.SQUAD_COMBAT:case ns.TAILED_SQUAD_COMBAT:this.drawTool.tooltipMess="当前绘制类型："+t+"，最少需要2个点<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>"+(this._positions.length<2?"按下鼠标右键取消绘制":"按下鼠标右键结束绘制");break;case ns.ELLIPSE:case ns.FINE_ARROW:case ns.ASSAULT_DIRECTION:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要2个点<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>按下鼠标右键取消绘制";break;case ns.ATTACK_ARROW:case ns.TAILED_ATTACK_ARROW:case ns.CLOSED_CURVE:this.drawTool.tooltipMess="当前绘制类型："+t+"，最少需要3个点<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>"+(this._positions.length<3?"按下鼠标右键取消绘制":"按下鼠标右键结束绘制");break;case ns.GATHERING_PLACE:case ns.SECTOR:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要3个点<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>按下鼠标右键取消绘制";break;case ns.DOUBLE_ARROW:this.drawTool.tooltipMess="当前绘制类型："+t+"，需要4个点<br/>已有"+this._positions.length+"个点，按下鼠标左键确定第"+(this._positions.length+1)+"个点<br/>按下鼠标右键取消绘制"}}},{key:"_onDrawStop",value:function(){this._unbindEvent(),this.drawTool.deactivate(),0!=this._points.length?this._maxAnchorSize?this._points.length==this._maxAnchorSize?(this.clear(),this._stopdHook()):(this._options.onDrawStop&&this._options.onDrawStop(!1),this.clear()):this._points.length>=this._minPointCount?(this.setPoints([].concat(this._points)),this.clear(),this._stopdHook()):(this._options.onDrawStop&&this._options.onDrawStop(!1),this.clear()):this._options.onDrawStop&&this._options.onDrawStop(!1)}},{key:"_bindEvent",value:function(){this.drawTool.on(T.DRAW_ANCHOR,this._onDrawAnchor,this),this.drawTool.on(T.ANCHOR_MOVING,this._onAnchorMoving,this),this.drawTool.on(T.DRAW_STOP,this._onDrawStop,this)}},{key:"_unbindEvent",value:function(){this.drawTool.off(T.DRAW_ANCHOR,this._onDrawAnchor,this),this.drawTool.off(T.ANCHOR_MOVING,this._onAnchorMoving,this),this.drawTool.off(T.DRAW_STOP,this._onDrawStop,this)}},{key:"start",value:function(t,e){return this._map3d=t._map3d,this._viewer=t._viewer,this._layer=t.layer,this._options=e,this._viewer.editTool.deactivate(),this._map3d.drawTool.activate(e),this._mountedHook(),this._unbindEvent(),this._bindEvent(),this}},{key:"clear",value:function(){this._delegate&&this._layer.entities.remove(this._delegate),this._delegate=void 0}},{key:"stop",value:function(t){return t?this.drawTool.fire(T.DRAW_STOP):(this._unbindEvent(),this.drawTool.deactivate(),this.clear()),this}}])&&is(e.prototype,r),n&&is(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ss(t){"@babel/helpers - typeof";return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ls(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?us(Object(r),!0).forEach(function(e){cs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):us(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function cs(t,e,r){return(e=ps(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ps(n.key),n)}}function ps(t){var e=function(t,e){if("object"!==ss(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ss(e)?e:String(e)}function hs(t,e){return(hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ds(t);if(e){var o=ds(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ss(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ds(t){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vs={pixelSize:10,outlineColor:Cesium.Color.BLUE,outlineWidth:5},ms=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hs(t,e)}(i,as);var e,r,n,o=ys(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._position=Cesium.Cartesian3.ZERO,e._style=ls(ls({},vs),t),e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this.drawTool.tooltipMess="单击选择点位",this._delegate=new Cesium.Entity({position:new Cesium.CallbackProperty(function(){return t._position},!1),point:ls({},this._style)}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._position&&(t=new Ke($t.transformCartesianToWGS84(this._position)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._position=t,this.drawTool.fire(T.DRAW_STOP,t)}},{key:"_onAnchorMoving",value:function(t){this._position=t}}])&&fs(e.prototype,r),n&&fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bs(t){"@babel/helpers - typeof";return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function gs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_s(Object(r),!0).forEach(function(e){ws(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ws(t,e,r){return(e=Ps(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Os(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ps(n.key),n)}}function Ps(t){var e=function(t,e){if("object"!==bs(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===bs(e)?e:String(e)}function Cs(t,e){return(Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ss(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Es(t);if(e){var o=Es(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Es(t){return(Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ts={width:3,material:Cesium.Color.RED.withAlpha(.6)},js=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cs(t,e)}(i,as);var e,r,n,o=Ss(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType="polyline",e._style=gs(gs({},Ts),t),e._style.material=t.fillColor?Cesium.Color.fromCssColorString(t.fillColor):Cesium.Color.RED.withAlpha(.6),delete e._style.fillColor,e._plotType=_e.POLYLINE,e._minPointCount=2,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._initTip(),this._delegate=new Cesium.Entity({polyline:gs(gs({},this._style),{},{positions:new Cesium.CallbackProperty(function(){return t._positions},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Ca($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),this._options.onDrawAnchor&&this._options.onDrawAnchor($t.transformCartesianToWGS84(t))}}])&&Os(e.prototype,r),n&&Os(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xs(t){"@babel/helpers - typeof";return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Rs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?As(Object(r),!0).forEach(function(e){ks(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):As(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ks(t,e,r){return(e=Ms(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Is(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ms(n.key),n)}}function Ms(t){var e=function(t,e){if("object"!==xs(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xs(e)?e:String(e)}function Ds(t,e){return(Ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ls(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ns(t);if(e){var o=Ns(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ns(t){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fs={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ds(t,e)}(i,as);var e,r,n,o=Ls(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=Rs(Rs({},Fs),t),e._plotType=_e.POLYGON,e._minPointCount=3,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:Rs(Rs({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>2?new Cesium.PolygonHierarchy(t._positions):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Fr($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),this._options.onDrawAnchor&&this._options.onDrawAnchor($t.transformCartesianToWGS84(t))}}])&&Is(e.prototype,r),n&&Is(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ws(t){"@babel/helpers - typeof";return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function zs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(r),!0).forEach(function(e){Hs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gs(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Hs(t,e,r){return(e=Vs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Us(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vs(n.key),n)}}function Vs(t){var e=function(t,e){if("object"!==Ws(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ws(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ws(e)?e:String(e)}function Zs(t,e){return(Zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xs(t);if(e){var o=Xs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ws(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ks={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Qs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zs(t,e)}(i,as);var e,r,n,o=Ys(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=ns.CIRCLE,e._maxAnchorSize=2,e._radius=0,e._style=zs(zs({},Ks),t),e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:zs(zs({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){if(t._positions.length>1){if(t._radius=Cesium.Cartesian3.distance(t._positions[0],t._positions[1]),t._radius<=0)return null;var e=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:t._positions[0],semiMajorAxis:t._radius,semiMinorAxis:t._radius,rotation:0,granularity:.005},!1,!0),r=Cesium.Cartesian3.unpackArray(e.outerPositions);return r.push(r[0]),new Cesium.PolygonHierarchy(r)}return null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Jo($t.transformCartesianToWGS84(this._positions[0]),this._radius).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent();var e=this._points.length;this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t,isCenter:1===e}),e==this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&Us(e.prototype,r),n&&Us(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qs(t){"@babel/helpers - typeof";return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Js(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Js(Object(r),!0).forEach(function(e){tu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Js(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tu(t,e,r){return(e=ru(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ru(n.key),n)}}function ru(t){var e=function(t,e){if("object"!==qs(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===qs(e)?e:String(e)}function nu(t,e){return(nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iu(t);if(e){var o=iu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function iu(t){return(iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var au={material:Cesium.Color.RED.withAlpha(.6)},su=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nu(t,e)}(i,as);var e,r,n,o=ou(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=_e.RECTANGLE,e._maxAnchorSize=2,e._style=$s($s({},au),t),e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate=new Cesium.Entity({rectangle:$s($s({},this._style),{},{coordinates:new Cesium.CallbackProperty(function(e){return t._positions.length>1?Cesium.Rectangle.fromCartesianArray(t._positions):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Xa($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent();var e=this._points.length;this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&eu(e.prototype,r),n&&eu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),uu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQ4jWP8//8/Ax5gwMDAIACVfgDF2AHIIDSs8Of+8x3/vv/88ffFu++/jl75/evEte//vnz//e/Dl3d/nrye8P//fwF0fSicv28/Vv7/////t8W7/79Wi///gt0DBb9zLfv/89Cl/3/fff7w//9/A2S9cK/9//i1g4GZqeSdcwnzn4v38HmXgSs3gIGnKfEXIyebOQMDwwWQGMwgh/9fvu8hxhAY4Ix1ZeCdnPOTkYNNgoGB4QMT2DWfv6/50riIaENA4Pvi3Qy/T99k//v0TQOIDzLI4P/nb/zfJm8g2hAY+Nq8hIFJmC8DbNDfp28Sfqw7zEKyKQwMDL8OXQKFLShsDJgYmRhN/j58SY45YPDn1hMOUFpjYmBj5aHEIBhg+vvw5QVWPWWyDWBkY/kBoplYjVQPsOgrkWeIADcDq7kmyGsXQLG2gd3XkoFZXpxkg7hzAhn+3nl6HpaOPvx79X4+35xikgwBWcxVEPSXWUW6iAGajhiYxASLWLTkHxNrGMhLAmsb/v57+2klAwPDAbAYUjEi8O/tp0t/rj2U/ZTSy4ArJtns9Bj4F5T9YWBk2M4kKewHNxytPBL49+p9H5OYYOLPzcfBCQ6WbUAGsAdY/2VWkfrz/+PXIiZxwWkorsRRsCn8e/cp8v+nb/aMvFygTMnw/8v3q8zy4rsZGBgWYKhmYGAAAN6EGE9igaT+AAAAAElFTkSuQmCC";function lu(t){"@babel/helpers - typeof";return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function fu(t,e,r){return(e=hu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hu(n.key),n)}}function hu(t){var e=function(t,e){if("object"!==lu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lu(e)?e:String(e)}function yu(t,e){return(yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function du(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vu(t);if(e){var o=vu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yu(t,e)}(i,as);var e,r,n,o=du(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType="icon",e._style=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cu(Object(r),!0).forEach(function(e){fu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({image:uu},t),e._maxAnchorSize=1,e}return e=i,(r=[{key:"_mountedHook",value:function(){this._initTip()}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Io($t.transformCartesianToWGS84(this._positions[0]),this._style.image).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));var e=this._points.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e==this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&pu(e.prototype,r),n&&pu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bu(t){"@babel/helpers - typeof";return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===bu(i=function(t,e){if("object"!==bu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var gu=Math.PI/2,wu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[],this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.headTailFactor=.8}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_getArrowHeadPoints",value:function(t,e,r){var n=Zt.getBaseLength(t),o=n*this.headHeightFactor,i=t[t.length-1];n=Zt.distance(i,t[t.length-2]);var a=Zt.distance(e,r);o>a*this.headTailFactor&&(o=a*this.headTailFactor);var s=o*this.headWidthFactor,u=o*this.neckWidthFactor,l=(o=o>n?n:o)*this.neckHeightFactor,c=Zt.getThirdPoint(t[t.length-2],i,0,o,!0),f=Zt.getThirdPoint(t[t.length-2],i,0,l,!0),p=Zt.getThirdPoint(i,c,gu,s,!1),h=Zt.getThirdPoint(i,c,gu,s,!0);return[Zt.getThirdPoint(i,f,gu,u,!1),p,i,h,Zt.getThirdPoint(i,f,gu,u,!0)]}},{key:"_getArrowBodyPoints",value:function(t,e,r,n){for(var o=Zt.wholeDistance(t),i=Zt.getBaseLength(t)*n,a=(i-Zt.distance(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Zt.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Zt.distance(t[c-1],t[c]))/o*a)/Math.sin(f),h=Zt.getThirdPoint(t[c-1],t[c],Math.PI-f,p,!0),y=Zt.getThirdPoint(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}},{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],e=t[0],r=t[1];Zt.isClockWise(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Zt.mid(e,r)].concat(t.slice(2)),o=this._getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Zt.distance(e,r)/Zt.getBaseLength(n),u=this._getArrowBodyPoints(n,i,a,s),l=u.length,c=[e].concat(u.slice(0,l/2));c.push(i);var f=[r].concat(u.slice(l/2,l));return f.push(a),c=Zt.getQBSplinePoints(c),f=Zt.getQBSplinePoints(f),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(c.concat(o,f.reverse()))))}}])&&_u(e.prototype,r),n&&_u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ou(t){"@babel/helpers - typeof";return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Cu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pu(Object(r),!0).forEach(function(e){Su(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Su(t,e,r){return(e=Tu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tu(n.key),n)}}function Tu(t){var e=function(t,e){if("object"!==Ou(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ou(e)?e:String(e)}function ju(t,e){return(ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Au(t);if(e){var o=Au(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Au(t){return(Au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ru={material:Cesium.Color.RED.withAlpha(.6),fill:!0},ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ju(t,e)}(i,as);var e,r,n,o=xu(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=Cu(Cu({},Ru),t),e._plotType=ns.ATTACK_ARROW,e._minPointCount=3,e._graphics=new wu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:Cu(Cu({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new un($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._setTipContent(),this._points.push(t),this.setPoints(this._points),this.drawTool.fire(T.CREATE_ANCHOR,{position:t})}}])&&Eu(e.prototype,r),n&&Eu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Iu(t){"@babel/helpers - typeof";return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Iu(i=function(t,e){if("object"!==Iu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Iu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Du=Math.PI/2,Lu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[],this.headHeightFactor=.25,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_getArrowPoints",value:function(t,e,r,n){var o=Zt.mid(t,e),i=Zt.distance(o,r),a=Zt.getThirdPoint(r,o,0,.3*i,!0),s=Zt.getThirdPoint(r,o,0,.5*i,!0),u=[o,a=Zt.getThirdPoint(o,a,Du,i/5,n),s=Zt.getThirdPoint(o,s,Du,i/4,n),r],l=this._getArrowHeadPoints(u),c=l[0],f=l[4],p=Zt.distance(t,e)/Zt.getBaseLength(u)/2,h=this._getArrowBodyPoints(u,c,f,p),y=h.length,d=h.slice(0,y/2),v=h.slice(y/2,y);return d.push(c),v.push(f),(d=d.reverse()).push(e),(v=v.reverse()).push(t),d.reverse().concat(l,v)}},{key:"_getArrowHeadPoints",value:function(t){var e=Zt.getBaseLength(t)*this.headHeightFactor,r=t[t.length-1],n=e*this.headWidthFactor,o=e*this.neckWidthFactor,i=e*this.neckHeightFactor,a=Zt.getThirdPoint(t[t.length-2],r,0,e,!0),s=Zt.getThirdPoint(t[t.length-2],r,0,i,!0),u=Zt.getThirdPoint(r,a,Du,n,!1),l=Zt.getThirdPoint(r,a,Du,n,!0);return[Zt.getThirdPoint(r,s,Du,o,!1),u,r,l,Zt.getThirdPoint(r,s,Du,o,!0)]}},{key:"_getArrowBodyPoints",value:function(t,e,r,n){for(var o=Zt.wholeDistance(t),i=Zt.getBaseLength(t)*n,a=(i-Zt.distance(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Zt.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Zt.distance(t[c-1],t[c]))/o*a)/Math.sin(f),h=Zt.getThirdPoint(t[c-1],t[c],Math.PI-f,p,!0),y=Zt.getThirdPoint(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}},{key:"_getTempPoint4",value:function(t,e,r){var n,o,i,a,s=Zt.mid(t,e),u=Zt.distance(s,r),l=Zt.getAngleOfThreePoints(t,s,r);return l<Du?(o=u*Math.sin(l),i=u*Math.cos(l),a=Zt.getThirdPoint(t,s,Du,o,!1),n=Zt.getThirdPoint(s,a,Du,i,!0)):l>=Du&&l<Math.PI?(o=u*Math.sin(Math.PI-l),i=u*Math.cos(Math.PI-l),a=Zt.getThirdPoint(t,s,Du,o,!1),n=Zt.getThirdPoint(s,a,Du,i,!1)):l>=Math.PI&&l<1.5*Math.PI?(o=u*Math.sin(l-Math.PI),i=u*Math.cos(l-Math.PI),a=Zt.getThirdPoint(t,s,Du,o,!0),n=Zt.getThirdPoint(s,a,Du,i,!0)):(o=u*Math.sin(2*Math.PI-l),i=u*Math.cos(2*Math.PI-l),a=Zt.getThirdPoint(t,s,Du,o,!0),n=Zt.getThirdPoint(s,a,Du,i,!1)),n}},{key:"_createHierarchy",value:function(){var t,e,r=this._positions.length,n=void 0,o=void 0,i=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],a=i[0],s=i[1],u=i[2];n=3===r?this._getTempPoint4(a,s,u):i[3],o=3===r||4===r?Zt.mid(a,s):i[4],Zt.isClockWise(a,s,u)?(t=this._getArrowPoints(a,o,n,!1),e=this._getArrowPoints(o,s,u,!0)):(t=this._getArrowPoints(s,o,u,!1),e=this._getArrowPoints(o,a,n,!0));var l=t.length,c=(l-5)/2,f=t.slice(0,c),p=t.slice(c,c+5),h=t.slice(c+5,l),y=e.slice(0,c),d=e.slice(c,c+5),v=e.slice(c+5,l);y=Zt.getBezierPoints(y);var m=Zt.getBezierPoints(v.concat(f.slice(1)));return h=Zt.getBezierPoints(h),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(y.concat(d,m,p,h))))}}])&&Mu(e.prototype,r),n&&Mu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nu(t){"@babel/helpers - typeof";return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Bu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fu(Object(r),!0).forEach(function(e){Wu(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Wu(t,e,r){return(e=zu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zu(n.key),n)}}function zu(t){var e=function(t,e){if("object"!==Nu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Nu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Nu(e)?e:String(e)}function Hu(t,e){return(Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Vu(t);if(e){var o=Vu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Nu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Vu(t){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zu={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hu(t,e)}(i,as);var e,r,n,o=Uu(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._maxAnchorSize=4,e._style=Bu(Bu({},Zu),t),e._plotType=ns.DOUBLE_ARROW,e._graphics=new Lu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:Bu(Bu({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new jn($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));var e=this._points.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&Gu(e.prototype,r),n&&Gu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xu(t){"@babel/helpers - typeof";return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ku(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Xu(i=function(t,e){if("object"!==Xu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Qu=Math.PI/2,qu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[],this.tailWidthFactor=.15,this.neckWidthFactor=.2,this.headWidthFactor=.25,this.headAngle=Math.PI/8.5,this.neckAngle=Math.PI/13}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],e=t[0],r=t[1],n=Zt.getBaseLength(t),o=n*this.tailWidthFactor,i=n*this.neckWidthFactor,a=n*this.headWidthFactor,s=Zt.getThirdPoint(r,e,Qu,o,!0),u=Zt.getThirdPoint(r,e,Qu,o,!1),l=Zt.getThirdPoint(e,r,this.headAngle,a,!1),c=Zt.getThirdPoint(e,r,this.headAngle,a,!0),f=Zt.getThirdPoint(e,r,this.neckAngle,i,!1),p=Zt.getThirdPoint(e,r,this.neckAngle,i,!0);return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions([s,f,l,r,c,p,u])))}}])&&Ku(e.prototype,r),n&&Ku(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ju(t){"@babel/helpers - typeof";return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$u(Object(r),!0).forEach(function(e){el(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function el(t,e,r){return(e=nl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nl(n.key),n)}}function nl(t){var e=function(t,e){if("object"!==Ju(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ju(e)?e:String(e)}function il(t,e){return(il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function al(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sl(t);if(e){var o=sl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ju(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sl(t){return(sl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ul={material:Cesium.Color.RED.withAlpha(.6),fill:!0},ll=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&il(t,e)}(i,as);var e,r,n,o=al(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._maxAnchorSize=2,e._style=tl(tl({},ul),t),e._plotType=ns.FINE_ARROW,e._graphics=new qu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this.drawTool.tooltipMess="单击选择点位",this._delegate=new Cesium.Entity({polygon:tl(tl({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Zr($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));var e=this._points.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&rl(e.prototype,r),n&&rl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cl(t){"@babel/helpers - typeof";return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===cl(i=function(t,e){if("object"!==cl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var pl=Math.PI/2,hl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[],this.t=.4}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0];if(2===this._positions.length){var e=Zt.mid(t[0],t[1]),r=Zt.distance(t[0],e)/.9,n=Zt.getThirdPoint(t[0],e,pl,r,!0);t=[t[0],n,t[1]]}var o=Zt.mid(t[0],t[2]);t.push(o,t[0],t[1]);for(var i=[],a=0;a<t.length-2;a++){var s=t[a],u=t[a+1],l=t[a+2],c=Zt.getBisectorNormals(this.t,s,u,l);i=i.concat(c)}var f=i.length;i=[i[f-1]].concat(i.slice(0,f-1));for(var p=[],h=0;h<t.length-2;h++){var y=t[h],d=t[h+1];p.push(y);for(var v=0;v<=100;v++){var m=Zt.getCubicValue(v/100,y,i[2*h],i[2*h+1],d);p.push(m)}p.push(d)}return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(p)))}}])&&fl(e.prototype,r),n&&fl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yl(t){"@babel/helpers - typeof";return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dl(Object(r),!0).forEach(function(e){ml(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dl(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ml(t,e,r){return(e=_l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_l(n.key),n)}}function _l(t){var e=function(t,e){if("object"!==yl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===yl(e)?e:String(e)}function gl(t,e){return(gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ol(t);if(e){var o=Ol(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ol(t){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pl={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Cl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gl(t,e)}(i,as);var e,r,n,o=wl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._maxAnchorSize=3,e._style=vl(vl({},Pl),t),e._graphics=new hl,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:vl(vl({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Ln($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),this._points.length>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&bl(e.prototype,r),n&&bl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sl(t){"@babel/helpers - typeof";return(Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function El(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Sl(i=function(t,e){if("object"!==Sl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Sl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Tl(t,e){return(Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xl(t);if(e){var o=xl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xl(t){return(xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Al=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tl(t,e)}(i,wu);var e,r,n,o=jl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.headTailFactor=.8,e.swallowTailFactor=1,e}return e=i,(r=[{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],e=t[0],r=t[1];Zt.isClockWise(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Zt.mid(e,r)].concat(t.slice(2)),o=this._getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Zt.distance(e,r),u=Zt.getBaseLength(n),l=u*this.tailWidthFactor*this.swallowTailFactor,c=Zt.getThirdPoint(n[1],n[0],0,l,!0),f=s/u,p=this._getArrowBodyPoints(n,i,a,f),h=p.length,y=[e].concat(p.slice(0,h/2));y.push(i);var d=[r].concat(p.slice(h/2,h));return d.push(a),y=Zt.getQBSplinePoints(y),d=Zt.getQBSplinePoints(d),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(y.concat(o,d.reverse(),[c,y[0]]))))}}])&&El(e.prototype,r),n&&El(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Rl(t){"@babel/helpers - typeof";return(Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(e){Ml(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ml(t,e,r){return(e=Ll(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ll(n.key),n)}}function Ll(t){var e=function(t,e){if("object"!==Rl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Rl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Rl(e)?e:String(e)}function Nl(t,e){return(Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Bl(t);if(e){var o=Bl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Bl(t){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wl={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Gl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nl(t,e)}(i,ku);var e,r,n,o=Fl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=Il(Il({},Wl),t),e._plotType=ns.TAILED_ATTACK_ARROW,e._graphics=new Al,e}return e=i,(r=[{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new no($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&Dl(e.prototype,r),n&&Dl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();var zl={centimeters:637100880,centimetres:637100880,degrees:6371008.8/111325,feet:20902260.511392,inches:6371008.8*39.37,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6371008.8*1.0936};function Hl(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function Ul(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ql(t[0])||!Ql(t[1]))throw new Error("coordinates must contain numbers");return Hl({type:"Point",coordinates:t},e,r)}function Vl(t,e,r){void 0===r&&(r={});for(var n=0,o=t;n<o.length;n++){var i=o[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return Hl({type:"Polygon",coordinates:t},e,r)}function Zl(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Hl({type:"LineString",coordinates:t},e,r)}function Yl(t,e){void 0===e&&(e="kilometers");var r=zl[e];if(!r)throw new Error(e+" units is invalid");return t/r}function Xl(t){return 180*(t%(2*Math.PI))/Math.PI}function Kl(t){return t%360*Math.PI/180}function Ql(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function ql(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,p=0,h=t.type,y="FeatureCollection"===h,d="Feature"===h,v=y?t.features.length:1,m=0;m<v;m++){s=(c=!!(l=y?t.features[m].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var _=0,g=0;if(null!==(a=c?l.geometries[b]:l)){u=a.coordinates;var w=a.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,m,_,g))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],p,m,_,g))return!1;p++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],p,m,_,g))return!1;p++}"MultiLineString"===w&&_++,"Polygon"===w&&g++}"Polygon"===w&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(g=0,o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],p,m,_,g))return!1;p++}g++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===ql(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Jl(t){var e=[1/0,1/0,-1/0,-1/0];return ql(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Jl.default=Jl;var $l=Jl;var tc=function(t,e){void 0===e&&(e={});var r=$l(t);return Ul([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)};function ec(t){"@babel/helpers - typeof";return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ec(i=function(t,e){if("object"!==ec(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var nc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._viewer=void 0,this._map3d=void 0,this._layer=void 0,this._overlay=e,this._overlay.show=!1,this._delegate=new Cesium.Entity,this._delegate.merge(e.delegate),this._options={},this._positions=[],this._plotType=void 0,this._center=void 0}var e,r,n;return e=t,(r=[{key:"editTool",get:function(){return this._viewer.editTool}},{key:"_mountedHook",value:function(){this._overlay.positions=$t.transformCartesianArrayToWGS84Array(this._positions),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_stopedHook",value:function(t){t&&(this._overlay.positions=$t.transformCartesianArrayToWGS84Array(this._positions)),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_mountAnchor",value:function(){var t=this;this._positions=[].concat($t.transformWGS84ArrayToCartesianArray(this._overlay.positions)),this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r})}),this._center=this.getOverlayCenterPosition(),this.editTool.fire(T.CREATE_ANCHOR,{position:this._center,index:this._positions.length+1,isMid:!1,isCenter:!0})}},{key:"_onEditAnchorStop",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());this._positions[n.index]=r}},{key:"_onAnchorMoving",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());if(n.isCenter){var o=this._center;if(!o)return;this.moveEntityByOffset(o,r),this._center=r}else this._positions[n.index]=r,this._center=this.getOverlayCenterPosition(),this.editTool.fire(T.UPDATE_ANCHOR,{index:this._positions.length,position:this._center});this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(this._center))}},{key:"_onEditStop",value:function(t){t.pickedAnchor,t.position;var e=t.isSave;this._unbindEvent(),this._viewer.editTool.deactivate(),this._layer.entities.remove(this._delegate),this._stopedHook(e)}},{key:"_bindEvent",value:function(){return this.editTool.on(T.ANCHOR_MOVING,this._onAnchorMoving,this),this.editTool.on(T.EDIT_ANCHOR_STOP,this._onEditAnchorStop,this),this.editTool.on(T.EDIT_STOP,this._onEditStop,this),this}},{key:"_unbindEvent",value:function(){this.editTool.off(T.ANCHOR_MOVING,this._onAnchorMoving,this),this.editTool.off(T.EDIT_ANCHOR_STOP,this._onEditAnchorStop,this),this.editTool.off(T.EDIT_STOP,this._onEditStop,this)}},{key:"start",value:function(t,e){return this._map3d=t._map3d,this._viewer=t.viewer,this._layer=t.layer,this._options=e,this._viewer.editTool.deactivate(),this._viewer.editTool.activate(e),this._mountedHook(),this._mountAnchor(),this._unbindEvent(),this._bindEvent(),this}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.editTool.fire(T.EDIT_STOP,{pickedAnchor:null,position:null,isSave:t}),this}},{key:"moveEntityByOffset",value:function(t,e){for(var r,n=$t.transformCartesianToWGS84(t),o=$t.transformCartesianToWGS84(e),i=o.lng-n.lng,a=o.lat-n.lat,s=(o.alt,n.alt,this._plotType,0);s<this._positions.length;s++)(r=$t.transformCartesianToWGS84(this._positions[s])).lng+=i,r.lat+=a,this._positions[s]=Cesium.Cartesian3.fromDegrees(r.lng,r.lat,r.alt),this.editTool.fire(T.UPDATE_ANCHOR,{index:s,position:this._positions[s]})}},{key:"getOverlayCenterPosition",value:function(){if(this._plotType==ns.CIRCLE||this._plotType==ns.MARKER)return this._positions[0];for(var t,e=[],r=0;r<this._positions.length;r++)t=$t.transformCartesianToWGS84(this._positions[r]),e.push([t.lng,t.lat,t.alt]);var n=Zl(e),o=function(t,e){void 0===e&&(e={});var r=Number(t[0]),n=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[r,n];return Vl([[a,[o,n],[o,i],[r,i],a]],e.properties,{bbox:t,id:e.id})}($l(n)),i=tc(o).geometry.coordinates;return Cesium.Cartesian3.fromDegrees(i[0],i[1])}}])&&rc(e.prototype,r),n&&rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oc(t){"@babel/helpers - typeof";return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===oc(i=function(t,e){if("object"!==oc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function ac(t,e){return(ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uc(t);if(e){var o=uc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uc(t){return(uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ac(t,e)}(i,nc);var e,r,n,o=sc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._position=void 0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._position=this._delegate.position.getValue(Cesium.JulianDate.now()),this._delegate.position=new Cesium.CallbackProperty(function(){return t._position},!1),this._layer.entities.add(this._delegate)}},{key:"_stopedHook",value:function(t){t&&(this._overlay.position=$t.transformCartesianToWGS84(this._position)),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_onAnchorMoving",value:function(t){t.pickedAnchor;var e=t.position;this._position=e}}])&&ic(e.prototype,r),n&&ic(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cc(t){"@babel/helpers - typeof";return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===cc(i=function(t,e){if("object"!==cc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function pc(t,e){return(pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yc(t);if(e){var o=yc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yc(t){return(yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pc(t,e)}(i,nc);var e,r,n,o=hc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._plotType=t.type,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polyline.positions=new Cesium.CallbackProperty(function(){return t._positions.length>1?t._positions:null},!1),this._layer.entities.add(this._delegate)}},{key:"_mountAnchor",value:function(){var t=this,e=[].concat(this._overlay.delegate.polyline.positions.getValue(Cesium.JulianDate.now()));this._positions=e,this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r,isMid:!1})}),this._center=this.getOverlayCenterPosition(),this.editTool.fire(T.CREATE_ANCHOR,{position:this._center,index:this._positions.length,isMid:!1,isCenter:!0})}}])&&fc(e.prototype,r),n&&fc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function vc(t){"@babel/helpers - typeof";return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===vc(i=function(t,e){if("object"!==vc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==vc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function bc(t,e){return(bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gc(t);if(e){var o=gc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function gc(t){return(gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bc(t,e)}(i,nc);var e,r,n,o=_c(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._plotType=t.type,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(e){return t._positions.length>2?new Cesium.PolygonHierarchy(t._positions):null},!1),this._layer.entities.add(this._delegate)}},{key:"_mountAnchor",value:function(){var t=this,e=[].concat(this._overlay.delegate.polygon.hierarchy.getValue(Cesium.JulianDate.now()).positions);this._positions=e,this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r})}),this._center=this.getOverlayCenterPosition(),this.editTool.fire(T.CREATE_ANCHOR,{position:this._center,index:this._positions.length,isMid:!1,isCenter:!0})}}])&&mc(e.prototype,r),n&&mc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Oc(t){"@babel/helpers - typeof";return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Oc(i=function(t,e){if("object"!==Oc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Oc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Cc(t,e){return(Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Sc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ec(t);if(e){var o=Ec(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Oc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ec(t){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cc(t,e)}(i,nc);var e,r,n,o=Sc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._center=void 0,e._radius=0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._radius=this._overlay.radius,this._center=$t.transformWGS84ToCartesian(this._overlay.center),this._positions=[].concat([this._center,this._computeCirclePoints(this._center,this._radius)[0]]),this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(e){if(t._positions.length>1){if(t._radius=Cesium.Cartesian3.distance(t._positions[0],t._positions[1]),t._radius<=0)return null;var r=t._computeCirclePoints(t._positions[0],t._radius);return r.push(r[0]),new Cesium.PolygonHierarchy(r)}return null},!1),this._layer.entities.add(this._delegate)}},{key:"_computeCirclePoints",value:function(t,e){var r=[],n=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:t,semiMajorAxis:e,semiMinorAxis:e,rotation:0,granularity:.005},!1,!0);return n&&n.outerPositions&&(r=Cesium.Cartesian3.unpackArray(n.outerPositions)),r}},{key:"_stopedHook",value:function(t){t&&(this._overlay.center=$t.transformCartesianToWGS84(this._positions[0]),this._overlay.radius=this._radius),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_mountAnchor",value:function(){var t=this;this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r,isCenter:r%2==0})})}},{key:"_onAnchorMoving",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());if(1==n.isCenter){var o=this._center;if(!o)return;this.moveEntityByOffset(o,r),this._center=r}else this._positions[n.index]=r;this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(this._center))}}])&&Pc(e.prototype,r),n&&Pc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jc(t){"@babel/helpers - typeof";return(jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===jc(i=function(t,e){if("object"!==jc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Ac(t,e){return(Ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kc(t);if(e){var o=kc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kc(t){return(kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ic=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ac(t,e)}(i,nc);var e,r,n,o=Rc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._plotType=_e.RECTANGLE,e._overlay=t,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.rectangle.coordinates=new Cesium.CallbackProperty(function(e){return t._positions.length>1?Cesium.Rectangle.fromCartesianArray(t._positions):null},!1),this._layer.entities.add(this._delegate)}},{key:"_onEditAnchorStop",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());this._positions[n.index]=r}}])&&xc(e.prototype,r),n&&xc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mc(t){"@babel/helpers - typeof";return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mc(i=function(t,e){if("object"!==Mc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Lc(t,e){return(Lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fc(t);if(e){var o=Fc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fc(t){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lc(t,e)}(i,nc);var e,r,n,o=Nc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._position=void 0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._position=this._delegate.position.getValue(Cesium.JulianDate.now()),this._delegate.position=new Cesium.CallbackProperty(function(){return t._position},!1),this._layer.entities.add(this._delegate)}},{key:"_mountAnchor",value:function(){this.editTool.fire(T.CREATE_ANCHOR,{position:this._position,index:0,isCenter:!0})}},{key:"_stopedHook",value:function(t){t&&(this._overlay.position=$t.transformCartesianToWGS84(this._position)),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_onAnchorMoving",value:function(t){t.pickedAnchor;var e=t.position;this._position=e,this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(e))}}])&&Dc(e.prototype,r),n&&Dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wc(t){"@babel/helpers - typeof";return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Wc(i=function(t,e){if("object"!==Wc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function zc(t,e){return(zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Uc(t);if(e){var o=Uc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Uc(t){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zc(t,e)}(i,nc);var e,r,n,o=Hc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new wu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&Gc(e.prototype,r),n&&Gc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zc(t){"@babel/helpers - typeof";return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Zc(i=function(t,e){if("object"!==Zc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Xc(t,e){return(Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qc(t);if(e){var o=Qc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qc(t){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xc(t,e)}(i,nc);var e,r,n,o=Kc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new Lu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&Yc(e.prototype,r),n&&Yc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jc(t){"@babel/helpers - typeof";return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Jc(i=function(t,e){if("object"!==Jc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function tf(t,e){return(tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rf(t);if(e){var o=rf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rf(t){return(rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tf(t,e)}(i,nc);var e,r,n,o=ef(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new qu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&$c(e.prototype,r),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function of(t){"@babel/helpers - typeof";return(of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function af(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===of(i=function(t,e){if("object"!==of(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function sf(t,e){return(sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lf(t);if(e){var o=lf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===of(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lf(t){return(lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sf(t,e)}(i,nc);var e,r,n,o=uf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new hl,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&af(e.prototype,r),n&&af(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ff(t){"@babel/helpers - typeof";return(ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ff(i=function(t,e){if("object"!==ff(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function hf(t,e){return(hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=df(t);if(e){var o=df(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ff(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function df(t){return(df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hf(t,e)}(i,nc);var e,r,n,o=yf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new Al,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&pf(e.prototype,r),n&&pf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mf(t){"@babel/helpers - typeof";return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===mf(i=function(t,e){if("object"!==mf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function _f(t,e){return(_f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wf(t);if(e){var o=wf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wf(t){return(wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Math.PI;var Of=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_f(t,e)}(i,wu);var e,r,n,o=gf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._positions=(null===t||void 0===t?void 0:t.positions)||[],e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e}return e=i,(r=[{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],e=this.getTailPoints(t),r=this._getArrowHeadPoints(t,e[0],e[1]),n=r[0],o=r[4],i=this._getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[1]].concat(i.slice(a/2,a));return u.push(o),s=Zt.getQBSplinePoints(s),u=Zt.getQBSplinePoints(u),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s.concat(r,u.reverse()))))}},{key:"getTailPoints",value:function(t){var e=Zt.getBaseLength(t)*this.tailWidthFactor;return[Zt.getThirdPoint(t[1],t[0],ln,e,!1),Zt.getThirdPoint(t[1],t[0],ln,e,!0)]}}])&&bf(e.prototype,r),n&&bf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Pf(t){"@babel/helpers - typeof";return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Sf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cf(Object(r),!0).forEach(function(e){Ef(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cf(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ef(t,e,r){return(e=jf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jf(n.key),n)}}function jf(t){var e=function(t,e){if("object"!==Pf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Pf(e)?e:String(e)}function xf(t,e){return(xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Af(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rf(t);if(e){var o=Rf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rf(t){return(Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kf={material:Cesium.Color.RED.withAlpha(.6),fill:!0},If=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xf(t,e)}(i,Bs);var e,r,n,o=Af(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=Sf(Sf({},kf),t),e._plotType=ns.SQUAD_COMBAT,e._graphics=new Of,e.points=[],e._minPointCount=2,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:Sf(Sf({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Qn($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&Tf(e.prototype,r),n&&Tf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mf(t){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Df(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mf(i=function(t,e){if("object"!==Mf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Lf(t,e){return(Lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ff(t);if(e){var o=Ff(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ff(t){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Math.PI;var Bf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lf(t,e)}(i,wu);var e,r,n,o=Nf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._positions=(null===t||void 0===t?void 0:t.positions)||[],e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.swallowTailFactor=1,e.swallowTailPnt=null,e}return e=i,(r=[{key:"_createHierarchy",value:function(){var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0],e=this.getTailPoints(t),r=this._getArrowHeadPoints(t,e[0],e[2]),n=r[0],o=r[4],i=this._getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[2]].concat(i.slice(a/2,a));return u.push(o),s=Zt.getQBSplinePoints(s),u=Zt.getQBSplinePoints(u),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s.concat(r,u.reverse(),[e[1],s[0]]))))}},{key:"getTailPoints",value:function(t){var e=Zt.getBaseLength(t)*this.tailWidthFactor,r=Zt.getThirdPoint(t[1],t[0],ln,e,!1),n=Zt.getThirdPoint(t[1],t[0],ln,e,!0),o=e*this.swallowTailFactor;return[r,Zt.getThirdPoint(t[1],t[0],0,o,!0),n]}}])&&Df(e.prototype,r),n&&Df(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wf(t){"@babel/helpers - typeof";return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function zf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gf(Object(r),!0).forEach(function(e){Hf(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gf(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Hf(t,e,r){return(e=Vf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vf(n.key),n)}}function Vf(t){var e=function(t,e){if("object"!==Wf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wf(e)?e:String(e)}function Zf(t,e){return(Zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xf(t);if(e){var o=Xf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xf(t){return(Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kf={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Qf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zf(t,e)}(i,If);var e,r,n,o=Yf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=zf(zf({},Kf),t),e._plotType=ns.SQUAD_COMBAT,e._graphics=new Bf,e}return e=i,(r=[{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new co($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&Uf(e.prototype,r),n&&Uf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qf(t){"@babel/helpers - typeof";return(qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jf(Object(r),!0).forEach(function(e){tp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jf(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tp(t,e,r){return(e=rp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ep(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rp(n.key),n)}}function rp(t){var e=function(t,e){if("object"!==qf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===qf(e)?e:String(e)}function np(t,e){return(np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function op(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ip(t);if(e){var o=ip(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ip(t){return(ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ap={material:Cesium.Color.RED.withAlpha(.6),fill:!0},sp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&np(t,e)}(i,as);var e,r,n,o=op(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=$f($f({},ap),t),e._maxAnchorSize=2,e._plotType=ns.ASSAULT_DIRECTION,e._graphics=new qu,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:$f($f({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Zr($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));var e=this._points.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&ep(e.prototype,r),n&&ep(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function up(t){"@babel/helpers - typeof";return(up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===up(i=function(t,e){if("object"!==up(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==up(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}Math.PI;var cp=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[],this.t=.3}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_createHierarchy",value:function(){if(2===this._positions.length)return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(this._positions)));var t=ye.parsePolygonCoordToArray($t.transformCartesianArrayToWGS84Array(this._positions))[0];t.push(t[0],t[1]);for(var e=[],r=0;r<t.length-2;r++){var n=pn(this.t,t[r],t[r+1],t[r+2]);e=e.concat(n)}var o=e.length;e=[e[o-1]].concat(e.slice(0,o-1));for(var i=[],a=0;a<t.length-2;a++){var s=t[a],u=t[a+1];i.push(s);for(var l=0;l<=100;l++){var c=fn(l/100,s,e[2*a],e[2*a+1],u);i.push(c)}i.push(u)}return new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(i)))}}])&&lp(e.prototype,r),n&&lp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fp(t){"@babel/helpers - typeof";return(fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function hp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pp(Object(r),!0).forEach(function(e){yp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pp(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yp(t,e,r){return(e=vp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vp(n.key),n)}}function vp(t){var e=function(t,e){if("object"!==fp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fp(e)?e:String(e)}function mp(t,e){return(mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_p(t);if(e){var o=_p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _p(t){return(_p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gp={material:Cesium.Color.RED.withAlpha(.6),fill:!0},wp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mp(t,e)}(i,as);var e,r,n,o=bp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._style=hp(hp({},gp),t),e._minPointCount=3,e._plotType=_e.CLOSED_CURVE,e._graphics=new cp,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:hp(hp({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new gn($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));this._points.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t})}}])&&dp(e.prototype,r),n&&dp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Op(t){"@babel/helpers - typeof";return(Op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Op(i=function(t,e){if("object"!==Op(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Op(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Cp(t,e){return(Cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Sp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ep(t);if(e){var o=Ep(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Op(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ep(t){return(Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cp(t,e)}(i,nc);var e,r,n,o=Sp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new Bf,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&Pp(e.prototype,r),n&&Pp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jp(t){"@babel/helpers - typeof";return(jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===jp(i=function(t,e){if("object"!==jp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Ap(t,e){return(Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kp(t);if(e){var o=kp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kp(t){return(kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ip=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ap(t,e)}(i,nc);var e,r,n,o=Rp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new Of,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&xp(e.prototype,r),n&&xp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mp(t){"@babel/helpers - typeof";return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mp(i=function(t,e){if("object"!==Mp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Lp(t,e){return(Lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fp(t);if(e){var o=Fp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fp(t){return(Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lp(t,e)}(i,nc);var e,r,n,o=Np(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._graphics=new cp,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>1?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&Dp(e.prototype,r),n&&Dp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wp(t){"@babel/helpers - typeof";return(Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function zp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gp(Object(r),!0).forEach(function(e){Hp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Hp(t,e,r){return(e=Vp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Up(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vp(n.key),n)}}function Vp(t){var e=function(t,e){if("object"!==Wp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Wp(e)?e:String(e)}function Zp(t,e){return(Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xp(t);if(e){var o=Xp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xp(t){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kp={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Qp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zp(t,e)}(i,as);var e,r,n,o=Yp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=ns.ELLIPSE,e._maxAnchorSize=2,e._radius=0,e._style=zp(zp({},Kp),t),e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:zp(zp({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){if(t._positions.length>1){var e=$t.transformCartesianToWGS84(t._positions[0]),r=$t.transformCartesianToWGS84(t._positions[1]),n=Zt.mid([e.lng,e.lat],[r.lng,r.lat]),o=Math.abs((e.lng-r.lng)/2),i=Math.abs((e.lat-r.lat)/2),a=t._generatePoints(n,o,i);return new Cesium.PolygonHierarchy(a)}return null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Ii($t.transformCartesianArrayToWGS84Array(this._positions)).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent();var e=this._points.length;this.setPoints([].concat(this._points)),this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}},{key:"_generatePoints",value:function(t,e,r){for(var n,o,i,a=[],s=0;s<=100;s++)i=2*Math.PI*s/100,n=t[0]+e*Math.cos(i),o=t[1]+r*Math.sin(i),a.push($t.transformWGS84ToCartesian(ye.parsePosition([n,o])));return a}}])&&Up(e.prototype,r),n&&Up(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qp(t){"@babel/helpers - typeof";return(qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qp(i=function(t,e){if("object"!==qp(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $p(t,e){return($p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function th(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eh(t);if(e){var o=eh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eh(t){return(eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$p(t,e)}(i,nc);var e,r,n,o=th(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._center=void 0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(e){if(t._positions.length>1){var r=t._computeCirclePoints();return r.push(r[0]),new Cesium.PolygonHierarchy(r)}return null},!1),this._layer.entities.add(this._delegate)}},{key:"_computeCirclePoints",value:function(){for(var t,e,r,n=[],o=$t.transformCartesianToWGS84(this._positions[0]),i=$t.transformCartesianToWGS84(this._positions[1]),a=Zt.mid([o.lng,o.lat],[i.lng,i.lat]),s=Math.abs((o.lng-i.lng)/2),u=Math.abs((o.lat-i.lat)/2),l=0;l<=100;l++)r=2*Math.PI*l/100,t=a[0]+s*Math.cos(r),e=a[1]+u*Math.sin(r),n.push($t.transformWGS84ToCartesian(ye.parsePosition([t,e])));return n}}])&&Jp(e.prototype,r),n&&Jp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nh(t){"@babel/helpers - typeof";return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ih(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oh(Object(r),!0).forEach(function(e){ah(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ah(t,e,r){return(e=uh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uh(n.key),n)}}function uh(t){var e=function(t,e){if("object"!==nh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nh(e)?e:String(e)}function lh(t,e){return(lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ch(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fh(t);if(e){var o=fh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fh(t){return(fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ph={material:Cesium.Color.RED.withAlpha(.6),fill:!0},hh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e)}(i,Qs);var e,r,n,o=ch(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=_e.DIFFUSE_CIRCLE,e._maxAnchorSize=2,e._radius=0,e._style=ih(ih({},ph),t),e}return e=i,(r=[{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Ei($t.transformCartesianToWGS84(this._positions[0]),this._radius).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&sh(e.prototype,r),n&&sh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yh(t){"@babel/helpers - typeof";return(yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dh(Object(r),!0).forEach(function(e){mh(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dh(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function mh(t,e,r){return(e=_h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_h(n.key),n)}}function _h(t){var e=function(t,e){if("object"!==yh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===yh(e)?e:String(e)}function gh(t,e){return(gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Oh(t);if(e){var o=Oh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Oh(t){return(Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ph={material:Cesium.Color.RED.withAlpha(.6),fill:!0},Ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gh(t,e)}(i,Qs);var e,r,n,o=wh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=ns.CIRCLE,e._maxAnchorSize=2,e._radius=0,e._style=vh(vh({},Ph),t),e}return e=i,(r=[{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new rs($t.transformCartesianToWGS84(this._positions[0]),this._radius).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&bh(e.prototype,r),n&&bh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sh(t){"@babel/helpers - typeof";return(Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Th(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Eh(Object(r),!0).forEach(function(e){jh(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eh(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function jh(t,e,r){return(e=Ah(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ah(n.key),n)}}function Ah(t){var e=function(t,e){if("object"!==Sh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Sh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Sh(e)?e:String(e)}function Rh(t,e){return(Rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ih(t);if(e){var o=Ih(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ih(t){return(Ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mh={},Dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rh(t,e)}(i,mu);var e,r,n,o=kh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._position=Cesium.Cartesian3.ZERO,e._style=Th(Th({},Mh),t),e._maxAnchorSize=1,e}return e=i,(r=[{key:"_stopdHook",value:function(){var t=null;this._positions&&(t=new Qi($t.transformCartesianToWGS84(this._positions[0])).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}}])&&xh(e.prototype,r),n&&xh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Lh(t){"@babel/helpers - typeof";return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Lh(i=function(t,e){if("object"!==Lh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Lh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Fh(t,e){return(Fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Bh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wh(t);if(e){var o=Wh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Lh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wh(t){return(Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fh(t,e)}(i,nc);var e,r,n,o=Bh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._position=void 0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._position=this._delegate.position.getValue(Cesium.JulianDate.now()),this._delegate.position=new Cesium.CallbackProperty(function(){return t._position},!1),this._layer.entities.add(this._delegate)}},{key:"_stopedHook",value:function(t){t&&(this._overlay.position=$t.transformCartesianToWGS84(this._position)),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_mountAnchor",value:function(){this.editTool.fire(T.CREATE_ANCHOR,{position:this._position,index:0,isCenter:!0})}},{key:"_onAnchorMoving",value:function(t){t.pickedAnchor;var e=t.position;this._position=e,this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(e))}}])&&Nh(e.prototype,r),n&&Nh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zh(t){"@babel/helpers - typeof";return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===zh(i=function(t,e){if("object"!==zh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Uh(t,e){return(Uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Zh(t);if(e){var o=Zh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Zh(t){return(Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uh(t,e)}(i,nc);var e,r,n,o=Vh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._center=void 0,e._radius=0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._radius=this._overlay.radius,this._center=$t.transformWGS84ToCartesian(this._overlay.center),this._positions=[].concat([this._center,this._computeCirclePoints(this._center,this._radius)[0]]),this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(e){if(t._positions.length>1){if(t._radius=Cesium.Cartesian3.distance(t._positions[0],t._positions[1]),t._radius<=0)return null;var r=t._computeCirclePoints(t._positions[0],t._radius);return r.push(r[0]),new Cesium.PolygonHierarchy(r)}return null},!1),this._layer.entities.add(this._delegate)}},{key:"_computeCirclePoints",value:function(t,e){var r=[],n=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:t,semiMajorAxis:e,semiMinorAxis:e,rotation:0,granularity:.005},!1,!0);return n&&n.outerPositions&&(r=Cesium.Cartesian3.unpackArray(n.outerPositions)),r}},{key:"_stopedHook",value:function(t){t&&(this._overlay.center=$t.transformCartesianToWGS84(this._positions[0]),this._overlay.radius=this._radius),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_mountAnchor",value:function(){var t=this;this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r,isCenter:r%2==0})})}},{key:"_onAnchorMoving",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());if(1==n.isCenter){var o=this._center;if(!o)return;this.moveEntityByOffset(o,r),this._center=r}else this._positions[n.index]=r;this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(this._center))}}])&&Hh(e.prototype,r),n&&Hh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xh(t){"@babel/helpers - typeof";return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Xh(i=function(t,e){if("object"!==Xh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Qh(t,e){return(Qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Jh(t);if(e){var o=Jh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Xh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Jh(t){return(Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qh(t,e)}(i,nc);var e,r,n,o=qh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._center=void 0,e._radius=0,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._radius=this._overlay.radius,this._center=$t.transformWGS84ToCartesian(this._overlay.center),this._positions=[].concat([this._center,this._computeCirclePoints(this._center,this._radius)[0]]),this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(e){if(t._positions.length>1){if(t._radius=Cesium.Cartesian3.distance(t._positions[0],t._positions[1]),t._radius<=0)return null;var r=t._computeCirclePoints(t._positions[0],t._radius);return r.push(r[0]),new Cesium.PolygonHierarchy(r)}return null},!1),this._layer.entities.add(this._delegate)}},{key:"_computeCirclePoints",value:function(t,e){var r=[],n=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:t,semiMajorAxis:e,semiMinorAxis:e,rotation:0,granularity:.005},!1,!0);return n&&n.outerPositions&&(r=Cesium.Cartesian3.unpackArray(n.outerPositions)),r}},{key:"_stopedHook",value:function(t){t&&(this._overlay.center=$t.transformCartesianToWGS84(this._positions[0]),this._overlay.radius=this._radius),this._overlay.show=!0,this._options.onEditStop&&this._options.onEditStop(this._overlay)}},{key:"_mountAnchor",value:function(){var t=this;this._positions.forEach(function(e,r){t.editTool.fire(T.CREATE_ANCHOR,{position:e,index:r,isCenter:r%2==0})})}},{key:"_onAnchorMoving",value:function(t){var e=t.pickedAnchor,r=t.position,n=e.properties.getValue(Cesium.JulianDate.now());if(1==n.isCenter){var o=this._center;if(!o)return;this.moveEntityByOffset(o,r),this._center=r}else this._positions[n.index]=r;this._options.onEditMoving&&this._options.onEditMoving($t.transformCartesianToWGS84(this._center))}}])&&Kh(e.prototype,r),n&&Kh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ty(t){"@babel/helpers - typeof";return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ey(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ty(i=function(t,e){if("object"!==ty(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ty(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}Math.PI;var ry=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positions=(null===e||void 0===e?void 0:e.positions)||[]}var e,r,n;return e=t,(r=[{key:"positions",get:function(){return this._positions},set:function(t){this._positions=t}},{key:"hierarchy",get:function(){return this._createHierarchy()}},{key:"_createHierarchy",value:function(){var t=function(t){for(var e,r,n=[],o=0;o<t.length;o++)n.push((e=t[o],r=Cesium.Cartographic.fromCartesian(e),[Cesium.Math.toDegrees(r.longitude),Cesium.Math.toDegrees(r.latitude)]));return n}(this._positions),e=t[0],r=t[1],n=t[2],o=(Zt.distance(r,e),180*Zt.getAzimuth(r,e)/3.14),i=180*Zt.getAzimuth(n,e)/3.14,a=this.distance(r,e),s=this.generatSectorPoints(e,a,o,i);return s.push(e,s[0]),new Cesium.PolygonHierarchy($t.transformWGS84ArrayToCartesianArray(ye.parsePositions(s)))}},{key:"distance",value:function(t,e){var r=t[1]*Math.PI/180,n=e[1]*Math.PI/180,o=r-n,i=t[0]*Math.PI/180-e[0]*Math.PI/180,a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(r)*Math.cos(n)*Math.pow(Math.sin(i/2),2)));return a*=6378.137,a=Math.round(1e4*a)/10}},{key:"generatSectorPoints",value:function(t,e,r,n){var o=[];if((r=90-r)<(n=90-n))for(var i=r;i<n;i+=2)o.push(this.getCirclePoint(t[0],t[1],i,e));else for(var a=r;a>n;a-=2)o.push(this.getCirclePoint(t[0],t[1],a,e));return o}},{key:"getCirclePoint",value:function(t,e,r,n){var o=n*Math.sin(r*Math.PI/180),i=n*Math.cos(r*Math.PI/180),a=6356725+21412*(90-e)/90;return[180*(o/(a*Math.cos(e*Math.PI/180))+t*Math.PI/180)/Math.PI,180*(i/a+e*Math.PI/180)/Math.PI]}}])&&ey(e.prototype,r),n&&ey(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ny(t){"@babel/helpers - typeof";return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function iy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oy(Object(r),!0).forEach(function(e){ay(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oy(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ay(t,e,r){return(e=uy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uy(n.key),n)}}function uy(t){var e=function(t,e){if("object"!==ny(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ny(e)?e:String(e)}function ly(t,e){return(ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fy(t);if(e){var o=fy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ny(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fy(t){return(fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var py={material:Cesium.Color.RED.withAlpha(.6),fill:!0},hy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ly(t,e)}(i,as);var e,r,n,o=cy(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._plotType=ns.SECTOR,e._maxAnchorSize=3,e._radius=0,e._style=iy(iy({},py),t),e._graphics=new ry,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._initTip(),this._delegate=new Cesium.Entity({polygon:iy(iy({},this._style),{},{hierarchy:new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=[].concat(t._positions),t._graphics.hierarchy):null},!1)})}),this._layer.entities.add(this._delegate)}},{key:"_stopdHook",value:function(){var t=null;this._positions.length&&(t=new Hn($t.transformCartesianArrayToWGS84Array([].concat(this._positions))).setStyle(this._style)),this._options.onDrawStop&&this._options.onDrawStop(t)}},{key:"_onDrawAnchor",value:function(t){this._points.push(t),this._setTipContent(),this.setPoints([].concat(this._points));var e=this._positions.length;this.drawTool.fire(T.CREATE_ANCHOR,{position:t}),e>=this._maxAnchorSize&&this.drawTool.fire(T.DRAW_STOP)}}])&&sy(e.prototype,r),n&&sy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yy(t){"@babel/helpers - typeof";return(yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===yy(i=function(t,e){if("object"!==yy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function vy(t,e){return(vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function my(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=by(t);if(e){var o=by(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function by(t){return(by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vy(t,e)}(i,nc);var e,r,n,o=my(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._center=void 0,e._graphics=new ry,e}return e=i,(r=[{key:"_mountedHook",value:function(){var t=this;this._delegate.polygon.hierarchy=new Cesium.CallbackProperty(function(){return t._positions.length>2?(t._graphics.positions=t._positions,t._graphics.hierarchy):null},!1),this._layer.entities.add(this._delegate)}}])&&dy(e.prototype,r),n&&dy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gy(t){"@babel/helpers - typeof";return(gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Oy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wy(Object(r),!0).forEach(function(e){Py(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wy(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Py(t,e,r){return(e=Sy(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sy(n.key),n)}}function Sy(t){var e=function(t,e){if("object"!==gy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===gy(e)?e:String(e)}var Ey=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._map3d=e,this._viewer=e.viewer,this._options=r,this._layer=new Cesium.CustomDataSource("plot-layer"),this._viewer.dataSources.add(this._layer),this._currentWorker=void 0,this._state=void 0}var e,r,n;return e=t,(r=[{key:"viewer",get:function(){return this._viewer}},{key:"layer",get:function(){return this._layer}},{key:"state",get:function(){return this._state}},{key:"_createDrawWorker",value:function(t,e){var r=void 0;switch(t){case _e.POINT:r=new ms(e);break;case _e.ICON:r=new mu(e);break;case _e.FLASH_POINT:r=new Dh(e);break;case _e.POLYLINE:r=new js(e);break;case _e.POLYGON:r=new Bs(e);break;case _e.CIRCLE:r=new Qs(e);break;case _e.DIFFUSE_CIRCLE:r=new hh(e);break;case _e.SCAN_CIRCLE:r=new Ch(e);break;case _e.ELLIPSE:r=new Qp(e);break;case _e.SECTOR:r=new hy(e);break;case _e.RECTANGLE:r=new su(e);break;case _e.ATTACK_ARROW:r=new ku(e);break;case _e.DOUBLE_ARROW:r=new Yu(e);break;case _e.FINE_ARROW:r=new ll(e);break;case _e.TAILED_ATTACK_ARROW:r=new Gl(e);break;case _e.GATHERING_PLACE:r=new Cl(e);break;case _e.SQUAD_COMBAT:r=new If(e);break;case _e.TAILED_SQUAD_COMBAT:r=new Qf(e);break;case _e.ASSAULT_DIRECTION:r=new sp(e);break;case _e.CLOSED_CURVE:r=new wp(e)}return r}},{key:"_createEditWorker",value:function(t){var e=void 0;switch(t.type){case _e.POINT:e=new lc(t);break;case _e.ICON:e=new Bc(t);break;case _e.FLASH_POINT:e=new Gh(t);break;case _e.POLYLINE:e=new dc(t);break;case _e.POLYGON:e=new wc(t);break;case _e.CIRCLE:e=new Tc(t);break;case _e.SCAN_CIRCLE:e=new Yh(t);break;case _e.DIFFUSE_CIRCLE:e=new $h(t);break;case _e.ELLIPSE:e=new rh(t);break;case _e.SECTOR:e=new _y(t);break;case _e.RECTANGLE:e=new Ic(t);break;case _e.ATTACK_ARROW:e=new Vc(t);break;case _e.DOUBLE_ARROW:e=new qc(t);break;case _e.FINE_ARROW:e=new nf(t);break;case _e.TAILED_ATTACK_ARROW:e=new vf(t);break;case _e.GATHERING_PLACE:e=new cf(t);break;case _e.CLOSED_CURVE:e=new Bp(t);break;case _e.SQUAD_COMBAT:e=new Ip(t);break;case _e.TAILED_SQUAD_COMBAT:e=new Tp(t)}return e}},{key:"draw",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;this._state="draw",this._currentWorker&&this._currentWorker.stop();var a=(null===n||void 0===n?void 0:n.maxAnchorSize)||999;return n&&delete n.maxAnchorSize,this._currentWorker=null===(r=this._createDrawWorker(t,n))||void 0===r?void 0:r.start(this,Oy(Oy({},this._options),{},{maxAnchorSize:a,onDrawStop:e,onDrawAnchor:i,clampToModel:null!==o&&void 0!==o?o:this._options.clampToModel})),this}},{key:"edit",value:function(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this._state="edit",this._currentWorker&&this._currentWorker.stop(!1),this._currentWorker=null===(n=this._createEditWorker(t))||void 0===n?void 0:n.start(this,Oy(Oy({},this._options),{},{onEditStop:e,onEditMoving:r,clampToModel:null!==o&&void 0!==o?o:this._options.clampToModel,rightEnd:i})),this}},{key:"stop",value:function(t){this._currentWorker&&this._currentWorker.stop(t),this._currentWorker=null}},{key:"destroy",value:function(){return this._viewer.dataSources.remove(this._layer),this._viewer=void 0,this}}])&&Cy(e.prototype,r),n&&Cy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ty={};function jy(t){"@babel/helpers - typeof";return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===jy(i=function(t,e){if("object"!==jy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Ay=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._viewer=void 0,this._enable=!1,this._wrapper=void 0,this._ready=!1}var e,r,n;return e=t,n=[{key:"registerType",value:function(t){t&&(Ty[t.toLocaleUpperCase()]=t.toLocaleLowerCase())}},{key:"getWidgetType",value:function(t){return Ty[t.toLocaleUpperCase()]||void 0}}],(r=[{key:"enable",get:function(){return this._enable},set:function(t){return this._enable===t?this:(this._enable=t,this._state=this._enable?Dt.ENABLED:Dt.DISABLED,this._enableHook&&this._enableHook(),this)}},{key:"state",get:function(){return this._state}},{key:"_mountContent",value:function(){}},{key:"_bindEvent",value:function(){}},{key:"_unbindEvent",value:function(){}},{key:"_enableHook",value:function(){!this._ready&&this._mountContent(),this._enable?(!this._wrapper.parentNode&&this._viewer.customContainer.appendChild(this._wrapper),this._bindEvent()):(this._unbindEvent(),this._wrapper.parentNode&&this._viewer.customContainer.removeChild(this._wrapper))}},{key:"_updateWindowCoord",value:function(t){}},{key:"_installHook",value:function(){}},{key:"install",value:function(t){this._viewer=t,this._installHook&&this._installHook(),this._state=Dt.INSTALLED}},{key:"setWrapper",value:function(t){return this}},{key:"setContent",value:function(t){if(t&&"string"==typeof t)this._wrapper.innerHTML=t;else if(t&&t instanceof Element){for(;this._wrapper.hasChildNodes();)this._wrapper.removeChild(this._wrapper.firstChild);this._wrapper.appendChild(t)}return this}},{key:"hide",value:function(){this._wrapper&&(this._wrapper.style.cssText="\n    visibility:hidden;\n    ")}}])&&xy(e.prototype,r),n&&xy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ry(t){"@babel/helpers - typeof";return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ky(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Ry(i=function(t,e){if("object"!==Ry(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ry(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Iy(t,e){return(Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function My(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Dy(t);if(e){var o=Dy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ry(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Dy(t){return(Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ly=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iy(t,e)}(i,Ay);var e,r,n,o=My(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","chrtc-popup"),t._config={customClass:""},t._position=void 0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("popup")}},{key:"config",set:function(t){this._config=t,t.customClass&&this._setCustomClass()}},{key:"_bindEvent",value:function(){if(this._viewer&&this._wrapper){var t=this,e=this._viewer.viewer.scene;e.postRender.addEventListener(function(){if(t._position&&t._enable&&t._updateWindowCoord&&"visible"===t._wrapper.style.visibility){var r=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,t._position);r&&t._updateWindowCoord(r)}})}}},{key:"_mountContent",value:function(){this._wrapper.style.visibility="hidden"}},{key:"_installHook",value:function(){this.enable=!0,this._bindEvent(),Object.defineProperty(this._viewer,"popup",{value:this,writable:!1})}},{key:"_updateWindowCoord",value:function(t){var e=t.x-this._wrapper.offsetWidth/2,r=t.y-this._wrapper.offsetHeight;this._config.position===je.BOTTOM_CENTER?(e=t.x-this._wrapper.offsetWidth,r=t.y-this._wrapper.offsetHeight):this._config.position===je.TOP_RIGHT?(e=t.x,r=t.y-this._wrapper.offsetHeight):this._config.position===je.BOTTOM_LEFT?(e=t.x-this._wrapper.offsetWidth,r=t.y):this._config.position===je.BOTTOM_RIGHT&&(e=t.x,r=t.y),this._wrapper.style.cssText="\n    visibility:visible;\n    z-index:1;\n    transform:translate3d(".concat(Math.round(e),"px,").concat(Math.round(r),"px, 0);\n    ")}},{key:"_setCustomClass",value:function(){zt.setClass(this._wrapper,"chrtc-popup ".concat(this._config.customClass))}},{key:"setWrapper",value:function(t){return t&&t instanceof Element&&(this._wrapper=t,zt.addClass(this._wrapper,"chrtc-popup")),this}},{key:"setPosition",value:function(t){return this._position=$t.transformWGS84ToCartesian(ye.parsePosition(t)),this._wrapper&&(this._wrapper.style.cssText="\n    visibility:visible;\n    "),this}},{key:"showAt",value:function(t,e){return this.setPosition(t).setContent(e),this}}])&&ky(e.prototype,r),n&&ky(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("popup");var Ny=Ly;function Fy(t){"@babel/helpers - typeof";return(Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function By(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Fy(i=function(t,e){if("object"!==Fy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Fy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Wy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map3d=e,this.viewer=e.viewer,this._measureLayer=new fe("measure"),e.addLayer(this._measureLayer),this.popup=new Fe([0,0],""),this.popup.setStyle({className:"measure-popup",position:"top_center",top:"-5px"}),this.popup.show=!1,this.popup.id="measure-3d-point",this._measureLayer.addOverlay(this.popup),this.vectorLayer=new rr("measure"),e.addLayer(this.vectorLayer),this.plot=new Ey(e)}var e,r,n;return e=t,(r=[{key:"measurePos",value:function(t){var e=this;this.map3d.once("2",function(r){var n=new Ke(r.wgs84SurfacePosition),o="经度："+r.wgs84SurfacePosition.lng.toFixed(5)+"<br>纬度："+r.wgs84SurfacePosition.lat.toFixed(5);e.popup.content=o,e.popup.position=r.wgs84SurfacePosition,e._measureLayer.getOverlayById("measure-3d-point")?e.popup.show=!0:e._measureLayer.addOverlay(e.popup),e.vectorLayer.addOverlay(n),n.on("2",function(){o="经度："+n.position.lng.toFixed(5)+"<br>纬度："+n.position.lat.toFixed(5),e.popup.content=o,e.popup.position=n.position,e.popup.show=!0}),t&&t()})}},{key:"measureDis",value:function(t){var e=this,r=[];this.plot.draw("polyline",function(r){e.vectorLayer.addOverlay(r),t&&t()},{},!1,function(t){r.push(t);var n="";if(1==r.length)n='<div class="measureDistance">起点</div>';else{var o=be(r);o<1e3?o=(o/1).toFixed(2)+"米":o>=1e3&&o<1e7?o=(o/1e3).toFixed(2)+"公里":o>=1e7&&(o=(o/1e3/1e4).toFixed(2)+"万公里"),n='<div class="measureDistance">'+o+"</div>"}var i=new Fe([t.lng,t.lat,1],n);e._measureLayer.addOverlay(i)})}},{key:"measureArea",value:function(t){var e=this,r=[],n=0,o=new Fe([0,0,1],"");this._measureLayer.addOverlay(o),this.plot.draw("polygon",function(r){e.vectorLayer.addOverlay(r),t&&t()},{fillColor:"rgba(255,0,0,0.6)"},!1,function(t){r.push(t),r.length>2&&(o.position=me(r),(n=ve(r))<1e6?n=n.toFixed(2)+"平方米":n>=1e6&&n<1e10?n=(n/1e6).toFixed(2)+"平方公里":n>=1e10&&(n=(n/1e6/1e4).toFixed(2)+"万平方公里"),o.content='<div class="measureDistance">'+n+"</div>")})}},{key:"measureClear",value:function(){this.vectorLayer.clear(),this._measureLayer.clear()}},{key:"destroy",value:function(){this.map3d.removeLayer(this._measureLayer),this.map3d.removeLayer(this.vectorLayer),this._measureLayer=null,this.vectorLayer=null,this.plot.destroy(),this.map3d=null,this.viewer=null}}])&&By(e.prototype,r),n&&By(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gy(t){"@babel/helpers - typeof";return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hy(n.key),n)}}function Hy(t){var e=function(t,e){if("object"!==Gy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Gy(e)?e:String(e)}var Uy=function(){function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(t){var e=t.pos[0],r=t.pos[1],n=t.zoom;return[Math.floor((e+180)/360*Math.pow(2,n)),Math.floor((1-Math.log(Math.tan(r*Math.PI/180)+1/Math.cos(r*Math.PI/180))/Math.PI)/2*Math.pow(2,n))]},(n=Hy(n="getTileNumber"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.viewer=e}var e,r,n;return e=t,(r=[{key:"getMsg",value:function(){var t=this.viewer.scene.camera,e=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t.position).height,r=this.screenPos({x:document.documentElement.clientWidth/2-15,y:document.documentElement.clientHeight/2}),n=this.screenPos({x:document.documentElement.clientWidth/2+15,y:document.documentElement.clientHeight/2});if(!r||!n)return null;var o=Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(r.lng,r.lat,1),Cesium.Cartesian3.fromDegrees(n.lng,n.lat,1)),i=this.viewer.scene.globe._surface._tilesToRender,a=null;return 0!=i.length&&(a=i[0].level),{scale:"1:"+Math.round(o),level:a,height:Math.round(e)}}},{key:"screenPos",value:function(t){var e=new Cesium.Cartesian2(t.x,t.y);if(!e)return!1;var r=this.viewer.scene.globe.pick(this.viewer.camera.getPickRay(e),this.viewer.scene);if(r){var n=this.viewer.scene.globe.ellipsoid,o=new Cesium.Cartesian3(r.x,r.y,r.z),i=n.cartesianToCartographic(o),a=Cesium.Math.toDegrees(i.latitude);return{lng:Cesium.Math.toDegrees(i.longitude),lat:a,alt:i.height}}}},{key:"getScreenAreaTileNumber",value:function(t){if(!(this.getMsg().level<15)){var e=t.zoom,r=this.reactPos(),n=this.getTileNumber({pos:r[0],zoom:e}),o=this.getTileNumber({pos:r[1],zoom:e}),i=this.getTileNumber({pos:r[2],zoom:e}),a=this.getTileNumber({pos:r[3],zoom:e}),s=[n[0],o[0],i[0],a[0]],u=[n[1],o[1],i[1],a[1]];s.sort(function(t,e){return t-e}),u.sort(function(t,e){return t-e});for(var l=[],c=s[0];c<=s[3];c++)for(var f=u[0];f<=u[3];f++)l.push(e+"_"+c+"_"+f);return l}}},{key:"reactPos",value:function(){var t=this.viewer,e=t.scene.camera;if(t.scene.globe.ellipsoid.cartesianToCartographic(e.position).height>511e4)return[];var r=this.screenPos({viewer:t,x:20,y:t.scene.canvas.clientHeight-20}),n=this.screenPos({viewer:t,x:t.scene.canvas.clientWidth-20,y:t.scene.canvas.clientHeight-20}),o=[r.lng,r.lat],i=[n.lng,n.lat],a=-1/((i[1].toFixed(5)-o[1].toFixed(5))/(i[0].toFixed(5)-o[0].toFixed(5))),s=Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(o[0],o[1],1),Cesium.Cartesian3.fromDegrees(i[0],i[1],1))*(t.scene.canvas.clientHeight/t.scene.canvas.clientWidth),u=(Cesium.Math.toDegrees(e.heading)>180?180:0)+Math.atan(Number(a))*(180/Math.PI),l=Math.cos(u*Math.PI/180)*s/11e4,c=Math.sin(u*Math.PI/180)*s/11e4,f=[[o[0]+l,o[1]+c],[i[0]+l,i[1]+c],[i[0],i[1]],[o[0],o[1]]];return f}}])&&zy(e.prototype,r),n&&zy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vy(t){"@babel/helpers - typeof";return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Vy(i=function(t,e){if("object"!==Vy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Yy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map3d=e,this.viewer=e.viewer,this.showMeasureDis=!1,this._measureLayer=null,this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.initEvents()}var e,r,n;return e=t,(r=[{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showMeasureDis=t,this.deactivate(),this.clear(),this.positions=[],this.tempPositions=[],this.registerEvents(),this.viewer.scene.globe.depthTestAgainstTerrain=!0}},{key:"deactivate",value:function(){this.unRegisterEvents(),this.viewer.scene.globe.depthTestAgainstTerrain=!1}},{key:"clear",value:function(){var t=this;this.polylineEntity&&(this.viewer.entities.remove(this.polylineEntity),this.polylineEntity=void 0),this.viewEntity&&(this.viewer.entities.remove(this.viewEntity),this.viewEntity=void 0),this.targetEntity&&(this.viewer.entities.remove(this.targetEntity),this.targetEntity=void 0),this.resultPolylines&&this.resultPolylines.forEach(function(e){t.viewer.entities.remove(e)}),this._measureLayer&&this._measureLayer.clear()}},{key:"initEvents",value:function(){this.handler=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas)}},{key:"registerEvents",value:function(){this.leftClickEvent(),this.rightClickEvent(),this.mouseMoveEvent()}},{key:"leftClickEvent",value:function(){var t=this;this.handler.setInputAction(function(e){t.viewer._element.style.cursor="default";var r=t.viewer.scene.pickPosition(e.position);r||(r=t.viewer.scene.camera.pickEllipsoid(e.position,t.viewer.scene.globe.ellipsoid)),r&&(t.positions.push(r),1==t.positions.length?t.handleFirstPosition():t.drawEnd())},Cesium.ScreenSpaceEventType.LEFT_CLICK)}},{key:"handleFirstPosition",value:function(){this.generateView(),this.generatePolyline()}},{key:"generatePolyline",value:function(){var t=this;this.polylineEntity=this.viewer.entities.add({polyline:{positions:new Cesium.CallbackProperty(function(e){return t.tempPositions},!1),width:2,material:new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.YELLOW}),depthFailMaterial:new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.YELLOW})}})}},{key:"generateView",value:function(){this.viewEntity=this.viewer.entities.add({position:this.positions[0],label:{text:"观察位置",fillColor:Cesium.Color.WHITE,scale:1,font:"normal 18px MicroSoft YaHei",verticalOrigin:Cesium.VerticalOrigin.BOTTOM,style:Cesium.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new Cesium.Cartesian2(0,-20),outlineWidth:3,outlineColor:Cesium.Color.BLACK},point:{color:Cesium.Color.DODGERBLUE,pixelSize:5,outlineColor:Cesium.Color.WHITE,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}},{key:"generateEndPoint",value:function(){this.targetEntity=this.viewer.entities.add({position:this.positions[1],label:{text:"目标位置",fillColor:Cesium.Color.WHITE,scale:1,font:"normal 18px MicroSoft YaHei",verticalOrigin:Cesium.VerticalOrigin.BOTTOM,style:Cesium.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new Cesium.Cartesian2(0,-20),outlineWidth:3,outlineColor:Cesium.Color.BLACK},point:{color:Cesium.Color.DODGERBLUE,pixelSize:5,outlineColor:Cesium.Color.WHITE,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}},{key:"mouseMoveEvent",value:function(){var t=this;this.handler.setInputAction(function(e){var r=t.viewer.scene.pickPosition(e.endPosition);r||(r=t.viewer.scene.camera.pickEllipsoid(e.startPosition,t.viewer.scene.globe.ellipsoid)),r&&t.polylineEntity&&(t.tempPositions=t.positions.concat([r]))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"rightClickEvent",value:function(){var t=this;this.handler.setInputAction(function(e){if(t.polylineEntity)return t.positions.length<2?(t.clear(),void t.deactivate()):void 0;t.deactivate()},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"unRegisterEvents",value:function(){this.handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"drawEnd",value:function(){this.generateEndPoint(),this.startnalysis(),this.viewer.entities.remove(this.polylineEntity),this.deactivate(),this.showMeasureDis&&this.measureDis()}},{key:"measureDis",value:function(){for(var t,e=[],r=0;r<this.positions.length;r++){var n=this.map3d.cartesianTolngLatAlt(this.positions[r]);e.push(n)}var o=+be(e);o<1e3?o=(o/1).toFixed(2)+"米":o>=1e3&&o<1e7?o=(o/1e3).toFixed(2)+"公里":o>=1e7&&(o=(o/1e3/1e4).toFixed(2)+"万公里"),t='<div class="measureDistance measureSight">'+o+"</div>";var i=new Fe([e[e.length-1].lng,e[e.length-1].lat,e[e.length-1].alt],t);this._measureLayer||(this._measureLayer=new fe("measureSight"),this.map3d.addLayer(this._measureLayer)),this._measureLayer.addOverlay(i)}},{key:"startnalysis",value:function(){var t=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(this.positions[1],this.positions[0],new Cesium.Cartesian3),new Cesium.Cartesian3);console.log(t,"direction"),console.log(new Cesium.Cartesian3,"new Cesium.Cartesian3()");var e=new Cesium.Ray(this.positions[0],t);console.log(e,"ray");var r=this.viewer.scene.pickFromRay(e,[this.viewEntity,this.targetEntity]);console.log(r,"result"),this.resultPolylines=this.showIntersection(r,this.positions[1],this.positions[0]),console.log(this.resultPolylines,"this.resultPolylines")}},{key:"showIntersection",value:function(t,e,r){console.log(t,e,r,"destPoint, viewPoint-处理交互点");var n,o=[];return Cesium.defined(t)&&Cesium.defined(t.object)&&Cesium.defined(t.position)?(n=this.drawResultLine(t.position,r,Cesium.Color.CHARTREUSE),console.log(n,"resultLine-可视区域"),o.push(n),n=this.drawResultLine(t.position,e,Cesium.Color.RED),console.log(n,"resultLine-不可视区域"),o.push(n)):(n=this.drawResultLine(r,e,Cesium.Color.CHARTREUSE),o.push(n)),o}},{key:"drawResultLine",value:function(t,e,r){return console.log(t,e,r,"绘制结果线"),this.viewer.entities.add({polyline:{positions:[t,e],width:5,material:r}})}}])&&Zy(e.prototype,r),n&&Zy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xy(t){"@babel/helpers - typeof";return(Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Xy(i=function(t,e){if("object"!==Xy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Qy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=e.viewer,this.compass=new Mt(this.viewer),this.measure=new Wy(e),this.visibilityAnalysis=new Yy(e),this.mapBaseMsg=new Uy(this.viewer)}var e,r,n;return e=t,(r=[{key:"isPointVisible",value:function(t,e){var r=Cesium.Ellipsoid.WGS84,n=this.viewer.camera,o=Cesium.Cartesian3.fromDegrees(t.pos[0],t.pos[1]),i=new Cesium.EllipsoidalOccluder(r,n.position).isPointVisible(o);e&&e(i)}}])&&Ky(e.prototype,r),n&&Ky(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qy(t){"@babel/helpers - typeof";return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qy(i=function(t,e){if("object"!==qy(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $y(t,e){return($y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function td(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ed(t);if(e){var o=ed(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ed(t){return(ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rd=[],nd=n(4),od=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$y(t,e)}(i,jt);var e,r,n,o=td(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"addPopup",value:function(t){var e=this,r=document.createElement("div");r.innerHTML=t.content,t.pointerEvents&&(r.children[0].style.pointerEvents="none"),t.mapDom.appendChild(r);var n=document.getElementById(r.children[0].id),o=this,i=new nd.Cartesian2;return this.viewer.scene.preRender.addEventListener(function(){var e=nd.Cartesian3.fromDegrees(t.position[0],t.position[1],t.position[2]),r=o.viewer.scene.cartesianToCanvasCoordinates(e,i);nd.defined(r)&&(n.style.top=r.y+t.offset[1]+"px",n.style.left=r.x+t.offset[0]+"px")}),rd.push(n),new Rt(this.viewer).preRender(function(){new Qy(e.viewer).isPointVisible({pos:[t.position[0],t.position[1]]},function(t){1!=n.htmlLayerFlag&&void 0!=n.htmlLayerFlag||(n.style.display=t?"block":"none")})}),n}},{key:"addMousePopup",value:function(t){var e=this,r=document.createElement("div");r.innerHTML=t.content,r.children[0].style.pointerEvents="none",t.mapDom.appendChild(r);var n=document.getElementById(r.children[0].id),o=new nd.Cartesian2;return e.mouseEvent({eventType:"MOUSE_MOVE"},function(r){var i=e.viewer.scene.pickPosition(r.endPosition);if(i){var a=nd.Cartographic.fromCartesian(i),s={lng:nd.Math.toDegrees(a.longitude),lat:nd.Math.toDegrees(a.latitude),alt:a.height},u=nd.Cartesian3.fromDegrees(s.lng,s.lat,s.alt<.3?.3:s.alt),l=e.viewer.scene.cartesianToCanvasCoordinates(u,o);nd.defined(l)&&(n.style.top=l.y+t.offset[1]+"px",n.style.left=l.x+t.offset[0]+"px")}}),rd.push(n),n}},{key:"clearPopup",value:function(){for(var t=0;t<rd.length;t++){var e=rd[t].id,r=document.getElementById(e);null!=r&&r.parentNode.removeChild(r)}}},{key:"clearPopupById",value:function(t){var e=document.getElementById(t.domId);e&&e.remove()}}])&&Jy(e.prototype,r),n&&Jy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),id="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQ4jZ2UT2gTQRTGv5nd7G7TsNnW1QimWC+CghBEqJ7sSTx50oM3iwhejSJ486J4qdWLt6JXsQdPVdRDj0WQBqEehKJotLbEbrLNJvtnZlYmZEub1rLJB8Mw8+b9Zt7Me0PiOMY+KgGwuubv3ba3JKinjUfBj7dC+D6L1tt+82Pke5/agnsRZ+4GC38/iePY6vXbcSLBnXtUGXnYdObQWJ8BC6s7NjeGzyJfuAXNONGgSn4SQCWxbYEE33xECL3zZ+WyEvpf9gsXpn0dVuFuSKgxkcAS0GQsvA9pIIlyI1cweuRBQIh+GECddk4jvLn62nRqiFTTeYWgtaTzaPW+HEtQKeabebc2mxqSqLE2A6qO3uyAeLR6rdWYV/umAPC9RQjuyrspUYCeYVE1hdveioIVQ+YaJSST633mQURZ9KuiDZ0cGECI5sueakOnFjLGYCCqmNCzp2VoFflqr7PmBahasW+QTEwWfFtK8qjOWe35geJ0XxC5sWnf4Kp+rIxuHkFR7bKmH/+ZFiZDOnR0lnPmvASwIOe2F60l2MbnMPg69rd6e1fBJpKFa489ZQB5o2QKl5L53v/I4qz2WFHtqZb7DoG3iLC93DEYuXPImhdlKExwt6yoB59td/zfxzYuuHNV8OZ5SodlUUKI1rKqFd8DeLFrNYB/A6b1Qz9EzRMAAAAASUVORK5CYII=",ad="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAACDElEQVQ4jWP8//8/Ax5gwMDAIACVfgDF2AHIIDSscO/l7x3ff/378fz9n++Hr//4fezmz+9ffvz7/eHr33eP3/6Z8P//fwF0fSguevv5X6UwL1PbwoNfGRrWfGJ48PoPiuUOWuwMDSH8DHryrB8FuZkcGBgYLsDk4AZ9/Pavg5mJscS24SXzhQe/8XmXocCLl6Etgv8XJxujOcwwmEEOX37830OMITCQYM/NMD1F8CcHK6MEAwPDByaQ+Ofv/9fUrvpItCEgsODgV4aTt3+xP3n3twHEBxlk8On7P/4J2z4TbQgMNKz5yCDCy5QBNujJu78Ja05+YyHZFAYGhgPXfjJ8+PoPFDYGTEyMDCYPXv8lxxwwuPnsDwcorTGxsTDyoEczOYDp4es/Fwzk2cg2gI2F8QeIZjJWYjtgoMBKliEC3EwMlmpsIK9dAMXaBn8TTgYFUdLDu8CTl+H2iz/nYenow8uPf+cvyBQiyRCQxcU+vH9VJViKGKDpiEGcn7lIW5b1MbGGgby0qVTk75vPf1eCUgFIDDnTCrz5/O/S1ce/ZROmv8PIsDAAyrhLcoT/MDIybJcSZPaDiaOXRwIvP/7tE+dnTtx45js4wV148Ass4aDFwRBkxvlXVZLlz4ev/4okBJinIWvEVbApvP38L/LT93/2vJxMoEzJ8OXHv6sKoiy7QdkMQzUDAwMAuq71NKWtMMgAAAAASUVORK5CYII=";function sd(t){"@babel/helpers - typeof";return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ud(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ld(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ud(Object(r),!0).forEach(function(e){cd(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ud(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function cd(t,e,r){return(e=pd(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pd(n.key),n)}}function pd(t){var e=function(t,e){if("object"!==sd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sd(e)?e:String(e)}var hd={icon_center:ad,icon_anchor:id,icon_size:[12,12],clampToModel:!1,maxAnchorSize:999},yd=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._viewer=void 0,this._map3d=void 0,this._anchorLayer=new Cesium.CustomDataSource("draw-anchor-layer"),this._floatingAnchor=void 0,this._options={},this._plotEvent=new Ct,this._tooltipMess=void 0}var e,r,n;return e=t,(r=[{key:"tooltipMess",set:function(t){return this._tooltipMess=t,this}},{key:"_onClick",value:function(t){var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;if(!e)return!1;this._plotEvent.fire(T.DRAW_ANCHOR,e),this._map3d.tooltip.showAt(t.windowPosition,this._tooltipMess)}},{key:"_onMouseMove",value:function(t){this._map3d.tooltip.enable||(this._map3d.tooltip.enable=!0),this._map3d.tooltip.showAt(t.windowPosition,this._tooltipMess);var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;if(!e)return!1;this._floatingAnchor?this._floatingAnchor.position.setValue(e):this._floatingAnchor=this._onCreateAnchor({position:e}),this._plotEvent.fire(T.ANCHOR_MOVING,e)}},{key:"_onRightClick",value:function(t){this._plotEvent.fire(T.DRAW_STOP,this._options.clampToModel&&t.position?t.position:t.surfacePosition)}},{key:"_onCreateAnchor",value:function(t){var e=t.position,r=t.isCenter,n=void 0!==r&&r;return this._anchorLayer.entities.add({position:e,billboard:{image:n?this._options.icon_center:this._options.icon_anchor,width:this._options.icon_size[0],height:this._options.icon_size[1],eyeOffset:new Cesium.Cartesian3(0,0,-100),heightReference:this._viewer.scene.mode!==Cesium.SceneMode.SCENE3D||this._options.clampToModel?Cesium.HeightReference.NONE:Cesium.HeightReference.CLAMP_TO_GROUND}})}},{key:"_onClearAnchor",value:function(){this._anchorLayer.entities.removeAll()}},{key:"_bindEvent",value:function(){this._map3d.on(h.CLICK,this._onClick,this),this._map3d.on(h.MOUSE_MOVE,this._onMouseMove,this),this._map3d.on(h.RIGHT_CLICK,this._onRightClick,this),this._plotEvent.on(T.CREATE_ANCHOR,this._onCreateAnchor,this),this._plotEvent.on(T.CLEAR_ANCHOR,this._onClearAnchor,this)}},{key:"_unbindEvent",value:function(){this._map3d.off(h.CLICK,this._onClick,this),this._map3d.off(h.MOUSE_MOVE,this._onMouseMove,this),this._map3d.off(h.RIGHT_CLICK,this._onRightClick,this),this._plotEvent.off(T.CREATE_ANCHOR,this._onCreateAnchor,this),this._plotEvent.off(T.CLEAR_ANCHOR,this._onClearAnchor,this)}},{key:"on",value:function(t,e,r){return this._plotEvent.on(t,e,r||this),this}},{key:"off",value:function(t,e,r){return this._plotEvent.off(t,e,r||this),this}},{key:"fire",value:function(t,e){return this._plotEvent.fire(t,e),this}},{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._options=ld(ld({},hd),t),this._unbindEvent(),this._bindEvent(),this.fire(T.DRAW_START,this._options),this}},{key:"deactivate",value:function(){return this._unbindEvent(),this._tooltipMess=null,this._map3d.tooltip.enable=!1,this._anchorLayer.entities.removeAll(),this._floatingAnchor=void 0,this}},{key:"install",value:function(t){this._map3d=t,this._viewer=t.viewer,this._map3d.dataSources.add(this._anchorLayer),Object.defineProperty(this._map3d,"drawTool",{value:this,writable:!1})}}])&&fd(e.prototype,r),n&&fd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dd(t){"@babel/helpers - typeof";return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function md(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vd(Object(r),!0).forEach(function(e){bd(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vd(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function bd(t,e,r){return(e=gd(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gd(n.key),n)}}function gd(t){var e=function(t,e){if("object"!==dd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dd(e)?e:String(e)}var wd={icon_center:ad,icon_anchor:id,icon_midAnchor:uu,icon_size:[12,12],clampToModel:!0},Od=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._viewer=void 0,this._map3d=void 0,this._anchorLayer=new Cesium.CustomDataSource("edit-anchor-layer"),this._options={},this._plotEvent=new Ct,this._tooltipMess=void 0,this._pickedAnchor=void 0,this._isMoving=!1,this._anchors=[]}var e,r,n;return e=t,(r=[{key:"tooltipMess",set:function(t){return this._tooltipMess=t,this}},{key:"_onClick",value:function(t){if(this._isMoving){var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;if(!e)return!1;this._pickedAnchor&&this._pickedAnchor.position&&this._pickedAnchor.properties&&(this._pickedAnchor.position.setValue(e),this._plotEvent.fire(T.EDIT_ANCHOR_STOP,{pickedAnchor:this._pickedAnchor,position:e})),this._isMoving=!1}else{if(!t.target||!t.target.id)return!1;this._pickedAnchor=t.target.id,this._isMoving=!0}}},{key:"_onMouseMove",value:function(t){if(!this._isMoving&&0!==this._anchors.length)return!1;var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;if(!e)return!1;this._pickedAnchor&&this._pickedAnchor.position&&this._pickedAnchor.properties?(this._pickedAnchor.position.setValue(e),this._plotEvent.fire(T.ANCHOR_MOVING,{pickedAnchor:this._pickedAnchor,position:e})):0===this._anchors.length&&this._plotEvent.fire(T.ANCHOR_MOVING,{position:e})}},{key:"_onLeftDown",value:function(t){if(this._isMoving){var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;if(!e)return!1;this._pickedAnchor&&this._pickedAnchor.position&&this._pickedAnchor.properties&&(this._pickedAnchor.position.setValue(e),this._plotEvent.fire(T.EDIT_ANCHOR_STOP,{pickedAnchor:this._pickedAnchor,position:e})),this._isMoving=!1}else{if(!t.target||!t.target.id)return!1;this._map3d.viewer.scene.screenSpaceCameraController.enableRotate=!1,this._pickedAnchor=t.target.id,this._isMoving=!0}}},{key:"_onLeftUp",value:function(t){this._isMoving&&(this._isMoving=!1,this._map3d.viewer.scene.screenSpaceCameraController.enableRotate=!0)}},{key:"_onRightClick",value:function(t){var e=this._options.clampToModel&&t.position?t.position:t.surfacePosition;this._plotEvent.fire(T.EDIT_STOP,{pickedAnchor:this._pickedAnchor,position:e,isSave:!0})}},{key:"_onCreateAnchor",value:function(t){var e=t.position,r=t.index,n=t.isCenter,o=void 0!==n&&n,i=t.isMid,a=void 0!==i&&i,s=a?this._options.icon_midAnchor:o?this._options.icon_center:this._options.icon_anchor,u=this._anchorLayer.entities.add({position:e,billboard:{image:s,width:this._options.icon_size[0],height:this._options.icon_size[1],eyeOffset:new Cesium.Cartesian3(0,0,-1e3)},properties:{isCenter:o,isMid:a,index:r}});this._anchors.push(u)}},{key:"_onUpdateAnchor",value:function(t){var e=t.index,r=t.position;this._anchors[e]&&this._anchors[e].position.setValue(r)}},{key:"_onClearAnchor",value:function(){this._anchorLayer.entities.removeAll(),this._anchors=[]}},{key:"_bindEvent",value:function(){this._map3d.on(h.LEFT_DOWN,this._onLeftDown,this),this._map3d.on(h.LEFT_UP,this._onLeftUp,this),this._map3d.on(h.MOUSE_MOVE,this._onMouseMove,this),this._options.rightEnd&&this._map3d.on(h.RIGHT_CLICK,this._onRightClick,this),this._plotEvent.on(T.CREATE_ANCHOR,this._onCreateAnchor,this),this._plotEvent.on(T.UPDATE_ANCHOR,this._onUpdateAnchor,this),this._plotEvent.on(T.CLEAR_ANCHOR,this._onClearAnchor,this)}},{key:"_unbindEvent",value:function(){this._map3d.off(h.LEFT_DOWN,this._onLeftDown,this),this._map3d.off(h.LEFT_UP,this._onLeftUp,this),this._map3d.off(h.MOUSE_MOVE,this._onMouseMove,this),this._plotEvent.off(T.CREATE_ANCHOR,this._onCreateAnchor,this),this._plotEvent.off(T.UPDATE_ANCHOR,this._onUpdateAnchor,this),this._plotEvent.off(T.CLEAR_ANCHOR,this._onClearAnchor,this)}},{key:"on",value:function(t,e,r){return this._plotEvent.on(t,e,r||this),this}},{key:"off",value:function(t,e,r){return this._plotEvent.off(t,e,r||this),this}},{key:"fire",value:function(t,e){return this._plotEvent.fire(t,e),this}},{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._options=md(md({},wd),t),this._unbindEvent(),this._bindEvent(),this.fire(T.EDIT_START,this._options),this}},{key:"deactivate",value:function(){return this._unbindEvent(),this._anchorLayer.entities.removeAll(),this._anchors=[],this}},{key:"install",value:function(t){this._map3d=t,this._viewer=t.viewer,this._map3d.dataSources.add(this._anchorLayer),Object.defineProperty(this._viewer,"editTool",{value:this,writable:!1})}}])&&_d(e.prototype,r),n&&_d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pd(t){"@babel/helpers - typeof";return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Pd(i=function(t,e){if("object"!==Pd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Sd(t,e){return(Sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ed(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jd(t);if(e){var o=jd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Td(t)}(this,r)}}function Td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jd(t){return(jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sd(t,e)}(i,Ay);var e,r,n,o=Ed(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-context-menu"),t._ulEl=void 0,t._handler=void 0,t._overlay=void 0,t._position=void 0,t._wgs84Position=void 0,t._surfacePosition=void 0,t._wgs84SurfacePosition=void 0,t._windowPosition=void 0,t._instanceId=void 0,t._config={},t._defaultMenu=[{label:"飞到默认位置",callback:function(){t._viewer.camera.flyHome(1.5)},context:Td(t)},{label:"取消飞行",callback:function(){t._viewer.camera.cancelFlight()},context:Td(t)}],t._overlayMenu=[],t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("contextmenu")}},{key:"DEFAULT_MENU",set:function(t){return this._defaultMenu=t,this}},{key:"config",set:function(t){return this._config=t,t.customClass&&this._setCustomClass(),this}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"contextMenu",{value:this,writable:!1}),this._handler=new Cesium.ScreenSpaceEventHandler(this._viewer.canvas)}},{key:"_bindEvent",value:function(){var t=this;this._handler.setInputAction(function(e){t._onRightClick(e)},Cesium.ScreenSpaceEventType.RIGHT_CLICK),this._handler.setInputAction(function(e){t._onClick(e)},Cesium.ScreenSpaceEventType.LEFT_CLICK)}},{key:"_unbindEvent",value:function(){this._handler.removeInputAction(Cesium.ScreenSpaceEventType.RIGHT_CLICK),this._handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK)}},{key:"_mountContent",value:function(){this._ulEl=zt.create("ul","menu-list",this._wrapper),this._ready=!0}},{key:"_mountMenu",value:function(){for(var t=this;this._ulEl.hasChildNodes();)this._ulEl.removeChild(this._ulEl.firstChild);this._overlayMenu&&this._overlayMenu.length&&this._overlayMenu.forEach(function(e){t._addMenuItem(e.label,e.callback,e.context||t)}),this._defaultMenu&&this._defaultMenu.length&&this._defaultMenu.forEach(function(e){t._addMenuItem(e.label,e.callback,e.context||t)})}},{key:"_onRightClick",value:function(t){var e;if(this._enable){this._overlay=void 0;var r=this._viewer.scene;this._windowPosition=t.position;var n=r.pick(t.position);if(r.pickPositionSupported&&(this._position=r.pickPosition(t.position)),this._position){var o=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this._position);o&&(this._wgs84Position={lng:Cesium.Math.toDegrees(o.longitude),lat:Cesium.Math.toDegrees(o.latitude),alt:o.height})}if(r.mode===Cesium.SceneMode.SCENE3D){var i=r.camera.getPickRay(t.position);this._surfacePosition=r.globe.pick(i,r)}else this._surfacePosition=r.camera.pickEllipsoid(t.position,Cesium.Ellipsoid.WGS84);if(this._surfacePosition){var a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this._surfacePosition);a&&(this._wgs84SurfacePosition={lng:Cesium.Math.toDegrees(a.longitude),lat:Cesium.Math.toDegrees(a.latitude),alt:a.height})}if(this._instanceId=null===n||void 0===n?void 0:n.instanceId,(null===n||void 0===n?void 0:n.id)instanceof Cesium.Entity){var s=this._viewer.getLayers().filter(function(t){return t.layerId===n.id.layerId})[0];s&&s.getOverlay&&(this._overlay=s.getOverlay(n.id.overlayId))}else if(n instanceof Cesium.Cesium3DTileFeature){var u=this._viewer.getLayers().filter(function(t){return t.layerId===n.tileset.layerId})[0];u&&u.getOverlay&&(this._overlay=u.getOverlay(n.tileset.overlayId))}else if((null===n||void 0===n?void 0:n.primitive)instanceof Cesium.Cesium3DTileset){var l=this._viewer.getLayers().filter(function(t){return t.layerId===n.primitive.layerId})[0];l&&l.getOverlay&&(this._overlay=l.getOverlay(n.primitive.overlayId))}else if(null!==n&&void 0!==n&&n.primitive){var c=this._viewer.getLayers().filter(function(t){return t.layerId===n.primitive.layerId})[0];c&&c.getOverlay&&(this._overlay=c.getOverlay(n.primitive.overlayId))}this._overlayMenu=(null===(e=this._overlay)||void 0===e?void 0:e.contextMenu)||[],this._mountMenu(),this._updateWindowCoord(t.position)}}},{key:"_onClick",value:function(t){this.hide()}},{key:"_updateWindowCoord",value:function(t){var e=this._ulEl.hasChildNodes()?"visible":"hidden";this._wrapper.style.cssText="\n    visibility:".concat(e,";\n    z-index:1;\n    transform:translate3d(").concat(Math.round(t.x),"px,").concat(Math.round(t.y),"px, 0);\n    ")}},{key:"_setCustomClass",value:function(){zt.setClass(this._wrapper,"dc-context-menu ".concat(this._config.customClass))}},{key:"_addMenuItem",value:function(t,e,r){if(!t||!e)return this;var n=zt.create("li","menu-item",null),o=zt.create("a","",n);o.innerHTML=t,o.href="javascript:void(0)";var i=this;return e&&(o.onclick=function(){e.call(r,{windowPosition:i._windowPosition,position:i._position,wgs84Position:i._wgs84Position,surfacePosition:i._surfacePosition,wgs84SurfacePosition:i._wgs84SurfacePosition,overlay:i._overlay,instanceId:i._instanceId}),i.hide()}),this._ulEl.appendChild(n),this}}])&&Cd(e.prototype,r),n&&Cd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("contextmenu");var Ad=xd;function Rd(t){"@babel/helpers - typeof";return(Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Rd(i=function(t,e){if("object"!==Rd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Rd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Id(t,e){return(Id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Md(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Dd(t);if(e){var o=Dd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Dd(t){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ld=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Id(t,e)}(i,Ay);var e,r,n,o=Md(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-location-bar"),t._mouseEl=void 0,t._cameraEl=void 0,t._fpsEl=void 0,t._msEl=void 0,t._lastMouseSampleTime=Cesium.getTimestamp(),t._lastCameraSampleTime=Cesium.getTimestamp(),t._lastFpsSampleTime=Cesium.getTimestamp(),t._lastMsSampleTime=Cesium.getTimestamp(),t._fpsFrameCount=0,t._msFrameCount=0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("location_bar")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"locationBar",{value:this,writable:!1})}},{key:"_bindEvent",value:function(){this._viewer.on(h.MOUSE_MOVE,this._onMove,this),this._viewer.on(v,this._onCameraChanged,this),this._viewer.on(b,this._onPostUpdate,this)}},{key:"_unbindEvent",value:function(){this._viewer.off(h.MOUSE_MOVE,this._onMove,this),this._viewer.off(v,this._onCameraChanged,this),this._viewer.off(b,this._onPostUpdate,this)}},{key:"_mountContent",value:function(){this._mouseEl=zt.create("div","mouse-bar",this._wrapper),this._cameraEl=zt.create("div","camera-bar",this._wrapper),this._msEl=zt.create("div","ms-bar",this._wrapper),this._fpsEl=zt.create("div","fps-bar",this._wrapper),this._ready=!0}},{key:"_onMove",value:function(t){var e=Cesium.getTimestamp();if(!(e<this._lastMouseSampleTime+300)){var r=t.wgs84SurfacePosition;this._mouseEl.innerHTML="\n      <span>经度：".concat(r.lng.toFixed(8),"</span>\n      <span>纬度：").concat(r.lat.toFixed(8),"</span>\n      <span>海拔：").concat(r.alt.toFixed(2)," 米</span>"),this._lastMouseSampleTime=e}}},{key:"_onCameraChanged",value:function(){var t=Cesium.getTimestamp();if(!(t<this._lastCameraSampleTime+300)){var e=this._viewer.cameraPosition;this._cameraEl.innerHTML="\n      <span>视角：".concat((+e.pitch).toFixed(2),"</span>\n      <span>视高：").concat((+e.alt).toFixed(2)," 米</span>\n    "),this._lastCameraSampleTime=t}}},{key:"_onPostUpdate",value:function(){var t=Cesium.getTimestamp();this._msFrameCount++;var e=t-this._lastMsSampleTime;if(e>200){var r=(e/this._msFrameCount).toFixed(2);this._msEl.innerHTML="<span>".concat(r," MS</span>"),this._lastMsSampleTime=t,this._msFrameCount=0}this._fpsFrameCount++;var n=t-this._lastFpsSampleTime;if(n>1e3){var o=1e3*this._fpsFrameCount/n|0;this._fpsEl.innerHTML="<span>".concat(o," FPS</span>"),this._lastFpsSampleTime=t,this._fpsFrameCount=0}}}])&&kd(e.prototype,r),n&&kd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("location_bar");var Nd=Ld,Fd={logo:"\ndata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAG5ElEQVRoQ+2Yf2xVZxnHP89py9qliPe0BUTqBrunuDEBx8QfcxuwRYcxM3HO7Y8JZUNKTweKmWyaGDBZYtwSMmnvuXRKcEMzt0WmwdllE1nclkgsyUaIUM4ZNmKihfbcDjbCpPc85rT3QG1677ltb5UlPf+e932e7/f5vu/zPO8jfMA/+YDjZ4rA/1vBKQWmFBgWAXOnex0Bu4FPAf8Evu3b1vOFgnTZHKHa1LEVgZTtEoLv9NkLfpMjs03hfMa2VucjcdkQSKTdVkGq/ebk2ghswjmxSMh2+Lb10cufgOO9AHRk7OSTw8Gajqu+beUN9GWjgJnq2qZi3JqxrRURATPtbka5w7etL066AjXprmUaGDdhyCI0WAhyHeAjHFPoMgI9lDWyr/Y3X9udD4yZcg8j2qMiewVZhmpjoeiHdiakgJny6tXQLaJ8FZiTA/auCD2q9IBWozILYdZF0KoHBXb2tTT8fDQiNanjjSpyCxr83W9ZsC0uTY+bQE3Ke1BFtwD14dkVpMNQOk63JL1RgbV13RYYxkqEO0S5AfQPasiOzAZrXxzIkqfR8LwixlaBfYEYT2aar/ld0SC2HplmzqzchKHfQpkLfD0u15eUgOl4z4DeiwY/LCSxmXIf8FusXXnP+1DReg5YCGz2beuJooMwbOGYjpDpuPuBlSrcl2m2fjncYV3KS2bJ3heSSqRcW4QUBgv9DdZfCwEzHffPwKfjAjLhLJRw3DaBltEkr3G8jYp+H5gdZFnRv9F6NZH2bso0J98oJqoJxz0gsFyRppF1IG5/UQok0t69ovoMsNu3rfsvVcqumwXje8AqlFcC1Uf7H2z4U5zTkf9n/vTErIELAy+D1BplFTf2Nl0d9kFFfbEE5rR3Xvl+dsbrCvUGZZ/vted3hZYTjrdK0N8DZxR5NGMnHy/KY55FCcdbL2j7WI9SLIEo46jqw5mWhsdC/2bK+xwS7BMkm1X9Qn9Lw5sTAX9JUbdT0HmixvasBq8FlVVHzqyr9yeUhUzHC1Pk9b6dvHow8mnvelRfEEgi+jW/ueHXpQAf2sjVltb/tqdvgfEySqvfkjw50ldhBQ5ouXnMe0+U5/ps6xuD0XeOt4OsV3gkY1s/LhX4Qds73A9Rxr8QeUNEn1aoRfkscLcKbZlma+OYCHy41V1ulHEgyjy1jrc0QDtBXvPt5C2lBB/ZMh33Z8ADw3ugMEsZQn1fs5UcE4EonytlizP2/MNR9Et9dIaDqkl7m1T1J/8eYOa7m6zTQ6q7YeKo8m3rY2MlkBLBLq8om33qm/N7wt4cOOjb1mcmI/q5BHEPor+KimBN2v2RKo+Iysa+lmTb2AjkCkwkp5k6/oML5Zo+27Sgd7IIRMc2LIiGESwPe65CqbXgJTZT3k5EmyIFJgv0cLtmyhtSAMK7sA70dd9uuDmf7xgC7maE7dEd+J8QyF3iQV8i+/3m5O3jrgOJtq4viWG8OJmX9mIRaz36CcrKHxLITSB0t283XGxbxqdAmJfLeQfY5dvWuslQYO72k1Xnqt5/CA2+CzId9ALIId+2wvwf+8W3Eo7bA1T4tmXGWhvDgrrUkeqAikbEuF/hk8CbKnJQVJtGa9fHp4Dj/gMYnMmI6tp879gx4A6r7Vwp18YAWTPYjsBJgXTV+dNPnKus2wuyZGDaFQvjeqDIZ14FEk7YWLFUIWwX7hKkPJALKwpNFQoRCXsoUdaANjLUInSKIXsGtGLPO/ZVmZqUt1pFnxKRx/qakw8XG5RRCSRS7mABi/Jv7sGyY+R7IM5JTXvXx4MBY6UIYdtxF1AO+iJq7PFbks9G+4e9B67FYEncK26433wETolQN7wfMR33JSAcMBV8hNc4b9+uol9G9VZgSc7ZKcIBQJZfhK+1kcSjFxno477dEE46iv5GJWA67pHQgoGs6bWThyJrpuN1g14VXbLa9u6PZIPsUgkGbhQxblDkNtArh9ZLN8JvA9U/XlE9fX/P6tnvjYYqehOHE44+27qzaOS5hXkUOL5FRIZaZeUVhDOonkWkH9gAVAJngekjHB5V0b2GUbGvr2newUJgctPnaCrxkm9bq8YKfjBM+TaZjnu3CMtVWQwsC1PppbVyLhfpEwodUPbsQFnl0bNNc+J7pJFzoZjxTByp2DowaGDrgfLaurmLVINz06undXevnXf+Yms95GEckzn+hgZPFzM+LESiOAJ5LAw9cIL1IPcAM3JHrgfhLdDDiswSdDHIoksm9C8Ce3RAnvI3WWfiIhz3f0IEIuOJ9rdnGEFwp6p+BeQaoA50JoRHjT6gV5VODXh+tCwUB3LSFJiI41LtLYkCpQIzHjtTBMYTtVLumVKglNEcj63/AIrz7E/FBbRAAAAAAElFTkSuQmCC\n",compass_outer:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="162px" height="162px" viewBox="0 0 162 162" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-outer</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="compass-outer" fill-rule="nonzero">\n            <path d="M80.8410544,161.682109 C36.1937731,161.682109 0,125.488336 0,80.8410544 C0,36.1937731 36.1937731,0 80.8410544,0 C125.488336,0 161.682109,36.1937731 161.682109,80.8410544 C161.682109,125.488336 125.488336,161.682109 80.8410544,161.682109 Z M81.1836011,134.620909 C110.696211,134.620909 134.620909,110.696211 134.620909,81.1836011 C134.620909,51.6709916 110.696211,27.7462941 81.1836011,27.7462941 C51.6709916,27.7462941 27.7462941,51.6709916 27.7462941,81.1836011 C27.7462941,110.696211 51.6709916,134.620909 81.1836011,134.620909 Z" id="Oval-108"></path>\n            <circle id="Oval-74" fill="#FFFFFF" cx="129.493683" cy="127.952092" r="1.54159147"></circle>\n            <circle id="Oval-74-Copy-3" fill="#FFFFFF" cx="129.493683" cy="35.4566038" r="1.54159147"></circle>\n            <circle id="Oval-74-Copy-5" fill="#FFFFFF" cx="30.8318294" cy="127.952092" r="1.54159147"></circle>\n            <circle id="Oval-74-Copy-4" fill="#FFFFFF" cx="30.8318294" cy="35.4566038" r="1.54159147"></circle>\n            <polygon id="N" fill="#FFFFFF" points="84.9318072 23.1238721 84.9318072 13.1321362 82.5623385 13.1321362 82.5623385 19.2984646 77.951866 13.1321362 75.7108625 13.1321362 75.7108625 23.1238721 78.0946053 23.1238721 78.0946053 16.9718176 82.6908037 23.1238721"></polygon>\n            <polygon id="Line" fill="#FFFFFF" points="143.368007 82.1093476 152.617555 82.1093476 152.617555 81.2993476 143.368007 81.2993476"></polygon>\n            <polygon id="Line-Copy-8" fill="#FFFFFF" points="9.24954884 82.1093476 18.4990976 82.1093476 18.4990976 81.2993476 9.24954884 81.2993476"></polygon>\n            <polygon id="Line" fill="#FFFFFF" points="81.2993476 143.368007 81.2993476 152.617555 82.1093476 152.617555 82.1093476 143.368007"></polygon>\n        </g>\n    </g>\n</svg>\n',compass_inner:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-inner</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="compass-inner" fill-rule="nonzero">\n            <path d="M8.5,16.5 C4.081722,16.5 0.5,12.918278 0.5,8.5 C0.5,4.081722 4.081722,0.5 8.5,0.5 C12.918278,0.5 16.5,4.081722 16.5,8.5 C16.5,12.918278 12.918278,16.5 8.5,16.5 Z M8.5,15.5 C12.3659932,15.5 15.5,12.3659932 15.5,8.5 C15.5,4.63400675 12.3659932,1.5 8.5,1.5 C4.63400675,1.5 1.5,4.63400675 1.5,8.5 C1.5,12.3659932 4.63400675,15.5 8.5,15.5 Z" id="Oval-96"></path>\n            <path d="M9.92599835,7.09066832 C12.7122872,9.87695712 14.3709388,12.5452228 13.4497471,13.4664145 C12.5285555,14.3876061 9.86028979,12.7289545 7.074001,9.94266568 C4.2877122,7.15637688 2.62906055,4.48811119 3.55025221,3.56691953 C4.47144386,2.64572788 7.13970955,4.30437952 9.92599835,7.09066832 Z M9.21889157,7.7977751 C6.92836458,5.50724811 4.52075769,4.01062761 4.25735899,4.27402631 C3.99396029,4.53742501 5.49058078,6.9450319 7.78110778,9.2355589 C10.0716348,11.5260859 12.4792417,13.0227064 12.7426404,12.7593077 C13.0060391,12.495909 11.5094186,10.0883021 9.21889157,7.7977751 Z" id="Oval-96-Copy-2"></path>\n            <path d="M9.92599835,9.94266568 C7.13970955,12.7289545 4.47144386,14.3876061 3.55025221,13.4664145 C2.62906055,12.5452228 4.2877122,9.87695712 7.074001,7.09066832 C9.86028979,4.30437952 12.5285555,2.64572788 13.4497471,3.56691953 C14.3709388,4.48811119 12.7122872,7.15637688 9.92599835,9.94266568 Z M9.21889157,9.2355589 C11.5094186,6.9450319 13.0060391,4.53742501 12.7426404,4.27402631 C12.4792417,4.01062761 10.0716348,5.50724811 7.78110778,7.7977751 C5.49058078,10.0883021 3.99396029,12.495909 4.25735899,12.7593077 C4.52075769,13.0227064 6.92836458,11.5260859 9.21889157,9.2355589 Z" id="Oval-96-Copy-3"></path>\n            <path d="M15.1464466,1.1464466 L14.3453364,1.94755684 L13.9608692,2.33202401 L14.667976,3.03913077 L15.0524431,2.65466362 L15.8535534,1.8535534 L15.1464466,1.1464466 Z M2.29760014,13.995293 L1.85311902,14.4397742 L1.004311,15.2885822 L1.71141776,15.995689 L2.56022581,15.146881 L3.00470698,14.7023998 L2.29760014,13.995293 Z" id="Line"></path>\n            <circle id="Oval-432" cx="16" cy="1" r="1"></circle>\n            <circle id="Oval-432-Copy" cx="1" cy="16" r="1"></circle>\n        </g>\n    </g>\n</svg>\n',compass_rotation_marker:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="53px" height="53px" viewBox="0 0 53 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-rotation-marker</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="compass-rotation-marker">\n            <path d="M52.4399986,26.2199993 C52.4399986,11.7390936 40.7009051,0 26.2199993,0 C11.7390936,0 0,11.7390936 0,26.2199993 C0,40.7009051 11.7390936,52.4399986 26.2199993,52.4399986 C40.7009051,52.4399986 52.4399986,40.7009051 52.4399986,26.2199993 Z" id="rotator" stroke-opacity="0.135841259" stroke="#E2A549" stroke-width="9" opacity="0.201434235"></path>\n            <path d="M0,26.2199993 C0,11.7390936 11.7390936,0 26.2199993,0 L26.2199993,9 C16.7096563,9 9,16.7096563 9,26.2199993" id="Shape" opacity="0.634561567" fill="#4990E2"></path>\n        </g>\n    </g>\n</svg>\n',decrease:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="50px" height="6px" viewBox="0 0 50 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>decrease</title>\n    <path d="M46.6183575,0.657894737 L3.30112724,0.657894737 C1.44927539,0.657894737 0,1.66880618 0,2.96052632 C0,4.25224645 1.44927539,5.26315789 3.30112724,5.26315789 L46.6988728,5.26315789 C48.5507246,5.26315789 50,4.25224645 50,2.96052632 C49.9194847,1.66880618 48.4702093,0.657894737 46.6183575,0.657894737 L46.6183575,0.657894737 L46.6183575,0.657894737 Z" id="Shape"></path>\n</svg>\n',increase:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="50px" height="50px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>increase</title>\n    <path d="M0,25 C0,25.3514939 0.131810207,25.659051 0.373462207,25.900703 C0.615114207,26.142355 0.922671379,26.2741652 1.27416517,26.2741652 L23.7258348,26.2741652 L23.7258348,48.7258348 C23.7258348,49.0773286 23.857645,49.3848858 24.099297,49.6265378 C24.3189807,49.8462214 24.6485061,50 25,50 C25.7029877,50 26.2741652,49.4288225 26.2741652,48.7258348 L26.2741652,26.2741652 L48.7258348,26.2741652 C49.4288225,26.2741652 50,25.7029877 50,25 C50,24.2970123 49.4288225,23.7258348 48.7258348,23.7258348 L26.2741652,23.7258348 L26.2741652,1.27416517 C26.2741652,0.571177517 25.7029877,0 25,0 C24.2970123,0 23.7258348,0.571177517 23.7258348,1.27416517 L23.7258348,23.7258348 L1.27416517,23.7258348 C0.571177517,23.7258348 0,24.2970123 0,25 L0,25 L0,25 L0,25 Z" id="Shape"></path>\n</svg>\n',refresh:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="50px" height="50px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>refresh</title>\n    <path d="M48.2758621,0 C47.2844828,0 46.5086207,0.775193846 46.5086207,1.76571923 L46.5086207,12.2308355 C42.0689655,4.78036173 34.0086207,0 25,0 C11.2068965,0 0,11.1972438 0,25.0215332 C0,38.8458226 11.2068965,50 25,50 C38.7931035,50 50,38.8027562 50,25.0215332 C50,24.0310078 49.2241379,23.2558139 48.2327587,23.2558139 C47.2413793,23.2558139 46.4655172,24.0310078 46.4655172,25.0215332 C46.4655172,36.8647717 36.8103448,46.5116279 24.9568965,46.5116279 C13.1034483,46.5116279 3.49137933,36.8217054 3.49137933,24.9784668 C3.49137933,13.1352283 13.1465517,3.48837212 25,3.48837212 C33.4913793,3.48837212 41.0775862,8.44099913 44.5258621,16.0206718 L32.1551724,16.0206718 C31.1637931,16.0206718 30.3879311,16.7958657 30.3879311,17.7863911 C30.3879311,18.7769164 31.1637931,19.5521103 32.1551724,19.5521103 L48.2327587,19.5521103 C49.2241379,19.5521103 50,18.7769164 50,17.7863911 L50,1.72265288 C50,0.775193846 49.2241379,0 48.2758621,0 L48.2758621,0 L48.2758621,0 Z" id="Shape"></path>\n</svg>\n',splitter:'\n<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg width="19px" height="28px" viewBox="0 0 19 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <path d="M0.6551724,2.3448276 L0.6551724,25.6551724 C0.6551724,26.6454761 1.4579722,27.4482759 2.4482759,27.4482759 C3.4385796,27.4482759 4.2413793,26.6454761 4.2413793,25.6551724 L4.2413793,2.3448276 C4.2413793,1.3545239 3.4385796,0.5517241 2.4482759,0.5517241 C1.4579722,0.5517241 0.6551724,1.3545239 0.6551724,2.3448276 L0.6551724,2.3448276 Z M7.6551724,2.3448276 L7.6551724,25.6551724 C7.6551724,26.6454761 8.4579722,27.4482759 9.4482759,27.4482759 C10.4385796,27.4482759 11.2413793,26.6454761 11.2413793,25.6551724 L11.2413793,2.3448276 C11.2413793,1.3545239 10.4385796,0.5517241 9.4482759,0.5517241 C8.4579722,0.5517241 7.6551724,1.3545239 7.6551724,2.3448276 L7.6551724,2.3448276 Z M14.6551724,2.3448276 L14.6551724,25.6551724 C14.6551724,26.6454761 15.4579722,27.4482759 16.4482759,27.4482759 C17.4385796,27.4482759 18.2413793,26.6454761 18.2413793,25.6551724 L18.2413793,2.3448276 C18.2413793,1.3545239 17.4385796,0.5517241 16.4482759,0.5517241 C15.4579722,0.5517241 14.6551724,1.3545239 14.6551724,2.3448276 L14.6551724,2.3448276 Z" id="splitter"></path>\n</svg>\n'};function Bd(t){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Bd(i=function(t,e){if("object"!==Bd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Gd(t,e){return(Gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hd(t);if(e){var o=Hd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Hd(t){return(Hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ud=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gd(t,e)}(i,Ay);var e,r,n,o=zd(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-slider"),t._baseLayer=void 0,t._moveActive=!1,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("map_split")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"mapSplit",{value:this,writable:!1})}},{key:"_bindEvent",value:function(){this._viewer.scene.splitPosition=.5,this._wrapper.style.left="50%"}},{key:"_unbindEvent",value:function(){this._baseLayer?this._viewer.scene.splitPosition=this._baseLayer.splitDirection>0?1:0:this._viewer.scene.splitPosition=0}},{key:"_mountContent",value:function(){var t=zt.parseDom(Fd.splitter,!0,"splitter");this._wrapper.appendChild(t);var e=new Cesium.ScreenSpaceEventHandler(t),r=this;e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.PINCH_START),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.PINCH_MOVE),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.PINCH_END),this._ready=!0}},{key:"_moveHandler",value:function(t){if(this._moveActive&&this._enable){var e=t.endPosition.x,r=(this._wrapper.offsetLeft+e)/this._wrapper.parentElement.offsetWidth;this._wrapper.style.left=100*r+"%",this._viewer.scene.splitPosition=r}}},{key:"addBaseLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._viewer&&this._enable?(t&&(this._baseLayer&&this._viewer.imageryLayers.remove(this._baseLayer),this._baseLayer=this._viewer.imageryLayers.addImageryProvider(t),this._baseLayer.splitDirection=e||0,this._viewer.scene.splitPosition=this._wrapper.offsetLeft/this._wrapper.parentElement.offsetWidth),this):this}}])&&Wd(e.prototype,r),n&&Wd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("map_split");var Vd=Ud;function Zd(t){"@babel/helpers - typeof";return(Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Zd(i=function(t,e){if("object"!==Zd(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Xd(t,e){return(Xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qd(t);if(e){var o=Qd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qd(t){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xd(t,e)}(i,Ay);var e,r,n,o=Kd(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-map-switch"),t._config=void 0,t._cache=[],t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("map_switch")}},{key:"_enableHook",value:function(){!this._wrapper.parentNode&&this._viewer&&this._viewer.customContainer.appendChild(this._wrapper)}},{key:"_installHook",value:function(){var t=this;Object.defineProperty(this._viewer,"mapSwitch",{value:this,writable:!1}),this.enable=!0;var e=this;this._wrapper.onmouseover=function(){var r=80;e._cache.length>0&&(r=e._cache.length*(r+5)-5),t._wrapper.style.width="".concat(r,"px")},this._wrapper.onmouseout=function(){e._wrapper.style.width="80px"}}},{key:"_addItem",value:function(t){var e=this,r=zt.create("div","map-item",this._wrapper),n=this._cache.length?this._cache.length-1:0;0===n&&zt.addClass(r,"active"),r.setAttribute("data-index",String(n)),r.onclick=function(t){var r=document.getElementsByClassName("map-item active");r&&r.length&&(r[0].className="map-item"),e._viewer&&(t.target.className="map-item active",e._viewer.changeBaseLayer(+t.target.getAttribute("data-index")||0))},t.iconUrl&&(r.style.cssText="\n       background:url(".concat(t.iconUrl,");\n    ")),zt.create("span","",r).innerHTML=t.name||"地图"}},{key:"addMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._enable&&(this._cache.push(t),this._addItem(t),this._cache.length>1&&(this._wrapper.style.visibility="visible"))}}])&&Yd(e.prototype,r),n&&Yd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("map_switch");var Jd=qd;function $d(t){"@babel/helpers - typeof";return($d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===$d(i=function(t,e){if("object"!==$d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function ev(t,e){return(ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nv(t);if(e){var o=nv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nv(t){return(nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ov=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ev(t,e)}(i,Ay);var e,r,n,o=rv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-tool-tip"),t._ready=!0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("tooltip")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"tooltip",{value:this,writable:!1})}},{key:"_updateWindowCoord",value:function(t){var e=t.x+10,r=t.y-this._wrapper.offsetHeight/2;this._wrapper.style.cssText="\n    visibility:visible;\n    z-index:1;\n    transform:translate3d(".concat(Math.round(e),"px,").concat(Math.round(r),"px, 0);\n    ")}},{key:"showAt",value:function(t,e){return this._enable?(t&&this._updateWindowCoord(t),this.setContent(e),this):this}}])&&tv(e.prototype,r),n&&tv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("tooltip");var iv=ov;function av(t){"@babel/helpers - typeof";return(av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function uv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sv(Object(r),!0).forEach(function(e){lv(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sv(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function lv(t,e,r){return(e=fv(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fv(n.key),n)}}function fv(t){var e=function(t,e){if("object"!==av(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==av(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===av(e)?e:String(e)}function pv(t,e){return(pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yv(t);if(e){var o=yv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===av(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yv(t){return(yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dv={animation:!1,baseLayerPicker:!1,imageryProvider:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,creditContainer:void 0},vv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pv(t,e)}(i,Ay);var e,r,n,o=hv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-hawkeye-map",null),t._wrapper.setAttribute("id",Bt.uuid()),t._baseLayers=[],t._map=void 0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("hawkeye_map")}},{key:"baseLayers",get:function(){return this._baseLayers}},{key:"_mountContent",value:function(){var t=new Cesium.Viewer(this._wrapper,uv(uv({},dv),{},{sceneMode:Cesium.SceneMode.SCENE2D}));t.imageryLayers.removeAll(),t.cesiumWidget.creditContainer.style.display="none",t.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),t.scene.backgroundColor=Cesium.Color.TRANSPARENT,Bt.merge(t.scene.screenSpaceCameraController,{enableRotate:!1,enableTranslate:!1,enableZoom:!1,enableTilt:!1,enableLook:!1,maximumZoomDistance:40489014}),this._map=t,this._ready=!0}},{key:"_bindEvent",value:function(){this._viewer.on(v,this._syncMap,this)}},{key:"_unbindEvent",value:function(){this._viewer.off(v,this._syncMap,this)}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"hawkeyeMap",{value:this,writable:!1}),this._viewer.viewer.camera.percentageChanged=.01}},{key:"_syncMap",value:function(){var t=new Cesium.Cartesian2(Math.floor(this._viewer.canvas.clientWidth/2),Math.floor(this._viewer.canvas.clientHeight/2)),e=this._viewer.scene.camera.pickEllipsoid(t);if(!e)return!1;var r=Cesium.Cartesian3.distance(e,this._viewer.scene.camera.positionWC);this._map.scene.camera.lookAt(e,new Cesium.Cartesian3(0,0,r))}},{key:"addBaseLayer",value:function(t){var e=this;return this._map&&this._enable?(t&&(this._baseLayers&&this._baseLayers.length&&this._map.imageryLayers.removeAll(),Array.isArray(t)||(t=[t]),t.forEach(function(t){e._baseLayers.push(e._map.imageryLayers.addImageryProvider(t))})),this):this}}])&&cv(e.prototype,r),n&&cv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("hawkeye_map");var mv=vv;function bv(t){"@babel/helpers - typeof";return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===bv(i=function(t,e){if("object"!==bv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function gv(t,e){return(gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ov(t);if(e){var o=Ov(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ov(t){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gv(t,e)}(i,Ay);var e,r,n,o=wv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-compass"),t._compassRectangle=void 0,t._outRing=void 0,t._gyro=void 0,t._rotation_marker=void 0,t._orbitCursorAngle=0,t._orbitCursorOpacity=0,t._orbitLastTimestamp=0,t._orbitFrame=void 0,t._orbitIsLook=!1,t._rotateInitialCursorAngle=void 0,t._rotateFrame=void 0,t._mouseMoveHandle=void 0,t._mouseUpHandle=void 0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("compass")}},{key:"_installHook",value:function(){var t=this;Object.defineProperty(this._viewer,"compass",{value:this,writable:!1}),this._wrapper.onmousedown=function(e){t._handleMouseDown(e)},this._wrapper.ondblclick=function(e){t._handleDoubleClick(e)}}},{key:"_bindEvent",value:function(){this._viewer.on(g,this._postRenderHandler,this)}},{key:"_unbindEvent",value:function(){this._viewer.off(g,this._postRenderHandler,this)}},{key:"_postRenderHandler",value:function(){var t=this._viewer.camera.heading;this._outRing&&(this._outRing.style.cssText="\n      transform : rotate(-".concat(t,"rad);\n      -webkit-transform : rotate(-").concat(t,"rad);\n      "))}},{key:"_mountContent",value:function(){zt.create("div","out-ring-bg",this._wrapper),this._outRing=zt.parseDom(Fd.compass_outer,!0,"out-ring"),this._wrapper.appendChild(this._outRing),this._gyro=zt.parseDom(Fd.compass_inner,!0,"gyro"),this._wrapper.appendChild(this._gyro),this._rotation_marker=zt.parseDom(Fd.compass_rotation_marker,!0,"rotation_marker"),this._wrapper.appendChild(this._rotation_marker),this._rotation_marker.style.visibility="hidden",this._ready=!0}},{key:"_handleMouseDown",value:function(t){if(this._viewer.scene.mode===Cesium.SceneMode.MORPHING)return!0;this._compassRectangle=t.currentTarget.getBoundingClientRect();var e=this._compassRectangle.width/2,r=this._getVector(t),n=Cesium.Cartesian2.magnitude(r)/e;if(n<50/145)this._orbit(r);else{if(!(n<1))return!0;this._rotate(r)}}},{key:"_handleDoubleClick",value:function(){var t=this._viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs)return!0;if(t.mode!==Cesium.SceneMode.COLUMBUS_VIEW||r.enableTranslate){if(t.mode===Cesium.SceneMode.SCENE3D||t.mode===Cesium.SceneMode.COLUMBUS_VIEW){if(!r.enableLook)return;if(t.mode===Cesium.SceneMode.SCENE3D&&!r.enableRotate)return}var n=this._getCameraFocus(!0);if(n){var o=t.globe.ellipsoid.cartographicToCartesian(e.positionCartographic),i=t.globe.ellipsoid.geodeticSurfaceNormal(n),a=new Cesium.BoundingSphere(n,0);e.flyToBoundingSphere(a,{offset:new Cesium.HeadingPitchRange(0,Cesium.Math.PI_OVER_TWO-Cesium.Cartesian3.angleBetween(i,e.directionWC),Cesium.Cartesian3.distance(o,n)),duration:1.5})}}}},{key:"_getCameraFocus",value:function(t){var e=new Cesium.Cartesian3,r=this._viewer.scene,n=r.camera;if(r.mode!==Cesium.SceneMode.MORPHING){if(this._viewer.delegate.trackedEntity)e=this._viewer.delegate.trackedEntity.position.getValue(this._viewer.clock.currentTime);else{var o=new Cesium.Ray;o.origin=n.positionWC,o.direction=n.directionWC,e=r.globe.pick(o,r)}if(e){if(r.mode===Cesium.SceneMode.SCENE2D||r.mode===Cesium.SceneMode.COLUMBUS_VIEW){e=n.worldToCameraCoordinatesPoint(e);var i=new Cesium.Cartographic;t&&(e=r.globe.ellipsoid.cartographicToCartesian(r.mapProjection.unproject(e,i)))}else t||(e=n.worldToCameraCoordinatesPoint(e));return e}}}},{key:"_orbit",value:function(t){var e=this,r=this._viewer.scene,n=r.screenSpaceCameraController,o=r.camera;if(r.mode!==Cesium.SceneMode.MORPHING&&n.enableInputs){switch(r.mode){case Cesium.SceneMode.COLUMBUS_VIEW:if(n.enableLook)break;if(!n.enableTranslate||!n.enableTilt)return;break;case Cesium.SceneMode.SCENE3D:if(n.enableLook)break;if(!n.enableTilt||!n.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!n.enableTranslate)return}if(this._mouseMoveHandle=function(t){e._orbitMouseMoveFunction(t)},this._mouseUpHandle=function(){e._orbitMouseUpFunction()},document.removeEventListener("mousemove",this._mouseMoveHandle,!1),document.removeEventListener("mouseup",this._mouseUpHandle,!1),this._orbitLastTimestamp=Cesium.getTimestamp(),this._viewer.delegate.trackedEntity)this._orbitFrame=void 0,this._orbitIsLook=!1;else{var i=this._getCameraFocus(!0);i?(this._orbitFrame=Cesium.Transforms.eastNorthUpToFixedFrame(i,r.globe.ellipsoid),this._orbitIsLook=!1):(this._orbitFrame=Cesium.Transforms.eastNorthUpToFixedFrame(o.positionWC,r.globe.ellipsoid),this._orbitIsLook=!0)}this._rotation_marker.style.visibility="visible",this._gyro.className+=" gyro-active",document.addEventListener("mousemove",this._mouseMoveHandle,!1),document.addEventListener("mouseup",this._mouseUpHandle,!1),this._viewer.clock.onTick.addEventListener(this._orbitTickFunction,this),this._updateAngleAndOpacity(t,this._compassRectangle.width)}}},{key:"_orbitTickFunction",value:function(){var t,e=this._viewer.scene,r=this._viewer.camera,n=Cesium.getTimestamp(),o=(n-this._orbitLastTimestamp)*(2.5*(this._orbitCursorOpacity-.5)/1e3),i=this._orbitCursorAngle+Cesium.Math.PI_OVER_TWO,a=Math.cos(i)*o,s=Math.sin(i)*o;this._orbitFrame&&(t=Cesium.Matrix4.clone(r.transform),r.lookAtTransform(this._orbitFrame)),e.mode===Cesium.SceneMode.SCENE2D?r.move(new Cesium.Cartesian3(a,s,0),Math.max(e.canvas.clientWidth,e.canvas.clientHeight)/100*r.positionCartographic.height*o):this._orbitIsLook?(r.look(Cesium.Cartesian3.UNIT_Z,-a),r.look(r.right,-s)):(r.rotateLeft(a),r.rotateUp(s)),this._orbitFrame&&t&&r.lookAtTransform(t),this._orbitLastTimestamp=n}},{key:"_updateAngleAndOpacity",value:function(t,e){var r=Math.atan2(-t.y,t.x);this._orbitCursorAngle=Cesium.Math.zeroToTwoPi(r-Cesium.Math.PI_OVER_TWO);var n=Cesium.Cartesian2.magnitude(t),o=e/2,i=Math.min(n/o,1);this._orbitCursorOpacity=.5*i*i+.5,this._rotation_marker.style.cssText="\n      transform: rotate(-".concat(this._orbitCursorAngle,"rad);\n      opacity: ").concat(this._orbitCursorOpacity)}},{key:"_orbitMouseMoveFunction",value:function(t){this._updateAngleAndOpacity(this._getVector(t),this._compassRectangle.width)}},{key:"_orbitMouseUpFunction",value:function(){document.removeEventListener("mousemove",this._mouseMoveHandle,!1),document.removeEventListener("mouseup",this._mouseUpHandle,!1),this._viewer.clock.onTick.removeEventListener(this._orbitTickFunction,this),this._mouseMoveHandle=void 0,this._mouseUpHandle=void 0,this._rotation_marker.style.visibility="hidden",this._gyro.className=this._gyro.className.replace(" gyro-active","")}},{key:"_rotate",value:function(t){var e=this,r=this._viewer.scene,n=r.camera,o=r.screenSpaceCameraController;if(r.mode!==Cesium.SceneMode.MORPHING&&r.mode!==Cesium.SceneMode.SCENE2D&&o.enableInputs&&(o.enableLook||r.mode!==Cesium.SceneMode.COLUMBUS_VIEW&&(r.mode!==Cesium.SceneMode.SCENE3D||o.enableRotate))){if(this._mouseMoveHandle=function(t){e._rotateMouseMoveFunction(t)},this._mouseUpHandle=function(){e._rotateMouseUpFunction()},document.removeEventListener("mousemove",this._mouseMoveHandle,!1),document.removeEventListener("mouseup",this._mouseUpHandle,!1),this._rotateInitialCursorAngle=Math.atan2(-t.y,t.x),this._viewer.delegate.trackedEntity)this._rotateFrame=void 0;else{var i=this._getCameraFocus(!0);i&&(r.mode!==Cesium.SceneMode.COLUMBUS_VIEW||o.enableLook||o.enableTranslate)?this._rotateFrame=Cesium.Transforms.eastNorthUpToFixedFrame(i,r.globe.ellipsoid):this._rotateFrame=Cesium.Transforms.eastNorthUpToFixedFrame(n.positionWC,r.globe.ellipsoid)}var a;this._rotateFrame&&(a=Cesium.Matrix4.clone(n.transform),n.lookAtTransform(this._rotateFrame)),this._rotateInitialCameraAngle=-n.heading,this._rotateFrame&&a&&n.lookAtTransform(a),document.addEventListener("mousemove",this._mouseMoveHandle,!1),document.addEventListener("mouseup",this._mouseUpHandle,!1)}}},{key:"_rotateMouseMoveFunction",value:function(t){var e,r=this._viewer.camera,n=this._getVector(t),o=Math.atan2(-n.y,n.x)-this._rotateInitialCursorAngle,i=Cesium.Math.zeroToTwoPi(this._rotateInitialCameraAngle-o);this._rotateFrame&&(e=Cesium.Matrix4.clone(r.transform),r.lookAtTransform(this._rotateFrame));var a=-r.heading;r.rotateRight(i-a),this._rotateFrame&&e&&r.lookAtTransform(e)}},{key:"_rotateMouseUpFunction",value:function(){document.removeEventListener("mousemove",this._mouseMoveHandle,!1),document.removeEventListener("mouseup",this._mouseUpHandle,!1),this._mouseMoveHandle=void 0,this._mouseUpHandle=void 0}},{key:"_getVector",value:function(t){var e=this._compassRectangle,r=new Cesium.Cartesian2((e.right-e.left)/2,(e.bottom-e.top)/2),n=new Cesium.Cartesian2(t.clientX-e.left,t.clientY-e.top),o=new Cesium.Cartesian2;return Cesium.Cartesian2.subtract(n,r,o),o}}])&&_v(e.prototype,r),n&&_v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("compass");var Cv=Pv;function Sv(t){"@babel/helpers - typeof";return(Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Sv(i=function(t,e){if("object"!==Sv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Sv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Tv(t,e){return(Tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xv(t);if(e){var o=xv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xv(t){return(xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Av(t){return function(t){if(Array.isArray(t))return Rv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Rv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var kv=new Cesium.EllipsoidGeodesic,Iv=[1,2,3,5],Mv=[].concat(Iv,Av(Iv.map(function(t){return 10*t})),Av(Iv.map(function(t){return 100*t})),Av(Iv.map(function(t){return 1e3*t})),Av(Iv.map(function(t){return 1e4*t})),Av(Iv.map(function(t){return 1e5*t})),Av(Iv.map(function(t){return 1e6*t}))),Dv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tv(t,e)}(i,Ay);var e,r,n,o=jv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-distance-legend"),t._labelEl=void 0,t._scaleBarEl=void 0,t._lastUpdate=Cesium.getTimestamp(),t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("distance_legend")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"distanceLegend",{value:this,writable:!1})}},{key:"_bindEvent",value:function(){this._viewer.on(g,this._updateContent,this)}},{key:"_unbindEvent",value:function(){this._viewer.off(g,this._updateContent,this)}},{key:"_updateContent",value:function(t,e){var r=Cesium.getTimestamp();if(!(r<this._lastUpdate+250)&&this._labelEl&&this._scaleBarEl){this._lastUpdate=r;var n=t.canvas.width,o=t.canvas.height,i=t.camera.getPickRay(new Cesium.Cartesian2(n/2|0,o-1)),a=t.camera.getPickRay(new Cesium.Cartesian2(1+n/2|0,o-1)),s=t.globe.pick(i,t),u=t.globe.pick(a,t);if(s&&u){kv.setEndPoints(t.globe.ellipsoid.cartesianToCartographic(s),t.globe.ellipsoid.cartesianToCartographic(u));for(var l=kv.surfaceDistance,c=0,f=Mv.length-1;f>=0;--f)if(Mv[f]/l<100){c=Mv[f];break}if(c){this._wrapper.style.visibility="visible",this._labelEl.innerHTML=c>=1e3?"".concat(c/1e3," km"):"".concat(c," m");var p=c/l|0;this._scaleBarEl.style.cssText="width: ".concat(p,"px; left: ").concat((125-p)/2,"px;")}}}}},{key:"_mountContent",value:function(){this._labelEl=zt.create("div","label",this._wrapper),this._scaleBarEl=zt.create("div","scale-bar",this._wrapper),this._wrapper.style.visibility="hidden",this._ready=!0}}])&&Ev(e.prototype,r),n&&Ev(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("distance_legend");var Lv=Dv;function Nv(t){"@babel/helpers - typeof";return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Nv(i=function(t,e){if("object"!==Nv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Nv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Bv(t,e){return(Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Gv(t);if(e){var o=Gv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Nv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Gv(t){return(Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bv(t,e)}(i,Ay);var e,r,n,o=Wv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-zoom-controller"),t._zoomInEl=void 0,t._zoomOutEl=void 0,t._refreshEl=void 0,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("zoom_controller")}},{key:"_getCameraFocus",value:function(t){var e=new Cesium.Ray(t.camera.positionWC,t.camera.directionWC),r=Cesium.IntersectionTests.rayEllipsoid(e,Cesium.Ellipsoid.WGS84);return r?Cesium.Ray.getPoint(e,r.start):Cesium.IntersectionTests.grazingAltitudeLocation(e,Cesium.Ellipsoid.WGS84)}},{key:"_getCameraPosition",value:function(t,e,r){var n=new Cesium.Cartesian3,o=Cesium.Cartesian3.subtract(e,t.position,n),i=Cesium.Cartesian3.multiplyByScalar(o,r,n);return Cesium.Cartesian3.add(t.position,i,n)}},{key:"_zoomIn",value:function(){var t=this._viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs||t.mode===Cesium.SceneMode.COLUMBUS_VIEW)return!0;if(t.mode===Cesium.SceneMode.SCENE2D)e.zoomIn(.5*e.positionCartographic.height);else if(t.mode===Cesium.SceneMode.SCENE3D){var n=this._getCameraFocus(t),o=this._getCameraPosition(e,n,.5);e.flyTo({destination:o,orientation:{heading:e.heading,pitch:e.pitch,roll:e.roll},duration:.5,convert:!1})}}},{key:"_refresh",value:function(){this._viewer.camera.flyHome(1.5)}},{key:"_zoomOut",value:function(){var t=this._viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs||t.mode===Cesium.SceneMode.COLUMBUS_VIEW)return!0;if(t.mode===Cesium.SceneMode.SCENE2D)e.zoomOut(e.positionCartographic.height);else if(t.mode===Cesium.SceneMode.SCENE3D){var n=this._getCameraFocus(t),o=this._getCameraPosition(e,n,-1);e.flyTo({destination:o,orientation:{heading:e.heading,pitch:e.pitch,roll:e.roll},duration:.5,convert:!1})}}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"zoomController",{value:this,writable:!1})}},{key:"_mountContent",value:function(){this._zoomInEl=zt.parseDom(Fd.increase,!0,"zoom-in"),this._refreshEl=zt.parseDom(Fd.refresh,!0,"refresh"),this._zoomOutEl=zt.parseDom(Fd.decrease,!0,"zoom-out"),this._wrapper.appendChild(this._zoomInEl),this._wrapper.appendChild(this._refreshEl),this._wrapper.appendChild(this._zoomOutEl);var t=this;this._zoomInEl.onclick=function(){t._zoomIn()},this._refreshEl.onclick=function(){t._refresh()},this._zoomOutEl.onclick=function(){t._zoomOut()},this._ready=!0}}])&&Fv(e.prototype,r),n&&Fv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("zoom_controller");var Hv=zv;function Uv(t){"@babel/helpers - typeof";return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Uv(i=function(t,e){if("object"!==Uv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Uv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Zv(t,e){return(Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xv(t);if(e){var o=Xv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Uv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xv(t){return(Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zv(t,e)}(i,Ay);var e,r,n,o=Yv(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-loading-mask"),t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("loading_mask")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"loadingMask",{value:this,writable:!1})}},{key:"_mountContent",value:function(){var t=zt.parseDom("\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n    ",!0,"loading");this._wrapper.appendChild(t),this._ready=!0}}])&&Vv(e.prototype,r),n&&Vv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("loading_mask");var Qv=Kv;function qv(t){"@babel/helpers - typeof";return(qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qv(i=function(t,e){if("object"!==qv(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $v(t,e){return($v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=em(t);if(e){var o=em(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function em(t){return(em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$v(t,e)}(i,Ay);var e,r,n,o=tm(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-slider"),t._tileset=void 0,t._moveActive=!1,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("tileset_split")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"tilesetSplit",{value:this,writable:!1})}},{key:"_bindEvent",value:function(){this._viewer.scene.splitPosition=.5,this._wrapper.style.left="50%"}},{key:"_unbindEvent",value:function(){this._tileset?this._viewer.scene.splitPosition=this._tileset.splitDirection>0?1:0:this._viewer.scene.splitPosition=0}},{key:"_mountContent",value:function(){var t=zt.parseDom(Fd.splitter,!0,"splitter");this._wrapper.appendChild(t);var e=new Cesium.ScreenSpaceEventHandler(t),r=this;e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.PINCH_START),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.PINCH_MOVE),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.PINCH_END),this._ready=!0}},{key:"_moveHandler",value:function(t){if(this._moveActive&&this._enable){var e=t.endPosition.x,r=(this._wrapper.offsetLeft+e)/this._wrapper.parentElement.offsetWidth;this._wrapper.style.left=100*r+"%",this._viewer.scene.splitPosition=r}}},{key:"addTileset",value:function(t){return this._viewer&&this._enable?(t&&(this._tileset&&this._viewer.scene.primitives.remove(this._tileset),this._tileset=this._viewer.scene.primitives.add(t.delegate||t),this._viewer.scene.splitPosition=this._wrapper.offsetLeft/this._wrapper.parentElement.offsetWidth),this):this}}])&&Jv(e.prototype,r),n&&Jv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("tileset_split");var nm=rm;function om(t){"@babel/helpers - typeof";return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===om(i=function(t,e){if("object"!==om(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==om(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function am(t,e){return(am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=um(t);if(e){var o=um(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===om(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function um(t){return(um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&am(t,e)}(i,Ay);var e,r,n,o=sm(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._wrapper=zt.create("div","dc-slider"),t._tileset=void 0,t._baseLayer=void 0,t._moveActive=!1,t._state=Dt.INITIALIZED,t}return e=i,(r=[{key:"type",get:function(){return Ay.getWidgetType("scene_split")}},{key:"_installHook",value:function(){Object.defineProperty(this._viewer,"sceneSplit",{value:this,writable:!1})}},{key:"_bindEvent",value:function(){this._viewer.scene.splitPosition=.5,this._wrapper.style.left="50%"}},{key:"_unbindEvent",value:function(){this._viewer.scene.splitPosition=1}},{key:"_mountContent",value:function(){var t=zt.parseDom(Fd.splitter,!0,"splitter");this._wrapper.appendChild(t);var e=new Cesium.ScreenSpaceEventHandler(t),r=this;e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(){r._moveActive=!0},Cesium.ScreenSpaceEventType.PINCH_START),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(t){r._moveHandler(t)},Cesium.ScreenSpaceEventType.PINCH_MOVE),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(){r._moveActive=!1},Cesium.ScreenSpaceEventType.PINCH_END),this._ready=!0}},{key:"_moveHandler",value:function(t){if(this._moveActive&&this._enable){var e=t.endPosition.x,r=(this._wrapper.offsetLeft+e)/this._wrapper.parentElement.offsetWidth;this._wrapper.style.left=100*r+"%",this._viewer.scene.splitPosition=r}}},{key:"addTileset",value:function(t){return this._viewer&&this._enable?(t&&(this._tileset&&this._viewer.scene.primitives.remove(this._tileset),this._tileset=this._viewer.scene.primitives.add(t.delegate||t)),this):this}},{key:"addBaseLayer",value:function(t){return this._viewer&&this._enable?(t&&(this._baseLayer&&this._viewer.imageryLayers.remove(this._baseLayer),this._baseLayer=this._viewer.imageryLayers.addImageryProvider(t),this._baseLayer.splitDirection=1),this):this}}])&&im(e.prototype,r),n&&im(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();Ay.registerType("scene_split");var cm=lm;var fm=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function pm(t,e){return t>e?1:t<e?-1:0}function hm(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(t[o]<e)return o-1}else if(r<0){for(o=1;o<n;++o)if(t[o]<=e)return o}else for(o=1;o<n;++o){if(t[o]==e)return o;if(t[o]<e)return"function"==typeof r?r(e,t[o-1],t[o])>0?o-1:o:t[o-1]-e<e-t[o]?o-1:o}return n-1}function ym(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function dm(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,o=0;o<n;o++)t[t.length]=r[o]}function vm(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function mm(){return!0}function bm(){return!1}function _m(){}function gm(){return function(){throw new Error("Unimplemented abstract method.")}()}var wm=0;function Om(t){return t.ol_uid||(t.ol_uid=String(++wm))}var Pm,Cm="6.6.1",Sm="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Em=-1!==Sm.indexOf("firefox"),Tm=(-1!==Sm.indexOf("safari")&&Sm.indexOf("chrom"),-1!==Sm.indexOf("webkit")&&-1==Sm.indexOf("edge")),jm=-1!==Sm.indexOf("macintosh"),xm="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Am="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Rm="undefined"!=typeof Image&&Image.prototype.decode,km=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Im=(Pm=function(t,e){return(Pm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Pm(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Mm=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===Cm?Cm:"v"+Cm.split("-")[0])+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return Im(e,t),e}(Error);function Dm(t,e){if(!t)throw new Mm(e)}var Lm;new Array(6);function Nm(t,e,r,n,o,i,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t}function Fm(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function Bm(t,e,r,n,o,i,a,s){var u=Math.sin(i),l=Math.cos(i);return t[0]=n*l,t[1]=o*u,t[2]=-n*u,t[3]=o*l,t[4]=a*n*l-s*n*u+e,t[5]=a*o*u+s*o*l+r,t}function Wm(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Dm(0!==n,32);var o=e[0],i=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-i/n,t[2]=-a/n,t[3]=o/n,t[4]=(a*l-s*u)/n,t[5]=-(o*l-i*u)/n,t}function Gm(t){var e="matrix("+t.join(", ")+")";if(Am)return e;var r=Lm||(Lm=document.createElement("div"));return r.style.transform=e,r.style.transform}var zm={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Hm={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Um(t){for(var e=Jm(),r=0,n=t.length;r<n;++r)rb(e,t[r]);return e}function Vm(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Zm(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ym(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function Xm(t,e){return Qm(t,e[0],e[1])}function Km(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Qm(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function qm(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=Hm.UNKNOWN;return a<r?u|=Hm.LEFT:a>o&&(u|=Hm.RIGHT),s<n?u|=Hm.BELOW:s>i&&(u|=Hm.ABOVE),u===Hm.UNKNOWN&&(u=Hm.INTERSECTING),u}function Jm(){return[1/0,1/0,-1/0,-1/0]}function $m(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function tb(t){return $m(1/0,1/0,-1/0,-1/0,t)}function eb(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function rb(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function nb(t,e,r,n,o){for(;r<n;r+=o)ob(t,e[r],e[r+1]);return t}function ob(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function ib(t,e){var r;return(r=e(sb(t)))?r:(r=e(ub(t)))?r:(r=e(yb(t)))?r:(r=e(hb(t)))||!1}function ab(t){var e=0;return mb(t)||(e=db(t)*fb(t)),e}function sb(t){return[t[0],t[1]]}function ub(t){return[t[2],t[1]]}function lb(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function cb(t,e,r,n,o){var i=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),l=i*s,c=i*u,f=a*s,p=a*u,h=t[0],y=t[1],d=h-l+p,v=h-l-p,m=h+l-p,b=h+l+p,_=y-c-f,g=y-c+f,w=y+c+f,O=y+c-f;return $m(Math.min(d,v,m,b),Math.min(_,g,w,O),Math.max(d,v,m,b),Math.max(_,g,w,O),o)}function fb(t){return t[3]-t[1]}function pb(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return vb(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):tb(n),n}function hb(t){return[t[0],t[3]]}function yb(t){return[t[2],t[3]]}function db(t){return t[2]-t[0]}function vb(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function mb(t){return t[2]<t[0]||t[3]<t[1]}function bb(t,e,r,n){var o=[];if(n>1)for(var i=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+i*s/n,t[1],t[2],t[1]+a*s/n,t[2]-i*s/n,t[3],t[0],t[3]-a*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var u=[],l=[],c=(s=0,o.length);s<c;s+=2)u.push(o[s]),l.push(o[s+1]);return function(t,e,r){return $m(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function _b(t,e,r){return Math.min(Math.max(t,e),r)}var gb="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},wb="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function Ob(t,e,r,n,o,i){var a=o-r,s=i-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=o,n=i):u>0&&(r+=a*u,n+=s*u)}return Pb(t,e,r,n)}function Pb(t,e,r,n){var o=r-t,i=n-e;return o*o+i*i}function Cb(t){return t*Math.PI/180}function Sb(t,e){var r=t%e;return r*e<0?r+e:r}function Eb(t,e,r){return t+r*(e-t)}var Tb=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,jb=/^([a-z]*)$|^hsla?\(.*\)$/i;function xb(t){return"string"==typeof t?t:Lb(t)}function Ab(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var Rb,kb,Ib=(Rb={},kb=0,function(t){var e;if(Rb.hasOwnProperty(t))e=Rb[t];else{if(kb>=1024){var r=0;for(var n in Rb)0==(3&r++)&&(delete Rb[n],--kb)}e=function(t){var e,r,n,o,i;if(jb.exec(t)&&(t=Ab(t)),Tb.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var u=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),r=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),o=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,u&&(o=(o<<4)+o)),i=[e,r,n,o/255]}else 0==t.indexOf("rgba(")?Db(i=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((i=t.slice(4,-1).split(",").map(Number)).push(1),Db(i)):Dm(!1,14);return i}(t),Rb[t]=e,++kb}return e});function Mb(t){return Array.isArray(t)?t:Ib(t)}function Db(t){return t[0]=_b(t[0]+.5|0,0,255),t[1]=_b(t[1]+.5|0,0,255),t[2]=_b(t[2]+.5|0,0,255),t[3]=_b(t[3],0,1),t}function Lb(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}var Nb=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=Fb(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var o=Fb(t,e,r);this.cache_[o]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Fb(t,e,r){return e+":"+t+":"+(r?xb(r):"null")}var Bb=new Nb;var Wb=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),Gb={PROPERTYCHANGE:"propertychange"},zb="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(void 0!==i&&null!==i)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function Hb(t){for(var e in t)delete t[e]}var Ub="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function Vb(t){var e;for(e in t)return!1;return!e}var Zb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yb=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return Zb(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Wb(t):t,r=e.type;e.target||(e.target=this.eventTarget_||this);var n,o=this.listeners_&&this.listeners_[r];if(o){var i=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in i||(i[r]=0,a[r]=0),++i[r];for(var s=0,u=o.length;s<u;++s)if(!1===(n="handleEvent"in o[s]?o[s].handleEvent(e):o[s].call(this,e))||e.propagationStopped){n=!1;break}if(--i[r],0===i[r]){var l=a[r];for(delete a[r];l--;)this.removeEventListener(r,_m);delete i[r]}return n}},e.prototype.disposeInternal=function(){this.listeners_&&Hb(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var r=this.listeners_&&this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=_m,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(fm),Xb={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Kb(t,e,r,n,o){if(n&&n!==t&&(r=r.bind(n)),o){var i=r;r=function(){t.removeEventListener(e,r),i.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function Qb(t,e,r,n){return Kb(t,e,r,n,!0)}function qb(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Hb(t))}var Jb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$b=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return Jb(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Xb.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=Kb(this,t[o],e);return n}return Kb(this,t,e)},e.prototype.onceInternal=function(t,e){var r;if(Array.isArray(t)){var n=t.length;r=new Array(n);for(var o=0;o<n;++o)r[o]=Qb(this,t[o],e)}else r=Qb(this,t,e);return e.ol_key=r,r},e.prototype.unInternal=function(t,e){var r=e.ol_key;if(r)!function(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)qb(t[e]);else qb(t)}(r);else if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(Yb);$b.prototype.on,$b.prototype.once,$b.prototype.un;var t_=$b,e_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r_=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.key=r,o.oldValue=n,o}return e_(e,t),e}(Wb),n_=function(t){function e(e){var r=t.call(this)||this;return r.on,r.once,r.un,Om(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return e_(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&zb({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var r;r="change:"+t,this.dispatchEvent(new r_(r,t,e)),r=Gb.PROPERTYCHANGE,this.dispatchEvent(new r_(r,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,r){var n=this.values_||(this.values_={});if(r)n[t]=e;else{var o=n[t];n[t]=e,o!==e&&this.notify(t,o)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.applyProperties=function(t){t.values_&&zb(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],Vb(this.values_)&&(this.values_=null),e||this.notify(t,r)}},e}(t_),o_={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};function i_(t){"@babel/helpers - typeof";return(i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s_=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=zb({},e);return"object"===i_(e.properties)&&(delete n.properties,zb(n,e.properties)),n[o_.OPACITY]=void 0!==e.opacity?e.opacity:1,Dm("number"==typeof n[o_.OPACITY],64),n[o_.VISIBLE]=void 0===e.visible||e.visible,n[o_.Z_INDEX]=e.zIndex,n[o_.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[o_.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,n[o_.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,n[o_.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return a_(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=_b(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return gm()},e.prototype.getLayerStatesArray=function(t){return gm()},e.prototype.getExtent=function(){return this.get(o_.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o_.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o_.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(o_.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(o_.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(o_.OPACITY)},e.prototype.getSourceState=function(){return gm()},e.prototype.getVisible=function(){return this.get(o_.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o_.Z_INDEX)},e.prototype.setExtent=function(t){this.set(o_.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o_.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o_.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(o_.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(o_.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Dm("number"==typeof t,64),this.set(o_.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o_.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o_.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(n_),u_="prerender",l_="postrender",c_="precompose",f_="postcompose",p_="rendercomplete",h_={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},y_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function d_(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var v_=function(t){function e(e){var r=this,n=zb({},e);delete n.source,(r=t.call(this,n)||this).on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addChangeListener(o_.SOURCE,r.handleSourcePropertyChange_);var o=e.source?e.source:null;return r.setSource(o),r}return y_(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(o_.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h_.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(qb(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Kb(t,Xb.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(t){return t([])})},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(qb(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(qb(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Kb(t,c_,function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Dm(!e.some(function(t){return t.layer===r.layer}),67),e.push(r)},this),this.mapRenderKey_=Kb(this,Xb.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(o_.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(s_);function m_(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function b_(t,e){var r=Math.cos(e),n=Math.sin(e),o=t[0]*r-t[1]*n,i=t[1]*r+t[0]*n;return t[0]=o,t[1]=i,t}function __(t,e){if(e.canWrapX()){var r=db(e.getExtent()),n=g_(t,e,r);n&&(t[0]-=n*r)}return t}function g_(t,e,r){var n=e.getExtent(),o=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var i=r||db(n);o=Math.floor((t[0]-n[0])/i)}return o}var w_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function O_(t,e){Bb.expire()}var P_=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r}return w_(e,t),e.prototype.dispatchRenderEvent=function(t,e){gm()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Bm(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Wm(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o,i,a,s){var u,l=e.viewState;function c(t,e,r,n){return o.call(i,e,t?r:null,n)}var f=l.projection,p=__(t.slice(),f),h=[[0,0]];if(f.canWrapX()&&n){var y=db(f.getExtent());h.push([-y,0],[y,0])}for(var d=e.layerStatesArray,v=d.length,m=[],b=[],_=0;_<h.length;_++)for(var g=v-1;g>=0;--g){var w=d[g],O=w.layer;if(O.hasRenderer()&&d_(w,l)&&a.call(s,O)){var P=O.getRenderer(),C=O.getSource();if(P&&C){var S=C.getWrapX()?p:t,E=c.bind(null,w.managed);b[0]=S[0]+h[_][0],b[1]=S[1]+h[_][1],u=P.forEachFeatureAtCoordinate(b,e,r,E,m)}if(u)return u}}if(0!==m.length){var T=1/m.length;return m.forEach(function(t,e){return t.distanceSq+=e*T}),m.sort(function(t,e){return t.distanceSq-e.distanceSq}),m.some(function(t){return u=t.callback(t.feature,t.layer,t.geometry)}),u}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o){return gm()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,o,i){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,mm,this,o,i)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){gm()},e.prototype.scheduleExpireIconCache=function(t){Bb.canExpireCache()&&t.postRenderFunctions.push(O_)},e}(fm),C_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S_=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.inversePixelTransform=r,i.frameState=n,i.context=o,i}return C_(e,t),e}(Wb),E_="ol-hidden",T_="ol-selectable",j_="ol-unselectable",x_="ol-control",A_="ol-collapsed",R_=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),k_=["style","variant","weight","size","lineHeight","family"],I_=function(t){var e=t.match(R_);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=k_.length;n<o;++n){var i=e[n+1];void 0!==i&&(r[k_[n]]=i)}return r.families=r.family.split(/,\s?/),r};function M_(t,e,r,n){var o=r&&r.length?r.shift():Am?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(o.width=t),e&&(o.height=e),o.getContext("2d",n)}function D_(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function L_(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function N_(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function F_(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function B_(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var W_=[],G_=[0,0,0,0],z_=new n_;(new Yb).setSize=function(){console.warn("labelCache is deprecated.")};var H_,U_,V_=null,Z_={},Y_=function(){var t,e,r=100,n="32px ",o=["monospace","serif"],i=o.length,a="wmytzilWMYTZIL@#/&?$%10";function s(t,r,s){for(var u=!0,l=0;l<i;++l){var c=o[l];if(e=Q_(t+" "+r+" "+n+c,a),s!=c){var f=Q_(t+" "+r+" "+n+s+","+c,a);u=u&&f!=e}}return!!u}function u(){for(var e=!0,n=z_.getKeys(),o=0,i=n.length;o<i;++o){var a=n[o];z_.get(a)<r&&(s.apply(this,a.split("\n"))?(Hb(Z_),V_=null,H_=void 0,z_.set(a,r)):(z_.set(a,z_.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=I_(e);if(n)for(var o=n.families,i=0,a=o.length;i<a;++i){var l=o[i],c=n.style+"\n"+n.weight+"\n"+l;void 0===z_.get(c)&&(z_.set(c,r,!0),s(n.style,n.weight,l)||(z_.set(c,0,!0),void 0===t&&(t=setInterval(u,32))))}}}(),X_=function(t){var e=Z_[t];if(void 0==e){if(Am){var r=I_(t),n=K_(t,"Žg");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else U_||((U_=document.createElement("div")).innerHTML="M",U_.style.minHeight="0",U_.style.maxHeight="none",U_.style.height="auto",U_.style.padding="0",U_.style.border="none",U_.style.position="absolute",U_.style.display="block",U_.style.left="-99999px"),U_.style.font=t,document.body.appendChild(U_),e=U_.offsetHeight,document.body.removeChild(U_);Z_[t]=e}return e};function K_(t,e){return V_||(V_=M_(1,1)),t!=H_&&(V_.font=t,H_=V_.font),V_.measureText(e)}function Q_(t,e){return K_(t,e).width}function q_(t,e,r){if(e in r)return r[e];var n=Q_(t,e);return r[e]=n,n}function J_(t,e,r,n,o,i,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c[0],c[1]),function(t,e){for(var r=t.contextInstructions,n=0,o=r.length;n<o;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(u,l),t.scale(c[0],c[1]),t.drawImage(n,o,i,a,s,0,0,a,s)):t.drawImage(n,o,i,a,s,u,l,a*c[0],s*c[1]),t.restore()}var $_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tg=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=Kb(z_,Gb.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=j_+" ol-layers";var o=e.getViewport();return o.insertBefore(r.element_,o.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return $_(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new S_(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){qb(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(c_,t);var e=t.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),r=t.viewState;this.children_.length=0;for(var n=[],o=null,i=0,a=e.length;i<a;++i){var s=e[i];if(t.layerIndex=i,d_(s,r)&&(s.sourceState==h_.READY||s.sourceState==h_.UNDEFINED)){var u=s.layer,l=u.render(t,o);l&&(l!==o&&(this.children_.push(l),o=l),"getDeclutter"in u&&n.push(u))}}for(i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);!function(t,e){for(var r=t.childNodes,n=0;;++n){var o=r[n],i=e[n];if(!o&&!i)break;o!==i&&(o?i?t.insertBefore(i,o):(t.removeChild(o),--n):t.appendChild(i))}}(this.element_,this.children_),this.dispatchRenderEvent(f_,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o){for(var i=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&d_(u,i)&&o(l)){var c=l.getRenderer().getDataAtPixel(t,e,r);if(c){var f=n(l,c);if(f)return f}}}},e}(P_),eg={ADD:"add",REMOVE:"remove"},rg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ng="length",og=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.element=r,o.index=n,o}return rg(e,t),e}(Wb),ig=function(t){function e(e,r){var n=t.call(this)||this;n.on,n.once,n.un;var o=r||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var i=0,a=n.array_.length;i<a;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return rg(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(ng)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new og(eg.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new og(eg.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new og(eg.REMOVE,n,t)),this.dispatchEvent(new og(eg.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(ng,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Mm(58)},e}(n_),ag=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sg={LAYERS:"layers"},ug=function(t){function e(e){var r=this,n=e||{},o=zb({},n);delete o.layers;var i=n.layers;return(r=t.call(this,o)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(sg.LAYERS,r.handleLayersChanged_),i?Array.isArray(i)?i=new ig(i.slice(),{unique:!0}):Dm("function"==typeof i.getArray,43):i=new ig(void 0,{unique:!0}),r.setLayers(i),r}return ag(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(qb),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Kb(t,eg.ADD,this.handleLayersAdd_,this),Kb(t,eg.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(qb);Hb(this.listenerKeys_);for(var r=t.getArray(),n=0,o=r.length;n<o;n++){var i=r[n];this.listenerKeys_[Om(i)]=[Kb(i,Gb.PROPERTYCHANGE,this.handleLayerChange_,this),Kb(i,Xb.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Om(e)]=[Kb(e,Gb.PROPERTYCHANGE,this.handleLayerChange_,this),Kb(e,Xb.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=Om(t.element);this.listenerKeys_[e].forEach(qb),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(sg.LAYERS)},e.prototype.setLayers=function(t){this.set(sg.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});var n=this.getLayerState(),o=n.zIndex;t||void 0!==n.zIndex||(o=0);for(var i=r,a=e.length;i<a;i++){var s=e[i];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=pb(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=o)}return e},e.prototype.getSourceState=function(){return h_.READY},e}(s_),lg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cg=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return lg(e,t),e}(Wb),fg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pg=function(t){function e(e,r,n,o,i){var a=t.call(this,e,r,i)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==o&&o,a}return fg(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(cg),hg={SINGLECLICK:"singleclick",CLICK:Xb.CLICK,DBLCLICK:Xb.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yg={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},dg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vg=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=void 0===r?1:r,n.down_=null;var o=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=o,n.pointerdownListenerKey_=Kb(o,yg.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=Kb(o,yg.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Xb.TOUCHMOVE,n.boundHandleTouchMove_,!!km&&{passive:!1}),n}return dg(e,t),e.prototype.emulateClick_=function(t){var e=new pg(hg.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new pg(hg.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new pg(hg.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==hg.POINTERUP||e.type==hg.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==hg.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new pg(hg.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(qb),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new pg(hg.POINTERDOWN,this.map_,t);for(var r in this.dispatchEvent(e),this.down_={},t){var n=t[r];this.down_[r]="function"==typeof n?_m:n}if(0===this.dragListenerKeys_.length){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Kb(o,hg.POINTERMOVE,this.handlePointerMove_,this),Kb(o,hg.POINTERUP,this.handlePointerUp_,this),Kb(this.element_,hg.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(Kb(this.element_.getRootNode(),hg.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new pg(hg.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new pg(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(qb(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Xb.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(qb(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(qb),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Yb),mg="postrender",bg="movestart",_g="moveend",gg={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},wg=1/0,Og=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Hb(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){Dm(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=wg&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,o=e[t],i=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=o,r[t]=i,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,o=r[e],i=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>i))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=o,n[e]=i},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,o=this.elements_,i=this.priorities_,a=0,s=o.length;for(e=0;e<s;++e)(r=n(t=o[e]))==wg?delete this.queuedElements_[this.keyFunction_(t)]:(i[a]=r,o[a++]=t);o.length=a,i.length=a,this.heapify_()},t}(),Pg={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Cg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sg=function(t){function e(e,r){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return Cg(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);r&&e[0].addEventListener(Xb.CHANGE,this.boundHandleTileChange_);return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(r===Pg.LOADED||r===Pg.ERROR||r===Pg.EMPTY){e.removeEventListener(Xb.CHANGE,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==Pg.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,r.load())},e}(Og);var Eg={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Tg={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},jg={};jg[Tg.DEGREES]=2*Math.PI*6370997/360,jg[Tg.FEET]=.3048,jg[Tg.METERS]=1,jg[Tg.USFEET]=1200/3937;var xg=Tg,Ag=0,Rg=1,kg="center",Ig="resolution",Mg="rotation",Dg=42,Lg=256,Ng=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||jg[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),Fg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bg=6378137,Wg=Math.PI*Bg,Gg=[-Wg,-Wg,Wg,Wg],zg=[-180,-85,180,85],Hg=Bg*Math.log(Math.tan(Math.PI/2)),Ug=function(t){function e(e){return t.call(this,{code:e,units:xg.METERS,extent:Gg,global:!0,worldExtent:zg,getPointResolution:function(t,e){return t/gb(e[1]/Bg)}})||this}return Fg(e,t),e}(Ng),Vg=[new Ug("EPSG:3857"),new Ug("EPSG:102100"),new Ug("EPSG:102113"),new Ug("EPSG:900913"),new Ug("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Zg(t,e,r){var n=t.length,o=r>1?r:2,i=e;void 0===i&&(i=o>2?t.slice():new Array(n));for(var a=0;a<n;a+=o){i[a]=Wg*t[a]/180;var s=Bg*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>Hg?s=Hg:s<-Hg&&(s=-Hg),i[a+1]=s}return i}function Yg(t,e,r){var n=t.length,o=r>1?r:2,i=e;void 0===i&&(i=o>2?t.slice():new Array(n));for(var a=0;a<n;a+=o)i[a]=180*t[a]/Wg,i[a+1]=360*Math.atan(Math.exp(t[a+1]/Bg))/Math.PI-90;return i}var Xg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kg=[-180,-90,180,90],Qg=6378137*Math.PI/180,qg=function(t){function e(e,r){return t.call(this,{code:e,units:xg.DEGREES,extent:Kg,axisOrientation:r,global:!0,metersPerUnit:Qg,worldExtent:Kg})||this}return Xg(e,t),e}(Ng),Jg=[new qg("CRS:84"),new qg("EPSG:4326","neu"),new qg("urn:ogc:def:crs:OGC:1.3:CRS84"),new qg("urn:ogc:def:crs:OGC:2:84"),new qg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],$g={};var tw={};function ew(t,e,r){var n=t.getCode(),o=e.getCode();n in tw||(tw[n]={}),tw[n][o]=r}var rw=6371008.8;function nw(t,e,r){var n=r||rw,o=Cb(t[1]),i=Cb(e[1]),a=(i-o)/2,s=Cb(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function ow(t,e,r){var n;if(void 0!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];n=e}else n=t.slice();return n}function iw(t,e,r){if(void 0!==e&&t!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];t=e}return t}function aw(t){!function(t,e){$g[t]=e}(t.getCode(),t),ew(t,t,ow)}function sw(t){return"string"==typeof t?$g[e=t]||$g[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function uw(t,e,r,n){var o,i=(t=sw(t)).getPointResolutionFunc();if(i){if(o=i(e,r),n&&n!==t.getUnits())(s=t.getMetersPerUnit())&&(o=o*s/jg[n])}else{var a=t.getUnits();if(a==xg.DEGREES&&!n||n==xg.DEGREES)o=e;else{var s,u=yw(t,sw("EPSG:4326"));if(u===iw&&a!==xg.DEGREES)o=e*t.getMetersPerUnit();else{var l=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];o=(nw((l=u(l,l,2)).slice(0,2),l.slice(2,4))+nw(l.slice(4,6),l.slice(6,8)))/2}void 0!==(s=n?jg[n]:t.getMetersPerUnit())&&(o/=s)}}return o}function lw(t){!function(t){t.forEach(aw)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&ew(e,t,ow)})})}function cw(t,e){return t?"string"==typeof t?sw(t):t:sw(e)}function fw(t){return function(e,r,n){for(var o=e.length,i=void 0!==n?n:2,a=void 0!==r?r:new Array(o),s=0;s<o;s+=i){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=i-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function pw(t,e,r,n){var o=sw(t),i=sw(e);ew(o,i,fw(r)),ew(i,o,fw(n))}function hw(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?r:yw(t,e)===ow&&r}function yw(t,e){var r=function(t,e){var r;return t in tw&&e in tw[t]&&(r=tw[t][e]),r}(t.getCode(),e.getCode());return r||(r=iw),r}function dw(t,e){return yw(sw(t),sw(e))}function vw(t,e,r){return dw(e,r)(t,void 0,t.length)}function mw(t,e,r,n){return bb(t,dw(e,r),void 0,n)}var bw,_w,gw,ww=null;function Ow(){return ww}function Pw(t,e){return ww?vw(t,e,ww):t}function Cw(t,e){return ww?vw(t,ww,e):t}function Sw(t,e){return ww?mw(t,e,ww):t}function Ew(t,e){return ww?mw(t,ww,e):t}function Tw(t,e,r){return function(n,o,i,a,s){if(n){var u=e?0:i[0]*o,l=e?0:i[1]*o,c=s?s[0]:0,f=s?s[1]:0,p=t[0]+u/2+c,h=t[2]-u/2+c,y=t[1]+l/2+f,d=t[3]-l/2+f;p>h&&(h=p=(h+p)/2),y>d&&(d=y=(d+y)/2);var v=_b(n[0],p,h),m=_b(n[1],y,d),b=30*o;return a&&r&&(v+=-b*Math.log(1+Math.max(0,p-n[0])/b)+b*Math.log(1+Math.max(0,n[0]-h)/b),m+=-b*Math.log(1+Math.max(0,y-n[1])/b)+b*Math.log(1+Math.max(0,n[1]-d)/b)),[v,m]}}}function jw(t){return t}function xw(t,e,r,n){var o=db(e)/r[0],i=fb(e)/r[1];return n?Math.min(t,Math.max(o,i)):Math.min(t,Math.min(o,i))}function Aw(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),_b(n,r/2,2*e)}function Rw(t,e,r,n,o){return function(i,a,s,u){if(void 0!==i){var l=n?xw(t,n,s,o):t;return(void 0===r||r)&&u?Aw(i,l,e):_b(i,e,l)}}}function kw(t){return void 0!==t?0:void 0}function Iw(t){return void 0!==t?t:void 0}function Mw(t){return Math.pow(t,3)}function Dw(t){return 1-Mw(1-t)}function Lw(t){return 3*t*t-2*t*t*t}function Nw(t){return t}lw(Vg),lw(Jg),bw=Vg,_w=Zg,gw=Yg,Jg.forEach(function(t){bw.forEach(function(e){ew(t,e,_w),ew(e,t,gw)})});var Fw={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function Bw(t,e,r,n,o,i){for(var a=i||[],s=0,u=e;u<r;u+=n){var l=t[u],c=t[u+1];a[s++]=o[0]*l+o[2]*c+o[4],a[s++]=o[1]*l+o[3]*c+o[5]}return i&&a.length!=s&&(a.length=s),a}function Ww(t,e,r,n,o,i,a){for(var s=a||[],u=Math.cos(o),l=Math.sin(o),c=i[0],f=i[1],p=0,h=e;h<r;h+=n){var y=t[h]-c,d=t[h+1]-f;s[p++]=c+y*u-d*l,s[p++]=f+y*l+d*u;for(var v=h+2;v<h+n;++v)s[p++]=t[v]}return a&&s.length!=p&&(s.length=p),s}var Gw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zw=[1,0,0,1,0,0],Hw=function(t){function e(){var e,r,n,o,i,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)},i=!1,function(){var t=Array.prototype.slice.call(arguments);return i&&this===o&&vm(t,n)||(i=!0,o=this,n=t,r=e.apply(this,arguments)),r}),a}return Gw(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return gm()},e.prototype.closestPointXY=function(t,e,r,n){return gm()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return gm()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&tb(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){gm()},e.prototype.scale=function(t,e,r){gm()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return gm()},e.prototype.getType=function(){return gm()},e.prototype.applyTransform=function(t){gm()},e.prototype.intersectsExtent=function(t){return gm()},e.prototype.translate=function(t,e){gm()},e.prototype.transform=function(t,e){var r=sw(t),n=r.getUnits()==xg.TILE_PIXELS?function(t,n,o){var i=r.getExtent(),a=r.getWorldExtent(),s=fb(a)/fb(i);return Bm(zw,a[0],a[3],s,-s,0,0,0),Bw(t,0,t.length,o,zw,n),dw(r,e)(t,n,o)}:dw(r,e);return this.applyTransform(n),this},e}(n_),Uw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Vw(t){var e;return t==Fw.XY?e=2:t==Fw.XYZ||t==Fw.XYM?e=3:t==Fw.XYZM&&(e=4),e}var Zw=function(t){function e(){var e=t.call(this)||this;return e.layout=Fw.XY,e.stride=2,e.flatCoordinates=null,e}return Uw(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,r=0,n=this.flatCoordinates.length,o=this.stride,nb(tb(t),e,r,n,o);var e,r,n,o},e.prototype.getCoordinates=function(){return gm()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Vw(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){gm()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=Vw(t);else{for(var o=0;o<r;++o){if(0===e.length)return this.layout=Fw.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Fw.XY:3==t?e=Fw.XYZ:4==t&&(e=Fw.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Ww(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var o=r;o||(o=lb(this.getExtent()));var i=this.getFlatCoordinates();if(i){var a=this.getStride();!function(t,e,r,n,o,i,a,s){for(var u=s||[],l=a[0],c=a[1],f=0,p=e;p<r;p+=n){var h=t[p]-l,y=t[p+1]-c;u[f++]=l+o*h,u[f++]=c+i*y;for(var d=p+2;d<p+n;++d)u[f++]=t[d]}s&&u.length!=f&&(u.length=f)}(i,0,i.length,a,t,n,o,i),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();!function(t,e,r,n,o,i,a){for(var s=a||[],u=0,l=e;l<r;l+=n){s[u++]=t[l]+o,s[u++]=t[l+1]+i;for(var c=l+2;c<l+n;++c)s[u++]=t[c]}a&&s.length!=u&&(s.length=u)}(r,0,r.length,n,t,e,r),this.changed()}},e}(Hw);function Yw(t,e,r,n,o,i,a){var s,u=t[e],l=t[e+1],c=t[r]-u,f=t[r+1]-l;if(0===c&&0===f)s=e;else{var p=((o-u)*c+(i-l)*f)/(c*c+f*f);if(p>1)s=r;else{if(p>0){for(var h=0;h<n;++h)a[h]=Eb(t[e+h],t[r+h],p);return void(a.length=n)}s=e}}for(h=0;h<n;++h)a[h]=t[s+h];a.length=n}function Xw(t,e,r,n,o){var i=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=Pb(i,a,s,u);l>o&&(o=l),i=s,a=u}return o}function Kw(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i];o=Xw(t,e,s,n,o),e=s}return o}function Qw(t,e,r,n,o,i,a,s,u,l,c){if(e==r)return l;var f,p;if(0===o){if((p=Pb(a,s,t[e],t[e+1]))<l){for(f=0;f<n;++f)u[f]=t[e+f];return u.length=n,p}return l}for(var h=c||[NaN,NaN],y=e+n;y<r;)if(Yw(t,y-n,y,n,a,s,h),(p=Pb(a,s,h[0],h[1]))<l){for(l=p,f=0;f<n;++f)u[f]=h[f];u.length=n,y+=n}else y+=n*Math.max((Math.sqrt(p)-Math.sqrt(l))/o|0,1);if(i&&(Yw(t,r-n,e,n,a,s,h),(p=Pb(a,s,h[0],h[1]))<l)){for(l=p,f=0;f<n;++f)u[f]=h[f];u.length=n}return l}function qw(t,e,r,n,o,i,a,s,u,l,c){for(var f=c||[NaN,NaN],p=0,h=r.length;p<h;++p){var y=r[p];l=Qw(t,e,y,n,o,i,a,s,u,l,f),e=y}return l}function Jw(t,e,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],s=0;s<n;++s)t[e++]=a[s];return e}function $w(t,e,r,n,o){for(var i=o||[],a=0,s=0,u=r.length;s<u;++s){var l=Jw(t,e,r[s],n);i[a++]=l,e=l}return i.length=a,i}function tO(t,e,r,n,o,i,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)i[a++]=t[e],i[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var f=l.pop(),p=l.pop(),h=0,y=t[p],d=t[p+1],v=t[f],m=t[f+1],b=p+n;b<f;b+=n){var _=Ob(t[b],t[b+1],y,d,v,m);_>h&&(c=b,h=_)}h>o&&(u[(c-e)/n]=1,p+n<c&&l.push(p,c),c+n<f&&l.push(c,f))}for(b=0;b<s;++b)u[b]&&(i[a++]=t[e+b*n],i[a++]=t[e+b*n+1]);return a}function eO(t,e){return e*Math.round(t/e)}function rO(t,e,r,n,o,i,a){if(e==r)return a;var s,u,l=eO(t[e],o),c=eO(t[e+1],o);e+=n,i[a++]=l,i[a++]=c;do{if(s=eO(t[e],o),u=eO(t[e+1],o),(e+=n)==r)return i[a++]=s,i[a++]=u,a}while(s==l&&u==c);for(;e<r;){var f=eO(t[e],o),p=eO(t[e+1],o);if(e+=n,f!=s||p!=u){var h=s-l,y=u-c,d=f-l,v=p-c;h*v==y*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(y<0&&v<y||y==v||y>0&&v>y)?(s=f,u=p):(i[a++]=s,i[a++]=u,l=s,c=u,s=f,u=p)}}return i[a++]=s,i[a++]=u,a}function nO(t,e,r,n,o,i,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=rO(t,e,c,n,o,i,a),s.push(a),e=c}return a}function oO(t,e,r,n,o){for(var i=void 0!==o?o:[],a=0,s=e;s<r;s+=n)i[a++]=t.slice(s,s+n);return i.length=a,i}function iO(t,e,r,n,o){for(var i=void 0!==o?o:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];i[a++]=oO(t,e,l,n,i[a]),e=l}return i.length=a,i}function aO(t,e,r,n,o){for(var i=void 0!==o?o:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];i[a++]=iO(t,e,l,n,i[a]),e=l[l.length-1]}return i.length=a,i}function sO(t,e,r,n){for(var o=0,i=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function uO(t,e,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var s=r[i];o+=sO(t,e,s,n),e=s}return o}var lO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cO=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return lO(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Ym(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return sO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return oO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=tO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Fw.XY)},e.prototype.getType=function(){return Eg.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jw(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Zw),fO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pO=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return fO(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){var o=this.flatCoordinates,i=Pb(t,e,o[0],o[1]);if(i<n){for(var a=this.stride,s=0;s<a;++s)r[s]=o[s];return r.length=a,i}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,r=t,n=e[0],o=e[1],$m(n,o,n,o,r);var e,r,n,o},e.prototype.getType=function(){return Eg.POINT},e.prototype.intersectsExtent=function(t){return Qm(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,r,n){for(var o=0,i=r.length;o<i;++o)t[e++]=r[o];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Zw);function hO(t,e,r,n,o){return!ib(o,function(o){return!yO(t,e,r,n,o[0],o[1])})}function yO(t,e,r,n,o,i){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=i?c>i&&(l-s)*(i-u)-(o-s)*(c-u)>0&&a++:c<=i&&(l-s)*(i-u)-(o-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function dO(t,e,r,n,o,i){if(0===r.length)return!1;if(!yO(t,e,r[0],n,o,i))return!1;for(var a=1,s=r.length;a<s;++a)if(yO(t,r[a-1],r[a],n,o,i))return!1;return!0}function vO(t,e,r,n,o,i,a){for(var s,u,l,c,f,p,h,y=o[i+1],d=[],v=0,m=r.length;v<m;++v){var b=r[v];for(c=t[b-n],p=t[b-n+1],s=e;s<b;s+=n)f=t[s],h=t[s+1],(y<=p&&h<=y||p<=y&&y<=h)&&(l=(y-p)/(h-p)*(f-c)+c,d.push(l)),c=f,p=h}var _=NaN,g=-1/0;for(d.sort(pm),c=d[0],s=1,u=d.length;s<u;++s){f=d[s];var w=Math.abs(f-c);w>g&&dO(t,e,r,n,l=(c+f)/2,y)&&(_=l,g=w),c=f}return isNaN(_)&&(_=o[i]),a?(a.push(_,y,g),a):[_,y,g]}function mO(t,e,r,n,o){for(var i,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],i=o(a,s))return i;a[0]=s[0],a[1]=s[1]}return!1}function bO(t,e,r,n,o){var i=nb([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!vb(o,i)&&(!!Km(o,i)||(i[0]>=o[0]&&i[2]<=o[2]||(i[1]>=o[1]&&i[3]<=o[3]||mO(t,e,r,n,function(t,e){return function(t,e,r){var n=!1,o=qm(t,e),i=qm(t,r);if(o===Hm.INTERSECTING||i===Hm.INTERSECTING)n=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],f=e[1],p=r[0],h=r[1],y=(h-f)/(p-c),d=void 0,v=void 0;i&Hm.ABOVE&&!(o&Hm.ABOVE)&&(n=(d=p-(h-l)/y)>=a&&d<=u),n||!(i&Hm.RIGHT)||o&Hm.RIGHT||(n=(v=h-(p-u)*y)>=s&&v<=l),n||!(i&Hm.BELOW)||o&Hm.BELOW||(n=(d=p-(h-s)/y)>=a&&d<=u),n||!(i&Hm.LEFT)||o&Hm.LEFT||(n=(v=h-(p-a)*y)>=s&&v<=l)}return n}(o,t,e)}))))}function _O(t,e,r,n,o){if(!function(t,e,r,n,o){return!!(bO(t,e,r,n,o)||yO(t,e,r,n,o[0],o[1])||yO(t,e,r,n,o[0],o[3])||yO(t,e,r,n,o[2],o[1])||yO(t,e,r,n,o[2],o[3]))}(t,e,r[0],n,o))return!1;if(1===r.length)return!0;for(var i=1,a=r.length;i<a;++i)if(hO(t,r[i-1],r[i],n,o)&&!bO(t,r[i-1],r[i],n,o))return!1;return!0}function gO(t,e,r,n){for(;e<r-n;){for(var o=0;o<n;++o){var i=t[e+o];t[e+o]=t[r-n+o],t[r-n+o]=i}e+=n,r-=n}}function wO(t,e,r,n){for(var o=0,i=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];o+=(s-i)*(u+a),i=s,a=u}return 0===o?void 0:o>0}function OO(t,e,r,n,o){for(var i=void 0!==o&&o,a=0,s=r.length;a<s;++a){var u=r[a],l=wO(t,e,u,n);if(0===a){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=u}return!0}function PO(t,e,r,n,o){for(var i=void 0!==o&&o,a=0,s=r.length;a<s;++a){var u=r[a],l=wO(t,e,u,n);(0===a?i&&l||!i&&!l:i&&!l||!i&&l)&&gO(t,e,u,n),e=u}return e}var CO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SO=function(t){function e(e,r,n){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&n?(o.setFlatCoordinates(r,e),o.ends_=n):o.setCoordinates(e,r),o}return CO(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?dm(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<Ym(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qw(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return dO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return uO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?PO(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,iO(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=lb(this.getExtent());this.flatInteriorPoint_=vO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new pO(this.getFlatInteriorPoint(),Fw.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new cO(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],o=0,i=0,a=r.length;i<a;++i){var s=r[i],u=new cO(e.slice(o,s),t);n.push(u),o=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;OO(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=PO(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=nO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,Fw.XY,n)},e.prototype.getType=function(){return Eg.POLYGON},e.prototype.intersectsExtent=function(t){return _O(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=$w(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(Zw),EO=SO;function TO(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=[e,r,e,o,n,o,n,r,e,r];return new SO(i,Fw.XY,[i.length])}var jO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xO=0;function AO(t,e){setTimeout(function(){t(e)},0)}function RO(t){return!(t.sourceCenter&&t.targetCenter&&!m_(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function kO(t,e,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),s=t[0]*i-t[1]*a,u=t[1]*i+t[0]*a;return[(s+=(e[0]/2-r[0])*n)*i-(u+=(r[1]-e[1]/2)*n)*(a=-a),u*i+s*a]}var IO=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=zb({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=cw(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.cancelAnchor_=void 0,n.center&&(n.center=Cw(n.center,r.projection_)),n.extent&&(n.extent=Ew(n.extent,r.projection_)),r.applyOptions_(n),r}return jO(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,r,n,o=void 0!==t.minZoom?t.minZoom:xO,i=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=cw(t.projection,"EPSG:3857"),f=c.getExtent(),p=t.constrainOnlyCenter,h=t.extent;s||h||!c.isGlobal()||(p=!1,h=f);if(void 0!==t.resolutions){var y=t.resolutions;r=y[o],n=void 0!==y[i]?y[i]:y[y.length-1],e=t.constrainResolution?function(t,e,r,n){return function(o,i,a,s){if(void 0!==o){var u=t[0],l=t[t.length-1],c=r?xw(u,r,a,n):u;if(s)return void 0===e||e?Aw(o,c,l):_b(o,l,c);var f=Math.min(c,o),p=Math.floor(hm(t,f,i));return t[p]>c&&p<t.length-1?t[p+1]:t[p]}}}(y,u,!p&&h,l):Rw(r,n,u,!p&&h,l)}else{var d=f?Math.max(db(f),fb(f)):360*jg[xg.DEGREES]/c.getMetersPerUnit(),v=d/Lg/Math.pow(2,xO),m=v/Math.pow(2,28-xO);void 0!==(r=t.maxResolution)?o=0:r=v/Math.pow(a,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,i):v/Math.pow(a,i):m),i=o+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,i-o),e=t.constrainResolution?function(t,e,r,n,o,i){return function(a,s,u,l){if(void 0!==a){var c=o?xw(e,o,u,i):e,f=void 0!==r?r:0;if(l)return void 0===n||n?Aw(a,c,f):_b(a,f,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),h=-s*(.5-1e-9)+.5,y=Math.min(c,a),d=Math.floor(Math.log(e/y)/Math.log(t)+h),v=Math.max(p,d);return _b(e/Math.pow(t,v),f,c)}}}(a,r,n,u,!p&&h,l):Rw(r,n,u,!p&&h,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:o,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Tw(t.extent,t.constrainOnlyCenter,e)}var r=cw(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Tw(n,!1,!1)}return jw}(t),n=e.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=o||Cb(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?Iw:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Iw}return kw;var r,n;var o,i}(t);this.constraints_={center:r,resolution:n,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var n=t||[0,0,0,0];e=e||[0,0,0,0];var o=this.getResolution(),i=o/2*(n[3]-e[3]+e[1]-n[1]),a=o/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+i,r[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=zb({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),zb({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=zb({},n)).center=Cw(n.center,this.getProjection())),n.anchor&&((n=zb({},n)).anchor=Cw(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&AO(e,!0))}for(var o=Date.now(),i=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<r;++l){var c=arguments[l],f={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Lw,callback:e};if(c.center&&(f.sourceCenter=i,f.targetCenter=c.center.slice(),i=f.targetCenter),void 0!==c.zoom?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(c.zoom),a=f.targetResolution):c.resolution&&(f.sourceResolution=a,f.targetResolution=c.resolution,a=f.targetResolution),void 0!==c.rotation){f.sourceRotation=s;var p=Sb(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=s+p,s=f.targetRotation}RO(f)?f.complete=!0:o+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(Ag,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Ag]>0},e.prototype.getInteracting=function(){return this.hints_[Rg]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(Ag,-this.hints_[Ag]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&AO(n[0].callback,!1),!t)for(var o=0,i=n.length;o<i;++o){var a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],o=!0,i=0,a=n.length;i<a;++i){var s=n[i];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):o=!1;var c=s.easing(l);if(s.sourceCenter){var f=s.sourceCenter[0],p=s.sourceCenter[1],h=f+c*(s.targetCenter[0]-f),y=p+c*(s.targetCenter[1]-p);this.targetCenter_=[h,y]}if(s.sourceResolution&&s.targetResolution){var d=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var v=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(d,0,v,!0);this.targetCenter_=this.calculateCenterZoom(m,s.anchor)}this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var b=1===c?Sb(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(b,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=b}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(o){this.animations_[r]=null,this.setHint(Ag,-1);var g=n[0].callback;g&&AO(g,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n,o,i=this.getCenterInternal();return void 0!==i&&(b_(r=[i[0]-e[0],i[1]-e[1]],t-this.getRotation()),o=e,(n=r)[0]+=+o[0],n[1]+=+o[1]),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),o=this.getResolution();void 0!==n&&void 0!==o&&(r=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]);return r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Pw(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(kg)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return Sw(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();Dm(r,1);var n=this.getResolution();Dm(void 0!==n,2);var o=this.getRotation();return Dm(void 0!==o,3),cb(r,n,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Ig)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Ew(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSizeMinusPadding_(),n=db(t)/r[0],o=fb(t)/r[1];return Math.max(n,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(Mg)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/o}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),o=this.padding_;if(o){var i=this.getViewportSizeMinusPadding_();n=kO(n,this.getViewportSize_(),[i[0]/2+o[3],i[1]/2+o[0]],e,r)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var o=hm(this.resolutions_,t,1);n=o,e=this.resolutions_[o],r=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=_b(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,_b(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r;if(Dm(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Dm(!mb(t),25),r=TO(n=Ew(t,this.getProjection()));else if(t.getType()===Eg.CIRCLE){var n;(r=TO(n=Ew(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),lb(n))}else{var o=Ow();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),o=t.getFlatCoordinates(),i=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0,f=o.length;c<f;c+=i){var p=o[c]*r-o[c+1]*n,h=o[c]*n+o[c+1]*r;a=Math.min(a,p),s=Math.min(s,h),u=Math.max(u,p),l=Math.max(l,h)}return[a,s,u,l]},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSizeMinusPadding_());var o,i=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;o=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var s=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,a?0:1);var l=this.getRotation(),c=Math.sin(l),f=Math.cos(l),p=lb(s);p[0]+=(i[1]-i[3])/2*u,p[1]+=(i[0]-i[2])/2*u;var h=p[0]*f-p[1]*c,y=p[1]*f+p[0]*c,d=this.getConstrainedCenter([h,y],u),v=r.callback?r.callback:_m;void 0!==r.duration?this.animateInternal({resolution:u,center:d,duration:r.duration,easing:r.easing},v):(this.targetResolution_=u,this.targetCenter_=d,this.applyTargetState_(!1,!0),AO(v,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(Cw(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){this.setCenterInternal(kO(t,e,r,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,r,n){var o,i=this.padding_;if(i&&t){var a=this.getViewportSizeMinusPadding_(-r),s=kO(t,n,[a[0]/2+i[3],a[1]/2+i[0]],e,r);o=[t[0]-s[0],t[1]-s[1]]}return o},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Pw(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&Cw(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Cw(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Cw(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(n),i=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,i,o,r,this.calculateCenterShift(this.targetCenter_,i,n,o));this.get(Mg)!==n&&this.set(Mg,n),this.get(Ig)!==i&&this.set(Ig,i),this.get(kg)&&m_(this.get(kg),a)||this.set(kg,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,o=e||0,i=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,o,a),u=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,i,a));if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=i,this.targetCenter_=u,void this.applyTargetState_();var l=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===i&&this.getCenterInternal()&&m_(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:u,resolution:s,duration:n,easing:Dw,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Rg,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&Cw(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(Rg,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(n_);function MO(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function DO(t){return t[0]>0&&t[1]>0}function LO(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function NO(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var FO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var BO=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,o,i={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ug({layers:t.layers});i[gg.LAYERGROUP]=a,i[gg.TARGET]=t.target,i[gg.VIEW]=void 0!==t.view?t.view:new IO,void 0!==t.controls&&(Array.isArray(t.controls)?r=new ig(t.controls.slice()):(Dm("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new ig(t.interactions.slice()):(Dm("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new ig(t.overlays.slice()):(Dm("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new ig;return{controls:r,interactions:n,keyboardEventTarget:e,overlays:o,values:i}}(e);return r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:xm,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=e.moveTolerance,r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null,r.controls=n.controls||new ig,r.interactions=n.interactions||new ig,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new Sg(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addChangeListener(gg.LAYERGROUP,r.handleLayerGroupChanged_),r.addChangeListener(gg.VIEW,r.handleViewChanged_),r.addChangeListener(gg.SIZE,r.handleSizeChanged_),r.addChangeListener(gg.TARGET,r.handleTargetChanged_),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.controls.addEventListener(eg.ADD,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(eg.REMOVE,function(t){t.element.setMap(null)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.addEventListener(eg.ADD,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(eg.REMOVE,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(eg.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(eg.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r}return FO(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,i=void 0!==r.layerFilter?r.layerFilter:mm,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,e,null,i,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,function(t){r.push(t)},e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},o=void 0!==n.hitTolerance?n.hitTolerance:0,i=n.layerFilter||mm;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,i)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:mm,o=void 0!==e.hitTolerance?e.hitTolerance:0,i=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,i,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(gg.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Pw(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Fm(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(gg.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Cw(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Fm(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(gg.SIZE)},e.prototype.getView=function(){return this.get(gg.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,r,n){return function(t,e,r,n,o){if(!(t&&r in t.wantedTiles))return wg;if(!t.wantedTiles[r][e.getKey()])return wg;var i=t.viewState.center,a=n[0]-i[0],s=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+s*s)/o}(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new pg(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,r=e.type;if(r===yg.POINTERDOWN||r===Xb.WHEEL||r===Xb.KEYDOWN){var n=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():n,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(o===n?n.documentElement:o).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var u=a[s];if(u.getMap()===this&&u.getActive()&&this.getTargetElement())if(!u.handleEvent(t)||t.propagationStopped)break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var o=t.viewHints;if(o[Ag]||o[Rg]){var i=Date.now()-t.time>8;r=i?0:8,n=i?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(p_)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(p_,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)qb(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(Xb.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Xb.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Xb.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,F_(this.viewport_)}if(t){for(var n in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new vg(this,this.moveTolerance_),hg)this.mapBrowserEventHandler_.addEventListener(hg[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Xb.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Xb.WHEEL,this.boundHandleBrowserEvent_,!!km&&{passive:!1});var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Kb(o,Xb.KEYDOWN,this.handleBrowserEvent,this),Kb(o,Xb.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Xb.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(qb(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(qb(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Kb(t,Gb.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Kb(t,Xb.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(qb),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Kb(t,Gb.PROPERTYCHANGE,this.render,this),Kb(t,Xb.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,r=this.getSize(),n=this.getView(),o=this.frameState_,i=null;if(void 0!==r&&DO(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:cb(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),o)(!this.previousExtent_||!mb(this.previousExtent_)&&!eb(i.extent,this.previousExtent_))&&(this.dispatchEvent(new cg(bg,this,o)),this.previousExtent_=tb(this.previousExtent_));this.previousExtent_&&!i.viewHints[Ag]&&!i.viewHints[Rg]&&!eb(i.extent,this.previousExtent_)&&(this.dispatchEvent(new cg(_g,this,i)),Zm(i.extent,this.previousExtent_))}this.dispatchEvent(new cg(mg,this,i)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){this.set(gg.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(gg.SIZE,t)},e.prototype.setTarget=function(t){this.set(gg.TARGET,t)},e.prototype.setView=function(t){this.set(gg.VIEW,t)},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var r=getComputedStyle(t),n=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(o)||DO(e=[n,o])||console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(n_),WO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GO=function(t){function e(e){var r=t.call(this)||this,n=e.element;return!n||e.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],e.render&&(r.render=e.render),e.target&&r.setTarget(e.target),r}return WO(e,t),e.prototype.disposeInternal=function(){F_(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&F_(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)qb(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==_m&&this.listenerKeys.push(Kb(t,mg,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(n_),zO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HO=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var o=void 0!==n.className?n.className:"ol-attribution",i=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.expandClassName?n.expandClassName:o+"-expand",s=void 0!==n.collapseLabel?n.collapseLabel:"»",u=void 0!==n.collapseClassName?n.collapseClassName:o+"-collpase";"string"==typeof s?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=s,r.collapseLabel_.className=u):r.collapseLabel_=s;var l=void 0!==n.label?n.label:"i";"string"==typeof l?(r.label_=document.createElement("span"),r.label_.textContent=l,r.label_.className=a):r.label_=l;var c=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=i,r.toggleButton_.appendChild(c),r.toggleButton_.addEventListener(Xb.CLICK,r.handleClick_.bind(r),!1);var f=o+" "+j_+" "+x_+(r.collapsed_&&r.collapsible_?" "+A_:"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;return p.className=f,p.appendChild(r.toggleButton_),p.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return zO(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=!0,o=t.layerStatesArray,i=0,a=o.length;i<a;++i){var s=o[i];if(d_(s,t.viewState)){var u=s.layer.getSource();if(u){var l=u.getAttributions();if(l){var c=l(t);if(c)if(n=n&&!1!==u.getAttributionsCollapsible(),Array.isArray(c))for(var f=0,p=c.length;f<p;++f)c[f]in e||(r.push(c[f]),e[c[f]]=!0);else c in e||(r.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(n),r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!vm(e,this.renderedAttributions_)){B_(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var i=document.createElement("li");i.innerHTML=e[n],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(A_),this.collapsed_?N_(this.collapseLabel_,this.label_):N_(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(GO),UO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VO=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var o=void 0!==n.className?n.className:"ol-rotate",i=void 0!==n.label?n.label:"⇧",a=void 0!==n.compassClassName?n.compassClassName:"ol-compass";r.label_=null,"string"==typeof i?(r.label_=document.createElement("span"),r.label_.className=a,r.label_.textContent=i):(r.label_=i,r.label_.classList.add(a));var s=n.tipLabel?n.tipLabel:"Reset rotation",u=document.createElement("button");u.className=o+"-reset",u.setAttribute("type","button"),u.title=s,u.appendChild(r.label_),u.addEventListener(Xb.CLICK,r.handleClick_.bind(r),!1);var l=o+" "+j_+" "+x_,c=r.element;return c.className=l,c.appendChild(u),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(E_),r}return UO(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Dw}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(E_);o||0!==r?o&&0!==r&&this.element.classList.remove(E_):this.element.classList.add(E_)}this.label_.style.transform=n}this.rotation_=r}},e}(GO),ZO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YO=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var o=void 0!==n.className?n.className:"ol-zoom",i=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInClassName?n.zoomInClassName:o+"-in",s=void 0!==n.zoomOutClassName?n.zoomOutClassName:o+"-out",u=void 0!==n.zoomInLabel?n.zoomInLabel:"+",l=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",c=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",f=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=a,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof u?document.createTextNode(u):u),p.addEventListener(Xb.CLICK,r.handleClick_.bind(r,i),!1);var h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=f,h.appendChild("string"==typeof l?document.createTextNode(l):l),h.addEventListener(Xb.CLICK,r.handleClick_.bind(r,-i),!1);var y=o+" "+j_+" "+x_,d=r.element;return d.className=y,d.appendChild(p),d.appendChild(h),r.duration_=void 0!==n.duration?n.duration:250,r}return ZO(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Dw})):e.setZoom(n)}}},e}(GO);function XO(t){var e=t||{},r=new ig;return(void 0===e.zoom||e.zoom)&&r.push(new YO(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new VO(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new HO(e.attributionOptions)),r}var KO="active",QO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function qO(t,e,r,n){var o=t.getZoom();if(void 0!==o){var i=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(i);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:Dw})}}var JO=function(t){function e(e){var r=t.call(this)||this;return r.on,r.once,r.un,e&&e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return QO(e,t),e.prototype.getActive=function(){return this.get(KO)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(KO,t)},e.prototype.setMap=function(t){this.map_=t},e}(n_),$O=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tP=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return $O(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==hg.DBLCLICK){var r=t.originalEvent,n=t.map,o=t.coordinate,i=r.shiftKey?-this.delta_:this.delta_;qO(n.getView(),i,o,this.duration_),r.preventDefault(),e=!0}return!e},e}(JO),eP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function rP(t){for(var e=t.length,r=0,n=0,o=0;o<e;o++)r+=t[o].clientX,n+=t[o].clientY;return[r/e,n/e]}var nP=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return eP(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==hg.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==hg.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==hg.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==hg.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===hg.POINTERDOWN||e===hg.POINTERDRAG||e===hg.POINTERUP}(t)){var e=t.originalEvent,r=e.pointerId.toString();t.type==hg.POINTERUP?delete this.trackedPointers_[r]:t.type==hg.POINTERDOWN?this.trackedPointers_[r]=e:r in this.trackedPointers_&&(this.trackedPointers_[r]=e),this.targetPointers=Ub(this.trackedPointers_)}},e}(JO);function oP(t){var e=arguments;return function(t){for(var r=!0,n=0,o=e.length;n<o&&(r=r&&e[n](t));++n);return r}}var iP=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},aP=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},sP=mm,uP=function(t){var e=t.originalEvent;return 0==e.button&&!(Tm&&jm&&e.ctrlKey)},lP=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},cP=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},fP=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},pP=function(t){var e=t.originalEvent;return Dm(void 0!==e,56),"mouse"==e.pointerType},hP=function(t){var e=t.originalEvent;return Dm(void 0!==e,56),e.isPrimary&&0===e.button},yP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dP=function(t){function e(e){var r=t.call(this,{stopDown:bm})||this,n=e||{};r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var o=n.condition?n.condition:oP(lP,hP);return r.condition_=n.onFocusOnly?oP(aP,o):o,r.noKinetic_=!1,r}return yP(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,r,n=this.targetPointers,o=rP(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=t.map.getView();e=i,r=a.getResolution(),e[0]*=r,e[1]*=r,b_(i,a.getRotation()),a.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),i=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(i),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:Dw})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(nP),vP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mP=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:bm})||this).condition_=n.condition?n.condition:iP,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return vP(e,t),e.prototype.handleDragEvent=function(t){if(pP(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==kw){var n=e.getSize(),o=t.pixel,i=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=i}}},e.prototype.handleUpEvent=function(t){return!pP(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!pP(t)&&(!(!uP(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(nP),bP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_P=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return bP(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new EO([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(fm),gP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wP="boxstart",OP="boxdrag",PP="boxend",CP="boxcancel",SP=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.coordinate=r,o.mapBrowserEvent=n,o}return gP(e,t),e}(Wb),EP=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un;var n=e||{};return r.box_=new _P(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(r.onBoxEnd=n.onBoxEnd),r.startPixel_=null,r.condition_=n.condition?n.condition:uP,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return gP(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],o=r[1]-e[1];return n*n+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new SP(OP,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new SP(e?PP:CP,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new SP(wP,t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(nP),TP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jP=function(t){function e(e){var r=this,n=e||{},o=n.condition?n.condition:cP;return(r=t.call(this,{condition:o,className:n.className||"ol-dragzoom",minArea:n.minArea})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return TP(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=e.rotatedExtentForGeometry(r),o=e.getResolutionForExtentInternal(n),i=e.getResolution()/o;(r=r.clone()).scale(i*i)}e.fitInternal(r,{duration:this.duration_,easing:Dw})},e}(EP),xP=37,AP=38,RP=39,kP=40,IP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MP=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.defaultCondition_=function(t){return lP(t)&&fP(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return IP(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Xb.KEYDOWN){var r=t.originalEvent,n=r.keyCode;if(this.condition_(t)&&(n==kP||n==xP||n==RP||n==AP)){var o=t.map.getView(),i=o.getResolution()*this.pixelDelta_,a=0,s=0;n==kP?s=-i:n==xP?a=-i:n==RP?a=i:s=i;var u=[a,s];b_(u,o.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Nw,center:t.getConstrainedCenter(o)})}}(o,u,this.duration_),r.preventDefault(),e=!0}}return!e},e}(JO),DP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LP=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.condition_=n.condition?n.condition:fP,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return DP(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Xb.KEYDOWN||t.type==Xb.KEYPRESS){var r=t.originalEvent,n=r.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var o=t.map,i=n=="+".charCodeAt(0)?this.delta_:-this.delta_;qO(o.getView(),i,void 0,this.duration_),r.preventDefault(),e=!0}}return!e},e}(JO),NP=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var o=this.points_[e]-this.points_[r],i=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(i,o),this.initialVelocity_=Math.sqrt(o*o+i*i)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),FP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BP="trackpad",WP="wheel",GP=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.constrainResolution_=void 0!==n.constrainResolution&&n.constrainResolution;var o=n.condition?n.condition:sP;return r.condition_=n.onFocusOnly?oP(aP,o):o,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return FP(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==Xb.WHEEL)return!0;var e,r=t.map,n=t.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Xb.WHEEL&&(e=n.deltaY,Em&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=xm),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?BP:WP);var i=r.getView();if(this.mode_===BP&&!i.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(i.getAnimating()&&i.cancelAnimations(),i.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),i.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-_b(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),qO(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(JO),zP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HP=function(t){function e(e){var r=this,n=e||{},o=n;return o.stopDown||(o.stopDown=bm),(r=t.call(this,o)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return zP(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var i=o-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=i}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==kw){var u=a.getViewport().getBoundingClientRect(),l=rP(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(nP),UP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VP=function(t){function e(e){var r=this,n=e||{},o=n;return o.stopDown||(o.stopDown=bm),(r=t.call(this,o)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return UP(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,i=r.clientY-n.clientY,a=Math.sqrt(o*o+i*i);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=rP(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(nP);function ZP(t){var e=t||{},r=new ig,n=new NP(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new mP),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new tP({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new dP({onFocusOnly:e.onFocusOnly,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new HP),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new VP({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new MP),r.push(new LP({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new GP({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new jP({duration:e.zoomDuration})),r}var YP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XP=function(t){function e(e){return(e=zb({},e)).controls||(e.controls=XO()),e.interactions||(e.interactions=ZP({onFocusOnly:!0})),t.call(this,e)||this}return YP(e,t),e.prototype.createRenderer=function(){return new tg(this)},e}(BO),KP="preload",QP="useInterimTilesOnError",qP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),JP=function(t){function e(e){var r=this,n=e||{},o=zb({},n);return delete o.preload,delete o.useInterimTilesOnError,(r=t.call(this,o)||this).on,r.once,r.un,r.setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return qP(e,t),e.prototype.getPreload=function(){return this.get(KP)},e.prototype.setPreload=function(t){this.set(KP,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(QP)},e.prototype.setUseInterimTilesOnError=function(t){this.set(QP,t)},e}(v_),$P={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},tC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eC=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r.declutterExecutorGroup=null,r}return tC(e,t),e.prototype.getFeatures=function(t){return gm()},e.prototype.prepareFrame=function(t){return gm()},e.prototype.renderFrame=function(t,e){return gm()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,o){var i=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,o,i)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o){},e.prototype.getDataAtPixel=function(t,e,r){return gm()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===$P.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=$P.LOADED&&e!=$P.ERROR&&t.addEventListener(Xb.CHANGE,this.boundHandleImageChange_),e==$P.IDLE&&(t.load(),e=t.getState()),e==$P.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==h_.READY&&t.changed()},e}(t_),rC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nC=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return rC(e,t),e.prototype.useContainer=function(t,e,r){var n,o,i=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===i&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(o=s.getContext("2d")));if(!o||0!==o.canvas.width&&o.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=o,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=i;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(o=M_()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=o}},e.prototype.clipUnrotated=function(t,e,r){var n=hb(r),o=yb(r),i=ub(r),a=sb(r);Fm(e.coordinateToPixelTransform,n),Fm(e.coordinateToPixelTransform,o),Fm(e.coordinateToPixelTransform,i),Fm(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Fm(s,n),Fm(s,o),Fm(s,i),Fm(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var o=new S_(t,this.inversePixelTransform,r,e);n.dispatchEvent(o)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(u_,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(l_,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,o,i,a){var s=o/2,u=i/2,l=n/e,c=-l,f=-t[0]+a,p=-t[1];return Bm(this.tempTransform,s,u,l,c,-r,f,p)},e.prototype.getDataAtPixel=function(t,e,r){var n,o=Fm(this.inversePixelTransform,t.slice()),i=this.context,a=this.getLayer().getExtent();if(a&&!Xm(a,Fm(e.pixelToCoordinateTransform,t.slice())))return null;try{var s=Math.round(o[0]),u=Math.round(o[1]),l=document.createElement("canvas"),c=l.getContext("2d");l.width=1,l.height=1,c.clearRect(0,0,1,1),c.drawImage(i.canvas,s,u,1,1,0,0,1,1),n=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(eC),oC=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function iC(t,e,r,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=r,o.maxY=n,o):new oC(t,e,r,n)}var aC=oC,sC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uC=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new aC(0,0,0,0),r}return sC(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==Pg.LOADED||r==Pg.EMPTY||r==Pg.ERROR&&!n},e.prototype.getTile=function(t,e,r,n){var o=n.pixelRatio,i=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,o,i);return s.getState()==Pg.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(Pg.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,i=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),f=c.getRevision(),p=c.getTileGridForProjection(o),h=p.getZForResolution(i,c.zDirection),y=p.getResolution(h),d=t.extent,v=r.extent&&Ew(r.extent,o);v&&(d=pb(d,Ew(r.extent,o)));var m=c.getTilePixelRatio(u),b=Math.round(t.size[0]*m),_=Math.round(t.size[1]*m);if(s){var g=Math.round(Math.sqrt(b*b+_*_));b=g,_=g}var w=y*b/2/m,O=y*_/2/m,P=[a[0]-w,a[1]-O,a[0]+w,a[1]+O],C=p.getTileRangeForExtentAndZ(d,h),S={};S[h]={};var E=this.createLoadedTileFinder(c,o,S),T=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var x=C.minX;x<=C.maxX;++x)for(var A=C.minY;A<=C.maxY;++A){var R=this.getTile(h,x,A,t);if(this.isDrawableTile(R)){var k=Om(this);if(R.getState()==Pg.LOADED){S[h][R.tileCoord.toString()]=R;var I=R.inTransition(k);this.newTiles_||!I&&-1!==this.renderedTiles.indexOf(R)||(this.newTiles_=!0)}if(1===R.getAlpha(k,t.time))continue}var M=p.getTileCoordChildTileRange(R.tileCoord,j,T),D=!1;M&&(D=E(h+1,M)),D||p.forEachTileCoordParentTileRange(R.tileCoord,E,j,T)}var L=y/i;Bm(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,s,-b/2,-_/2);var N=Gm(this.pixelTransform);this.useContainer(e,N,r.opacity);var F=this.context,B=F.canvas;Wm(this.inversePixelTransform,this.pixelTransform),Bm(this.tempTransform,b/2,_/2,L,L,0,-b/2,-_/2),B.width!=b||B.height!=_?(B.width=b,B.height=_):this.containerReused||F.clearRect(0,0,b,_),v&&this.clipUnrotated(F,t,v),zb(F,c.getContextOptions()),this.preRender(F,t),this.renderedTiles.length=0;var W,G,z,H=Object.keys(S).map(Number);H.sort(pm),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(W=[],G=[]):H=H.reverse();for(var U=H.length-1;U>=0;--U){var V=H[U],Z=c.getTilePixelSize(V,u,o),Y=p.getResolution(V)/y,X=Z[0]*Y*L,K=Z[1]*Y*L,Q=p.getTileCoordForCoordAndZ(hb(P),V),q=p.getTileCoordExtent(Q),J=Fm(this.tempTransform,[m*(q[0]-P[0])/y,m*(P[3]-q[3])/y]),$=m*c.getGutterForProjection(o),tt=S[V];for(var et in tt){var rt=(R=tt[et]).tileCoord,nt=Q[1]-rt[1],ot=Math.round(J[0]-(nt-1)*X),it=Q[2]-rt[2],at=Math.round(J[1]-(it-1)*K),st=ot-(x=Math.round(J[0]-nt*X)),ut=at-(A=Math.round(J[1]-it*K)),lt=h===V;if(!(I=lt&&1!==R.getAlpha(Om(this),t.time)))if(W){F.save(),z=[x,A,x+st,A,x+st,A+ut,x,A+ut];for(var ct=0,ft=W.length;ct<ft;++ct)if(h!==V&&V<G[ct]){var pt=W[ct];F.beginPath(),F.moveTo(z[0],z[1]),F.lineTo(z[2],z[3]),F.lineTo(z[4],z[5]),F.lineTo(z[6],z[7]),F.moveTo(pt[6],pt[7]),F.lineTo(pt[4],pt[5]),F.lineTo(pt[2],pt[3]),F.lineTo(pt[0],pt[1]),F.clip()}W.push(z),G.push(V)}else F.clearRect(x,A,st,ut);this.drawTileImage(R,t,x,A,st,ut,$,lt,r.opacity),W&&!I?(F.restore(),this.renderedTiles.unshift(R)):this.renderedTiles.push(R),this.updateUsedTiles(t.usedTiles,c,R)}}return this.renderedRevision=f,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!eb(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(t,c,p,u,o,d,h,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(F,t),r.extent&&F.restore(),N!==B.style.transform&&(B.style.transform=N),this.container},e.prototype.drawTileImage=function(t,e,r,n,o,i,a,s,u){var l=this.getTileImage(t);if(l){var c=Om(this),f=s?t.getAlpha(c,e.time):1,p=u*f,h=p!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,o,i),h&&this.context.restore(),1!==f?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=Om(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=Om(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,o,i,a,s,u){var l=Om(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,f,p,h,y,d,v=t.wantedTiles[l],m=t.tileQueue,b=0;for(d=r.getMinZoom();d<=a;++d)for(f=r.getTileRangeForExtentAndZ(i,d,f),p=r.getResolution(d),h=f.minX;h<=f.maxX;++h)for(y=f.minY;y<=f.maxY;++y)a-d<=s?(++b,(c=e.getTile(d,h,y,n,o)).getState()==Pg.IDLE&&(v[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),p])),void 0!==u&&u(c)):e.useTile(d,h,y,o);e.updateCacheSize(b,o)},e}(nC);uC.prototype.getLayer;var lC=uC,cC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fC=function(t){function e(e){return t.call(this,e)||this}return cC(e,t),e.prototype.createRenderer=function(){return new lC(this)},e}(JP),pC={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},hC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yC=function(t){function e(e,r,n){var o=t.call(this)||this,i=n||{};return o.tileCoord=e,o.state=r,o.interimTile=null,o.key="",o.transition_=void 0===i.transition?250:i.transition,o.transitionStarts_={},o}return hC(e,t),e.prototype.changed=function(){this.dispatchEvent(Xb.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Pg.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Pg.LOADED){t.interimTile=null;break}t.getState()==Pg.LOADING?e=t:t.getState()==Pg.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Pg.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){gm()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:Mw(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Yb),dC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vC=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.extent=e,i.pixelRatio_=n,i.resolution=r,i.state=o,i}return dC(e,t),e.prototype.changed=function(){this.dispatchEvent(Xb.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return gm()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){gm()},e}(Yb),mC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function bC(t,e,r){var n=t;if(n.src&&Rm){var o=!0;return n.decode().then(function(){o&&e()}).catch(function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())}),function(){o=!1}}var i=[Qb(n,Xb.LOAD,e),Qb(n,Xb.ERROR,r)];return function(){i.forEach(qb)}}!function(t){function e(e,r,n,o,i,a){var s=t.call(this,e,r,n,$P.IDLE)||this;return s.src_=o,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.state=$P.IDLE,s.imageLoadFunction_=a,s}mC(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=$P.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=fb(this.extent)/this.image_.height),this.state=$P.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=$P.IDLE&&this.state!=$P.ERROR||(this.state=$P.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=bC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=fb(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(vC);var _C=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var gC,wC=function(t){function e(e,r,n,o,i,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=o,s.src_=n,s.key=n,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.tileLoadFunction_=i,s}return _C(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=Pg.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=Pg.ERROR,this.unlistenImage_(),this.image_=((t=M_(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Pg.LOADED:this.state=Pg.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Pg.ERROR&&(this.state=Pg.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pg.IDLE&&(this.state=Pg.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(yC),OC=.5,PC=10,CC=function(){function t(t,e,r,n,o,i){this.sourceProj_=t,this.targetProj_=e;var a={},s=dw(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&db(n)==db(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?db(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?db(this.targetProj_.getExtent()):null;var u=hb(r),l=yb(r),c=ub(r),f=sb(r),p=this.transformInv_(u),h=this.transformInv_(l),y=this.transformInv_(c),d=this.transformInv_(f),v=PC+(i?Math.max(0,Math.ceil(wb(ab(r)/(i*i*256*256)))):0);if(this.addQuad_(u,l,c,f,p,h,y,d,v),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,e,r){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-m>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-m>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-m>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,o,i){this.triangles_.push({source:[n,o,i],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,o,i,a,s,u){var l=Um([o,i,a,s]),c=this.sourceWorldWidth_?db(l)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,h=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)h=db(Um([t,e,r,n]))/this.targetWorldWidth_>.25||h;!p&&this.sourceProj_.isGlobal()&&c&&(h=c>.25||h)}if(!(!h&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||vb(l,this.maxSourceExtent_)){var y=0;if(!(h||isFinite(o[0])&&isFinite(o[1])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(u>0)h=!0;else if(1!=(y=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(i[0])&&isFinite(i[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=y&&4!=y&&8!=y)return;if(u>0){if(!h){var d=[(t[0]+r[0])/2,(t[1]+r[1])/2],v=this.transformInv_(d),m=void 0;if(p)m=(Sb(o[0],f)+Sb(a[0],f))/2-Sb(v[0],f);else m=(o[0]+a[0])/2-v[0];var b=(o[1]+a[1])/2-v[1];h=m*m+b*b>this.errorThresholdSquared_}if(h){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var _=[(e[0]+r[0])/2,(e[1]+r[1])/2],g=this.transformInv_(_),w=[(n[0]+t[0])/2,(n[1]+t[1])/2],O=this.transformInv_(w);this.addQuad_(t,e,_,w,o,i,g,O,u-1),this.addQuad_(w,_,r,n,O,g,a,s,u-1)}else{var P=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(P),S=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(S);this.addQuad_(t,P,S,n,o,C,E,s,u-1),this.addQuad_(P,e,r,S,C,i,a,E,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(t,r,n,o,a,s),0==(14&y)&&this.addTriangle_(t,r,e,o,a,i),y&&(0==(13&y)&&this.addTriangle_(e,n,t,i,s,o),0==(7&y)&&this.addTriangle_(e,n,r,i,s,a))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,r,n){var o=e.source;rb(t,o[0]),rb(t,o[1]),rb(t,o[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}();function SC(t,e,r,n,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,o)),t.restore()}function EC(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function TC(t,e,r,n){var o=vw(r,e,t),i=uw(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(i*=a);var s=t.getMetersPerUnit();void 0!==s&&(i/=s);var u=t.getExtent();if(!u||Xm(u,o)){var l=uw(t,i,o)/i;isFinite(l)&&l>0&&(i/=l)}return i}function jC(t,e,r,n,o,i,a,s,u,l,c,f){var p=M_(Math.round(r*t),Math.round(r*e));if(zb(p,f),0===u.length)return p.canvas;function h(t){return Math.round(t*r)/r}p.scale(r,r),p.globalCompositeOperation="lighter";var y=[1/0,1/0,-1/0,-1/0];u.forEach(function(t,e,r){var n,o;n=y,(o=t.extent)[0]<n[0]&&(n[0]=o[0]),o[2]>n[2]&&(n[2]=o[2]),o[1]<n[1]&&(n[1]=o[1]),o[3]>n[3]&&(n[3]=o[3])});var d=db(y),v=fb(y),m=M_(Math.round(r*d/n),Math.round(r*v/n));zb(m,f);var b=r/n;u.forEach(function(t,e,r){var n=t.extent[0]-y[0],o=-(t.extent[3]-y[3]),i=db(t.extent),a=fb(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*b,o*b,i*b,a*b)});var _=hb(a);return s.getTriangles().forEach(function(t,e,o){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],d=a[1][1],v=a[2][0],b=a[2][1],g=h((s[0][0]-_[0])/i),w=h(-(s[0][1]-_[1])/i),O=h((s[1][0]-_[0])/i),P=h(-(s[1][1]-_[1])/i),C=h((s[2][0]-_[0])/i),S=h(-(s[2][1]-_[1])/i),E=u,T=l;u=0,l=0;var j=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,o=Math.abs(t[r][r]),i=r+1;i<e;i++){var a=Math.abs(t[i][r]);a>o&&(o=a,n=i)}if(0===o)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var f=new Array(e),p=e-1;p>=0;p--){f[p]=t[p][e]/t[p][p];for(var h=p-1;h>=0;h--)t[h][e]-=t[h][p]*f[p]}return f}([[c-=E,d-=T,0,0,O-g],[v-=E,b-=T,0,0,C-g],[0,0,c,d,P-w],[0,0,v,b,S-w]]);if(j){if(p.save(),p.beginPath(),function(){if(void 0===gC){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",SC(t,4,5,4,0),SC(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;gC=EC(e,0)||EC(e,4)||EC(e,8)}return gC}()||f===pC){p.moveTo(O,P);for(var x=g-O,A=w-P,R=0;R<4;R++)p.lineTo(O+h((R+1)*x/4),P+h(R*A/3)),3!=R&&p.lineTo(O+h((R+1)*x/4),P+h((R+1)*A/3));p.lineTo(C,S)}else p.moveTo(O,P),p.lineTo(g,w),p.lineTo(C,S);p.clip(),p.transform(j[0],j[2],j[1],j[3],g,w),p.translate(y[0]-E,y[3]-T),p.scale(n/r,-n/r),p.drawImage(m.canvas,0,0),p.restore()}}),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach(function(t,e,r){var n=t.target,o=(n[0][0]-_[0])/i,a=-(n[0][1]-_[1])/i,s=(n[1][0]-_[0])/i,u=-(n[1][1]-_[1])/i,l=(n[2][0]-_[0])/i,c=-(n[2][1]-_[1])/i;p.beginPath(),p.moveTo(s,u),p.lineTo(o,a),p.lineTo(l,c),p.closePath(),p.stroke()}),p.restore()),p.canvas}var xC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AC=function(t){function e(e,r,n,o,i,a,s,u,l,c,f,p){var h=t.call(this,i,Pg.IDLE)||this;h.renderEdges_=void 0!==f&&f,h.contextOptions_=p,h.pixelRatio_=s,h.gutter_=u,h.canvas_=null,h.sourceTileGrid_=r,h.targetTileGrid_=o,h.wrappedTileCoord_=a||i,h.sourceTiles_=[],h.sourcesListenerKeys_=null,h.sourceZ_=0;var y=o.getTileCoordExtent(h.wrappedTileCoord_),d=h.targetTileGrid_.getExtent(),v=h.sourceTileGrid_.getExtent(),m=d?pb(y,d):y;if(0===ab(m))return h.state=Pg.EMPTY,h;var b=e.getExtent();b&&(v=v?pb(v,b):b);var _=o.getResolution(h.wrappedTileCoord_[0]),g=function(t,e,r,n){var o=lb(r),i=TC(t,e,o,n);return(!isFinite(i)||i<=0)&&ib(r,function(r){return i=TC(t,e,r,n),isFinite(i)&&i>0}),i}(e,n,m,_);if(!isFinite(g)||g<=0)return h.state=Pg.EMPTY,h;var w=void 0!==c?c:OC;if(h.triangulation_=new CC(e,n,m,v,g*w,_),0===h.triangulation_.getTriangles().length)return h.state=Pg.EMPTY,h;h.sourceZ_=r.getZForResolution(g);var O=h.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(O[1]=_b(O[1],v[1],v[3]),O[3]=_b(O[3],v[1],v[3])):O=pb(O,v)),ab(O)){for(var P=r.getTileRangeForExtentAndZ(O,h.sourceZ_),C=P.minX;C<=P.maxX;C++)for(var S=P.minY;S<=P.maxY;S++){var E=l(h.sourceZ_,C,S,s);E&&h.sourceTiles_.push(E)}0===h.sourceTiles_.length&&(h.state=Pg.EMPTY)}else h.state=Pg.EMPTY;return h}return xC(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==Pg.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Pg.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],o="number"==typeof r?r:r[1],i=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=jC(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),i,s,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=Pg.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Pg.IDLE){this.state=Pg.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var o=e.getState();if(o==Pg.IDLE||o==Pg.LOADING){t++;var i=Kb(e,Xb.CHANGE,function(r){var n=e.getState();n!=Pg.LOADED&&n!=Pg.ERROR&&n!=Pg.EMPTY||(qb(i),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,e,r){t.getState()==Pg.IDLE&&t.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(qb),this.sourcesListenerKeys_=null},e}(yC),RC=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return Dm(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},t.prototype.remove=function(t){var e=this.entries_[t];return Dm(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Dm(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function kC(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function IC(t,e,r){return t+"/"+e+"/"+r}function MC(t){return IC(t[0],t[1],t[2])}function DC(t){return(t[1]<<t[0])+t[2]}var LC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return LC(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(MC(e.tileCoord)),e.release())}.bind(this))}},e}(RC),FC="tileloadstart",BC="tileloadend",WC="tileloaderror",GC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function zC(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var HC=function(t){function e(e){var r=t.call(this)||this;return r.projection=sw(e.projection),r.attributions_=zC(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:h_.READY,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return GC(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return gm()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=zC(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(n_),UC=[0,0,0],VC=function(){function t(t){var e,r,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Dm((e=this.resolutions_,r=!0,n=function(t,e){return e-t}||pm,e.every(function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||r&&0===i)})),17),!t.origins)for(var i=0,a=this.resolutions_.length-1;i<a;++i)if(o){if(this.resolutions_[i]/this.resolutions_[i+1]!==o){o=void 0;break}}else o=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Dm(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=hb(s)),Dm(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Dm(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Lg,Dm(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){var r=new aC(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(s){var n=this.getTileRangeForExtentAndZ(s,e);r.minX=Math.max(n.minX,r.minX),r.maxX=Math.min(n.maxX,r.maxX),r.minY=Math.max(n.minY,r.minY),r.maxY=Math.min(n.maxY,r.maxY)}return r},this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,i=n.maxX;o<=i;++o)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,o,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var o,i,a=null,s=t[0]-1;for(2===this.zoomFactor_?(o=t[1],i=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?iC(o=Math.floor(o/2),o,i=Math.floor(i/2),i,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return iC(n,n+1,o,o+1,e)}var i=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var n=t[0],o=t[1],i=t[2];if(e===n)return iC(o,i,o,i,r);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-n),s=Math.floor(o*a),u=Math.floor(i*a);return e<n?iC(s,s,u,u,r):iC(s,Math.floor(a*(o+1))-1,u,Math.floor(a*(i+1))-1,r)}var l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e,r)},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),o=this.getResolution(t),i=NO(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*i[0]*o,s=n[0]+(e.maxX+1)*i[0]*o;return $m(a,n[1]+e.minY*i[1]*o,s,n[1]+(e.maxY+1)*i[1]*o,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=UC;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var o=n[1],i=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),iC(o,n[1],i,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=NO(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=NO(this.getTileSize(t[0]),this.tmpSize_),i=r[0]+t[1]*o[0]*n,a=r[1]-(t[2]+1)*o[1]*n;return $m(i,a,i+o[0]*n,a+o[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,o){var i=this.getZForResolution(r),a=r/this.getResolution(i),s=this.getOrigin(i),u=NO(this.getTileSize(i),this.tmpSize_),l=n?.5:0,c=n?.5:0,f=Math.floor((t-s[0])/r+l),p=Math.floor((s[1]-e)/r+c),h=a*f/u[0],y=a*p/u[1];return n?(h=Math.ceil(h)-1,y=Math.ceil(y)-1):(h=Math.floor(h),y=Math.floor(y)),kC(i,h,y,o)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,o){var i=this.getOrigin(r),a=this.getResolution(r),s=NO(this.getTileSize(r),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-i[0])/a+u),f=Math.floor((i[1]-e)/a+l),p=c/s[0],h=f/s[1];return n?(p=Math.ceil(p)-1,h=Math.ceil(h)-1):(p=Math.floor(p),h=Math.floor(h)),kC(r,p,h,o)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return _b(hm(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}();function ZC(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,r,n){return function(t,e,r,n){var o=void 0!==n?n:zm.TOP_LEFT,i=XC(t,e,r);return new VC({extent:t,origin:function(t,e){var r;return e===zm.BOTTOM_LEFT?r=sb(t):e===zm.BOTTOM_RIGHT?r=ub(t):e===zm.TOP_LEFT?r=hb(t):e===zm.TOP_RIGHT?r=yb(t):Dm(!1,13),r}(t,o),resolutions:i,tileSize:r})}(KC(t),e,r,n)}(t),t.setDefaultTileGrid(e)),e}function YC(t){var e=t||{},r=e.extent||sw("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:XC(r,e.maxZoom,e.tileSize,e.maxResolution)};return new VC(n)}function XC(t,e,r,n){for(var o=void 0!==e?e:Dg,i=fb(t),a=db(t),s=NO(void 0!==r?r:Lg),u=n>0?n:Math.max(a/s[0],i/s[1]),l=o+1,c=new Array(l),f=0;f<l;++f)c[f]=u/Math.pow(2,f);return c}function KC(t){var e=(t=sw(t)).getExtent();if(!e){var r=180*jg[xg.DEGREES]/t.getMetersPerUnit();e=$m(-r,-r,r,r)}return e}var QC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qC=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.on,r.once,r.un,r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=e.tileGrid;return n&&NO(n.getTileSize(n.getMinZoom()),[256,256]),r.tileCache=new NC(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return QC(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var i,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=IC(e,l,c),s=!1,o.containsKey(a)&&(s=(i=o.get(a)).getState()===Pg.LOADED)&&(s=!1!==n(i)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,n,o){return gm()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:ZC(t)},e.prototype.getTileCacheForProjection=function(t){return Dm(hw(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),o=this.getTilePixelRatio(e),i=NO(n.getTileSize(t),this.tmpSize);return 1==o?i:LO(i,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var n=e[0],o=t.getTileCoordCenter(e),i=KC(r);if(Xm(i,o))return e;var a=db(i),s=Math.ceil((i[0]-o[0])/a);return o[0]+=a*s,t.getTileCoordForCoordAndZ(o,n)}(n,t,r)),function(t,e){var r=t[0],n=t[1],o=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var i=e.getFullTileRange(r);return!i||i.containsXY(n,o)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,e,r,n){},e}(HC),JC=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return QC(e,t),e}(Wb),$C=qC;function tS(t,e){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,s,u){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var t=a[0],r=e.getFullTileRange(t);return Dm(r,55),(r.getHeight()-a[2]-1).toString()}):void 0}}function eS(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=tS(t[o],e);return function(t){if(1===t.length)return t[0];return function(e,r,n){if(e){var o=DC(e),i=Sb(o,t.length);return t[i](e,r,n)}}}(n)}var rS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nS=function(t){function e(r){var n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return rS(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=Om(r),o=r.getState();o==Pg.LOADING?(this.tileLoadingKeys_[n]=!0,e=FC):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=o==Pg.ERROR?WC:o==Pg.LOADED?BC:void 0),void 0!=e&&this.dispatchEvent(new JC(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)e.push(t.replace(r[0],String.fromCharCode(i)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(eS(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,r){},e.prototype.useTile=function(t,e,r){var n=IC(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}($C),oS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function iS(t,e){t.getImage().src=e}var aS=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:iS,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:wC,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.contextOptions_=!1===e.imageSmoothing?pC:void 0,r.renderReprojectionEdges_=!1,r}return oS(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==r?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!hw(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!hw(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!hw(e,t)){var r=Om(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=ZC(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||hw(e,t))return this.tileCache;var r=Om(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new NC(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,n,o,i){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,o),u=s?this.tileUrlFunction(s,n,o):void 0,l=new this.tileClass(a,void 0!==u?Pg.IDLE:Pg.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=i,l.addEventListener(Xb.CHANGE,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,r,n,o){var i=this.getProjection();if(i&&o&&!hw(i,o)){var a=this.getTileCacheForProjection(o),s=[t,e,r],u=void 0,l=MC(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var f=this.getTileGridForProjection(i),p=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(s,o),y=new AC(i,f,o,p,s,h,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,i)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return y.key=c,u?(y.interimTile=u,y.refreshInterimChain(),a.replace(l,y)):a.set(l,y),y}return this.getTileInternal(t,e,r,n,i||o)},e.prototype.getTileInternal=function(t,e,r,n,o){var i=null,a=IC(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((i=this.tileCache.get(a)).key!=s){var u=i;i=this.createTile_(t,e,r,n,o,s),u.getState()==Pg.IDLE?i.interimTile=u.interimTile:i.interimTile=u,i.refreshInterimChain(),this.tileCache.replace(a,i)}}else i=this.createTile_(t,e,r,n,o,s),this.tileCache.set(a,i);return i},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=sw(t);if(r){var n=Om(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(nS),sS="carmentaserver",uS="geoserver",lS="mapserver",cS="qgis";function fS(t,e){var r=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))});var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var pS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hS=function(t){function e(e){var r=this,n=e||{},o=n.params||{},i=!("TRANSPARENT"in o)||o.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:!i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=o,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return pS(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var o=sw(r),i=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),f=NO(a.getTileSize(u[0]),this.tmpSize),p=this.gutter_;0!==p&&(f=MO(f,p,this.tmpSize),c=Vm(c,l*p,c)),i&&i!==o&&(l=TC(i,o,t,l),c=mw(c,o,i),t=vw(t,o,i));var h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};zb(h,this.params_,n);var y=Math.floor((t[0]-c[0])/l),d=Math.floor((c[3]-t[1])/l);return h[this.v13_?"I":"X"]=y,h[this.v13_?"J":"Y"]=d,this.getRequestUrl_(u,f,c,1,i||o,h)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;r.LAYER=n}if(void 0!==t){var o=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*o/28e-5}return zb(r,e),fS(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,o,i){var a=this.urls;if(a){if(i.WIDTH=e[0],i.HEIGHT=e[1],i[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=n)switch(this.serverType_){case uS:var s=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+s:i.FORMAT_OPTIONS="dpi:"+s;break;case lS:i.MAP_RESOLUTION=90*n;break;case sS:case cS:i.DPI=90*n;break;default:Dm(!1,52)}var u,l=o.getAxisOrientation(),c=r;if(this.v13_&&"ne"==l.substr(0,2)){var f=void 0;f=r[0],c[0]=r[1],c[1]=f,f=r[2],c[2]=r[3],c[3]=f}if(i.BBOX=c.join(","),1==a.length)u=a[0];else u=a[Sb(DC(t),a.length)];return fS(u,i)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){zb(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=function(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),o=0;o<Math.max(r.length,n.length);o++){var i=parseInt(r[o]||"0",10),a=parseInt(n[o]||"0",10);if(i>a)return 1;if(a>i)return-1}return 0}(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var o=n.getResolution(t[0]),i=n.getTileCoordExtent(t,this.tmpExtent_),a=NO(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=MO(a,s,this.tmpSize),i=Vm(i,o*s,i)),1!=e&&(a=LO(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return zb(u,this.params_),this.getRequestUrl_(t,a,i,e,r,u)}},e}(aS),yS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dS=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",o=void 0!==r.tileGrid?r.tileGrid:YC({extent:KC(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return yS(e,t),e}(aS),vS=new Ng({code:"GCJ-02",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],units:"m"});aw(vS);var mS=function(t){return function(e,r,n){var o,i=e.length,a=n||2;o=r||(2!==a?e.slice():new Array(i));for(var s=0;s<i;s+=a)t(e,o,s);return o}},bS={},_S=Math.PI,gS=6378245,wS=.006693421622965943;function OS(t,e){var r,n,o,i=(o=2*(r=t-105)-100+3*(n=e-35)+.2*n*n+.1*r*n+.2*Math.sqrt(Math.abs(r)),o+=2*(20*Math.sin(6*r*_S)+20*Math.sin(2*r*_S))/3,o+=2*(20*Math.sin(n*_S)+40*Math.sin(n/3*_S))/3,o+=2*(160*Math.sin(n/12*_S)+320*Math.sin(n*_S/30))/3),a=function(t,e){var r=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*_S)+20*Math.sin(2*t*_S))/3,r+=2*(20*Math.sin(t*_S)+40*Math.sin(t/3*_S))/3,r+=2*(150*Math.sin(t/12*_S)+300*Math.sin(t/30*_S))/3}(t-105,e-35),s=e/180*_S,u=Math.sin(s);u=1-wS*u*u;var l=Math.sqrt(u);return i=180*i/(gS*(1-wS)/(u*l)*_S),[a=180*a/(gS/l*Math.cos(s)*_S),i]}function PS(t,e){return t<72.004||t>137.8347||(e<.8293||e>55.8271)}bS.toWGS84=mS(function(t,e,r){var n=t[r],o=t[r+1];if(!PS(n,o)){var i=OS(n,o);n-=i[0],o-=i[1]}e[r]=n,e[r+1]=o}),bS.fromWGS84=mS(function(t,e,r){var n=t[r],o=t[r+1];if(!PS(n,o)){var i=OS(n,o);n+=i[0],o+=i[1]}e[r]=n,e[r+1]=o});var CS={},SS=Math.PI/180;CS.forward=mS(function(t,e,r){var n=Math.max(Math.min(85.0511287798,t[r+1]),-85.0511287798),o=Math.sin(n*SS);e[r]=6378137*t[r]*SS,e[r+1]=6378137*Math.log((1+o)/(1-o))/2}),CS.inverse=mS(function(t,e,r){e[r]=t[r]/6378137/SS,e[r+1]=(2*Math.atan(Math.exp(t[r+1]/6378137))-Math.PI/2)/SS});var ES={ll2gmerc:function(t,e,r){var n=bS.fromWGS84(t,e,r);return ES.ll2smerc(n,n,r)},gmerc2ll:function(t,e,r){var n=ES.smerc2ll(t,t,r);return bS.toWGS84(n,e,r)},smerc2gmerc:function(t,e,r){var n=ES.smerc2ll(t,t,r);return n=bS.fromWGS84(n,n,r),ES.ll2smerc(n,n,r)},gmerc2smerc:function(t,e,r){var n=ES.smerc2ll(t,t,r);return n=bS.toWGS84(n,n,r),ES.ll2smerc(n,n,r)}};ES.ll2smerc=CS.forward,ES.smerc2ll=CS.inverse,pw("EPSG:4326",vS,ES.ll2gmerc,ES.gmerc2ll),pw("EPSG:3857",vS,ES.smerc2gmerc,ES.gmerc2smerc);var TS=vS,jS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xS=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.setKey(r.getKeyForParams_()),r}return jS(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,o,i){var a=this.urls;if(a){var s,u=o.getCode().split(/:(?=\d+$)/).pop();if(i.SIZE=e[0]+","+e[1],i.BBOX=r.join(","),i.BBOXSR=u,i.IMAGESR=u,i.DPI=Math.round(i.DPI?i.DPI*n:90*n),1==a.length)s=a[0];else s=a[Sb(DC(t),a.length)];return fS(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),i)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){zb(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var o=n.getTileCoordExtent(t,this.tmpExtent_),i=NO(n.getTileSize(t[0]),this.tmpSize);1!=e&&(i=LO(i,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return zb(a,this.params_),this.getRequestUrl_(t,i,o,e,r,a)}},e}(aS);function AS(t){"@babel/helpers - typeof";return(AS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===AS(i=function(t,e){if("object"!==AS(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==AS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var kS=function(t,e,r){return e&&RS(t.prototype,e),r&&RS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r={url:e.url,minZoom:e.minLevel||0,maxZoom:e.maxLevel||20,layer:e.layers||null,style:e.style||null,mapServerType:e.mapServerType,transition:e.transition||null};e.showArea&&(r.extent=[Number(e.showArea.split(",")[0]),Number(e.showArea.split(",")[1]),Number(e.showArea.split(",")[2]),Number(e.showArea.split(",")[3])]);var n=null,o={};switch(e.mapServerType){case"ATMS":o.crossOrigin="anonymous",o.projection=TS,o.tileUrlFunction=function(t){var e=void 0;if(t[0]<=r.maxZoom&&t[0]>=r.minZoom)if(-1==r.url.indexOf("reverseY"))e=r.url.replace("{z}/{x}/{y}",t[0]+"/"+t[1]+"/"+t[2]);else{var n=t[0]-1,o=t[1],i=Math.pow(2,n)-1-t[2];e=r.url.replace("{z}/{x}/{reverseY}",n+"/"+o+"/"+i)}return e},n=new dS(o);break;case"TMS":o.crossOrigin="anonymous",o.projection="EPSG:3857","4326"===e.crs&&(o.projection="EPSG:4326",o.tileGrid=YC({extent:sw("EPSG:4326").getExtent(),maxZoom:20})),o.tileUrlFunction=function(t){var n=void 0;if(t[0]<=r.maxZoom&&t[0]>=r.minZoom)if(-1==r.url.indexOf("reverseY")){var o=t[0];"4326"===e.crs&&(o=t[0]-1),n=r.url.replace("{z}/{x}/{y}",o+"/"+t[1]+"/"+t[2])}else{var i=t[0]-1,a=t[1],s=Math.pow(2,i)-1-t[2];n=r.url.replace("{z}/{x}/{reverseY}",i+"/"+a+"/"+s)}return n},n=new dS(o);break;case"WMS":n=new hS({crossOrigin:"anonymous",url:r.url,params:{LAYERS:r.layer,STYLES:r.style||""},serverType:"geoserver",transition:r.transition});break;case"WMTS":break;case"AWMS":o.projection="EPSG:3857","4326"===e.crs&&(o.projection="EPSG:4326",o.tileGrid=YC({extent:sw("EPSG:4326").getExtent(),maxZoom:20})),o.url=r.url,n=new xS(o);break;case"AWMTS":o.projection="EPSG:3857","4326"===e.crs&&(o.projection="EPSG:4326",o.tileGrid=YC({extent:sw("EPSG:4326").getExtent(),maxZoom:20})),o.url=r.url+"/tile/{z}/{y}/{x}",n=new dS(o)}return new fC({source:n,zIndex:-1})}),IS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();var MS=function(t){function e(e){var r=t.call(this)||this;if(r.on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var o=e;r.setProperties(o)}return r}return IS(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(qb(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Kb(t,Xb.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{Dm("function"==typeof t.getZIndex,41);var r=t;e=[r]}return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(n_),DS=n(6),LS=n.n(DS),NS=function(){function t(t){this.rbush_=new LS.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Om(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,o=e.length;n<o;n++){var i=t[n],a=e[n],s={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:a};r[n]=s,this.items_[Om(a)]=s}this.rbush_.load(r)},t.prototype.remove=function(t){var e=Om(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[Om(e)];eb([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return Vb(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return $m(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),FS="addfeature",BS="changefeature",WS="clear",GS="removefeature",zS="featuresloadstart",HS="featuresloadend",US="featuresloaderror";function VS(t,e){return[[-1/0,-1/0,1/0,1/0]]}var ZS={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},YS=!1;function XS(t,e){return function(r,n,o,i,a){var s=this;!function(t,e,r,n,o,i,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,n,o):t,!0),e.getType()==ZS.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=YS,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var n=e.getType(),u=void 0;n==ZS.JSON||n==ZS.TEXT?u=s.responseText:n==ZS.XML?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):n==ZS.ARRAY_BUFFER&&(u=s.response),u?i(e.readFeatures(u,{extent:r,featureProjection:o}),e.readProjection(u)):a()}else a()},s.onerror=a,s.send()}(t,e,r,n,o,function(t,e){s.addFeatures(t),void 0!==i&&i(t)},a||_m)}}var KS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QS=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.feature=r,o.features=n,o}return KS(e,t),e}(Wb),qS=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:h_.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).on,r.once,r.un,r.loader_=_m,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(Dm(r.format_,7),r.loader_=XS(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:VS;var o,i,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new NS:null,r.loadedExtentsRtree_=new NS,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?i=n.features:n.features&&(i=(o=n.features).getArray()),a||void 0!==o||(o=new ig(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==o&&r.bindFeaturesCollection_(o),r}return KS(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Om(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new QS(FS,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Kb(e,Xb.CHANGE,this.handleFeatureChange_,this),Kb(e,Gb.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(Dm(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],o=0,i=t.length;o<i;o++){var a=Om(u=t[o]);this.addToIndex_(a,u)&&r.push(u)}o=0;for(var s=r.length;o<s;o++){var u;a=Om(u=r[o]);this.setupChangeEvents_(a,u);var l=u.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(u)}else this.nullGeometryFeatures_[a]=u}this.featuresRtree_&&this.featuresRtree_.load(e,n);o=0;for(var f=r.length;o<f;o++)this.dispatchEvent(new QS(FS,r[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(FS,function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener(GS,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener(eg.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(eg.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(qb)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new QS(WS);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Vb(this.nullGeometryFeatures_)||dm(t,Ub(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],o=null,i=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||mm;return this.featuresRtree_.forEachInExtent(s,function(t){if(u(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(r,n,i,a))<l){o=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}}),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=Om(e),n=e.getGeometry();if(n){var o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var i=e.getId();if(void 0!==i){var a=i.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new QS(BS,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Om(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Vb(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){for(var n=this.loadedExtentsRtree_,o=this.strategy_(t,e),i=function(t,i){var s=o[t];n.forEachInExtent(s,function(t){return Km(t.extent,s)})||(++a.loadingExtentsCount_,a.dispatchEvent(new QS(zS)),a.loader_.call(a,s,e,r,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new QS(HS,void 0,t))}.bind(a),function(){--this.loadingExtentsCount_,this.dispatchEvent(new QS(US))}.bind(a)),n.insert(s,{extent:s.slice()}))},a=this,s=0,u=o.length;s<u;++s)i(s);this.loading=this.loader_!==_m&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,function(r){if(eb(r.extent,t))return e=r,!0}),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=Om(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Om(t);this.featureChangeKeys_[e].forEach(qb),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new QS(GS,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Dm(this.format_,7),this.url_=t,this.setLoader(XS(t,this.format_))},e}(HC),JS=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=NO(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return gm()},t.prototype.getImage=function(t){return gm()},t.prototype.getHitDetectionImage=function(){return gm()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return gm()},t.prototype.getImageSize=function(){return gm()},t.prototype.getOrigin=function(){return gm()},t.prototype.getSize=function(){return gm()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=NO(t)},t.prototype.listenImageChange=function(t){gm()},t.prototype.load=function(){gm()},t.prototype.unlistenImageChange=function(t){gm()},t}();function $S(t){return Array.isArray(t)?Lb(t):t}var tE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eE=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.renderOptions_=null,r.render(),r}return tE(e,t),e.prototype.clone=function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var r=this.renderOptions_,n=M_(r.size*t,r.size*t);this.draw_(r,n,t),e=n.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return $P.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,r){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var n=this.radius_,o=void 0===this.radius2_?n:this.radius2_;if(n<o){var i=n;n=o,o=i}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,u=o*Math.sin(s),l=n-Math.sqrt(o*o-u*u),c=Math.sqrt(u*u+l*l),f=c/u;if("miter"===t&&f<=r)return f*e;var p=e/2/f,h=e/2*(l/c),y=Math.sqrt((n+p)*(n+p)+h*h)-n;if(void 0===this.radius2_||"bevel"===t)return 2*y;var d=n*Math.sin(s),v=o-Math.sqrt(n*n-d*d),m=Math.sqrt(d*d+v*v)/d;if(m<=r){var b=m*e/2-o-n;return 2*Math.max(y,b)}return 2*y},e.prototype.createRenderOptions=function(){var t,e="round",r=0,n=null,o=0,i=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=$S(t),void 0===(i=this.stroke_.getWidth())&&(i=1),n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e="round"),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var a=this.calculateLineJoinSize_(e,i,r),s=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:i,size:Math.ceil(2*s+a),lineDash:n,lineDashOffset:o,lineJoin:e,miterLimit:r}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,e=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-e[0],t/2+e[1]],this.size_=[t,t]},e.prototype.draw_=function(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n="#000"),e.fillStyle=$S(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Mb(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=M_(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,r=this.radius_;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var o=this.angle_-Math.PI/2,i=2*Math.PI/e,a=0;a<e;a++){var s=o+a*i,u=a%2==0?r:n;t.lineTo(u*Math.cos(s),u*Math.sin(s))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(JS),rE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nE=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:void 0!==r.scale?r.scale:1,rotation:void 0!==r.rotation?r.rotation:0,rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return rE(e,t),e.prototype.clone=function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(eE),oE=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),iE=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function aE(t){"@babel/helpers - typeof";return(aE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var sE=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=cE,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===aE(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=cE,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var uE=null;function lE(t,e){if(!uE){var r=new oE({color:"rgba(255,255,255,0.4)"}),n=new iE({color:"#3399CC",width:1.25});uE=[new sE({image:new nE({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return uE}function cE(t){return t.getGeometry()}var fE=sE,pE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hE="renderOrder",yE=function(t){function e(e){var r=this,n=e||{},o=zb({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(r=t.call(this,o)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return pE(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(hE)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new LS.a(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(hE,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:lE,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var r;Array.isArray(t)?r=t:(Dm("function"==typeof t.getZIndex,41),r=[t]),e=function(){return r}}return e}(this.style_),this.changed()},e}(v_),dE={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},vE=[dE.FILL],mE=[dE.STROKE],bE=[dE.BEGIN_PATH],_E=[dE.CLOSE_PATH],gE=dE,wE=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),OE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PE=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.tolerance=e,i.maxExtent=r,i.pixelRatio=o,i.maxLineWidth=0,i.resolution=n,i.beginGeometryInstruction1_=null,i.beginGeometryInstruction2_=null,i.bufferedMaxExtent_=null,i.instructions=[],i.coordinates=[],i.tmpCoordinate_=[],i.hitDetectionInstructions=[],i.state={},i}return OE(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatPointCoordinates=function(t,e){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates,i=o.length,a=0,s=t.length;a<s;a+=e)n[0]=t[a],n[1]=t[a+1],Xm(r,n)&&(o[i++]=n[0],o[i++]=n[1]);return i},e.prototype.appendFlatLineCoordinates=function(t,e,r,n,o,i){var a=this.coordinates,s=a.length,u=this.getBufferedMaxExtent();i&&(e+=n);var l,c,f,p=t[e],h=t[e+1],y=this.tmpCoordinate_,d=!0;for(l=e+n;l<r;l+=n)y[0]=t[l],y[1]=t[l+1],(f=qm(u,y))!==c?(d&&(a[s++]=p,a[s++]=h,d=!1),a[s++]=y[0],a[s++]=y[1]):f===Hm.INTERSECTING?(a[s++]=y[0],a[s++]=y[1],d=!1):d=!0,p=y[0],h=y[1],c=f;return(o&&d||l===e+n)&&(a[s++]=p,a[s++]=h),s},e.prototype.drawCustomCoordinates_=function(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i],u=this.appendFlatLineCoordinates(t,e,s,n,!1,!1);o.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var n,o,i,a,s,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==Eg.MULTI_POLYGON){n=t.getOrientedFlatCoordinates(),a=[];var f=t.getEndss();s=0;for(var p=0,h=f.length;p<h;++p){var y=[];s=this.drawCustomCoordinates_(n,s,f[p],l,y),a.push(y)}this.instructions.push([gE.CUSTOM,c,a,t,r,aO])}else u==Eg.POLYGON||u==Eg.MULTI_LINE_STRING?(i=[],n=u==Eg.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),l,i),this.instructions.push([gE.CUSTOM,c,i,t,r,iO])):u==Eg.LINE_STRING||u==Eg.CIRCLE?(n=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([gE.CUSTOM,c,o,t,r,oO])):u==Eg.MULTI_POINT?(n=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(n,l))>c&&this.instructions.push([gE.CUSTOM,c,o,t,r,oO])):u==Eg.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([gE.CUSTOM,c,o,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[gE.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gE.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,o=e.length,i=-1;for(t=0;t<o;++t)(n=(r=e[t])[0])==gE.END_GEOMETRY?i=t:n==gE.BEGIN_GEOMETRY&&(r[2]=t,ym(this.hitDetectionInstructions,i,t),i=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=$S(n||"#000")}else r.fillStyle=void 0;if(e){var o=e.getColor();r.strokeStyle=$S(o||"#000");var i=e.getLineCap();r.lineCap=void 0!==i?i:"round";var a=e.getLineDash();r.lineDash=a?a.slice():W_;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:"round";var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[gE.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[gE.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,o=t.lineDash,i=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!vm(t.currentLineDash,o)||t.currentLineDashOffset!=i||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=i,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[gE.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Zm(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Vm(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(wE),CE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SE=function(t){function e(e,r,n,o){var i=t.call(this,e,r,n,o)||this;return i.hitDetectionImage_=null,i.image_=null,i.imagePixelRatio_=void 0,i.anchorX_=void 0,i.anchorY_=void 0,i.height_=void 0,i.opacity_=void 0,i.originX_=void 0,i.originY_=void 0,i.rotateWithView_=void 0,i.rotation_=void 0,i.scale_=void 0,i.width_=void 0,i.declutterImageWithText_=void 0,i}return CE(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,i=this.appendFlatPointCoordinates(r,n);this.instructions.push([gE.DRAW_IMAGE,o,i,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([gE.DRAW_IMAGE,o,i,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,i=this.appendFlatPointCoordinates(r,n);this.instructions.push([gE.DRAW_IMAGE,o,i,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([gE.DRAW_IMAGE,o,i,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),o=t.getHitDetectionImage(),i=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=o,this.image_=i,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=e},e}(PE),EE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TE=function(t){function e(e,r,n,o){return t.call(this,e,r,n,o)||this}return EE(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var o=this.coordinates.length,i=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[gE.MOVE_TO_LINE_TO,o,i];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([gE.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,W_,0],bE);var i=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(i,0,i.length,a),this.hitDetectionInstructions.push(mE),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([gE.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],bE);for(var i=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=i.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,i[l],s);this.hitDetectionInstructions.push(mE),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(mE),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(mE),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(bE)},e}(PE),jE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=function(t){function e(e,r,n,o){return t.call(this,e,r,n,o)||this}return jE(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var o=this.state,i=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,s=r.length;this.instructions.push(bE),this.hitDetectionInstructions.push(bE);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,l,n,!0,!a),p=[gE.MOVE_TO_LINE_TO,c,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(_E),this.hitDetectionInstructions.push(_E)),e=l}return i&&(this.instructions.push(vE),this.hitDetectionInstructions.push(vE)),a&&(this.instructions.push(mE),this.hitDetectionInstructions.push(mE)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([gE.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([gE.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var i=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(i,0,i.length,a,!1,!1);var u=[gE.CIRCLE,s];this.instructions.push(bE,u),this.hitDetectionInstructions.push(bE,u),void 0!==r.fillStyle&&(this.instructions.push(vE),this.hitDetectionInstructions.push(vE)),void 0!==r.strokeStyle&&(this.instructions.push(mE),this.hitDetectionInstructions.push(mE)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([gE.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([gE.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var i=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,i,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([gE.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([gE.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var i=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=i.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,i[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,o=r.length;n<o;++n)r[n]=eO(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(PE),AE={POINT:"point",LINE:"line"};function RE(t,e,r,n,o){var i,a,s,u,l,c,f,p,h,y=r,d=r,v=0,m=0,b=r;for(i=r;i<n;i+=o){var _=e[i],g=e[i+1];void 0!==u&&(p=_-u,h=g-l,s=Math.sqrt(p*p+h*h),void 0!==c&&(m+=a,Math.acos((c*p+f*h)/(a*s))>t&&(m>v&&(v=m,y=b,d=i),m=0,b=i-o)),a=s,c=p,f=h),u=_,l=g}return(m+=s)>v?[b,i]:[y,d]}var kE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IE={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ME={Circle:xE,Default:PE,Image:SE,LineString:TE,Polygon:xE,Text:function(t){function e(e,r,n,o){var i=t.call(this,e,r,n,o)||this;return i.labels_=null,i.text_="",i.textOffsetX_=0,i.textOffsetY_=0,i.textRotateWithView_=void 0,i.textRotation_=0,i.textFillState_=null,i.fillStates={},i.textStrokeState_=null,i.strokeStates={},i.textState_={},i.textStates={},i.textKey_="",i.fillKey_="",i.strokeKey_="",i.declutterImageWithText_=void 0,i}return kE(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(r||n)){var i=this.coordinates,a=i.length,s=t.getType(),u=null,l=t.getStride();if(o.placement!==AE.LINE||s!=Eg.LINE_STRING&&s!=Eg.MULTI_LINE_STRING&&s!=Eg.POLYGON&&s!=Eg.MULTI_POLYGON){var c=o.overflow?null:[];switch(s){case Eg.POINT:case Eg.MULTI_POINT:u=t.getFlatCoordinates();break;case Eg.LINE_STRING:u=t.getFlatMidpoint();break;case Eg.CIRCLE:u=t.getCenter();break;case Eg.MULTI_LINE_STRING:u=t.getFlatMidpoints(),l=2;break;case Eg.POLYGON:u=t.getFlatInteriorPoint(),o.overflow||c.push(u[2]/this.resolution),l=3;break;case Eg.MULTI_POLYGON:var f=t.getFlatInteriorPoints();u=[];for(O=0,P=f.length;O<P;O+=3)o.overflow||c.push(f[O+2]/this.resolution),u.push(f[O],f[O+1]);if(0===u.length)return;l=2}if((A=this.appendFlatPointCoordinates(u,l))===a)return;if(c&&(A-a)/2!=u.length/l){var p=a/2;c=c.filter(function(t,e){var r=i[2*(p+e)]===u[e*l]&&i[2*(p+e)+1]===u[e*l+1];return r||--p,r})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var h=o.padding;if(h!=G_&&(o.scale[0]<0||o.scale[1]<0)){var y=o.padding[0],d=o.padding[1],v=o.padding[2],m=o.padding[3];o.scale[0]<0&&(d=-d,m=-m),o.scale[1]<0&&(y=-y,v=-v),h=[y,d,v,m]}var b=this.pixelRatio;this.instructions.push([gE.DRAW_IMAGE,a,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,h==G_?G_:h.map(function(t){return t*b}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var _=1/b;this.hitDetectionInstructions.push([gE.DRAW_IMAGE,a,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterImageWithText_,h,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!vb(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(u=t.getFlatCoordinates(),s==Eg.LINE_STRING)g=[u.length];else if(s==Eg.MULTI_LINE_STRING)g=t.getEnds();else if(s==Eg.POLYGON)g=t.getEnds().slice(0,1);else if(s==Eg.MULTI_POLYGON){var w=t.getEndss();g=[];for(var O=0,P=w.length;O<P;++O)g.push(w[O][0])}this.beginGeometry(t,e);for(var C=o.textAlign,S=0,E=void 0,T=0,j=g.length;T<j;++T){if(void 0==C){var x=RE(o.maxAngle,u,S,g[T],l);S=x[0],E=x[1]}else E=g[T];for(var O=S;O<E;O+=l)i.push(u[O],u[O+1]);var A=i.length;S=g[T],this.drawChars_(a,A),a=A}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var i=this.fillKey_;r&&(i in this.fillStates||(this.fillStates[i]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e){var r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,i=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,u=IE[n.textBaseline],l=this.textOffsetY_*s,c=this.text_,f=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([gE.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,s,l,o,f*s,c,i,1]),this.hitDetectionInstructions.push([gE.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,1,l,o,f,c,i,1/s])},e.prototype.setTextStyle=function(t,e){var r,n,o;if(t){var i=t.getFill();i?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=$S(i.getColor()||"#000")):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();o.lineCap=a.getLineCap()||"round",o.lineDash=s?s.slice():W_,o.lineDashOffset=void 0===u?0:u,o.lineJoin=a.getLineJoin()||"round",o.lineWidth=void 0===l?1:l,o.miterLimit=void 0===c?10:c,o.strokeStyle=$S(a.getColor()||"#000")}else o=null,this.textStrokeState_=o;r=this.textState_;var f=t.getFont()||"10px sans-serif";Y_(f);var p=t.getScaleArray();r.overflow=t.getOverflow(),r.font=f,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||G_,r.scale=void 0===p?[1,1]:p;var h=t.getOffsetX(),y=t.getOffsetY(),d=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===v?0:v,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Om(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Om(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(PE)},DE=function(){function t(t,e,r,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var o=r[n].finish();t[e][n]=o}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var o=n[e];void 0===o&&(o=new(0,ME[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o);return o},t}(),LE={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function NE(t,e,r,n,o,i,a,s,u,l,c,f){var p=t[e],h=t[e+1],y=0,d=0,v=0,m=0;function b(){y=p,d=h,p=t[e+=n],h=t[e+1],m+=v,v=Math.sqrt((p-y)*(p-y)+(h-d)*(h-d))}do{b()}while(e<r-n&&m+v<i);for(var _=(i-m)/v,g=Eb(y,p,_),w=Eb(d,h,_),O=e-n,P=m,C=i+s*u(l,o,c);e<r-n&&m+v<C;)b();var S,E=Eb(y,p,_=(C-m)/v),T=Eb(d,h,_);if(f){var j=[g,w,E,T];Ww(j,0,4,2,f,j,j),S=j[0]>j[2]}else S=g>E;var x,A=Math.PI,R=[],k=O+n===e;if(v=0,m=P,p=t[e=O],h=t[e+1],k){b();var I=Math.atan2(h-d,p-y);S&&(I+=I>0?-A:A);var M=(E+g)/2,D=(T+w)/2;return R[0]=[M,D,(C-i)/2,I,o],R}for(var L=0,N=o.length;L<N;){b();var F=Math.atan2(h-d,p-y);if(S&&(F+=F>0?-A:A),void 0!==x){var B=F-x;if(B+=B>A?-2*A:B<-A?2*A:0,Math.abs(B)>a)return null}x=F;for(var W=L,G=0;L<N;++L){var z=s*u(l,o[S?N-L-1:L],c);if(e+n<r&&m+v<i+G+z/2)break;G+=z}if(L!==W){var H=S?o.substring(N-W,N-L):o.substring(W,L);M=Eb(y,p,_=(i+G/2-m)/v),D=Eb(d,h,_);R.push([M,D,G/2,F,H]),i+=G}}return R}function FE(t,e,r,n){for(var o=t[e],i=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-o)*(u-o)+(l-i)*(l-i)),o=u,i=l}return a}var BE=[1/0,1/0,-1/0,-1/0],WE=[],GE=[],zE=[],HE=[];function UE(t){return t[3].declutterBox}var VE=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ZE(t,e){return"start"!==e&&"end"!==e||VE.test(t)||(e="start"===e?"left":"right"),IE[e]}var YE=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var o=t+e+r+n;if(this.labels_[o])return this.labels_[o];var i=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=[s.scale[0]*u,s.scale[1]*u],c=ZE(t,s.textAlign||"center"),f=n&&i.lineWidth?i.lineWidth:0,p=t.split("\n"),h=p.length,y=[],d=function(t,e,r){for(var n=e.length,o=0,i=0;i<n;++i){var a=Q_(t,e[i]);o=Math.max(o,a),r.push(a)}return o}(s.font,p,y),v=X_(s.font),m=d+f,b=[],_=(m+2)*l[0],g=(v*h+f)*l[1],w={width:_<0?Math.floor(_):Math.ceil(_),height:g<0?Math.floor(g):Math.ceil(g),contextInstructions:b};(1==l[0]&&1==l[1]||b.push("scale",l),b.push("font",s.font),n)&&(b.push("strokeStyle",i.strokeStyle),b.push("lineWidth",f),b.push("lineCap",i.lineCap),b.push("lineJoin",i.lineJoin),b.push("miterLimit",i.miterLimit),(Am?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[i.lineDash]),b.push("lineDashOffset",i.lineDashOffset)));r&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");var O,P=.5-c,C=c*m+P*f;if(n)for(O=0;O<h;++O)b.push("strokeText",[p[O],C+P*y[O],.5*(f+v)+O*v]);if(r)for(O=0;O<h;++O)b.push("fillText",[p[O],C+P*y[O],.5*(f+v)+O*v]);return this.labels_[o]=w,w},t.prototype.replayTextBackground_=function(t,e,r,n,o,i,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),i&&(this.alignFill_=i[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,r,n,o,i,a,s,u,l,c,f,p,h,y,d){var v,m=r-(a*=f[0]),b=n-(s*=f[1]),_=o+u>t?t-u:o,g=i+l>e?e-l:i,w=h[3]+_*f[0]+h[1],O=h[0]+g*f[1]+h[2],P=m-h[3],C=b-h[0];return(y||0!==c)&&(WE[0]=P,HE[0]=P,WE[1]=C,GE[1]=C,GE[0]=P+w,zE[0]=GE[0],zE[1]=C+O,HE[1]=zE[1]),0!==c?(Fm(v=Bm([1,0,0,1,0,0],r,n,1,1,c,-r,-n),WE),Fm(v,GE),Fm(v,zE),Fm(v,HE),$m(Math.min(WE[0],GE[0],zE[0],HE[0]),Math.min(WE[1],GE[1],zE[1],HE[1]),Math.max(WE[0],GE[0],zE[0],HE[0]),Math.max(WE[1],GE[1],zE[1],HE[1]),BE)):$m(Math.min(P,P+w),Math.min(C,C+O),Math.max(P,P+w),Math.max(C,C+O),BE),p&&(m=Math.round(m),b=Math.round(b)),{drawImageX:m,drawImageY:b,drawImageW:_,drawImageH:g,originX:u,originY:l,declutterBox:{minX:BE[0],minY:BE[1],maxX:BE[2],maxY:BE[3],value:d},canvasTransform:v,scale:f}},t.prototype.replayImageOrLabel_=function(t,e,r,n,o,i,a){var s=!(!i&&!a),u=n.declutterBox,l=t.canvas,c=a?a[2]*n.scale[0]/2:0;return u.minX-c<=l.width/e&&u.maxX+c>=0&&u.minY-c<=l.height/e&&u.maxY+c>=0&&(s&&this.replayTextBackground_(t,WE,GE,zE,HE,i,a),J_(t,n.canvasTransform,o,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Fm(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var o=this.textStates[e],i=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=ZE(t,o.textAlign||"center"),l=IE[o.textBaseline||"middle"],c=a&&a.lineWidth?a.lineWidth:0;return{label:i,anchorX:u*(i.width/s-2*o.scale[0])+2*(.5-u)*c,anchorY:l*i.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,r,n,o,i,a,s){var u,l,c;this.pixelCoordinates_&&vm(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Bw(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),l=this.renderedTransform_,c=r,l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5]);for(var f,p,h,y,d,v,m,b,_,g,w,O,P,C,S,E,T=0,j=n.length,x=0,A=0,R=0,k=null,I=null,M=this.coordinateCache_,D=this.viewRotation_,L=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},F=this.instructions!=n||this.overlaps?0:200;T<j;){var B=n[T];switch(B[0]){case gE.BEGIN_GEOMETRY:P=B[1],E=B[3],P.getGeometry()?void 0===a||vb(a,E.getExtent())?++T:T=B[2]+1:T=B[2];break;case gE.BEGIN_PATH:A>F&&(this.fill_(t),A=0),R>F&&(t.stroke(),R=0),A||R||(t.beginPath(),y=NaN,d=NaN),++T;break;case gE.CIRCLE:var W=u[x=B[1]],G=u[x+1],z=u[x+2]-W,H=u[x+3]-G,U=Math.sqrt(z*z+H*H);t.moveTo(W+U,G),t.arc(W,G,U,0,2*Math.PI,!0),++T;break;case gE.CLOSE_PATH:t.closePath(),++T;break;case gE.CUSTOM:x=B[1],f=B[2];var V=B[3],Z=B[4],Y=6==B.length?B[5]:void 0;N.geometry=V,N.feature=P,T in M||(M[T]=[]);var X=M[T];Y?Y(u,x,f,2,X):(X[0]=u[x],X[1]=u[x+1],X.length=2),Z(X,N),++T;break;case gE.DRAW_IMAGE:x=B[1],f=B[2],b=B[3],p=B[4],h=B[5];var K=B[6],Q=B[7],q=B[8],J=B[9],$=B[10],tt=B[11],et=B[12],rt=B[13],nt=B[14];if(!b&&B.length>=19){_=B[18],g=B[19],w=B[20],O=B[21];var ot=this.drawLabelWithPointPlacement_(_,g,w,O);b=ot.label,B[3]=b;var it=B[22];p=(ot.anchorX-it)*this.pixelRatio,B[4]=p;var at=B[23];h=(ot.anchorY-at)*this.pixelRatio,B[5]=h,K=b.height,B[6]=K,rt=b.width,B[13]=rt}var st=void 0;B.length>24&&(st=B[24]);var ut=void 0,lt=void 0,ct=void 0;B.length>16?(ut=B[15],lt=B[16],ct=B[17]):(ut=G_,lt=!1,ct=!1),$&&L?tt+=D:$||L||(tt-=D);for(var ft=0;x<f;x+=2)if(!(st&&st[ft++]<rt/this.pixelRatio)){var pt=[t,e,b,Bt=this.calculateImageOrLabelDimensions_(b.width,b.height,u[x],u[x+1],rt,K,p,h,q,J,tt,et,o,ut,lt||ct,P),Q,lt?k:null,ct?I:null],ht=void 0,yt=void 0;if(s&&nt){var dt=f-x;if(!nt[dt]){nt[dt]=pt;continue}if(ht=nt[dt],delete nt[dt],yt=UE(ht),s.collides(yt))continue}s&&s.collides(Bt.declutterBox)||(ht&&(s&&s.insert(yt),this.replayImageOrLabel_.apply(this,ht)),s&&s.insert(Bt.declutterBox),this.replayImageOrLabel_.apply(this,pt))}++T;break;case gE.DRAW_CHARS:var vt=B[1],mt=B[2],bt=B[3],_t=B[4];O=B[5];var gt=B[6],wt=B[7],Ot=B[8];w=B[9];var Pt=B[10];_=B[11],g=B[12];var Ct=[B[13],B[13]],St=this.textStates[g],Et=St.font,Tt=[St.scale[0]*wt,St.scale[1]*wt],jt=void 0;Et in this.widths_?jt=this.widths_[Et]:(jt={},this.widths_[Et]=jt);var xt=FE(u,vt,mt,2),At=Math.abs(Tt[0])*q_(Et,_,jt);if(_t||At<=xt){var Rt=this.textStates[g].textAlign,kt=NE(u,vt,mt,2,_,(xt-At)*IE[Rt],gt,Math.abs(Tt[0]),q_,Et,jt,L?0:this.viewRotation_);t:if(kt){var It=[],Mt=void 0,Dt=void 0,Lt=void 0,Nt=void 0,Ft=void 0;if(w)for(Mt=0,Dt=kt.length;Mt<Dt;++Mt){Lt=(Ft=kt[Mt])[4],Nt=this.createLabel(Lt,g,"",w),p=Ft[2]+(Tt[0]<0?-Pt:Pt),h=bt*Nt.height+2*(.5-bt)*Pt*Tt[1]/Tt[0]-Ot;var Bt=this.calculateImageOrLabelDimensions_(Nt.width,Nt.height,Ft[0],Ft[1],Nt.width,Nt.height,p,h,0,0,Ft[3],Ct,!1,G_,!1,P);if(s&&s.collides(Bt.declutterBox))break t;It.push([t,e,Nt,Bt,1,null,null])}if(O)for(Mt=0,Dt=kt.length;Mt<Dt;++Mt){Lt=(Ft=kt[Mt])[4],Nt=this.createLabel(Lt,g,O,""),p=Ft[2],h=bt*Nt.height-Ot;Bt=this.calculateImageOrLabelDimensions_(Nt.width,Nt.height,Ft[0],Ft[1],Nt.width,Nt.height,p,h,0,0,Ft[3],Ct,!1,G_,!1,P);if(s&&s.collides(Bt.declutterBox))break t;It.push([t,e,Nt,Bt,1,null,null])}s&&s.load(It.map(UE));for(var Wt=0,Gt=It.length;Wt<Gt;++Wt)this.replayImageOrLabel_.apply(this,It[Wt])}}++T;break;case gE.END_GEOMETRY:if(void 0!==i){var zt=i(P=B[1],E);if(zt)return zt}++T;break;case gE.FILL:F?A++:this.fill_(t),++T;break;case gE.MOVE_TO_LINE_TO:for(x=B[1],f=B[2],C=u[x],m=(S=u[x+1])+.5|0,(v=C+.5|0)===y&&m===d||(t.moveTo(C,S),y=v,d=m),x+=2;x<f;x+=2)v=(C=u[x])+.5|0,m=(S=u[x+1])+.5|0,x!=f-2&&v===y&&m===d||(t.lineTo(C,S),y=v,d=m);++T;break;case gE.SET_FILL_STYLE:k=B,this.alignFill_=B[2],A&&(this.fill_(t),A=0,R&&(t.stroke(),R=0)),t.fillStyle=B[1],++T;break;case gE.SET_STROKE_STYLE:I=B,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,B),++T;break;case gE.STROKE:F?R++:t.stroke(),++T;break;default:++T}}A&&this.fill_(t),R&&t.stroke()},t.prototype.execute=function(t,e,r,n,o,i){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,o,void 0,void 0,i)},t.prototype.executeHitDetection=function(t,e,r,n,o){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,o)},t}(),XE=[LE.POLYGON,LE.CIRCLE,LE.LINE_STRING,LE.IMAGE,LE.TEXT,LE.DEFAULT],KE=function(){function t(t,e,r,n,o,i){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=i,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var o in n){var i=n[o];r[o]=new YE(this.resolution_,this.pixelRatio_,this.overlaps_,i)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o,i){var a=2*(n=Math.round(n))+1,s=Bm(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=M_(a,a));var l,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(rb(l=[1/0,1/0,-1/0,-1/0],t),Vm(l,e*(this.renderBuffer_+n),l));var f,p=function(t){if(void 0!==QE[t])return QE[t];for(var e=2*t+1,r=t*t,n=new Array(r+1),o=0;o<=t;++o)for(var i=0;i<=t;++i){var a=o*o+i*i;if(a>r)break;var s=n[a];s||(s=[],n[a]=s),s.push(4*((t+o)*e+(t+i))+3),o>0&&s.push(4*((t-o)*e+(t+i))+3),i>0&&(s.push(4*((t+o)*e+(t-i))+3),o>0&&s.push(4*((t-o)*e+(t-i))+3))}for(var u=[],o=0,l=n.length;o<l;++o)n[o]&&u.push.apply(u,n[o]);return QE[t]=u,u}(n);function h(t,e){for(var r=c.getImageData(0,0,a,a).data,s=0,u=p.length;s<u;s++)if(r[p[s]]>0){if(!i||f!==LE.IMAGE&&f!==LE.TEXT||-1!==i.indexOf(t)){var l=(p[s]-3)/4,h=n-l%a,y=n-(l/a|0),d=o(t,e,h*h+y*y);if(d)return d}c.clearRect(0,0,a,a);break}}var y,d,v,m,b,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(pm),y=_.length-1;y>=0;--y){var g=_[y].toString();for(v=this.executorsByZIndex_[g],d=XE.length-1;d>=0;--d)if(void 0!==(m=v[f=XE[d]])&&(b=m.executeHitDetection(c,s,r,h,l)))return b}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],o=e[2],i=e[3],a=[r,n,r,i,o,i,o,n];return Bw(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return Vb(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,o,i,a){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(pm),this.maxExtent_&&(t.save(),this.clip(t,r));var u,l,c,f,p,h,y=i||XE;for(a&&s.reverse(),u=0,l=s.length;u<l;++u){var d=s[u].toString();for(p=this.executorsByZIndex_[d],c=0,f=y.length;c<f;++c){void 0!==(h=p[y[c]])&&h.execute(t,e,r,n,o,a)}}this.maxExtent_&&t.restore()},t}(),QE={};var qE=KE,JE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$E=function(t){function e(e,r,n,o,i,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=r,u.extent_=n,u.transform_=o,u.viewRotation_=i,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return JE(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var o=Bw(t,e,r,n,this.transform_,this.pixelCoordinates_),i=this.context_,a=this.tmpLocalTransform_,s=i.globalAlpha;1!=this.imageOpacity_&&(i.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=o.length;l<c;l+=2){var f=o[l]-this.imageAnchorX_,p=o[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var h=f+this.imageAnchorX_,y=p+this.imageAnchorY_;Bm(a,h,y,1,1,u,-h,-y),i.setTransform.apply(i,a),i.translate(h,y),i.scale(this.imageScale_[0],this.imageScale_[1]),i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),i.setTransform(1,0,0,1,0,0)}else i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(i.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Bw(t,e,r,n,this.transform_,this.pixelCoordinates_),i=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=o[e]+this.textOffsetX_,u=o[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var l=Bm(this.tmpLocalTransform_,s,u,1,1,a,-s,-u);i.setTransform.apply(i,l),i.translate(s,u),i.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&i.strokeText(this.text_,0,0),this.textFillState_&&i.fillText(this.text_,0,0),i.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&i.strokeText(this.text_,s,u),this.textFillState_&&i.fillText(this.text_,s,u)}}},e.prototype.moveToLineTo_=function(t,e,r,n,o){var i=this.context_,a=Bw(t,e,r,n,this.transform_,this.pixelCoordinates_);i.moveTo(a[0],a[1]);var s=a.length;o&&(s-=2);for(var u=2;u<s;u+=2)i.lineTo(a[u],a[u+1]);return o&&i.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var o=0,i=r.length;o<i;++o)e=this.moveToLineTo_(t,e,r[o],n,!0);return e},e.prototype.drawCircle=function(t){if(vb(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var o=t.getStride();return Bw(n,0,n.length,o,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(r*r+n*n),i=this.context_;i.beginPath(),i.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Eg.POINT:this.drawPoint(t);break;case Eg.LINE_STRING:this.drawLineString(t);break;case Eg.POLYGON:this.drawPolygon(t);break;case Eg.MULTI_POINT:this.drawMultiPoint(t);break;case Eg.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Eg.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Eg.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Eg.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&vb(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),vb(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(vb(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),o=0,i=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=i.length;s<u;++s)o=this.moveToLineTo_(n,o,i[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),vb(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),vb(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),i=t.getStride();e.beginPath();for(var a=0,s=o.length;a<s;++a){var u=o[a];n=this.drawRings_(r,n,u,i)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(vm(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:"center";r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:$S(n||"#000")}}else this.fillState_=null;if(e){var o=e.getColor(),i=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),u=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),f=a||W_;this.strokeState_={lineCap:void 0!==i?i:"round",lineDash:1===this.pixelRatio_?f:f.map(function(t){return t*r.pixelRatio_}),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==u?u:"round",lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:$S(o||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var r=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:$S(r||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),i=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:"round",lineDash:a||W_,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:$S(o||"#000")}}else this.textStrokeState_=null;var f=t.getFont(),p=t.getOffsetX(),h=t.getOffsetY(),y=t.getRotateWithView(),d=t.getRotation(),v=t.getScaleArray(),m=t.getText(),b=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==f?f:"10px sans-serif",textAlign:void 0!==b?b:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==h?this.pixelRatio_*h:0,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0!==d?d:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""},e}(wE),tT={FRACTION:"fraction",PIXELS:"pixels"},eT={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},rT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nT=null,oT=function(t){function e(e,r,n,o,i,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==o&&(s.image_.crossOrigin=o),s.canvas_={},s.color_=a,s.unlisten_=null,s.imageState_=i,s.size_=n,s.src_=r,s.tainted_,s}return rT(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===$P.LOADED){nT||(nT=M_(1,1)),nT.drawImage(this.image_,0,0);try{nT.getImageData(0,0,1,1),this.tainted_=!1}catch(t){nT=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Xb.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=$P.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=$P.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],r=M_(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==$P.IDLE){this.imageState_=$P.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=bC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var r=e.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=xb(this.color_),r.fillRect(0,0,e.width/t,e.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var n=r.getImageData(0,0,e.width,e.height),o=n.data,i=this.color_[0]/255,a=this.color_[1]/255,s=this.color_[2]/255,u=this.color_[3],l=0,c=o.length;l<c;l+=4)o[l]*=i,o[l+1]*=a,o[l+2]*=s,o[l+3]*=u;r.putImageData(n,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Yb);var iT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aT=function(t){function e(e){var r=this,n=e||{},o=void 0!==n.opacity?n.opacity:1,i=void 0!==n.rotation?n.rotation:0,a=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:o,rotation:i,scale:a,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:eT.TOP_LEFT,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:tT.FRACTION,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:tT.FRACTION,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var u=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Dm(!(void 0!==c&&u),4),Dm(!u||u&&l,5),void 0!==c&&0!==c.length||!u||(c=u.src||Om(u)),Dm(void 0!==c&&c.length>0,6);var f=void 0!==n.src?$P.IDLE:$P.LOADED;return r.color_=void 0!==n.color?Mb(n.color):null,r.iconImage_=function(t,e,r,n,o,i){var a=Bb.get(e,n,i);return a||(a=new oT(t,e,r,n,o,i),Bb.set(e,n,i,a)),a}(u,c,l,r.crossOrigin_,f,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:eT.TOP_LEFT,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return iT(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==tT.FRACTION||this.anchorYUnits_==tT.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==tT.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==tT.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=eT.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=eT.TOP_RIGHT&&this.anchorOrigin_!=eT.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=eT.BOTTOM_LEFT&&this.anchorOrigin_!=eT.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}var r=this.getDisplacement();return t[0]-=r[0],t[1]+=r[1],this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=eT.TOP_LEFT){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),this.offsetOrigin_!=eT.TOP_RIGHT&&this.offsetOrigin_!=eT.BOTTOM_RIGHT||(t[0]=r[0]-e[0]-t[0]),this.offsetOrigin_!=eT.BOTTOM_LEFT&&this.offsetOrigin_!=eT.BOTTOM_RIGHT||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Xb.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Xb.CHANGE,t)},e}(JS),sT=.5;var uT=.5,lT={Point:function(t,e,r,n,o){var i,a=r.getImage(),s=r.getText();o&&(t=o,i=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=$P.LOADED)return;var u=t.getBuilder(r.getZIndex(),LE.IMAGE);u.setImageStyle(a,i),u.drawPoint(e,n)}if(s&&s.getText()){var l=t.getBuilder(r.getZIndex(),LE.TEXT);l.setTextStyle(s,i),l.drawText(e,n)}},LineString:function(t,e,r,n,o){var i=r.getStroke();if(i){var a=t.getBuilder(r.getZIndex(),LE.LINE_STRING);a.setFillStrokeStyle(null,i),a.drawLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(o||t).getBuilder(r.getZIndex(),LE.TEXT);u.setTextStyle(s),u.drawText(e,n)}},Polygon:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(i||a){var s=t.getBuilder(r.getZIndex(),LE.POLYGON);s.setFillStrokeStyle(i,a),s.drawPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),LE.TEXT);l.setTextStyle(u),l.drawText(e,n)}},MultiPoint:function(t,e,r,n,o){var i,a=r.getImage(),s=r.getText();o&&(t=o,i=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=$P.LOADED)return;var u=t.getBuilder(r.getZIndex(),LE.IMAGE);u.setImageStyle(a,i),u.drawMultiPoint(e,n)}if(s&&s.getText()){var l=(o||t).getBuilder(r.getZIndex(),LE.TEXT);l.setTextStyle(s,i),l.drawText(e,n)}},MultiLineString:function(t,e,r,n,o){var i=r.getStroke();if(i){var a=t.getBuilder(r.getZIndex(),LE.LINE_STRING);a.setFillStrokeStyle(null,i),a.drawMultiLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(o||t).getBuilder(r.getZIndex(),LE.TEXT);u.setTextStyle(s),u.drawText(e,n)}},MultiPolygon:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(a||i){var s=t.getBuilder(r.getZIndex(),LE.POLYGON);s.setFillStrokeStyle(i,a),s.drawMultiPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),LE.TEXT);l.setTextStyle(u),l.drawText(e,n)}},GeometryCollection:function(t,e,r,n,o){var i,a,s=e.getGeometriesArray();for(i=0,a=s.length;i<a;++i){var u=lT[s[i].getType()];u(t,s[i],r,n,o)}},Circle:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(i||a){var s=t.getBuilder(r.getZIndex(),LE.CIRCLE);s.setFillStrokeStyle(i,a),s.drawCircle(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),LE.TEXT);l.setTextStyle(u),l.drawText(e,n)}}};function cT(t,e){return parseInt(Om(t),10)-parseInt(Om(e),10)}function fT(t,e){return uT*t/e}function pT(t,e,r,n,o,i,a){var s=!1,u=r.getImage();if(u){var l=u.getImageState();l==$P.LOADED||l==$P.ERROR?u.unlistenImageChange(o):(l==$P.IDLE&&u.load(),l=u.getImageState(),u.listenImageChange(o),s=!0)}return function(t,e,r,n,o,i){var a=r.getGeometryFunction()(e);if(!a)return;var s=a.simplifyTransformed(n,o);if(r.getRenderer())!function t(e,r,n,o){if(r.getType()==Eg.GEOMETRY_COLLECTION){for(var i=r.getGeometries(),a=0,s=i.length;a<s;++a)t(e,i[a],n,o);return}var u=e.getBuilder(n.getZIndex(),LE.DEFAULT);u.drawCustom(r,o,n.getRenderer())}(t,s,r,e);else{var u=lT[s.getType()];u(t,s,r,e,i)}}(t,e,r,n,i,a),s}var hT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yT=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r}return hT(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderWorlds=function(t,e,r){var n=e.extent,o=e.viewState,i=o.center,a=o.resolution,s=o.projection,u=o.rotation,l=s.getExtent(),c=this.getLayer().getSource(),f=e.pixelRatio,p=e.viewHints,h=!(p[Ag]||p[Rg]),y=this.context,d=Math.round(e.size[0]*f),v=Math.round(e.size[1]*f),m=c.getWrapX()&&s.canWrapX(),b=m?db(l):null,_=m?Math.ceil((n[2]-l[2])/b)+1:1,g=m?Math.floor((n[0]-l[0])/b):0;do{var w=this.getRenderTransform(i,a,u,f,d,v,g*b);t.execute(y,1,w,u,h,void 0,r)}while(++g<_)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){Nm(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),Wm(this.inversePixelTransform,this.pixelTransform);var o=Gm(this.pixelTransform);this.useContainer(e,o,n.opacity);var i=this.context,a=i.canvas,s=this.replayGroup_,u=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!u||u.isEmpty()))return!this.containerReused&&a.width>0&&(a.width=0),this.container;var l=Math.round(t.size[0]*r),c=Math.round(t.size[1]*r);a.width!=l||a.height!=c?(a.width=l,a.height=c,a.style.transform!==o&&(a.style.transform=o)):this.containerReused||i.clearRect(0,0,l,c),this.preRender(i,t);var f=t.viewState,p=f.projection,h=!1,y=!0;if(n.extent&&this.clipping){var d=Ew(n.extent,p);(h=(y=vb(d,t.extent))&&!Km(d,t.extent))&&this.clipUnrotated(i,t,d)}y&&this.renderWorlds(s,t),h&&i.restore(),this.postRender(i,t);var v=n.opacity,m=this.container;return v!==parseFloat(m.style.opacity)&&(m.style.opacity=1===v?"":String(v)),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];Fm(this.pixelTransform,r);var n=this.renderedCenter_,o=this.renderedResolution_,i=this.renderedRotation_,a=this.renderedProjection_,s=this.wrappedRenderedExtent_,u=this.getLayer(),l=[],c=r[0]*sT,f=r[1]*sT;l.push(this.getRenderTransform(n,o,i,sT,c,f,0).slice());var p=u.getSource(),h=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Km(h,s)){for(var y=s[0],d=db(h),v=0,m=void 0;y<h[0];)m=d*--v,l.push(this.getRenderTransform(n,o,i,sT,c,f,m).slice()),y+=d;for(v=0,y=s[2];y>h[2];)m=d*++v,l.push(this.getRenderTransform(n,o,i,sT,c,f,m).slice()),y-=d}this.hitDetectionImageData_=function(t,e,r,n,o,i,a){var s=M_(t[0]*sT,t[1]*sT);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new $E(s,sT,o,null,a),c=r.length,f=Math.floor(16777215/c),p={},h=1;h<=c;++h){var y=r[h-1],d=y.getStyleFunction()||n;if(n){var v=d(y,i);if(v){Array.isArray(v)||(v=[v]);for(var m="#"+("000000"+(h*f).toString(16)).slice(-6),b=0,_=v.length;b<_;++b){var g=v[b],w=g.getGeometryFunction()(y);if(w&&vb(o,w.getExtent())){var O=g.clone(),P=O.getFill();P&&P.setColor(m);var C=O.getStroke();C&&(C.setColor(m),C.setLineDash(null)),O.setText(void 0);var S=g.getImage();if(S&&0!==S.getOpacity()){var E=S.getImageSize();if(!E)continue;var T=M_(E[0],E[1],void 0,{alpha:!1}),j=T.canvas;T.fillStyle=m,T.fillRect(0,0,j.width,j.height),O.setImage(new aT({img:j,imgSize:E,anchor:S.getAnchor(),anchorXUnits:tT.PIXELS,anchorYUnits:tT.PIXELS,offset:S.getOrigin(),opacity:1,size:S.getSize(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var x=O.getZIndex()||0;(k=p[x])||(k={},p[x]=k,k[Eg.POLYGON]=[],k[Eg.CIRCLE]=[],k[Eg.LINE_STRING]=[],k[Eg.POINT]=[]),k[w.getType().replace("Multi","")].push(w,O)}}}}}for(var A=Object.keys(p).map(Number).sort(pm),R=(h=0,A.length);h<R;++h){var k=p[A[h]];for(var I in k){var M=k[I];for(b=0,_=M.length;b<_;b+=2){l.setStyle(M[b+1]);for(var D=0,L=e.length;D<L;++D)l.setTransform(e[D]),l.drawGeometry(M[b])}}}return s.getImageData(0,0,u.width,u.height)}(r,l,this.renderedFeatures_,u.getStyleFunction(),s,o,i)}e(function(t,e,r){var n=[];if(r){var o=Math.floor(Math.round(t[0])*sT),i=Math.floor(Math.round(t[1])*sT),a=4*(_b(o,0,r.width-1)+_b(i,0,r.height-1)*r.width),s=r.data[a],u=r.data[a+1],l=r.data[a+2]+256*(u+256*s),c=Math.floor(16777215/e.length);l&&l%c==0&&n.push(e[l/c-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o){var i=this;if(this.replayGroup_){var a,s=e.viewState.resolution,u=e.viewState.rotation,l=this.getLayer(),c={},f=function(t,e,r){var i=Om(t),a=c[i];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[i]=!0,o.splice(o.lastIndexOf(a),1),n(t,l,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return c[i]=!0,n(t,l,e);o.push(c[i]={feature:t,layer:l,geometry:e,distanceSq:r,callback:n})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(function(n){return a=n.forEachFeatureAtCoordinate(t,s,u,r,f,n===i.declutterExecutorGroup?e.declutterTree.all().map(function(t){return t.value}):null)}),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[Ag],o=t.viewHints[Rg],i=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!i&&n||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,l=u.projection,c=u.resolution,f=t.pixelRatio,p=e.getRevision(),h=e.getRenderBuffer(),y=e.getRenderOrder();void 0===y&&(y=cT);var d=u.center.slice(),v=Vm(s,h*c),m=v.slice(),b=[v.slice()],_=l.getExtent();if(r.getWrapX()&&l.canWrapX()&&!Km(_,t.extent)){var g=db(_),w=Math.max(db(v)/2,g);v[0]=_[0]-w,v[2]=_[2]+w,__(d,l);var O=function(t,e){var r=e.getExtent(),n=lb(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var o=db(r),i=Math.floor((n[0]-r[0])/o)*o;t[0]-=i,t[2]-=i}return t}(b[0],l);O[0]<_[0]&&O[2]<_[2]?b.push([O[0]+g,O[1],O[2]+g,O[3]]):O[0]>_[0]&&O[2]>_[2]&&b.push([O[0]-g,O[1],O[2]-g,O[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==y&&Km(this.wrappedRenderedExtent_,v))return vm(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=d,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var P,C=new DE(fT(c,f),v,c,f);this.getLayer().getDeclutter()&&(P=new DE(fT(c,f),v,c,f));var S,E=Ow();if(E){for(var T=0,j=b.length;T<j;++T)r.loadFeatures(Sw(b[T],l),c,E);S=yw(E,l)}else for(T=0,j=b.length;T<j;++T)r.loadFeatures(b[T],c,l);var x=function(t,e){var r=fT(t,e);return r*r}(c,f),A=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,c)),r){var o=this.renderFeature(t,x,r,C,S,P);this.dirty_=this.dirty_||o}}.bind(this),R=Sw(v,l),k=r.getFeaturesInExtent(R);y&&k.sort(y);for(T=0,j=k.length;T<j;++T)A(k[T]);this.renderedFeatures_=k;var I=C.finish(),M=new qE(v,c,f,r.getOverlaps(),I,e.getRenderBuffer());return P&&(this.declutterExecutorGroup=new qE(v,c,f,r.getOverlaps(),P.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=y,this.renderedExtent_=m,this.wrappedRenderedExtent_=v,this.renderedCenter_=d,this.renderedProjection_=l,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,o,i){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,u=r.length;s<u;++s)a=pT(n,t,r[s],e,this.boundHandleStyleImageChange_,o,i)||a;else a=pT(n,t,r,e,this.boundHandleStyleImageChange_,o,i);return a},e}(nC),dT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vT=function(t){function e(e){return t.call(this,e)||this}return dT(e,t),e.prototype.createRenderer=function(){return new yT(this)},e}(yE);Object.create||function(){function t(){}}();var mT=0;function bT(t){return"_leaflet_id"in t||(t._leaflet_id=++mT),t._leaflet_id}function _T(){return!1}function gT(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function wT(t){return gT(t).split(/\s+/)}Array.isArray;function OT(t){return window["webkit".concat(t)]||window["moz".concat(t)]||window["ms".concat(t)]}var PT=0;function CT(t){var e=+new Date,r=Math.max(0,16-(e-PT));return PT=e+r,window.setTimeout(t,r)}var ST=window.requestAnimationFrame||OT("RequestAnimationFrame")||CT;window.cancelAnimationFrame||OT("CancelAnimationFrame")||OT("CancelRequestAnimationFrame");function ET(t,e,r){if(!r||ST!==CT)return ST.call(window,t.bind(e));t.call(e)}var TT=document.documentElement.style,jT=GT("webkit"),xT=GT("chrome"),AT=GT("gecko")&&!jT,RT=!xT&&GT("safari"),kT=navigator.platform.startsWith("Win"),IT="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,MT="MozPerspective"in TT,DT=!window.L_DISABLE_3D&&(IT||MT),LT="undefined"!=typeof orientation||GT("mobile"),NT=LT&&jT,FT=LT&&IT,BT=!!window.PointerEvent,WT="ontouchstart"in window||!!window.TouchEvent;function GT(t){return navigator.userAgent.toLowerCase().includes(t)}var zT={webkit:jT,chrome:xT,gecko:AT,safari:RT,win:kT,webkit3d:IT,gecko3d:MT,any3d:DT,mobile:LT,mobileWebkit:NT,mobileWebkit3d:FT,pointer:BT,touch:!window.L_NO_TOUCH&&(WT||BT),touchNative:WT,mobileGecko:LT&&AT,retina:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,passiveEvents:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_T,e),window.removeEventListener("testPassiveEventSupport",_T,e)}catch(t){}return t}(),canvas:!!document.createElement("canvas").getContext,mac:navigator.platform.startsWith("Mac"),linux:navigator.platform.startsWith("Linux")},HT={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},UT={touchstart:function(t,e){qT(t,e)},touchmove:qT,touchend:qT,touchcancel:qT},VT={},ZT=!1;function YT(t,e,r){return"touchstart"===e&&(ZT||(document.addEventListener("pointerdown",XT,!0),document.addEventListener("pointermove",KT,!0),document.addEventListener("pointerup",QT,!0),document.addEventListener("pointercancel",QT,!0),ZT=!0)),UT[e]?(r=UT[e].bind(this,r),t.addEventListener(HT[e],r,!1),r):(console.warn("wrong event specified:",e),_T)}function XT(t){VT[t.pointerId]=t}function KT(t){VT[t.pointerId]&&(VT[t.pointerId]=t)}function QT(t){delete VT[t.pointerId]}function qT(t,e){if("mouse"!==e.pointerType){for(var r in e.touches=[],VT)e.touches.push(VT[r]);e.changedTouches=[e],t(e)}}var JT=200;var $T,tj,ej,rj,nj,oj=gj(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ij=gj(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),aj="webkitTransition"===ij||"OTransition"===ij?"".concat(ij,"End"):"transitionend";function sj(t){return"string"==typeof t?document.getElementById(t):t}function uj(t,e){var r=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!r||"auto"===r)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);r=n?n[e]:null}return"auto"===r?null:r}function lj(t,e,r){var n=document.createElement(t);return n.className=e||"",r&&r.appendChild(n),n}function cj(t){var e=t.parentNode;e&&e.removeChild(t)}function fj(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pj(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function hj(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function yj(t,e){if(void 0!==t.classList)return t.classList.contains(e);var r=bj(t);return r.length>0&&new RegExp("(^|\\s)".concat(e,"(\\s|$)")).test(r)}function dj(t,e){if(void 0!==t.classList)for(var r=wT(e),n=0,o=r.length;n<o;n++)t.classList.add(r[n]);else if(!yj(t,e)){var i=bj(t);mj(t,(i?"".concat(i," "):"")+e)}}function vj(t,e){void 0!==t.classList?t.classList.remove(e):mj(t,gT(" ".concat(bj(t)," ").replace(" ".concat(e," ")," ")))}function mj(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function bj(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function _j(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var r=!1,n="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),r?(r.Enabled=100!==e,r.Opacity=e):t.style.filter+=" progid:".concat(n,"(opacity=").concat(e,")")}(t,e)}function gj(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}if("onselectstart"in document)$T=function(){xj(window,"selectstart",Bj)},tj=function(){Rj(window,"selectstart",Bj)};else{var wj=gj(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$T=function(){if(wj){var t=document.documentElement.style;ej=t[wj],t[wj]="none"}},tj=function(){wj&&(document.documentElement.style[wj]=ej,ej=void 0)}}function Oj(){xj(window,"dragstart",Bj)}function Pj(){Rj(window,"dragstart",Bj)}function Cj(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Sj(),rj=t,nj=t.style.outline,t.style.outline="none",xj(window,"keydown",Sj))}function Sj(){rj&&(rj.style.outline=nj,rj=void 0,nj=void 0,Rj(window,"keydown",Sj))}function Ej(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Tj(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function jj(t){"@babel/helpers - typeof";return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xj(t,e,r,n){if(e&&"object"===jj(e))for(var o in e)Mj(t,o,e[o],r);else for(var i=0,a=(e=wT(e)).length;i<a;i++)Mj(t,e[i],r,n);return this}var Aj="_leaflet_events";function Rj(t,e,r,n){if(1===arguments.length)kj(t),delete t[Aj];else if(e&&"object"===jj(e))for(var o in e)Dj(t,o,e[o],r);else if(e=wT(e),2===arguments.length)kj(t,function(t){return e.includes(t)});else for(var i=0,a=e.length;i<a;i++)Dj(t,e[i],r,n);return this}function kj(t,e){for(var r in t[Aj]){var n=r.split(/\d/)[0];e&&!e(n)||Dj(t,n,null,null,r)}}var Ij={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Mj(t,e,r,n){var o=e+bT(r)+(n?"_".concat(bT(n)):"");if(t[Aj]&&t[Aj][o])return this;var i=function(e){return r.call(n||t,e||window.event)},a=i;!zT.touchNative&&zT.pointer&&e.startsWith("touch")?i=YT(t,e,i):zT.touch&&"dblclick"===e?i=function(t,e){t.addEventListener("dblclick",e);var r,n=0;function o(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var o=Gj(t);if(!o.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||o.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var i=Date.now();i-n<=JT?2==++r&&e(function(t){var e,r,n={};for(r in t)e=t[r],n[r]=e&&e.bind?e.bind(t):e;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(t)):r=1,n=i}}}else r=t.detail}return t.addEventListener("click",o),{dblclick:e,simDblclick:o}}(t,i):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ij[e]||e,i,!!zT.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(i=function(e){e=e||window.event,Vj(t,e)&&a(e)},t.addEventListener(Ij[e],i,!1)):t.addEventListener(e,a,!1):t.attachEvent("on".concat(e),i),t[Aj]=t[Aj]||{},t[Aj][o]=i}function Dj(t,e,r,n,o){o=o||e+bT(r)+(n?"_".concat(bT(n)):"");var i=t[Aj]&&t[Aj][o];if(!i)return this;!zT.touchNative&&zT.pointer&&e.startsWith("touch")?function(t,e,r){HT[e]?t.removeEventListener(HT[e],r,!1):console.warn("wrong event specified:",e)}(t,e,i):zT.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,i):"removeEventListener"in t?t.removeEventListener(Ij[e]||e,i,!1):t.detachEvent("on".concat(e),i),t[Aj][o]=null}function Lj(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Nj(t){return Mj(t,"wheel",Lj),this}function Fj(t){return xj(t,"mousedown touchstart dblclick contextmenu",Lj),t._leaflet_disable_click=!0,this}function Bj(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Wj(t){return Bj(t),Lj(t),this}function Gj(t){if(t.composedPath)return t.composedPath();for(var e=[],r=t.target;r;)e.push(r),r=r.parentNode;return e}function zj(t,e){if(!e)return new Point(t.clientX,t.clientY);var r=Tj(e),n=r.boundingClientRect;return new Point((t.clientX-n.left)/r.x-e.clientLeft,(t.clientY-n.top)/r.y-e.clientTop)}function Hj(){var t=window.devicePixelRatio;return zT.linux&&zT.chrome?t:zT.mac?3*t:t>0?2*t:1}function Uj(t){return t.deltaY&&0===t.deltaMode?-t.deltaY/Hj():t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Vj(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch(t){return!1}return r!==t}function Zj(t){"@babel/helpers - typeof";return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Zj(i=function(t,e){if("object"!==Zj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Xj={position:"bottomleft",toggleDisplay:!0,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!0,zoomControl:!1,zoomAnimation:!0,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,fillOpacity:0,interactive:!1},shadowRectOptions:{color:"#000000",weight:1,interactive:!1,opacity:0,fillOpacity:0},strings:{hideText:"隐藏鹰眼",showText:"显示鹰眼"},mapOptions:{toggleDisplay:!0,aimingRectOptions:{color:"#ff0",weight:3},shadowRectOptions:{color:"#0000AA",weight:1,opacity:0,fillOpacity:0}}},Kj=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=null,this._miniMap=null,this._viewerMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.viewer=e,this.tileLayers=n.urls.map(function(t){return new kS(t)}),this._container=n.container,this.options=Xj,Object.assign(this.options,n),this.options.aimingRectOptions.interactive=!1,this.options.shadowRectOptions.interactive=!1,this._initMap(),this._showInitView()}var e,r,n;return e=t,(r=[{key:"updateAimingRect",value:function(){var t=this._getViewRange();this._aimingRect.setBounds(t)}},{key:"_initMap",value:function(){var t=this,e=this,r={attributionControl:!1,dragging:!e.options.centerFixed,zoomControl:e.options.zoomControl,zoomAnimation:e.options.zoomAnimation,autoToggleDisplay:e.options.autoToggleDisplay,touchZoom:e.options.centerFixed?"center":!e._isZoomLevelFixed(),scrollWheelZoom:e.options.centerFixed?"center":!e._isZoomLevelFixed(),doubleClickZoom:e.options.centerFixed?"center":!e._isZoomLevelFixed(),boxZoom:!e._isZoomLevelFixed(),crs:"EPSG:4326",center:[0,0],zoom:1};return r=function(t){for(var e,r,n,o,i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];for(r=0,n=a.length;r<n;r++)for(e in o=a[r])t[e]=o[e];return t}(e.options.mapOptions,r),e._miniMap=new XP({layers:e.tileLayers,overlays:[],target:e._container,view:new IO({center:r.center||[0,0],projection:r.crs||"EPSG:4326",zoom:r.zoom||0}),interactions:ZP({mouseWheelZoom:!1,doubleClickZoom:!1,shiftDragZoom:!1,dragPan:!1}),controls:XO({zoom:!1,rotate:!1,attribution:!1})}),e._viewerMoving=!0,e._miniMapMoving=!1,e._userToggledDisplay=!1,e._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),e._miniMap.once("postcompose",function(r){var n=e._getViewRange();t._aimingRect=new MS(new EO([e.getPolygonByBbox(n)]));var o=new qS({features:[t._aimingRect]}),i=new vT({source:o,style:new fE({stroke:new iE({color:"red",width:2}),fill:new oE({color:"rgba(255, 0, 0, 0.0)"})})});t._miniMap.addLayer(i),e.viewer.scene.camera.changed.addEventListener(function(t){var r=e._getViewRange();if(e._miniMapMoving)e._miniMapMoving=!1;else{e._viewerMoving=!0;var n=e._getZoomOutRange(r);n&&(e._miniMap.getView().fit(n),e._setDisplay(e._decideMinimized()))}if(r){var o=e.getPolygonByBbox(r);e._aimingRect.setGeometry(new EO(o))}})}),e._container}},{key:"getPolygonByBbox",value:function(t){return[[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],[t[0],t[1]]]]}},{key:"_addToggleButton",value:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"}},{key:"_toggleButtonInitialTitleText",value:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText}},{key:"_createButton",value:function(t,e,r,n,o,s){var u=i.create("a",r,n);u.innerHTML=t,u.href="#",u.title=e;var l=a.stopPropagation;return a.on(u,"click",l).on(u,"mousedown",l).on(u,"dblclick",l).on(u,"click",a.preventDefault).on(u,"click",o,s),u}},{key:"_toggleDisplayButtonClicked",value:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()}},{key:"_showInitView",value:function(){var t=this._getViewRange(),e=this._getZoomOutRange(t);e&&this._miniMap.getView().fit(e)}},{key:"_setDisplay",value:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())}},{key:"_minimize",value:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()}},{key:"_restore",value:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()}},{key:"_onMiniMapMoveStarted",value:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),r=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:r,ne:n}}}},{key:"_onMiniMapMoving",value:function(t){this.options.centerFixed||!this._viewerMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new L.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))}},{key:"_onMiniMapMoved",value:function(t){if(this._viewerMoving)this._viewerMoving=!1;else{this._miniMapMoving=!0;var e=this._shadowRect.getBounds(),r=e.getWest(),n=e.getEast(),o=e.getNorth(),i=e.getSouth(),a=Cesium.Rectangle.fromDegrees(r,i,n,o),s={heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0};this.viewer.scene.camera.setView({destination:a,orientation:s}),this._shadowRect.setStyle({opacity:0,fillOpacity:0})}}},{key:"_isZoomLevelFixed",value:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)}},{key:"_decideMinimized",value:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._getViewRange().contains(this._miniMap.getBounds()):this._minimized}},{key:"_isInteger",value:function(t){return"number"==typeof t}},{key:"_isDefined",value:function(t){return void 0!==t}},{key:"_onToggle",value:function(){ET(function(){a.on(this._container,"transitionend",this._fireToggleEvents,this),zT.any3d||ET(this._fireToggleEvents,this)},this)}},{key:"_fireToggleEvents",value:function(){a.off(this._container,"transitionend",this._fireToggleEvents,this)}},{key:"_getViewRange",value:function(){var t=null,e=this.viewer.scene.camera.computeViewRectangle();if(e){var r=e.west/Math.PI*180,n=e.east/Math.PI*180,o=e.north/Math.PI*180;t=[r,e.south/Math.PI*180,n,o]}return t}},{key:"_getZoomOutRange",value:function(t){var e=null;if(t){var r=t[0],n=t[2],o=t[3],i=t[1],a=2*Math.abs(n-r)/2,s=2*Math.abs(o-i)/2;n+=a,o+=s,i-=s,(r-=a)<-180&&(r=-180),n>180&&(n=180),o>90&&(o=90),i<-90&&(i=-90),e=[r,i,n,o]}return e}},{key:"bindMinimap",value:function(t,e,r){var n=this;new Cesium.ScreenSpaceEventHandler(t.scene.canvas).setInputAction(function(o){var i,a=t.camera.getPickRay(o.endPosition);i=t.scene.globe.pick(a,t.scene);var s=n.getViewRect(t,t.scene.camera,e,r);Cesium.defined(i)&&(Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(i).longitude),Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(i).latitude),n.getZoomLevel(t.scene.camera),n._shadowPolygon?n._shadowPolygon.setLatLngs([s]):n._shadowPolygon=L.polygon([s]).addTo(n._miniMap))},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"getViewRect",value:function(t,e,r,n){var o=void 0,i=void 0,a=[];return i=t.camera.getPickRay(new Cesium.Cartesian2(0,0)),o=t.scene.globe.pick(i,t.scene),Cesium.defined(o)?(a.push([Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).latitude),Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).longitude)]),i=t.camera.getPickRay(new Cesium.Cartesian2(0,n)),o=t.scene.globe.pick(i,t.scene),Cesium.defined(o)?(a.push([Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).latitude),Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).longitude)]),i=t.camera.getPickRay(new Cesium.Cartesian2(r,n)),o=t.scene.globe.pick(i,t.scene),Cesium.defined(o)?(a.push([Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).latitude),Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).longitude)]),i=t.camera.getPickRay(new Cesium.Cartesian2(r,0)),o=t.scene.globe.pick(i,t.scene),Cesium.defined(o)?(a.push([Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).latitude),Cesium.Math.toDegrees(Cesium.Cartographic.fromCartesian(o).longitude)]),a):[]):[]):[]):[]}},{key:"getZoomLevel",value:function(t){var e=t.positionCartographic.height;return e<=100?19:e<=300?18:e<=660?17:e<=1300?16:e<=2600?15:e<=6400?14:e<=13200?13:e<=26e3?12:e<=67985?11:e<=139780?10:e<=250600?9:e<=38e4?8:e<=64e4?7:e<=128e4?6:e<=26e5?5:e<=61e5?4:e<=119e5?3:2}}])&&Yj(e.prototype,r),n&&Yj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qj(t){"@babel/helpers - typeof";return(Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Qj(i=function(t,e){if("object"!==Qj(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Qj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Jj=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"BD09ToGCJ02",value:function(t,e){var r=+t-.0065,n=+e-.006,o=Math.sqrt(r*r+n*n)-2e-5*Math.sin(52.35987755982988*n),i=Math.atan2(n,r)-3e-6*Math.cos(52.35987755982988*r);return[o*Math.cos(i),o*Math.sin(i)]}},{key:"GCJ02ToBD09",value:function(t,e){e=+e,t=+t;var r=Math.sqrt(t*t+e*e)+2e-5*Math.sin(52.35987755982988*e),n=Math.atan2(e,t)+3e-6*Math.cos(52.35987755982988*t);return[r*Math.cos(n)+.0065,r*Math.sin(n)+.006]}},{key:"WGS84ToGCJ02",value:function(t,e){if(e=+e,t=+t,this.out_of_china(t,e))return[t,e];var r=this.delta(t,e);return[t+r[0],e+r[1]]}},{key:"GCJ02ToWGS84",value:function(t,e){if(e=+e,t=+t,this.out_of_china(t,e))return[t,e];var r=this.delta(t,e);return[2*t-(t+r[0]),2*e-(e+r[1])]}},{key:"delta",value:function(t,e){var r=this.transformLng(t-105,e-35),n=this.transformLat(t-105,e-35),o=e/180*3.141592653589793,i=Math.sin(o);i=1-.006693421622965943*i*i;var a=Math.sqrt(i);return[r=180*r/(6378245/a*Math.cos(o)*3.141592653589793),n=180*n/(6335552.717000426/(i*a)*3.141592653589793)]}},{key:"transformLng",value:function(t,e){var r=300+(t=+t)+2*(e=+e)+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*3.141592653589793)+20*Math.sin(2*t*3.141592653589793))/3,r+=2*(20*Math.sin(3.141592653589793*t)+40*Math.sin(t/3*3.141592653589793))/3,r+=2*(150*Math.sin(t/12*3.141592653589793)+300*Math.sin(t/30*3.141592653589793))/3}},{key:"transformLat",value:function(t,e){var r=2*(t=+t)-100+3*(e=+e)+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*3.141592653589793)+20*Math.sin(2*t*3.141592653589793))/3,r+=2*(20*Math.sin(3.141592653589793*e)+40*Math.sin(e/3*3.141592653589793))/3,r+=2*(160*Math.sin(e/12*3.141592653589793)+320*Math.sin(3.141592653589793*e/30))/3}},{key:"out_of_china",value:function(t,e){return e=+e,!((t=+t)>73.66&&t<135.05&&e>3.86&&e<53.55)}}],(r=null)&&qj(e.prototype,r),n&&qj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $j(t){"@babel/helpers - typeof";return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===$j(i=function(t,e){if("object"!==$j(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function ex(t,e){return(ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nx(t);if(e){var o=nx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nx(t){return(nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ox=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ex(t,e)}(i,Cesium.WebMercatorTilingScheme);var e,r,n,o=rx(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t);var r=new Cesium.WebMercatorProjection;return e._projection.project=function(t,e){return e=Jj.WGS84ToGCJ02(Cesium.Math.toDegrees(t.longitude),Cesium.Math.toDegrees(t.latitude)),e=r.project(new Cesium.Cartographic(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))),new Cesium.Cartesian2(e.x,e.y)},e._projection.unproject=function(t,e){var n=r.unproject(t);return e=Jj.GCJ02ToWGS84(Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude)),new Cesium.Cartographic(Cesium.Math.toRadians(e[0]),Cesium.Math.toRadians(e[1]))},e}return e=i,r&&tx(e.prototype,r),n&&tx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function ix(t){"@babel/helpers - typeof";return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ix(i=function(t,e){if("object"!==ix(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ix(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function sx(t,e){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lx(t);if(e){var o=lx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ix(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lx(t){return(lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cx={img:"//webst{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",elec:"//webrd{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",cva:"//webst{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},fx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}(i,Cesium.UrlTemplateImageryProvider);var e,r,n,o=ux(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.url=t.url||[t.protocol||"",cx[t.style]||cx.elec].join(""),t.subdomains&&t.subdomains.length||(t.subdomains=["01","02","03","04"]),"WGS84"===t.crs&&(t.tilingScheme=new ox),o.call(this,t)}return e=i,r&&ax(e.prototype,r),n&&ax(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function px(t){"@babel/helpers - typeof";return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function yx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hx(Object(r),!0).forEach(function(e){dx(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hx(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function dx(t,e,r){return(e=mx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mx(n.key),n)}}function mx(t){var e=function(t,e){if("object"!==px(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==px(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===px(e)?e:String(e)}var bx=function(t,e,r){return e&&vx(t.prototype,e),r&&vx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r,n=e.minLevel>0?e.minLevel-1:0,o=e.maxLevel?e.maxLevel:18;r=e.showArea?[Number(e.showArea.split(",")[0]),Number(e.showArea.split(",")[1]),Number(e.showArea.split(",")[2]),Number(e.showArea.split(",")[3])]:[-180,-90,180,90];var i,a={url:e.url,rectangle:Cesium.Rectangle.fromDegrees(r[0],r[1],r[2],r[3])};switch("4326"==e.crs&&(a.tilingScheme=new Cesium.GeographicTilingScheme({ellipsoid:Cesium.Ellipsoid.WGS84})),e.mapServerType||"TMS"){case"TMS":i=new Cesium.ImageryLayer(new Cesium.UrlTemplateImageryProvider(a),{minimumTerrainLevel:n,maximumLevel:o});break;case"WMS":a.parameters={service:e.service,format:e.format,transparent:void 0==e.transparent||e.transparent},a.layers=e.layers,i=new Cesium.ImageryLayer(new Cesium.WebMapServiceImageryProvider(a),{minimumTerrainLevel:n,maximumLevel:o});break;case"WMTS":i=new Cesium.ImageryLayer(new Cesium.WebMapTileServiceImageryProvider(a),{minimumTerrainLevel:n,maximumLevel:o});break;case"AWMS":delete a.rectangle,i=new Cesium.ImageryLayer(new Cesium.ArcGisMapServerImageryProvider(a),{minimumTerrainLevel:n,maximumLevel:o});break;case"AWMTS":a.layer=e.layers?e.layers:"0",a.style=e.style?e.layers:"default",a.format=e.format?e.format:"image/jpeg",a.url=e.url+"/WMTS",delete a.rectangle,i=new Cesium.ImageryLayer(new Cesium.WebMapTileServiceImageryProvider(a),{minimumTerrainLevel:n,maximumLevel:o});break;case"ATMS":i=new Cesium.ImageryLayer(new fx(yx(yx({},a),{},{crs:"WGS84"})),{minimumTerrainLevel:n,maximumLevel:o})}return i});function _x(t){"@babel/helpers - typeof";return(_x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===_x(i=function(t,e){if("object"!==_x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function wx(t,e){return(wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ox(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Px(t);if(e){var o=Px(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Px(t){return(Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wx(t,e)}(i,oe);var e,r,n,o=Ox(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._delegate=new Cesium.PrimitiveCollection,e._state=Dt.INITIALIZED,e}return e=i,(r=[{key:"type",get:function(){return oe.getLayerType("tileset")}},{key:"_onAdd",value:function(t){this._viewer=t.viewer,this._delegate&&(this._delegate instanceof Cesium.PrimitiveCollection?this._isGround?this._viewer.scene.groundPrimitives.add(this._delegate):this._viewer.scene.primitives.add(this._delegate):this._viewer.dataSources.add(this._delegate),this._addedHook&&this._addedHook(),this._state=Dt.ADDED)}},{key:"clear",value:function(){return this._delegate.removeAll(),this._cache={},this._state=Dt.CLEARED,this}}])&&gx(e.prototype,r),n&&gx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();oe.registerType("tileset");var Sx=Cx;function Ex(t){"@babel/helpers - typeof";return(Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Ex(i=function(t,e){if("object"!==Ex(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ex(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var jx=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wrapper=zt.create("div","steering-wheel",e),this._map3d=r,this._outRing=void 0,this._state=Dt.INITIALIZED,this._mountContent()}var e,r,n;return e=t,(r=[{key:"_installHook",value:function(){Object.defineProperty(this._map3d,"zoomCompass",{value:this,writable:!1}),this._wrapper.onmousedown=function(t){},this._wrapper.ondblclick=function(t){}}},{key:"_bindEvent",value:function(){var t=this;this._map3d.on(g,this._postRenderHandler,this),this._left.onmousedown=function(e){t._type="left",t._center=t._getCenter(),t._range=t._getRange(),t._flyAroundThePoint()},this._left.onmouseout=function(e){t._center=null,t._range=null,t._type=null,t.closeFlyAroundThePoint()},this._left.onmouseup=function(e){t._center=null,t._range=null,t._type=null,t.closeFlyAroundThePoint()},this._right.onmousedown=function(e){t._type="right",t._center=t._getCenter(),t._range=t._getRange(),t._flyAroundThePoint()},this._right.onmouseup=function(e){t._center=null,t._range=null,t._type=null,t.closeFlyAroundThePoint()},this._up.onmousedown=function(e){t._type="up",t._center=t._getCenter(),t._range=t._getRange(),t._flyAroundThePoint()},this._up.onmouseup=function(e){t._center=null,t._range=null,t._type=null,t.closeFlyAroundThePoint()},this._down.onmousedown=function(e){t._type="down",t._center=t._getCenter(),t._range=t._getRange(),t._flyAroundThePoint()},this._down.onmouseup=function(e){t._center=null,t._range=null,t._type=null,t.closeFlyAroundThePoint()},this._pan.ondblclick=function(e){t._center=null,t._range=null,t._type=null,t._handleDoubleClick()},this._add.onclick=function(){t._zoomIn()},this._sub.onclick=function(){t._zoomOut()}}},{key:"_unbindEvent",value:function(){this._map3d.off(g,this._postRenderHandler,this)}},{key:"_postRenderHandler",value:function(){var t=Cesium.Math.toDegrees(this._map3d.viewer.camera.heading),e=Cesium.Math.toDegrees(this._map3d.viewer.camera.pitch);this._pan.style.transform="rotateX("+(90+e)+"deg) rotate("+(180-t)+"deg)"}},{key:"_handleDoubleClick",value:function(){var t=this._map3d.viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs)return!0;if(t.mode!==Cesium.SceneMode.COLUMBUS_VIEW||r.enableTranslate){if(t.mode===Cesium.SceneMode.SCENE3D||t.mode===Cesium.SceneMode.COLUMBUS_VIEW){if(!r.enableLook)return;if(t.mode===Cesium.SceneMode.SCENE3D&&!r.enableRotate)return}var n=this._getCameraFocus(!0);if(n){var o=t.globe.ellipsoid.cartographicToCartesian(e.positionCartographic),i=t.globe.ellipsoid.geodeticSurfaceNormal(n),a=new Cesium.BoundingSphere(n,0);e.flyToBoundingSphere(a,{offset:new Cesium.HeadingPitchRange(0,Cesium.Math.PI_OVER_TWO-Cesium.Cartesian3.angleBetween(i,e.directionWC),Cesium.Cartesian3.distance(o,n)),duration:1.5})}}}},{key:"_getCameraFocus",value:function(t){var e=new Cesium.Cartesian3,r=this._map3d.viewer.scene,n=r.camera;if(r.mode!==Cesium.SceneMode.MORPHING){if(this._map3d.viewer.trackedEntity)e=this._map3d.viewer.trackedEntity.position.getValue(this._map3d.viewer.clock.currentTime);else{var o=new Cesium.Ray;o.origin=n.positionWC,o.direction=n.directionWC,e=r.globe.pick(o,r)}if(e){if(r.mode===Cesium.SceneMode.SCENE2D||r.mode===Cesium.SceneMode.COLUMBUS_VIEW){e=n.worldToCameraCoordinatesPoint(e);var i=new Cesium.Cartographic;t&&(e=r.globe.ellipsoid.cartographicToCartesian(r.mapProjection.unproject(e,i)))}else t||(e=n.worldToCameraCoordinatesPoint(e));return e}}}},{key:"_mountContent",value:function(){var t=zt.create("div","steering-wheel-ring");this._wrapper.appendChild(t),this._pan=zt.create("div","steering-wheel-pan",t),this._left=zt.create("div","steering-wheel-left",t),this._right=zt.create("div","steering-wheel-right",t),this._up=zt.create("div","steering-wheel-up",t),this._down=zt.create("div","steering-wheel-down",t),this._add=zt.create("div","steering-wheel-add",this._wrapper),this._sub=zt.create("div","steering-wheel-sub",this._wrapper),this._bindEvent(),this._ready=!0}},{key:"_getCenter",value:function(){var t=[.5*this._map3d.getCanvas().width,.5*this._map3d.getCanvas().height];return this._screenPos(t[0],t[1])}},{key:"_getRange",value:function(){var t=this._map3d.viewer.scene.camera,e=this._map3d.viewer.scene.globe.ellipsoid.cartesianToCartographic(t.position),r=Cesium.Math.toDegrees(e.latitude),n=Cesium.Math.toDegrees(e.longitude),o=e.height,i=this._getCenter();return Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(n,r,o),Cesium.Cartesian3.fromDegrees(i.lng,i.lat,2))}},{key:"_screenPos",value:function(t,e){var r=this._map3d.viewer,n=new Cesium.Cartesian2(t,e);if(!n)return!1;var o=r.scene.globe.pick(r.camera.getPickRay(n),r.scene);if(o){var i=r.scene.globe.ellipsoid,a=new Cesium.Cartesian3(o.x,o.y,o.z),s=i.cartesianToCartographic(a),u=Cesium.Math.toDegrees(s.latitude);return{lng:Cesium.Math.toDegrees(s.longitude),lat:u,alt:s.height}}}},{key:"_flyAroundThePoint",value:function(){var t=this,e=this._map3d.viewer,r=this._center,n=this._range||1e5;if(r){this.closeFlyAroundThePoint();var o=e.scene.camera,i=e.scene.globe.ellipsoid.cartesianToCartographic(o.position),a=(Cesium.Math.toDegrees(i.latitude),Cesium.Math.toDegrees(i.longitude),i.height,Cesium.Math.toDegrees(o.heading)),s=Cesium.Math.toDegrees(o.pitch);Cesium.Math.toDegrees(o.roll);this._entity=e.entities.add({position:Cesium.Cartesian3.fromDegrees(r.lng,r.lat,r.alt||1),point:{color:Cesium.Color.RED.withAlpha(0),pixelSize:0}});var u=new Cesium.HeadingPitchRange(Cesium.Math.toRadians(a),Cesium.Math.toRadians(s),n);this._moveHeading=a,this._movePitch=s,e.zoomTo(this._entity,u).then(function(){e.clock.onTick.addEventListener(t._rotate,t)})}}},{key:"_rotate",value:function(){var t=this._type;if(!t)return!1;"right"==t?this._moveHeading-=1:"left"==t?this._moveHeading+=1:"up"==t?this._movePitch+=1:"down"==t&&(this._movePitch-=1),this._movePitch>-10&&(this._movePitch=-10),this._movePitch<-85&&(this._movePitch=-85);var e=new Cesium.HeadingPitchRange(Cesium.Math.toRadians(this._moveHeading),Cesium.Math.toRadians(this._movePitch),this._range);this._map3d.viewer.zoomTo(this._entity,e),this._map3d.viewer.scene.screenSpaceCameraController.enableInputs=!1}},{key:"closeFlyAroundThePoint",value:function(){this._map3d.viewer.entities.remove(this._entity),this._map3d.viewer.clock.onTick.removeEventListener(this._rotate,this),this._map3d.viewer.scene.screenSpaceCameraController.enableInputs=!0}},{key:"_zoomOut",value:function(){var t=this._map3d.viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs||t.mode===Cesium.SceneMode.COLUMBUS_VIEW)return!0;if(t.mode===Cesium.SceneMode.SCENE2D)e.zoomOut(e.positionCartographic.height);else if(t.mode===Cesium.SceneMode.SCENE3D){var n=this._getCameraPosition(t,e,-1);e.flyTo({destination:n,orientation:{heading:e.heading,pitch:e.pitch,roll:e.roll},duration:.5,convert:!1})}}},{key:"_zoomIn",value:function(){var t=this._map3d.viewer.scene,e=t.camera,r=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!r.enableInputs||t.mode===Cesium.SceneMode.COLUMBUS_VIEW)return!0;if(t.mode===Cesium.SceneMode.SCENE2D)e.zoomIn(.5*e.positionCartographic.height);else if(t.mode===Cesium.SceneMode.SCENE3D){var n=this._getCameraPosition(t,e,.5);e.flyTo({destination:n,orientation:{heading:e.heading,pitch:e.pitch,roll:e.roll},duration:.5,convert:!1})}}},{key:"_getCameraPosition",value:function(t,e,r){var n=new Cesium.Ray(t.camera.positionWC,t.camera.directionWC),o=Cesium.IntersectionTests.rayEllipsoid(n,Cesium.Ellipsoid.WGS84),i=void 0;i=o?Cesium.Ray.getPoint(n,o.start):Cesium.IntersectionTests.grazingAltitudeLocation(n,Cesium.Ellipsoid.WGS84);var a=new Cesium.Cartesian3,s=Cesium.Cartesian3.subtract(i,e.position,a),u=Cesium.Cartesian3.multiplyByScalar(s,r,a);return Cesium.Cartesian3.add(e.position,u,a)}},{key:"destroy",value:function(){this._unbindEvent(),this._wrapper.remove()}}])&&Tx(e.prototype,r),n&&Tx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xx(t){"@babel/helpers - typeof";return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ax(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Rx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ax(Object(r),!0).forEach(function(e){Ix(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ax(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function kx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mx(n.key),n)}}function Ix(t,e,r){return(e=Mx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mx(t){var e=function(t,e){if("object"!==xx(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xx(e)?e:String(e)}var Dx=n(4);Dx.Ion.defaultAccessToken=null;var Lx={baseLayerPicker:!1,imageryProvider:!1,animation:!1,fullscreenButton:!1,geocoder:!1,infoBox:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,vrButton:!1,scene3DOnly:!0,sceneMode:3},Nx=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ix(this,"cartesianTolngLatAlt",function(t){if(!t||3!==Object.keys(t).length)throw new Error("请传入合法的cartesian对象 {x, y, z}");var e=new Dx.Cartesian3(t.x,t.y,t.z),n=r.viewer.scene.globe.ellipsoid.cartesianToCartographic(e),o=Dx.Math.toDegrees(n.latitude);return{lng:Dx.Math.toDegrees(n.longitude),lat:o,alt:n.height}}),Ix(this,"cameraAttitudeSet",function(t){var e=t.pitch,r=t.height,n=t.heading,o=r/Math.tan(e*(Math.PI/180)),i=[o*Math.sin(n*(Math.PI/180))/11e4,o*Math.cos(n*(Math.PI/180))/11e4];return[-i[0],-i[1]]}),this.viewer=null,!e||"string"==typeof e&&!document.getElementById(e))throw new Error("请传入id");n.baseUrl&&Dx.buildModuleUrl.setBaseUrl(n.baseUrl),Dx.Ion.defaultAccessToken=null;var i=new Dx.Viewer(e,Rx(Rx({},Lx),n));i._cesiumWidget._creditContainer.style.display="none",i.scene.globe.depthTestAgainstTerrain=!1,i.scene.screenSpaceCameraController.zoomEventTypes=[Dx.CameraEventType.PINCH,Dx.CameraEventType.WHEEL],i.scene.screenSpaceCameraController.tiltEventTypes=[Dx.CameraEventType.RIGHT_DRAG],this.viewer=i,this.MouseEventType=h,this._layerCache={},this._customContainer=zt.create("div","custom-container","string"==typeof e?document.getElementById(e):e),new z(this),this._viewerEvent=new X,this._sceneEvent=new tt(this),i.cesiumWidget.screenSpaceEventHandler.removeInputAction(Dx.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.popUp=new od(i),this.tools=new Qy(this);var a={popup:new Ny,contextMenu:new Ad,tooltip:new iv,mapSwitch:new Jd,mapSplit:new Vd,locationBar:new Nd,hawkeyeMap:new mv,compass:new Cv,distanceLegend:new Lv,zoomController:new Hv,loadingMask:new Qv,tilesetSplit:new nm,sceneSplit:new cm};Object.keys(a).forEach(function(t){r.use(a[t])});var s={drawTool:new yd,editTool:new Od};Object.keys(s).forEach(function(t){r.use(s[t])});var u=new Dx.Matrix3,l=new Dx.Cartesian3,c=new Dx.Quaternion,f=new Dx.Matrix4,p=this.viewer.scene.camera;this.transFormFun=function(){!function(t,e,r){var n=Dx.Property.getValueOrUndefined(t.position,e,l);if(Dx.defined(n)){var o=Dx.Property.getValueOrUndefined(t.orientation,e,c);r=Dx.defined(o)?Dx.Matrix4.fromRotationTranslation(Dx.Matrix3.fromQuaternion(o,u),n,r):Dx.Transforms.eastNorthUpToFixedFrame(n,void 0,r)}}(this.cameraFollowEntity,this.viewer.clock.currentTime,f),p.lookAtTransform(f,new Dx.Cartesian3(-60,0,40))};var y=(new Dx.EventHelper).add(i.scene.globe.tileLoadProgressEvent,function(t){0==t&&(o&&o(this),y())})}var e,r,n;return e=t,(r=[{key:"customContainer",get:function(){return this._customContainer}},{key:"dataSources",get:function(){return this.viewer.dataSources}},{key:"canvas",get:function(){return this.viewer.scene.canvas}},{key:"_onAdd",value:function(){return{viewer:this.viewer}}},{key:"destroy",value:function(){this.viewer.entities.removeAll(),this.viewer.imageryLayers.removeAll(!0),this.viewer.destroy()}},{key:"exportScene",value:function(){return this.viewer.render(),this.canvas.toDataURL("image/jpeg")}},{key:"addMapLayer",value:function(t){return this.viewer.imageryLayers.add(t),this.viewer.imageryLayers._layers[this.viewer.imageryLayers._layers.length-1]}},{key:"mapLayerRemoveAll",value:function(){this.viewer.imageryLayers.removeAll()}},{key:"mapLayerRemove",value:function(t){this.viewer.imageryLayers.remove(t)}},{key:"setSkyBox",value:function(t){this.viewer.scene.skyBox=new Dx.SkyBox({sources:{positiveX:t.positiveX,negativeX:t.negativeX,positiveY:t.positiveY,negativeY:t.negativeY,positiveZ:t.positiveZ,negativeZ:t.negativeZ}})}},{key:"setBackgroundColor",value:function(t){this.viewer.scene.skyBox.show=!1,this.viewer.scene.backgroundColor=Dx.Color.fromCssColorString(t.color)}},{key:"loadTiles",value:function(t){var e=this;t.tileset.readyPromise.then(function(r){e.viewer.scene.primitives.add(r),t.zoomTo&&e.viewer.zoomTo(r,new Dx.HeadingPitchRange(0,-.5,2*r.boundingSphere.radius))}).otherwise(function(t){console.log(t)})}},{key:"loadGlbOrGLTFModel",value:function(t){}},{key:"zoomToTiles",value:function(t){var e=this;t.tileset.readyPromise.then(function(t){e.viewer.zoomTo(t,new Dx.HeadingPitchRange(0,-.5,2*t.boundingSphere.radius))}).otherwise(function(t){console.log(t)})}},{key:"tileRemove",value:function(t){this.viewer.scene.primitives.remove(t)}},{key:"tileRemoveAll",value:function(t){this.viewer.scene.primitives.removeAll()}},{key:"setCameraHeight",value:function(t){var e=t.minHeight,r=t.maxHeight;this.viewer.scene.screenSpaceCameraController.minimumZoomDistance=Number(e)||.1,this.viewer.scene.screenSpaceCameraController.maximumZoomDistance=Number(r)||Number.POSITIVE_INFINITY}},{key:"big",value:function(){this.viewer.camera.flyTo({destination:Dx.Cartesian3.fromDegrees(this.getCamera().centerLon,this.getCamera().centerLat,this.getCamera().height/1.8),duration:1})}},{key:"samll",value:function(){this.viewer.camera.flyTo({destination:Dx.Cartesian3.fromDegrees(this.getCamera().centerLon,this.getCamera().centerLat,1.8*this.getCamera().height),duration:1})}},{key:"getCamera",value:function(){var t=this.viewer.camera.position,e=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(t),r=e.height,n=parseFloat(Dx.Math.toDegrees(e.longitude).toFixed(8)),o=parseFloat(Dx.Math.toDegrees(e.latitude).toFixed(8)),i=this.viewer.scene.camera;return{height:r,centerLon:n,centerLat:o,heading:i.heading,pitch:i.pitch,roll:i.roll,cameraPosition:t}}},{key:"getCurrentExtent",value:function(){var t=[],e=this.viewer.scene.camera.computeViewRectangle();if(e){var r=Dx.Math.toDegrees(e.west),n=Dx.Math.toDegrees(e.east),o=Dx.Math.toDegrees(e.north),i=[r,Dx.Math.toDegrees(e.south),n,o];t=[[i[0],i[1]],[i[2],i[1]],[i[2],i[3]],[i[0],i[3]],[i[0],i[1]]]}return t}},{key:"getCurrentExtent00",value:function(){var t={},e=this.viewer.scene,r=e.globe.ellipsoid,n=e.canvas,o=this.viewer.camera.pickEllipsoid(new Dx.Cartesian2(0,0),r),i=this.viewer.camera.pickEllipsoid(new Dx.Cartesian2(n.width,n.height),r);if(o&&i){var a=r.cartesianToCartographic(o),s=r.cartesianToCartographic(i);t.xmin=Dx.Math.toDegrees(a.longitude),t.ymax=Dx.Math.toDegrees(a.latitude),t.xmax=Dx.Math.toDegrees(s.longitude),t.ymin=Dx.Math.toDegrees(s.latitude)}else if(!o&&i){var u=null,l=0;do{l<=n.height?l+=10:n.height,u=this.viewer.camera.pickEllipsoid(new Dx.Cartesian2(0,l),r)}while(!u);var c=r.cartesianToCartographic(u),f=r.cartesianToCartographic(i);t.xmin=Dx.Math.toDegrees(c.longitude),t.ymax=Dx.Math.toDegrees(c.latitude),t.xmax=Dx.Math.toDegrees(f.longitude),t.ymin=Dx.Math.toDegrees(f.latitude)}else if(!o&&!i){u=null,l=0;do{l<=n.height?l+=10:n.height,u=this.viewer.camera.pickEllipsoid(new Dx.Cartesian2(0,l),r)}while(!u);c=r.cartesianToCartographic(u),f=r.cartesianToCartographic(i);t.xmin=Dx.Math.toDegrees(c.longitude),t.ymax=Dx.Math.toDegrees(c.latitude),t.xmax=Dx.Math.toDegrees(f.longitude),t.ymin=Dx.Math.toDegrees(f.latitude)}return t}},{key:"FlyTo",value:function(t){var e=t.longitude,r=t.latitude,n=t.height,o=t.heading,i=void 0===o?0:o,a=t.pitch,s=void 0===a?-80:a,u=t.roll,l=void 0===u?0:u,c=t.duration,f=void 0===c?2:c,p={destination:Dx.Cartesian3.fromDegrees(Number(e),Number(r),Number(n)),orientation:{heading:Dx.Math.toRadians(i),pitch:Dx.Math.toRadians(s),roll:Dx.Math.toRadians(l)},duration:Number(f)};this.viewer.camera.flyTo(p)}},{key:"flyTo",value:function(t,e,r){return this.viewer.flyTo((null===t||void 0===t?void 0:t.delegate)||t,{duration:e,offset:r}),this}},{key:"flyToPoint",value:function(t){var e=t.destination,r=t.range||0;t.range||(r=0);var n=new Dx.BoundingSphere(new Dx.Cartesian3.fromDegrees(e[0],e[1],e[2]),0),o=Dx.Math.toRadians(Number(t.heading||360)),i=Dx.Math.toRadians(Number(t.pitch||-90));this.viewer.scene.camera.flyToBoundingSphere(n,{duration:t.duration||3,offset:{heading:o,pitch:i,range:r},complete:function(){t.callback&&t.callback()},cancel:function(){console.log("定位取消！")}})}},{key:"flyToBox",value:function(t){var e=t.posArr,r=[],n=t.range||0;t.range||1!=e.length||(n=800);for(var o=0;o<e.length;o++){var i=e[o];r.push(new Dx.Cartesian3.fromDegrees(i[0],i[1],i[2]))}var a=new Dx.BoundingSphere.fromPoints(r),s=Dx.Math.toRadians(Number(t.heading||360)),u=Dx.Math.toRadians(Number(t.pitch||-90));this.viewer.scene.camera.flyToBoundingSphere(a,{duration:t.duration||3,offset:{heading:s,pitch:u,range:n},complete:function(){t.callback&&t.callback()},cancel:function(){console.log("定位取消！")}})}},{key:"setCurrentTime",value:function(t){this.viewer.clock.currentTime=Dx.JulianDate.fromDate(t).clone()}},{key:"cameraFollow",value:function(t){this.viewer.trackedEntity=t.entity,this.cameraFollowEntity=t.entity;this.viewer.scene.preRender.addEventListener(this.transFormFun)}},{key:"cameraFollowDestroy",value:function(){this.viewer.scene.preRender.removeEventListener(this.transFormFun),this.viewer.trackedEntity=void 0}},{key:"off",value:function(t,e,r){return this._viewerEvent.off(t,e,r||this),this._sceneEvent.off(t,e,r||this),this}},{key:"on",value:function(t,e,r){return this._viewerEvent.on(t,e,r||this),this._sceneEvent.on(t,e,r||this),this}},{key:"once",value:function(t,e,r){return this._viewerEvent.once(t,e,r||this),this}},{key:"_addLayer",value:function(t){!this._layerCache[t.type]&&(this._layerCache[t.type]={}),Object(this._layerCache[t.type]).hasOwnProperty(t.id)||(t.fire(S.ADD,this),this._layerCache[t.type][t.id]=t)}},{key:"_removeLayer",value:function(t){Object(this._layerCache[t.type]).hasOwnProperty(t.id)&&(t.fire(S.REMOVE,this),delete this._layerCache[t.type][t.id])}},{key:"addLayer",value:function(t){return this._addLayer(t),this}},{key:"removeLayer",value:function(t){return this._removeLayer(t),this}},{key:"hasLayer",value:function(t){return Object(this._layerCache[t.type]).hasOwnProperty(t.id)}},{key:"getLayer",value:function(t){var e=this.getLayers().filter(function(e){return e.id===t});return e&&e.length?e[0]:void 0}},{key:"getLayers",value:function(){var t=this,e=[];return Object.keys(this._layerCache).forEach(function(r){var n=t._layerCache[r];Object.keys(n).forEach(function(t){e.push(n[t])})}),e}},{key:"eachLayer",value:function(t,e){var r=this;Object.keys(this._layerCache).forEach(function(n){var o=r._layerCache[n];Object.keys(o).forEach(function(r){t.call(e,o[r])})})}},{key:"enableOverViewMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t||console.error("缺少容器或者容器id");var r=this._customContainer.parentNode,n="string"==typeof t?document.getElementById(t):t;zt.addClass(n,"leaflet-control-minimap");var o={urls:e,height:parseInt(zt.getStyle(n,"height")),width:parseInt(zt.getStyle(n,"width")),container:n,toggleDisplay:!0,aimingRectOptions:{color:"#ff1100",weight:3,fillOpacity:0},shadowRectOptions:{color:"#0000AA",weight:1,opacity:0,fillOpacity:0},windowHeight:parseInt(zt.getStyle(r,"height")),windowWidth:parseInt(zt.getStyle(r,"width"))};new Kj(this.viewer,"",o)}},{key:"enableZoomCompass",value:function(t){t="string"==typeof t?document.getElementById(t):t,this.zoomCompass=new jx(t,this)}},{key:"disableZoomCompass",value:function(){this.zoomCompass.destroy()}},{key:"addPerimeterContour",value:function(t){var e=this.getLayer("perimeterContourLayer");e||(e=new rr("perimeterContourLayer"),this.addLayer(e));for(var r=[],n=0;n<t.posArr.length;n+=2)r.push([t.posArr[n],t.posArr[n+1]]);var o=.75*(t.width||16e3),i=t.color||"rgba(189, 239, 255, 1)",a=new Ma(r,[new Dx.Cartesian2(-o,-o),new Dx.Cartesian2(o,-o),new Dx.Cartesian2(o,o),new Dx.Cartesian2(-o,o)]);a.setStyle({material:Dx.Color.fromCssColorString(i)}),e.addOverlay(a),t.flyTo&&this.flyTo(a,5,{heading:0,pitch:-90})}},{key:"RemoveAllPerimeterContour",value:function(){var t=this.getLayer("perimeterContourLayer");t&&t.clear()}},{key:"getCanvas",value:function(){return("string"===this.viewer.container?document.getElementById(this.viewer.container):this.viewer.container).querySelector("canvas")}},{key:"use",value:function(t){return t&&t.install&&t.install(this),this}}])&&kx(e.prototype,r),n&&kx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fx(t){"@babel/helpers - typeof";return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Fx(i=function(t,e){if("object"!==Fx(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Fx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var Wx=function(t,e,r){return e&&Bx(t.prototype,e),r&&Bx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var r=e;return new Cesium.Cesium3DTileset(r)}}),Gx={FP:"1",TP:"2",TRACKED:"tracked",FREE:"free"};function zx(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Hx(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=Hx(e,t);return r=(r+180)%360}(t,e);var n=zx(t),o=zx(e),i=Kl(n[0]),a=Kl(o[0]),s=Kl(n[1]),u=Kl(o[1]),l=Math.sin(a-i)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-i);return Xl(Math.atan2(l,c))}function Ux(t){"@babel/helpers - typeof";return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Zx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vx(Object(r),!0).forEach(function(e){Yx(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vx(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Yx(t,e,r){return(e=Kx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kx(n.key),n)}}function Kx(t){var e=function(t,e){if("object"!==Ux(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ux(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ux(e)?e:String(e)}var Qx={clampToGround:!1,clampToTileset:!1,interpolationType:"Linear",interpolationDegree:2,endDelayTime:.5,headingOffset:0},qx={width:2,clampToGround:!0},Jx=function(){function t(e,r,n,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._bid=void 0,this._positions=ye.parsePositions(e),this._duration=r||20,this._callback=n,this._options=Zx(Zx({},Qx),o),this._controller=void 0,this._sampledPosition=void 0,this._velocityOrientation=void 0,this._viewed=!1,this._delegate=new Cesium.Entity,this._pathPositions=[],this._path=new Cesium.Entity({show:!1,polyline:{positions:new Cesium.CallbackProperty(function(){return i._pathPositions},!1)}}),this._positionIndex=0,this._timeLine=[],this._startTime=void 0,this._endTime=void 0,this._trackEvent=new bt,this._trackEvent.on(E.POST_RENDER,this._onPostRender,this),this._trackEvent.on(E.ADD,this._onAdd,this),this._trackEvent.on(E.REMOVE,this._onRemove,this),this._trackEvent.on(E.RESET_TIME_LINE,this._resetTimeLine,this),this._state=Dt.INITIALIZED}var e,r,n;return e=t,(r=[{key:"trackId",get:function(){return this._id}},{key:"id",get:function(){return this._bid},set:function(t){return this._bid=t,this}},{key:"positions",get:function(){return this._positions},set:function(t){return this._positions=ye.parsePositions(t),this._resetTimeLine({}),this}},{key:"duration",get:function(){return this._duration},set:function(t){return this._duration=t,this._resetTimeLine({}),this}},{key:"startTime",get:function(){return this._startTime},set:function(t){return t instanceof Date?this._startTime=Cesium.JulianDate.fromDate(t):this._startTime=t,this._resetTimeLine({}),this}},{key:"viewed",get:function(){return this._viewed},set:function(t){return this._viewed=t,this}},{key:"trackEvent",get:function(){return this._trackEvent}},{key:"state",get:function(){return this._state}},{key:"_onAdd",value:function(t){if(!t)return!1;this._controller=t,this._controller.delegate.add(this._delegate),this._controller.delegate.add(this._path),!this._startTime&&(this._startTime=Cesium.JulianDate.now()),this._state=Dt.ADDED}},{key:"_onRemove",value:function(){if(!this._controller)return!1;this._controller.delegate.remove(this._delegate),this._controller.delegate.remove(this._path),this._viewed=!1,this._startTime=void 0,this._state=Dt.REMOVED}},{key:"_onPostRender",value:function(t){var e=t.viewer,r=t.viewOption;if(!this._startTime||!this._endTime)return!1;var n=Cesium.JulianDate.now();if(Cesium.JulianDate.lessThanOrEquals(n,this._endTime)){var o=this._sampledPosition.getValue(n);if(!o)return!1;this._pathPositions.push(o),this._options.clampToTileset?this._delegate.position=e.scene.clampToHeight(o,[this._delegate]):this._delegate.position=o;var i=this._velocityOrientation.getValue(n);if(i){var a=Cesium.Quaternion.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(this._options.headingOffset||0),0,0),new Cesium.Quaternion);this._delegate.orientation=Cesium.Quaternion.multiply(i,a,new Cesium.Quaternion)}this._setCameraView(e,r);var s=this._timeLine[this._positionIndex];if(s){var u=Cesium.JulianDate.secondsDifference(n,s);if(u>=0&&u<=1){var l=this._positions[this._positionIndex]||void 0;if(l&&i){var c=Cesium.Matrix3.fromQuaternion(i),f=Cesium.Matrix4.fromRotationTranslation(c,o),p=Cesium.Transforms.fixedFrameToHeadingPitchRoll(f);if(l.heading=Cesium.Math.toDegrees(p.heading),l.pitch=Cesium.Math.toDegrees(p.pitch),l.roll=Cesium.Math.toDegrees(p.roll),e.trackedEntity){var h=this._positions[this._positionIndex+1];if(h){var y=this._computedDestination([l.lng,l.lat],[h.lng,h.lat]),d=y.bearing,v=y.point,m=function(){e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(v[0],v[1],2e3),orientation:{heading:Cesium.Math.toRadians(d),pitch:Cesium.Math.toRadians(-45),roll:Cesium.Math.toRadians(360)},maximumHeight:100,duration:.5})};0==this._positionIndex?setTimeout(m,500):m()}}}this._callback&&this._callback(l,this._positionIndex+1===this._positions.length,this._positionIndex+1),this._positionIndex++}}}}},{key:"_setCameraView",value:function(t,e){if(!this._viewed)return!1;var r=Cesium.JulianDate.now();if(Cesium.JulianDate.greaterThan(r,this._endTime))t.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),t.trackedEntity&&(t.trackedEntity=void 0),this._viewed=!1;else{var n,o,i=this._sampledPosition.getValue(r),a=this._sampledPosition.getValue(Cesium.JulianDate.addSeconds(r,1/60,new Cesium.JulianDate));if(i&&a)(null===e||void 0===e?void 0:e.mode)===Gx.TRACKED&&(null===t||void 0===t?void 0:null===(n=t.trackedEntity)||void 0===n?void 0:n.id)!==(null===(o=this._delegate)||void 0===o?void 0:o.id)?t.trackedEntity=this._delegate:(null===e||void 0===e?void 0:e.mode)===Gx.FP?t.camera.lookAt(i,new Cesium.HeadingPitchRange(function(t,e){var r=t,n=e;if(!r||!n)return 0;t instanceof Cesium.Cartesian3||(r=ye.parsePosition(t),r=$t.transformWGS84ToCartesian(r)),e instanceof Cesium.Cartesian3||(n=ye.parsePosition(e),n=$t.transformWGS84ToCartesian(n));var o=Cesium.Transforms.eastNorthUpToFixedFrame(r),i=Cesium.Cartesian3.subtract(n,r,new Cesium.Cartesian3),a=Cesium.Matrix4.multiplyByPointAsVector(Cesium.Matrix4.inverse(o,new Cesium.Matrix4),i,new Cesium.Cartesian3),s=Math.atan2(a.y,a.x)-Cesium.Math.PI_OVER_TWO;return s=Cesium.Math.TWO_PI-Cesium.Math.zeroToTwoPi(s),isNaN(s)?0:s}(i,a),Cesium.Math.toRadians((null===e||void 0===e?void 0:e.pitch)||0),(null===e||void 0===e?void 0:e.range)||10)):(null===e||void 0===e?void 0:e.mode)===Gx.TP&&t.camera.lookAt(i,new Cesium.HeadingPitchRange(0,Cesium.Math.toRadians((null===e||void 0===e?void 0:e.pitch)||-90),(null===e||void 0===e?void 0:e.range)||1e3))}}},{key:"_resetTimeLine",value:function(t){var e,r=this;if(!this._startTime||!this._duration||null===(e=this._positions)||void 0===e||!e.length)return!1;var n=0;if(null!==t&&void 0!==t&&t.stopTime||null!==t&&void 0!==t&&t.duration)null!==t&&void 0!==t&&t.stopTime&&null!==t&&void 0!==t&&t.duration&&(this._duration+=t.duration,this._timeLine=this._timeLine.map(function(e){return Cesium.JulianDate.greaterThan(e,t.stopTime)&&(e=Cesium.JulianDate.addSeconds(e,t.duration,new Cesium.JulianDate)),e}));else{var o=be(this._positions)/this._duration;this._timeLine=this._positions.map(function(t,e,i){return 0!==e&&(n+=be([i[e-1],t])/o),Cesium.JulianDate.addSeconds(r._startTime,n,new Cesium.JulianDate)}),this._pathPositions=[],this._positionIndex=0}this._sampledPosition=new Cesium.SampledPositionProperty,this._sampledPosition.addSamples(this._timeLine,$t.transformWGS84ArrayToCartesianArray(this._positions)),this._sampledPosition.forwardExtrapolationType=Cesium.ExtrapolationType.HOLD,"Hermite"===this._options.interpolationType?this._sampledPosition.setInterpolationOptions({interpolationDegree:this._options.interpolationDegree||2,interpolationAlgorithm:Cesium.HermitePolynomialApproximation}):"Linear"===this._options.interpolationType?this._sampledPosition.setInterpolationOptions({interpolationDegree:this._options.interpolationDegree||1,interpolationAlgorithm:Cesium.LinearApproximation}):"Lagrange"===this._options.interpolationType&&this._sampledPosition.setInterpolationOptions({interpolationDegree:this._options.interpolationDegree||5,interpolationAlgorithm:Cesium.LagrangePolynomialApproximation}),this._velocityOrientation=new Cesium.VelocityOrientationProperty(this._sampledPosition),this._endTime=Cesium.JulianDate.addSeconds(this._timeLine[this._timeLine.length-1],this._options.endDelayTime,new Cesium.JulianDate)}},{key:"addPosition",value:function(t,e){return this._positions.push(ye.parsePosition(t)),this._duration+=e,this._resetTimeLine({}),this}},{key:"setModel",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._delegate.model=Zx(Zx({},e),{},{uri:t,heightReference:this._options.clampToGround?Cesium.HeightReference.CLAMP_TO_GROUND:Cesium.HeightReference.NONE}),r&&(this._delegate.billboard=void 0,this._delegate.point=void 0),this}},{key:"setFlashPoint",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.size||30,n=Cesium.Color.fromCssColorString(t.fillColor||"#f00"),o=1,i=!0,a=.7,s=!0;this._delegate.point={heightReference:this._options.clampToGround?Cesium.HeightReference.CLAMP_TO_GROUND:Cesium.HeightReference.NONE},this._delegate.point.color=new Cesium.CallbackProperty(function(){return i?(o-=.03)<=0&&(i=!1):(o=1,i=!0),n.withAlpha(o)},!1),this._delegate.point.outlineColor=new Cesium.CallbackProperty(function(){return s?(a-=.035)<=0&&(s=!1):(a=.7,s=!0),n.withAlpha(a)},!1);var u=2,l=!0;return this._delegate.point.pixelSize=new Cesium.CallbackProperty(function(t,e){return l?(u+=2)>=r&&(l=!1):(u=2,l=!0),u},!1),e&&(this._delegate.billboard=void 0,this._delegate.model=void 0),this}},{key:"setBillboard",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._delegate.billboard=Zx(Zx({},e),{},{image:t,heightReference:this._options.clampToGround?Cesium.HeightReference.CLAMP_TO_GROUND:Cesium.HeightReference.NONE}),r&&(this._delegate.point=void 0,this._delegate.model=void 0),this}},{key:"setLabel",value:function(t,e){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._delegate.label=Zx(Zx({},e),{},{text:t,heightReference:this._options.clampToGround?Cesium.HeightReference.CLAMP_TO_GROUND:Cesium.HeightReference.NONE}),this}},{key:"setPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._path.show=!!t,e.material=Cesium.Color.fromCssColorString(e.fillColor||"#f00"),Bt.merge(this._path.polyline,qx,e),this}},{key:"_computedDestination",value:function(t,e){var r=Ul([t[0],t[1]]),n=Hx(r,Ul([e[0],e[1]]));return{point:function(t,e,r,n){void 0===n&&(n={});var o=zx(t),i=Kl(o[0]),a=Kl(o[1]),s=Kl(r),u=Yl(e,n.units),l=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return Ul([Xl(i+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(l))),Xl(l)],n.properties)}(r,-2,n).geometry.coordinates,bearing:n}}}])&&Xx(e.prototype,r),n&&Xx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $x(t){"@babel/helpers - typeof";return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===$x(i=function(t,e){if("object"!==$x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var eA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._Chrtc=e,this._viewer=e.viewer,this._cache={},this._playTrackIds=[],this._delegete=new Cesium.CustomDataSource("track-layer"),this._viewer.dataSources.add(this._delegete),this._activedTrack=void 0,this._viewMode=void 0,this._viewOption={},this._stopTime=void 0,this._state=Dt.INITIALIZED}var e,r,n;return e=t,(r=[{key:"delegate",get:function(){return this._delegete.entities}},{key:"state",get:function(){return this._state}},{key:"_onPostRender",value:function(){var t=this;this._playTrackIds.forEach(function(e){var r=t.getTrack(e);r.trackEvent&&r.trackEvent.fire(E.POST_RENDER,{viewer:t._viewer,viewOption:t._viewOption})}),this._viewer.scene.requestRender()}},{key:"addTrack",value:function(t){return t&&t.trackEvent&&!this._cache.hasOwnProperty(t.trackId)&&(t.trackEvent.fire(E.ADD,this),this._cache[t.trackId]=t),this}},{key:"addTracks",value:function(t){var e=this;return Array.isArray(t)&&t.forEach(function(t){e.addTrack(t)}),this}},{key:"getTrack",value:function(t){var e=this.getTracks().filter(function(e){return e.id===t});return e&&e.length?e[0]:void 0}},{key:"removeTrack",value:function(t){return t&&t.trackEvent&&this._cache.hasOwnProperty(t.trackId)&&(t.trackEvent.fire(E.REMOVE,this),delete this._cache[t.trackId],this._playTrackIds.splice(this._playTrackIds.indexOf(t.id),1)),this}},{key:"getTracks",value:function(){var t=this,e=[];return Object.keys(this._cache).forEach(function(r){e.push(t._cache[r])}),e}},{key:"play",value:function(t){var e=this,r=Cesium.JulianDate.now();return t.forEach(function(t){var n=e.getTrack(t);n.startTime=r,n.viewed=!1,n.stopTime=null,e._playTrackIds.push(t)}),this._activedTrack=void 0,this._stopTime=void 0,this._Chrtc.off(g,this._onPostRender,this),this._Chrtc.on(g,this._onPostRender,this),this._state=Dt.PLAY,this}},{key:"pause",value:function(t){var e=this,r=Cesium.JulianDate.now();return this._viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),this._viewer.trackedEntity=void 0,t.forEach(function(t){if(e._playTrackIds.indexOf(t)>-1){e._playTrackIds.splice(e._playTrackIds.indexOf(t),1);var n=e.getTrack(t);n&&(n.stopTime=r)}}),this._Chrtc.off(g,this._onPostRender,this),this._playTrackIds.length>0&&this._Chrtc.on(g,this._onPostRender,this),this._state=Dt.PAUSE,this}},{key:"restore",value:function(t){var e=this;this._state,Dt.PAUSE;var r=Cesium.JulianDate.now();return t.forEach(function(t){if(-1==e._playTrackIds.indexOf(t)){e._playTrackIds.push(t);var n=e.getTrack(t);n.stopTime&&(n.trackEvent.fire(E.RESET_TIME_LINE,{stopTime:n.stopTime,duration:Cesium.JulianDate.secondsDifference(r,n.stopTime)}),n.stopTime=null)}}),this._Chrtc.off(g,this._onPostRender,this),this._Chrtc.on(g,this._onPostRender,this),this._state=Dt.PLAY,this}},{key:"viewTrack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._cache.hasOwnProperty(t.trackId))throw new Error("没有添加track");return this._viewOption=e,this._activedTrack&&(this._activedTrack.viewed=!1),t.viewed=!0,this._activedTrack=t,e.mode===Gx.FREE&&(this._viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),this._viewer.trackedEntity=void 0),this}},{key:"releaseTrack",value:function(t){if(!this._cache.hasOwnProperty(t.trackId))throw new Error("TrackController: track does not added ");return t.viewed&&(t.viewed=!1),this._activedTrack=void 0,this._viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),this._viewer.trackedEntity=void 0,this}},{key:"clear",value:function(){var t=this;return Object.keys(this._cache).forEach(function(e){t.removeTrack(t._cache[e])}),this._playTrackIds=[],this._activedTrack&&(this._activedTrack.viewed=!1),this._activedTrack=void 0,this._Chrtc.off(g,this._onPostRender,this),this}}])&&tA(e.prototype,r),n&&tA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),rA=function(t){return t.reduce(function(t,e){return 2*t+e},0)},nA=function(t){for(var e=[],r=7;r>=0;r--)e.push(!!(t&1<<r));return e},oA=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return t instanceof Uint8Array?t[this.pos++]:255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],r=0;r<t;r++)e.push(this.readByte());return e},this.read=function(t){for(var e="",r=0;r<t;r++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},iA=function(t,e){e||(e={});var r=function(e){for(var r=[],n=0;n<e;n++)r.push(t.readBytes(3));return r},n=function(){var e,r;r="";do{e=t.readByte(),r+=t.read(e)}while(0!==e);return r},o=function(o){o.leftPos=t.readUnsigned(),o.topPos=t.readUnsigned(),o.width=t.readUnsigned(),o.height=t.readUnsigned();var i=nA(t.readByte());o.lctFlag=i.shift(),o.interlaced=i.shift(),o.sorted=i.shift(),o.reserved=i.splice(0,2),o.lctSize=rA(i.splice(0,3)),o.lctFlag&&(o.lct=r(1<<o.lctSize+1)),o.lzwMinCodeSize=t.readByte();var a=n();o.pixels=function(t,e){for(var r,n,o=0,i=function(t){for(var r=0,n=0;n<t;n++)e.charCodeAt(o>>3)&1<<(7&o)&&(r|=1<<n),o++;return r},a=[],s=1<<t,u=s+1,l=t+1,c=[],f=function(){c=[],l=t+1;for(var e=0;e<s;e++)c[e]=[e];c[s]=[],c[u]=null};;)if(n=r,(r=i(l))!==s){if(r===u)break;if(r<c.length)n!==s&&c.push(c[n].concat(c[r][0]));else{if(r!==c.length)throw new Error("Invalid LZW code.");c.push(c[n].concat(c[n][0]))}a.push.apply(a,c[r]),c.length===1<<l&&l<12&&l++}else f();return a}(o.lzwMinCodeSize,a),o.interlaced&&(o.pixels=function(t,e){for(var r=new Array(t.length),n=t.length/e,o=function(n,o){var i=t.slice(o*e,(o+1)*e);r.splice.apply(r,[n*e,e].concat(i))},i=[0,4,2,1],a=[8,8,4,2],s=0,u=0;u<4;u++)for(var l=i[u];l<n;l+=a[u])o(l,s),s++;return r}(o.pixels,o.width)),e.img&&e.img(o)},i=function r(){var i={};switch(i.sentinel=t.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(r){switch(r.label=t.readByte(),r.label){case 249:r.extType="gce",function(r){t.readByte();var n=nA(t.readByte());r.reserved=n.splice(0,3),r.disposalMethod=rA(n.splice(0,3)),r.userInput=n.shift(),r.transparencyGiven=n.shift(),r.delayTime=t.readUnsigned(),r.transparencyIndex=t.readByte(),r.terminator=t.readByte(),e.gce&&e.gce(r)}(r);break;case 254:r.extType="com",function(t){t.comment=n(),e.com&&e.com(t)}(r);break;case 1:r.extType="pte",function(r){t.readByte(),r.ptHeader=t.readBytes(12),r.ptData=n(),e.pte&&e.pte(r)}(r);break;case 255:r.extType="app",function(r){switch(t.readByte(),r.identifier=t.read(8),r.authCode=t.read(3),r.identifier){case"NETSCAPE":!function(r){t.readByte(),r.unknown=t.readByte(),r.iterations=t.readUnsigned(),r.terminator=t.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(r)}(r);break;default:!function(t){t.appData=n(),e.app&&e.app[t.identifier]&&e.app[t.identifier](t)}(r)}}(r);break;default:r.extType="unknown",function(t){t.data=n(),e.unknown&&e.unknown(t)}(r)}}(i);break;case",":i.type="img",o(i);break;case";":i.type="eof",e.eof&&e.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(r,0)};!function(){var n={};if(n.sig=t.read(3),n.ver=t.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=t.readUnsigned(),n.height=t.readUnsigned();var o=nA(t.readByte());n.gctFlag=o.shift(),n.colorRes=rA(o.splice(0,3)),n.sorted=o.shift(),n.gctSize=rA(o.splice(0,3)),n.bgColor=t.readByte(),n.pixelAspectRatio=t.readByte(),n.gctFlag&&(n.gct=r(1<<n.gctSize+1)),e.hdr&&e.hdr(n)}(),setTimeout(i,0)},aA=function(t){var e,r,n={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var o in t)n[o]=t[o];n.vp_w&&n.vp_h&&(n.is_vp=!0);var i=null,a=!1,s=null,u=null,l=null,c=null,f=null,p=null,h=null,y=!0,d=!1,v=[],m=[],b=n.gif;void 0===n.auto_play&&(n.auto_play=!b.getAttribute("rel:auto_play")||"1"==b.getAttribute("rel:auto_play"));var _,g,w,O,P=n.hasOwnProperty("on_end")?n.on_end:null,C=n.hasOwnProperty("loop_delay")?n.loop_delay:0,S=n.hasOwnProperty("loop_mode")?n.loop_mode:"auto",E=!n.hasOwnProperty("draw_while_loading")||n.draw_while_loading,T=!!E&&(!n.hasOwnProperty("show_progress_bar")||n.show_progress_bar),j=n.hasOwnProperty("progressbar_height")?n.progressbar_height:25,x=n.hasOwnProperty("progressbar_background_color")?n.progressbar_background_color:"rgba(255,255,255,0.4)",A=n.hasOwnProperty("progressbar_foreground_color")?n.progressbar_foreground_color:"rgba(255,0,22,.8)",R=function(){s=null,u=null,f=l,l=null,p=null},k=function(){try{iA(e,G)}catch(t){D("parse")}},I=function(t,e){_.width=t*H(),_.height=e*H(),w.style.minWidth=t*H()+"px",O.width=t,O.height=e,O.style.width=t+"px",O.style.height=e+"px",O.getContext("2d").setTransform(1,0,0,1,0,0)},M=function(t,e,r){if(r&&T){var o,i,a,s=j;n.is_vp?d?(i=(n.vp_t+n.vp_h-s)/H(),s/=H(),o=n.vp_l/H()+t/e*(n.vp_w/H()),a=_.width/H()):(i=n.vp_t+n.vp_h-s,s=s,o=n.vp_l+t/e*n.vp_w,a=_.width):(i=(_.height-s)/(d?H():1),o=t/e*_.width/(d?H():1),a=_.width/(d?H():1),s/=d?H():1),g.fillStyle=x,g.fillRect(o,i,a-o,s),g.fillStyle=A,g.fillRect(0,i,o,s)}},D=function(t){i=t,r={width:b.width,height:b.height},v=[],g.fillStyle="black",g.fillRect(0,0,n.c_w?n.c_w:r.width,n.c_h?n.c_h:r.height),g.strokeStyle="red",g.lineWidth=3,g.moveTo(0,0),g.lineTo(n.c_w?n.c_w:r.width,n.c_h?n.c_h:r.height),g.moveTo(0,n.c_h?n.c_h:r.height),g.lineTo(n.c_w?n.c_w:r.width,0),g.stroke()},L=function(){p&&(v.push({data:p.getImageData(0,0,r.width,r.height),delay:u}),m.push({x:0,y:0}))},N=function(){var t,e,r,o=-1,a=0,s=function(t){o+=t,l()},u=(t=!1,e=function(){null!==P&&P(b),!1!==S||++a<0?r():(t=!1,y=!1)},r=function r(){if(t=y){s(1);var n=10*v[o].delay;n||(n=100),0==(o+1+v.length)%v.length?(n+=C,setTimeout(e,n)):setTimeout(r,n)}},function(){t||setTimeout(r,0)}),l=function(){var t;(o=parseInt(o,10))>v.length-1&&(o=0),o<0&&(o=0),t=m[o],O.getContext("2d").putImageData(v[o].data,t.x,t.y),g.globalCompositeOperation="copy",g.drawImage(O,0,0)};return{init:function(){i||(n.c_w&&n.c_h||g.scale(H(),H()),n.auto_play?u():(o=0,l()))},step:u,play:function(){y=!0,u()},pause:function(){y=!1},playing:y,move_relative:s,current_frame:function(){return o},length:function(){return v.length},move_to:function(t){o=t,l()}}}(),F=function(t){M(e.pos,e.data.length,t)},B=function(){},W=function(t,e){return function(r){t(r),F(e)}},G={hdr:W(function(t){I((r=t).width,r.height)}),gce:W(function(t){L(),R(),s=t.transparencyGiven?t.transparencyIndex:null,u=t.delayTime,l=t.disposalMethod}),com:W(B),app:{NETSCAPE:W(B)},img:W(function(t){p||(p=O.getContext("2d"));var e=v.length,o=t.lctFlag?t.lct:r.gct;e>0&&(3===f?null!==c?p.putImageData(v[c].data,0,0):p.clearRect(h.leftPos,h.topPos,h.width,h.height):c=e-1,2===f&&p.clearRect(h.leftPos,h.topPos,h.width,h.height));var i=p.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,e){t!==s&&(i.data[4*e+0]=o[t][0],i.data[4*e+1]=o[t][1],i.data[4*e+2]=o[t][2],i.data[4*e+3]=255)}),p.putImageData(i,t.leftPos,t.topPos),d||(g.scale(H(),H()),d=!0),E&&(g.drawImage(O,0,0),E=n.auto_play),h=t},!0),eof:function(t){L(),F(!1),n.c_w&&n.c_h||(_.width=r.width*H(),_.height=r.height*H()),N.init(),a=!1,V&&V(b)}},z=function(){var t=document.createElement("div");_=document.createElement("canvas"),g=_.getContext("2d"),w=document.createElement("div"),O=document.createElement("canvas"),t.width=_.width=b.width,t.height=_.height=b.height,w.style.minWidth=b.width+"px",t.className="jsgif",w.className="jsgif_toolbar",t.appendChild(_),t.appendChild(w),n.c_w&&n.c_h&&I(n.c_w,n.c_h),U=!0},H=function(){return n.max_width&&r&&r.width>n.max_width?n.max_width/r.width:1},U=!1,V=!1,Z=function(t){return!a&&(V=t||!1,a=!0,v=[],R(),c=null,f=null,p=null,h=null,!0)};return{play:N.play,pause:N.pause,move_relative:N.move_relative,move_to:N.move_to,get_playing:function(){return y},get_canvas:function(){return _},get_canvas_scale:function(){return H()},get_loading:function(){return a},get_auto_play:function(){return n.auto_play},get_length:function(){return N.length()},get_current_frame:function(){return N.current_frame()},load_url:function(t,r){if(Z(r)){var n=new XMLHttpRequest;n.open("GET",t,!0),"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in n?n.responseType="arraybuffer":n.setRequestHeader("Accept-Charset","x-user-defined"),n.onloadstart=function(){U||z()},n.onload=function(t){200!=this.status&&D("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var r=this.response;r.toString().indexOf("ArrayBuffer")>0&&(r=new Uint8Array(r)),e=new oA(r),setTimeout(k,0)},n.onprogress=function(t){t.lengthComputable&&M(t.loaded,t.total,!0)},n.onerror=function(){D("xhr")},n.send()}},load:function(t){this.load_url(b.getAttribute("rel:animated_src")||b.src,t)},load_raw:function(t,r){Z(r)&&(U||z(),e=new oA(t),setTimeout(k,0))},set_frame_offset:function(t,e){m[t]?(void 0!==e.x&&(m[t].x=e.x),void 0!==e.y&&(m[t].y=e.y)):m[t]=e}}},sA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU5ODE2Mzg4MTZGRDExRUM4NTIyQTc1Mjg4N0RCOUZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlFRUQyMzQ2MTcwMDExRUM4NTIyQTc1Mjg4N0RCOUZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTk4MTYzODYxNkZEMTFFQzg1MjJBNzUyODg3REI5RkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTk4MTYzODcxNkZEMTFFQzg1MjJBNzUyODg3REI5RkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4QPLzkAAANb0lEQVR42rxZSYwc13n+31Jb790z3T0rN5m2JMh2YiMJkAVwcglycQwHBuKLc84hCHzzwecAufpkIAisxIblCLKd2LEQIIayHOLAiBTIiRlZojkiKc7SzZnp7qrq2t6S71UPKdIYRqQcuMAiu7uq3vv+5fv+/y+yILekBZGSRI2MiCwRw5k2ibpzoignKj2ikwHVx6W3iYqQaLJObP2EWI7PT79GDP9w5dfPWp6Q/dGvkfUrokWb7MaEbGtB9N/PrdYYHRE1l0R5QHSwRdTBNaGxAPY9xj5+SRTmq38lPeFhOIDdJdY6JdE8Im6aJGc4YQP3OUAassWA1M5bZIIlqfmATItIV5w0vY/jiQDCajZwwBISfkB+0ibfUxT4ggLDSBhFlREkAxcITfmyQWWzoDJSVHiS2NoJGXjI/L8CtAyuMfXifPsWcURNznwK4bGGZ6nBODU4I4+M7cZknwbSm5yzIyaoQshyXE9jQamVVOzeoEoq0gxexrrm5wYIb1BYELu4R2IZkSw0eVZQJAw1ca0D7A1OtrfU5pkjzj4TC/urEdH1kbYvtDl7VTB2og3usRSoihKtKdu6TWV7SdXRmCiL3hvkuQArWScs6xwTH+yTOO04D1EALzhwbeLU5sCutL2yz+wnZ8Z+wltkvugimHG+vR+Izzd879UNQ38bcfYjJQgRpkBLihXR8rRFefOUqkqT8tfJVF5NEvtYAB0Jrl4nBmaL6Jhk4pMflBQBVBMeazuvIUC9uaXfOmT2MyYtNkcH84OgUMvbneiD/Wlyx8vLarLd+5W9TvTsuuF/N2D2HxjjU64pxPoL5EkaS8q6d6kIGKmgIL13CVufA1KegXIHg0Swy28Th7QIa8nPAgqwQIMpeI1RSyDnMm0+NGH207Gxv9k5Wsx7d5M3g1LbrB10yDle8qiRlsvtG8dvLQaNwWSz87mFLz82Uvqltif+E5HxkH9BYCktIkrCORVCUnnhFqmDzTrkFnjuA5VO/9oxIZeJb16HnyqSWUghkjnEby0QoIWEj5A/oym3v4vzUyLOm1vvzG6EWZURZ4HyhA/znLHMramlCBlnunec3m0s8pPjrc7lm/3mF/rGfn/E2Ld8RqAb+S5tID8x5C6zBRWbb2J3RhqKYKGvptbBDWjZ1Z8Sh7c8xUAEMBQhaBkLEsB73NhWaswvHwj+B0VWfmQwie90psnbQCItFwFBVmp7LWMr2tcfmeVMWuKhp0yxsXf6ZnKadU82u7+XtMMPj439Zk+zH8CoU+uUwNDCgu3Sp+WlPZAoJXXrAtGsQ1Y+/Trx/XXyfY98d7OoqGsdQ60DaXf2jfl9rPLb0WTBdw/i//GKqjRChFhQwFoBQECDoOGvVaK4PxYHAHOOiGrnXd6eZXEjKa6djNoX7oxafzoX4jc2iL3kc/4Gng6Rfwvt1eFPDtuQpDeoLD5CRk5GJCGwnimpie06Aqc2drQw9tcnnP2hycrx8GBxiA2OHSDtiWaNAV7C3xxIeP3pAQ/iMnf6CcygnHBZzownJDdGDQ/mt1rzrHO82f3YjW74zNDQt3vEvu8JZiFJpFEqbQVBB7vhpFJWPgmpKSBe61UrM/pDE2s/Oyf2id7+7GRwlPxEKm2M5IHlHNJ2BoRZVsut+24cYDr73YGl+ia7+uCkfkVDDrTMes20zBrXp2/OBs3+0W7vj+ZS/tKGNt9oSPFD49oCMAEEUh/+L2KyURAvoVPu8VzZqzfI/rkWbOxnVUxS2MW4NZRgqVRGy0orXqrKue2MZDVA5yy+wgQMzKHhKz6ivpyhd6bA+xKE8oBAaF/yyuMkK7PMPPPxG0TP7ir9Zx0pvg29DIArBy+41G5ZVWeTRMbkMDGlUuu1/dkdFXidMvLCrB263KgxMHgTi1ZepZSfKeVVGsCNowZfMcQ4ggjlC14GOEPPq3wEyRPCCI6KDBOsMRzGerkqsM/kZNzmRTeCEyzklQKO2u2qmIEuyBJ1UYLazice50c7lf6LPV98sQj89vr+/ACWNqxgvhGMa1hebxhIrwg9P2uFDYDhjh+1hwTnp8N2O+43IiVwAZ4WMIDDoCgpMgCqPBjPDABqW0mI+2IQNfN22N6uzJebUl5DDrqc1lAYE81qbORy0xX2whi0RkK8Pqz0dw93up8NszJuzvMCz6BhgNCVmoVpldJZ2wdRRsikBwJ4ecMP03YUBllVtmbZEn2XQkqUzlMIMPZdUes+jbQti4Ynji6tXe0Y+kFfiFd0zSbKgKeUhvSPn0MN6UFzIIyQDsogygk+FyMpvtM29PrkQv8piK5GJpVY1YCoMB2cwGkFdxlmvEKVEOMUzEwEuNSM87w1yxPkcM601pAsVAaUBudnPO9Ox1MYWE52+he5FNMtxr6KOMTIkQRhzWBGgdZOVS08dndEplch6ywtkUkLuHeO9e5uGf4VHXrpdLe7gwULLF1ZA09Y6zYwVGc/hAMZpbGyRo9Vt4FIZHyvy5XF9fo+3G/PTjLGhbiYDVvraT9qbFX2eWjhHkC5/FtoRUt050XZII1qZvgdFOm8RSo0lKPJXCLMC6UpDiW7tq3oa/P11jgeNLpMmwJxdZxyjDgDad132IZu2RpNK43Gdfc70+zMEHc/q8PHEA2CxvjedLt/aajty13J/xULuFZsYRWlkJMMYqRuXSUdN90cgRDMW0hIRQoXMhSuFAvG4GTWZ+yVvrKvIBRPl2Ai2KfABqfBK5lZyY11CXmWWw9+p/vfqWaR61E1TFCTC4OrIWfXh4Z9kwRLkXMx9k6w9xKOqnJU6eM+0bwLgAX68xtXyL7xDGG8AFkYZZgtMPZQjIdPNy17QUpxB/l4BXupupl/sCtaYawF5gFQ98A/2JvDf6Y82exslq2AbyvzvJT8EHcl8FqMfTEhUHmwSxrDlbm3Dr/39GmfzHSNoGtUILGdVQvcsfQ9vrel7fPpoNmejTtDrnQBb9TCtyp3SMIzsb4n3padlcLVgOh8CFnRZdqNmihxF8eVebHpy9fc+m4faPAS1axIGqSORu+Cq9utdvKuiY4wg3fg4oAKEGUJni4U2iKo+7+PSv3ydKv3yTAuFlFSltrj0Zlj6Nxe2Bp2Dx88p5UUbLLb/2DH0qtrTLwMCzNcnTsPFpAW9KDlYovM8Lgm2P2Do4Wne6fLncllsBpFGrHMEMukXgQhGHH+YsTYT6a7vasQbOgiQv1wFNm5M9eKJOrudveiibxkU9NXgXWKawtsmWBMzSOJ9n+t9pxx8zGieP/k8BDdOx0lMRZaDDO6r6jEI06TEmelEOxwR9nni3bITjfa2/e08X6H9S7I++F28CEpJeSkNx+2h5CUb0Qe+7GTtDrHDaXIuyKoSL31gRUx7g4ePqV7M/CzVt/eJbN7G10FZlsIuGAF2jEM+g3BXxuX5qXDze7nojhfNJOyQHmTq9bloXarhumqSelLObmw9lRfmX/pcfGP0M3ceQ+sTdGiFMiQag+hBY5zhybuWv6fPU/gxWvPkgkwdaHk5NwtpmmOepwNJf8uOtnXIBVPoetBZ1Az2z7Ubjl4xgWEVce7/QvM49NNxr/GJHNaFyO/EwEZayLvbl4hfbjx6PGTQ+vpvBNTnXn7EmCVVIGVSzCtDjVK+WzLsr/Skb+c7vR2wWqXCg9ZX3f9+H02bK7Hg6iL1PgKJOU2vJVCIWJYsERTWmJI0tBh43INVeP8s5U9emheNkkv0ZM5SwvUSA+shn/8UPKfblX6hXfWmn/cXBTz7nGaPcgVrk2VtQJ/utXZHVX2e23Jf4ifXQGYgxQpglRAsqsC67v92/8HhlVj+YgTcwKdQDjRb7tuJwMdU3MmDX0u/qlv6J8nu73LZQheGlOtWIt6jcYAnfLliIu3xsS/BUmcuxKKJVP3OgQVw0mKOquJKGGPPuX5qfnuga7WuNdzKIWYMdHxcKS2rsXVHyv2UirFB452urvr+/F+HVpUi+Nxe1i2A3ulsH/Dfb7vDMJeiRNmzDxlWJK+ubtKpfc6GFn7nje5l0ebByTGE/Lg1AYGrB5gjqBxg7hUv3PTY3/SnSQny36z05ils0W/sTEm9uJQyhchulN07BP00qcoZynqa4mREsL9eC+P+GO+E7T7q4RWGHZz4QijaA4lWXY88W/D0n4P2jhWHpenG53NlmH/scbF3+O5BHLu7kvRGedImWo6JPW44OpS596gPpYlyJdbYPWFa6RsSDmEMUEr7jlVGQrx9bjUl5cN+VE/1/sbjP8lOn6M1DSHnKDpoDQH0WbwHPaz8hHV8VyAQflEb1fNckCqfUhl2XSS41pW/CzYYlvTl/bi8otjzv86XI2PrnHFeI37MiqkD8M4pnhIh3s1zB4TIRuc2Cd6JetqxMU3SELPvCqi0BYUuvd/wBOVSo+lEMfwXgJgJX7NRUW5n1Bx4zkAZPRkmzkPuhfZT3jY0y3SownCjoq69Ehhqioiy1KMvQdgucydSMFj7kUl8lUl6JKO1+h9HY/F4vOO3oz45iFEHO2EPUZF6tSyyQRWVGgD/CbZuFO/k7aTkRu4yP5CAbpj+w4RijxvLOuqgynH9X6r/0JwOXY0XrX/Tu9K//3t8b8CDABJsIsIkfO5EAAAAABJRU5ErkJggg==",uA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAeCAYAAABuUU38AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU5ODE2MzgwMTZGRDExRUM4NTIyQTc1Mjg4N0RCOUZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU5ODE2MzgxMTZGRDExRUM4NTIyQTc1Mjg4N0RCOUZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTk4MTYzN0UxNkZEMTFFQzg1MjJBNzUyODg3REI5RkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTk4MTYzN0YxNkZEMTFFQzg1MjJBNzUyODg3REI5RkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7mxScAAAANEElEQVR42rRYCYyd1XU+5/7b2+e9mcEee+zYZsALi1eKzGIbEjuEUIfE1DQRgaYtqCKNoFUdpyK0UKwWhZo4G0KiKaFSUgMCnDQ0UUlIY8eG2CDwFjxgU4/JjM1sb2be/v7l3n73/m/GGDUSItP/6bx35/733rN/59yx6YM+yQSxEsTXbyTv1u3thYw7NyeKqWicmmUn71tWtEAxbyAlVykimyX3M6szpNhVinuweR4T+XjXi9P6iKldMWGOAyHka0qJfbYMhp3AF0HWDUabcwedvh8Oln7+clP1Pk+yt/d3inbttdfiuHMei+w/WEO0+DpHcuBko7IlLJUKfZmjlZdlRffFXrIt3ymEt4aicCmESEhSY6xoAgflIOT5pKgDVAcN4MAhUBnkg/JYo/AZhwIhEc/En/MhQZIED+L9SShu44zZeEcYH8P8wcDLj1sn943VfvaTk9JKjFWdtGTXZlU8XpfPPq6mFEmu+GhSSj9jXXB1W+rKNfPtiy9fLhKZBUqppKUiC4w7cWoX+X5KBX5IoXQUyfMwl2KlQkU8QUqVsC7AnI/fBsMtWmQILEmoBrziQ4kEuAaYr0IBQXiBdQHmIrzDmWxhKo/3H2HmLOYrkPFdZmkpN5HkRKqfpDwmLYvZEpmIg5OVX/5kT/WZRwc+vnplhbtfGL8L7DZC+0VkRwUKahmIQQxSEUWgUI+NLRVHEE//FRNTpN+0hIGVqQFqghCD5MQC42HGmF2s1J6ptvZppSpmvSJtMBfzltlr9sPPpGAUhsaqgHdpFkb7FMI0wwJSeemJWsjF9TOcp2yhqm2yTj2qpGaRtkKSSjgyiw36WAsiWBgpI7jEODKfAKRnbcNUmRDVjPHLyqw23yzNpD6LlBY2xCBFZpF5zErMmXWwSCQExnq9SUiyzDGacwQ+ESVI+zoS/RSoSMnqLHLhxUKq3Q6GajutrFtjy/4jNayKkOl1TsICtrqAXF6ArbPJg3oODrIhTDxKxLIYJopDLSJGAUSKjAtiR0gdX9SSWatjckDpIUyiBY3TRsV7cCKiVWl/KRMJ2kjSBO0wqB9zZZN7TXlYBjSfs7SC2r3jSvBOHOmS87kvuIUvfevP7DdGbpRD2CDVqwzh4b75sMtstimpbMpgbi6lqQvKuFDFhoImgExAcIu04JOBE0xhSBxs+tHvdCBGKg6w0JAEHCD/zJ4mxqepqU5Dv1DocJY0jj1jUG9ERTyOdfMoL5eI+Ymj777120fXHnr8BCzkk7/zMb+24oon8+tv7aIDZ25Wp3mVCvl/IOgEHH2aQ2xWStuwiy3ugl3TUEVTHkrlKAPKIWRyECphcCgWXE0KbhSLSWdRFXlWxaeGUA6AcAGVwKOscxJC18BrEPBdgkF9nGLDmAUEWSfCqQPizqQCoLwndSjg6Knw7z99Qq2cY2LcPOVH7htn4X8ze8UfeyTLt/ApygJ/+jnJwH7lmDCKUAdCqnGVTiMCmgaXdPLZ8FKCZiAdk8CmBOW4jTrxm8ZbLfgYbDgBoWtUxq5ANamuAhrBeWNCC278AnEFMlKbweI5iChgLEvJcdpDFnAHtOdplliYOdqsDny7+NhXD1D1HVStnrOK0Kl3qPTAX4/5f9Oxo+OytWlV92+m36oeROoIPCMN8kwmMCsJLNGxjTQEBMOp3OA+GgHU4g2sl1dtqBFZznMDIlRoEAYYhwoTSIOAbU5jTVJ7uIVUcSJpMNFJHk1mGbhyC1oaKkd5VbAW53vrZ/oeHN3+579Qbx2YEt9+bznk3DKhfvxfQ3L20u3WolxShuFmegcMfS7C7joVXQiOVMS3MGgGNhxHvPaXQARrMUJq8hj26MCRpppH4NQJS7fDBAgwfY6GXLbgU2EgXZnzrRjmzXrLfBrImQp8C2wSC1O/qZ/69d+N7rhnj3rnlXNKuW1QO48ie+Um6vjMP89JKDW3kZ540+9ofC1xUeE8VS9tQOrZOjgQONpyBkkMzsZZYCwqDIzFQAvyNcbF6BbjGcjVBoA/I56CX6PAlEE1mMUIBgjRoK0zpIJ8TKscX5gcCjrlo8V/fXSPd9XVycTl1ycmPFFVP7jfR6Ek2972o2Tb7KUzRWqGcBv1DkTOjHTglPt3PXs4lZv7t20r1uHs+nWqjzoAACXkgK4awpSOFlduFYNJoNXlEoHoIbPSpuroxLaMATQhMJENk8tb0p/92xD6A6VMVWujjFieOKFSZ/5x9Ls7nuHudV7hprvWOmF9jlsLXx36jycOkQzJ7ujecImtJtZZzWp/vVLd41eaA1Fbqh69/FMu793Ta3993z2ZS85PRs3Sx4DgSEgI5Wn3SxFL3xJAvcfPph7AynKqWDrmNy6r+gwxtVwZa7A6W34k6hLwhjxOAPIvst8O5tfvHdt6+65w/37i2x924IAh8ssZW4gZhft/tDjR6Q1bbZ/6YrfwuO43x05M7PiLk9Unt5b8Fx9rUN8xnBZQY+9/jjhXXX3UOb/nQi7VF1JJ2AZQLWM6/S3eT3HCQxEHZPIIKugZaZTRCXx27Xv3CVO9GaZKoGZleKUzEKxO3Tfy5c1Phy/ta4HSAen7o4Nh2HbKTad6orbC5xbPzReEcK1NvhWUhx/adKT55i+kAf16JU5f/VT7afS+mw7Whvdu4atyu6ldJpB+KUS+zgGdJ+L9BESKgUB/bJMtWiExSeesnRxbLe/VTbnN8HJ7lBfJrxXvuf378le7z3p7FOD31HZV3n5DtTExfghm6ZUyqlnpm7bcAc6R19b9djA6VqM6uoCgfm53X6tRY8+uQd604WjyI/MuUyPNuWCoq3qEXgcVgNlg2HuIxZQSJmC0aqxMN6wrxLnrbe0lpWuFq9shvlhMyFXZh8fu+5NH/Bd2RVNytHcAFmYRr11Ps+598lLXy13TJB5ZkpF7rJmb7jwdRWrcmrdsc+6am69OXnNLWTpjQ0Hv4VZPJOJM9lEsXt19Rnx09TGvZ/5laqw5G4wZjCPd17aEoinSMKYVcXWYscYgnQPSBFOsSLwOgcraFz5WeyrFi50SXZT+xvDOx3Y0n/tOY6pT6+qizLZdc7Kf/ofV6dWf6LApsQZZujHCRaL7vPP2spvOUPKGL7Vlb9v2kKqWliAxfiqrE8f9wQFb2u7hyLP7w7qXpZrv139wx6gaOCgLf/nQqvTltz8ue6uXoi7XEAp+jEo8mb3CdIO6DnimG6NWLxWY8BGtnmwSqkIzStI8t06Z4YdH7t/8T/5bb0Ri8512xx9+cak9PNhhdXQOqMy89RxUblOheMlKurtDK+VUGsHxqxqvH7L9KqrWy8+XmsvXb0s6qZnJhUu7bMfZaKULK5ijf0cB65XMN7BjD+Uv/P6/1X78TMIVs3zO+9tpMX8Vl9YL0OCRqTQi7nWZ4x7ApLljVBQmA8KW5GKyvWTdNTsIT49mirpVmHhEHO97Irn6859I3bFBeU50wkl336GSXavQd/0QMCOl1VZhxztdeeHJnzVefa5SC3zZKITvu+q6CXI2bnXTy1YvTl96xSJczfo5rMwJFd8J6U7jxvhdaaU+I6PgQitde1Ba9lo1Gj1ARe0NhVohhKnO2v7xDcIxXtGKTV7HlApYZ4Ruu6XBP0bT6Yg8naqk6XpVaXTnqOt7xM0+FuJB2WyuQrVbhX5gp//603v8Yi1rtTnF4nM7RmRf3++6s7ceqC6u/Bg5bUtE8sp17WG653wVNaupC7oqrmy7CTVkYRDK70inLpJu5glZqS2X9Sjis7ZuGNEFwoVbgRVfwjQET75LmSCz0c5kUyeRNC/JmvpGLeGFaTv8VFgunmrUBl5UaceKBlM5GRw9U//KbWWKmh/knw//x6MrhY59lGP+/N1W6qKPt2dKw+lipfquaByL0rPXLHMvXvFZK5v/U1VtFmBqBJq+0pqjHQ2tzDR5WSZzDTPxRymNXnZ78pnm/r1ft4bOvNtMFsrFI/vH3f6Dyq8NE71xGCeI+BqgS2ioPuh/UT7c41xzq9e5dccWIfyt6P9S5tYhzd3dbt1QYi/ptBZAJ0YjiqaRE6nn68//y1+Nf/MrfTL68Py1ItZ0KCL7Dkd+ufha4rqbPSHrl6PJw70EUR3Da4xbLpTQKqY4pUFZJHP7awcObh174Au98f8zPvyzYMGC6VHE3GDffC0IJvz9mZXr8sqNVuLu4MEXyrTrmksWIaUvy5H0OMrsl0f2bxnfdssrsl7+vXlPqyJGmd/swxXI/7V3xY0zWFQvoZxIErWKZR5oJqFEM/t6o+/tL4/efePecHxkWvhOuyL6ab59qBE49r7UivWdJGvLKIdLlKeECqUtKsnXGnV5b/Hbd78o3zgybTz/XxShAAX8yK/qNW/Wy2LmpYtCL1wSiohlxT1RHi7eVdry2Z/T3l9OK0utiL1mzZrpVUQ3VU10lK88O9r5yRu+pWTGoiDo4Bm5x8u7n/7vml8iMY08G40GLV26lP5XgAEAB1ZZWNjszr4AAAAASUVORK5CYII=";function lA(t){"@babel/helpers - typeof";return(lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===lA(i=function(t,e){if("object"!==lA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var fA=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"init",value:function(t,e){var r=e.data,n=e.option;this.viewer=t.viewer,this.datas=r||{type:"FeatureCollection",features:[{geometry:{coordinates:[106.8975101429937,27.71572458621715],number:"100",color:"yellow",type:"Point"}}]};var o=this.datas.textOffset||[-20,-25],i={label:{fillColor:Cesium.Color.WHITE,fontSize:this.datas.label?this.datas.label.fontSize:"20px Arial"},clustering:{pixelRange:80,minimumClusterSize:2},clusterPoint:{img:this.datas.clusterPoint?this.datas.clusterPoint.img:sA,width:this.datas.clusterPoint?this.datas.clusterPoint.width:40,height:this.datas.clusterPoint?this.datas.clusterPoint.height:40},clusterJuhe:{img:this.datas.clusterJuhe?this.datas.clusterJuhe.img:uA,width:this.datas.clusterJuhe?this.datas.clusterJuhe.width:60,height:this.datas.clusterJuhe?this.datas.clusterJuhe.height:40},textOffset:o};if(this.option=n||i,this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer.scene.postProcessStages.fxaa.enabled=!1,this.viewer.cesiumWidget._supportsImageRenderingPixelated){for(var a=window.devicePixelRatio;a>=2;)a/=2;this.viewer.resolutionScale=a}return this.initCluser()}},{key:"initCluser",value:function(){var t=this,e=[];return(new Cesium.GeoJsonDataSource).load(this.datas,{clampToGround:!0}).then(function(r){r.name="juhe",t.geoJsonDataSource=r,t.viewer.dataSources.add(r),r.clustering.pixelRange=t.option.clustering.pixelRange,r.clustering.minimumClusterSize=t.option.clustering.minimumClusterSize,r.clustering.enabled=!0,t.setClusterEvent(r);var n=t.datas;return r.entities.values.forEach(function(o,i){for(var a="",s=0;s<8;s++){var u=new Uint16Array(1);a+=window.crypto.getRandomValues(u)[0]}e.push(a),o.billboard.image=t.option.clusterPoint.img,o.type="cluser",o.evId=a,o.billboard.width=t.option.clusterPoint.width,o.billboard.height=t.option.clusterPoint.height,o.billboard.heightReference=Cesium.HeightReference.RELATIVE_TO_GROUND,o.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY,n&&n.length==r.length&&(o.objData=n.features[i])}),e}),e}},{key:"setClusterEvent",value:function(t){var e=this;function r(t,e){var n=(r.canvas||(r.canvas=document.createElement("canvas"))).getContext("2d");return n.font=e,n.measureText(t).width}this.removeListener=t.clustering.clusterEvent.addEventListener(function(t,n){n.billboard.show=!0,n.label.show=!1,n.label.text=String(t.length),n.label.scale=.6,n.billboard.id=n.label.id,n.label.heightReference=Cesium.HeightReference.RELATIVE_TO_GROUND,n.label.disableDepthTestDistance=Number.POSITIVE_INFINITY,n.billboard.heightReference=Cesium.HeightReference.RELATIVE_TO_GROUND,n.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY;var o={src:e.option.clusterJuhe.img,width:e.option.clusterJuhe.width,height:e.option.clusterJuhe.height,text:String(t.length),textFont:e.option.label?e.option.label.fontSize:"20px Arial",textOffset:[e.option.textOffset[0],"auto"==e.option.textOffset[1]?e.option.textOffset[1]:-e.option.textOffset[1]],imgType:"image/png",encoderOptions:.8},i=e,a=setInterval(function(){var t=function(t){var e=new Image;e.src=t.src;var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var o=n.getContext("2d");o.drawImage(e,0,0,t.width,t.height);var i,a,s=r(t.text,t.textFont);i="auto"==t.textOffset[0]?(t.width-s)/2:t.textOffset[0];a="auto"==t.textOffset[1]?(t.height-.8*t.textFont.split("px")[0])/2+.8*t.textFont.split("px")[0]:t.textOffset[1];return o.fillStyle="white",o.font=t.textFont,o.fillText(t.text,i,a),n.toDataURL(t.imgType,t.encoderOptions)}(o);n.billboard.image=t,n.billboard.width=i.option.clusterJuhe.width,n.billboard.height=i.option.clusterJuhe.height,n.label.fillColor=i.option.label.fillColor});setTimeout(function(){clearInterval(a)},2300)})}},{key:"selectedEntityChanged",value:function(t){console.log(t)}},{key:"destroy",value:function(){var t=this,e=this.viewer.dataSources.getByName("juhe");e&&e.length>0&&e.forEach(function(e){t.viewer.dataSources.remove(e,!0)})}}])&&cA(e.prototype,r),n&&cA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),pA={};pA.Map=Nx,pA.Layer={},pA.Layer.vectorLayer=rr,pA.Layer.mapServerLayer=bx,pA.Layer.htmlLayer=fe,pA.Layer.TilesetLayer=Sx,pA.Overlay={},pA.Overlay=o,pA.XyzTiles=Wx,pA.Track=Jx,pA.TrackController=eA,pA.DCPlot=Ey,pA.SuperGif=aA,pA.Cluser=fA;var hA=pA,yA={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};function dA(t){"@babel/helpers - typeof";return(dA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var vA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},bA=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+T_,r.element.style.position="absolute",r.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==dA(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(mA.ELEMENT,r.handleElementChanged),r.addChangeListener(mA.MAP,r.handleMapChanged),r.addChangeListener(mA.OFFSET,r.handleOffsetChanged),r.addChangeListener(mA.POSITION,r.handlePositionChanged),r.addChangeListener(mA.POSITIONING,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:yA.TOP_LEFT),void 0!==e.position&&r.setPosition(e.position),r}return vA(e,t),e.prototype.getElement=function(){return this.get(mA.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(mA.MAP)},e.prototype.getOffset=function(){return this.get(mA.OFFSET)},e.prototype.getPosition=function(){return this.get(mA.POSITION)},e.prototype.getPositioning=function(){return this.get(mA.POSITIONING)},e.prototype.handleElementChanged=function(){B_(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(F_(this.element),qb(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Kb(t,mg,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(mA.ELEMENT,t)},e.prototype.setMap=function(t){this.set(mA.MAP,t)},e.prototype.setOffset=function(t){this.set(mA.OFFSET,t)},e.prototype.setPosition=function(t){this.set(mA.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(mA.POSITION)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[D_(n),L_(n)]),i=t||{},a=void 0===i.margin?20:i.margin;if(!Km(r,o)){var s=o[0]-r[0],u=r[2]-o[2],l=o[1]-r[1],c=r[3]-o[3],f=[0,0];if(s<0?f[0]=s-a:u<0&&(f[0]=Math.abs(u)+a),l<0?f[1]=l-a:c<0&&(f[1]=Math.abs(c)+a),0!==f[0]||0!==f[1]){var p=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(p);if(!h)return;var y=[h[0]+f[0],h[1]+f[1]],d=i.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:d.duration,easing:d.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(mA.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";o==yA.BOTTOM_RIGHT||o==yA.CENTER_RIGHT||o==yA.TOP_RIGHT?s="-100%":o!=yA.BOTTOM_CENTER&&o!=yA.CENTER_CENTER&&o!=yA.TOP_CENTER||(s="-50%"),o==yA.BOTTOM_LEFT||o==yA.BOTTOM_CENTER||o==yA.BOTTOM_RIGHT?u="-100%":o!=yA.CENTER_LEFT&&o!=yA.CENTER_CENTER&&o!=yA.CENTER_RIGHT||(u="-50%");var l="translate("+s+", "+u+") translate("+i+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(n_);function _A(t){"@babel/helpers - typeof";return(_A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===_A(i=function(t,e){if("object"!==_A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function wA(t,e){return(wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PA(t);if(e){var o=PA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PA(t){return(PA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}(i,bA);var e,r,n,o=OA(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=t||{};void 0===r.autoPan&&(r.autoPan=!0),void 0===r.autoPanAnimation&&(r.autoPanAnimation={duration:250});var n=document.createElement("div");return r.element=n,r.className="chrtc-popup",(e=o.call(this,r)).container=n,e._config={customClass:"",position:je.BOTTOM_CENTER},e._position=void 0,i.enableTouchScroll_(e.container),e}return e=i,n=[{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"enableTouchScroll_",value:function(t){if(i.isTouchDevice_()){var e=0;t.addEventListener("touchstart",function(t){e=this.scrollTop+t.touches[0].pageY},!1),t.addEventListener("touchmove",function(t){this.scrollTop=e-t.touches[0].pageY},!1)}}}],(r=[{key:"config",set:function(t){this._config=t,t.customClass&&this._setCustomClass()}},{key:"_setCustomClass",value:function(){zt.setClass(this.container,"chrtc-popup ".concat(this._config.customClass))}},{key:"showAt",value:function(t,e){return this.setContent(e).setPosition(t),this}},{key:"setContent",value:function(t){return t instanceof HTMLElement?(this.container.innerHTML="",this.container.appendChild(t)):this.container.innerHTML=t,this.container.style.display="block",this.container.scrollTop=0,this}},{key:"updateRenderedPosition",value:function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";o==je.BOTTOM_RIGHT||o==je.CENTER_RIGHT||o==je.TOP_RIGHT?s="-100%":o!=je.BOTTOM_CENTER&&o!=je.CENTER_CENTER&&o!=je.TOP_CENTER||(s="-50%"),o==je.BOTTOM_LEFT||o==je.BOTTOM_CENTER||o==je.BOTTOM_RIGHT?u="-100%":o!=je.CENTER_LEFT&&o!=je.CENTER_CENTER&&o!=je.CENTER_RIGHT||(u="-50%");var l="translate(".concat(s,", ").concat(u,") translate(").concat(i,", ").concat(a,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l),this.element.style.visibility="visible",this.element.style.zIndex="1"}},{key:"getPositioning",value:function(){return this._config.position}},{key:"hide",value:function(){return this.element.style.visibility="hidden",this.element.style.zIndex="-1",this}},{key:"isOpened",value:function(){return"block"==this.container.style.display}}])&&gA(e.prototype,r),n&&gA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),SA=n(1),EA=n.n(SA);function TA(t,e,r,n,o,i,a){var s,u,l=(r-e)/n;if(1===l)s=e;else if(2===l)s=e,u=o;else if(0!==l){for(var c=t[e],f=t[e+1],p=0,h=[0],y=e+n;y<r;y+=n){var d=t[y],v=t[y+1];p+=Math.sqrt((d-c)*(d-c)+(v-f)*(v-f)),h.push(p),c=d,f=v}var m=o*p,b=function(t,e,r){for(var n,o,i=r||pm,a=0,s=t.length,u=!1;a<s;)(o=+i(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,u=!o);return u?a:~a}(h,m);b<0?(u=(m-h[-b-2])/(h[-b-1]-h[-b-2]),s=e+(-b-2)*n):s=e+b*n}var _=a>1?a:2,g=i||new Array(_);for(y=0;y<_;++y)g[y]=void 0===s?NaN:void 0===u?t[s+y]:Eb(t[s+y],t[s+n+y],u);return g}function jA(t,e,r,n,o,i){if(r==e)return null;var a;if(o<t[e+n-1])return i?((a=t.slice(e,e+n))[n-1]=o,a):null;if(t[r-1]<o)return i?((a=t.slice(r-n,r))[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;o<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(o==c)return t.slice((s-1)*n,(s-1)*n+n);var f=(o-c)/(t[(s+1)*n-1]-c);a=[];for(var p=0;p<n-1;++p)a.push(Eb(t[(s-1)*n+p],t[s*n+p],f));return a.push(o),a}var xA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AA=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return xA(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?dm(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<Ym(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return mO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Fw.XYM&&this.layout!=Fw.XYZM)return null;var r=void 0!==e&&e;return jA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return oO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return TA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return FE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=tO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,Fw.XY)},e.prototype.getType=function(){return Eg.LINE_STRING},e.prototype.intersectsExtent=function(t){return bO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Jw(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Zw);function RA(t){"@babel/helpers - typeof";return(RA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===RA(i=function(t,e){if("object"!==RA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==RA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var IA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.viewObj=this.olMap.getView(),this._cache={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t){for(var e=t.posArr,r=[],n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);var o=new SA.Feature({geometry:new AA(r)}),i=new qS;i.addFeature(o);var a=new vT({style:new fE({stroke:new iE({color:t.color||"rgba(189, 239, 255, 1)",width:t.width||4})})});a.setSource(i),this.olMap.addLayer(a),this._cache[t.id]=a}},{key:"remove",value:function(t){if(this._cache[t.id]){for(var e in this._cache)t.id==e&&this._cache[e].getSource().clear();delete this._cache[t.id]}}},{key:"removeAll",value:function(){for(var t in this._cache)this._cache[t].getSource().clear();this._cache={}}}])&&kA(e.prototype,r),n&&kA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MA(t){"@babel/helpers - typeof";return(MA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===MA(i=function(t,e){if("object"!==MA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==MA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var LA=function(t,e,r){return e&&DA(t.prototype,e),r&&DA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.perimeterContour=new IA(this.olMap)}),NA={LEFT_DOWN:"onmousedown_0",LEFT_UP:"onmouseup_0",CLICK:"click",RIGHT_DOWN:"onmousedown_2",RIGHT_UP:"onmouseup_2",RIGHT_CLICK:"oncontextmenu_2",DB_CLICK:"dblclick",MOUSE_MOVE:"pointermove",WHEEL:"onwheel_0"};function FA(t){"@babel/helpers - typeof";return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===FA(i=function(t,e){if("object"!==FA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==FA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var WA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.windowPosition=void 0,this.feature=void 0,this.instanceId=void 0,this.layer=void 0,this.overlay=void 0,this.target=void 0,this.position=void 0,this.wgs84Position=void 0,this.type=void 0,this._callback=void 0,this._eventStates={}}var e,r,n;return e=t,(r=[{key:"_on",value:function(t,e,r,n){var o=this,i=t.split("_");this._eventStates[i[0]]=function(t){var a=t.pixel||o.olMap.getEventPixel(t);o.feature=void 0,o.layer=void 0,o.olMap.forEachFeatureAtPixel(a,function(t,e){o.feature=t,o.layer=e}),o.windowPosition={x:a[0],y:a[1]},o.wgs84Position={lng:o.olMap.getCoordinateFromPixel(a)[0],lat:o.olMap.getCoordinateFromPixel(a)[1],alt:0},o.wgs84SurfacePosition={lng:o.olMap.getCoordinateFromPixel(a)[0],lat:o.olMap.getCoordinateFromPixel(a)[1],alt:0};var s=vw(o.olMap.getCoordinateFromPixel(a),"EPSG:4326","EPSG:3857");o.position={x:s[0],y:s[1]},o.type=i[0],o.feature&&!0===o.feature._onState||(e&&e(o),1==n&&o._off(o.type,e,r))};-1!=["singleclick","click","dblclick","pointermove"].indexOf(t)?this.olMap.on(t,this._eventStates[i[0]]):(0==i[1]?"onwheel"!=i[0]&&(document[i[0]]=function(){return!1}):document.oncontextmenu=function(){return!1},this.olMap.getViewport()[i[0]]=function(t){t.button==i[1]&&o._eventStates[i[0]](t)})}},{key:"on",value:function(t,e,r){return this._on(t,e,r)}},{key:"_off",value:function(t,e,r){if(this._eventStates[t.split("_")[0]]){if(-1!=["singleclick","click","dblclick","pointermove"].indexOf(t))this.olMap.un(t,this._eventStates[t.split("_")[0]]);else{var n=t.split("_");this.olMap.getViewport()[n[0]]=void 0}this._eventStates[t.split("_")[0]]=void 0}}},{key:"off",value:function(t,e,r){return this._off(t,e,r)}},{key:"_once",value:function(t,e,r){this._on(t,e,r,!0)}},{key:"once",value:function(t,e,r){return this._once(t,e,r)}}])&&BA(e.prototype,r),n&&BA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),GA={};function zA(t){"@babel/helpers - typeof";return(zA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===zA(i=function(t,e){if("object"!==zA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var UA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._bid=e||Bt.uuid(),this._delegate=void 0,this._state=void 0,this._olMap=void 0,this._show=!0,this._isGround=!1,this._cache={},this._attr={}}var e,r,n;return e=t,n=[{key:"getLayerType",value:function(t){return GA[t.toLocaleUpperCase()]||void 0}}],(r=[{key:"id",get:function(){return this._bid}},{key:"show",set:function(t){switch(this._show=t,this.type){case"htmlLayer":break;case"vectorLayer":this._delegate.setVisible(this._show)}}},{key:"getOverlayById",value:function(t){var e=this,r=void 0;return Object.keys(this._cache).forEach(function(n){e._cache[n].id===t&&(r=e._cache[n])}),r}},{key:"_addOverlay",value:function(t){"vectorLayer"===this.type&&(this._cache.hasOwnProperty(t.overlayId)||(this._cache[t.overlayId]=t,this._delegate.getSource().addFeatures([t._delegate]),t._zIndex&&this._delegate.setZIndex(t._zIndex),t.layer=this,t._olMap=this._olMap))}},{key:"remove",value:function(t){this._delegate.getSource().removeFeature(t._delegate)}},{key:"removeOverlay",value:function(t){}},{key:"clear",value:function(){return this._delegate.getSource().clear(),this._cache={},this}},{key:"addOverlay",value:function(t){return this._addOverlay(t),this}}])&&HA(e.prototype,r),n&&HA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function VA(t){"@babel/helpers - typeof";return(VA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===VA(i=function(t,e){if("object"!==VA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==VA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function YA(t,e){return(YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KA(t);if(e){var o=KA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===VA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function KA(t){return(KA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}(i,UA);var e,r,n,o=XA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._id=Bt.uuid(),e._bid=t||Bt.uuid(),e._delegate=void 0,e._olMap=void 0,e._state=void 0,e._show=!0,e._isGround=!1,e._cache={},e._attr={},e._delegate=zt.create("div","html-layer",void 0),e._delegate.setAttribute("id",e._id),e._renderRemoveCallback=void 0,e}return e=i,(r=[{key:"id",get:function(){return this._bid}},{key:"type",get:function(){return"htmlLayer"}},{key:"show",set:function(t){for(var e in this._show=t,this._cache)this._cache[e]._delegate.style.visibility=this._show?"visible":"hidden"}},{key:"_addOverlay",value:function(t){this._cache.hasOwnProperty(t.overlayId)||(this._cache[t.overlayId]=t,this._state===Dt.CLEARED&&(this._state=Dt.ADDED),this.olMap.addOverlay(t._divIconOverlay))}},{key:"addOverlay",value:function(t){return this._addOverlay(t),this}},{key:"remove",value:function(t){this.olMap.removeOverlay(t._divIconOverlay)}},{key:"removeOverlay",value:function(t){this.olMap.removeOverlay(t._divIconOverlay),this._cache.hasOwnProperty(t.overlayId)&&delete this._cache[t.overlayId]}},{key:"clear",value:function(){for(var t in this._cache)this.olMap.removeOverlay(this._cache[t]._divIconOverlay);return this._cache={},this}}])&&ZA(e.prototype,r),n&&ZA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qA(t){"@babel/helpers - typeof";return(qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qA(i=function(t,e){if("object"!==qA(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $A(t,e){return($A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eR(t);if(e){var o=eR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eR(t){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$A(t,e)}(i,UA);var e,r,n,o=tR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._delegate=new vT({source:new qS}),e}return e=i,(r=[{key:"type",get:function(){return"vectorLayer"}},{key:"remove",value:function(t){this._cache.hasOwnProperty(t.overlayId)&&(delete this._cache[t.overlayId],this._delegate.getSource().removeFeature(t._delegate))}},{key:"clear",value:function(){return this._delegate.getSource().clear(),this._cache={},this}},{key:"getOverlaysByAttr",value:function(t,e){var r=[];return this.eachOverlay(function(n){n.attr[t]===e&&r.push(n)},this),r}},{key:"removeOverlay",value:function(t){this._cache.hasOwnProperty(t.overlayId)&&(delete this._cache[t.overlayId],this._delegate.getSource().removeFeature(t._delegate))}},{key:"eachOverlay",value:function(t,e){var r=this;return Object.keys(this._cache).forEach(function(n){t&&t.call(e||r,r._cache[n])}),this}}])&&JA(e.prototype,r),n&&JA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nR(t){"@babel/helpers - typeof";return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===nR(i=function(t,e){if("object"!==nR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function iR(t,e){return(iR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sR(t);if(e){var o=sR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sR(t){return(sR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uR={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},lR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iR(t,e)}(i,n_);var e,r,n,o=aR(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).on,e.once,e.un,e.options=t,e.id=t.id,e.insertFirst=void 0===t.insertFirst||t.insertFirst,e.stopEvent=void 0===t.stopEvent||t.stopEvent,e.element=document.createElement("div"),e.element.className=void 0!==t.className?t.className:"ol-overlay-container "+T_,e.element.style.position="absolute",e.element.style.pointerEvents="auto";var r=t.autoPan;return r&&"object"!==nR(r)&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),e.autoPan=r||!1,e.rendered={transform_:"",visible:!0},e.mapPostrenderListenerKey=null,e.addChangeListener(uR.ELEMENT,e.handleElementChanged),e.addChangeListener(uR.MAP,e.handleMapChanged),e.addChangeListener(uR.OFFSET,e.handleOffsetChanged),e.addChangeListener(uR.POSITION,e.handlePositionChanged),e.addChangeListener(uR.POSITIONING,e.handlePositioningChanged),void 0!==t.element&&e.setElement(t.element),e.setOffset(void 0!==t.offset?t.offset:[0,0]),e.setPositioning(void 0!==t.positioning?t.positioning:yA.TOP_LEFT),void 0!==t.position&&e.setPosition(t.position),e}return e=i,(r=[{key:"getElement",value:function(){return this.get(uR.ELEMENT)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(uR.MAP)}},{key:"getOffset",value:function(){return this.get(uR.OFFSET)}},{key:"getPosition",value:function(){return this.get(uR.POSITION)}},{key:"getPositioning",value:function(){return this.get(uR.POSITIONING)}},{key:"handleElementChanged",value:function(){B_(this.element);var t=this.getElement();t&&this.element.appendChild(t)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&(F_(this.element),qb(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Kb(t,"postrender",this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(t){this.set(uR.ELEMENT,t)}},{key:"setMap",value:function(t){this.set(uR.MAP,t)}},{key:"setOffset",value:function(t){this.set(uR.OFFSET,t)}},{key:"setPosition",value:function(t){this.set(uR.POSITION,t)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(uR.POSITION)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[D_(n),L_(n)]),i=t||{},a=void 0===i.margin?20:i.margin;if(!Km(r,o)){var s=o[0]-r[0],u=r[2]-o[2],l=o[1]-r[1],c=r[3]-o[3],f=[0,0];if(s<0?f[0]=s-a:u<0&&(f[0]=Math.abs(u)+a),l<0?f[1]=l-a:c<0&&(f[1]=Math.abs(c)+a),0!==f[0]||0!==f[1]){var p=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(p);if(!h)return;var y=[h[0]+f[0],h[1]+f[1]],d=i.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:d.duration,easing:d.easing})}}}}},{key:"getRect",value:function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]}},{key:"setPositioning",value:function(t){this.set(uR.POSITIONING,t)}},{key:"setVisible",value:function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}},{key:"updatePixelPosition",value:function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";o==yA.BOTTOM_LEFT||o==yA.CENTER_LEFT||o==yA.TOP_LEFT?s="-100%":o!=yA.BOTTOM_CENTER&&o!=yA.CENTER_CENTER&&o!=yA.TOP_CENTER||(s="-50%"),o==yA.TOP_LEFT||o==yA.TOP_CENTER||o==yA.TOP_RIGHT?u="-100%":o!=yA.CENTER_LEFT&&o!=yA.CENTER_CENTER&&o!=yA.CENTER_RIGHT||(u="-50%");var l="translate(".concat(s,", ").concat(u,") translate(").concat(i,", ").concat(a,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)}},{key:"getOptions",value:function(){return this.options}}])&&oR(e.prototype,r),n&&oR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),cR="#333",fR=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=NO(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new oE({color:cR}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:AE.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=NO(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();function pR(t){"@babel/helpers - typeof";return(pR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===pR(i=function(t,e){if("object"!==pR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var yR=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._olMap=void 0,this._id=Bt.uuid(),this._bid=Bt.uuid(),this.windowPosition=void 0,this.feature=void 0,this.instanceId=void 0,this.layer=void 0,this.target=void 0,this._position=void 0,this.wgs84Position=void 0,this.type=void 0,this._callback=void 0,this._eventStates={},this._onState=!1,this._styles={fillColor:"rgba(255,1,1,0.3)",lineColor:"#1E90FF",lineWidth:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},this._show=!0}var e,r,n;return e=t,(r=[{key:"attr",get:function(){return this._attr},set:function(t){return this._attr=t,this}},{key:"overlayId",get:function(){return this._id}},{key:"id",get:function(){return this._bid},set:function(t){this._bid=t}},{key:"delegate",get:function(){return this._delegate}},{key:"show",set:function(t){this._show=t,t?(this._setStyle({}),this.layer._delegate.setStyle(null)):(this._delegate.setStyle(null),this.layer._delegate.setStyle(null))}},{key:"center",get:function(){for(var t=0,e=0,r=0;r<this._posArr.length;r++)t+=this._posArr[r][0],e+=this._posArr[r][1];return t/=this._posArr.length,{alt:0,heading:0,lat:e/=this._posArr.length,lng:t,pitch:0,roll:0}}},{key:"_addTo",value:function(t){t.addOverlay(this),this.layer=t}},{key:"addTo",value:function(t){this._addTo(t)}},{key:"_remove",value:function(){this.layer.remove(this)}},{key:"remove",value:function(){this._remove(this)}},{key:"_on",value:function(t,e){var r=this;this._onState=!0,this._delegate._onState=this._onState;var n=this;this._eventStates[t]=function(o){if(!r._delegate._onEditState){var i=o.event;r._olMap=i._olMap;var a=i.pixel||i._olMap.getEventPixel(i);r.feature=void 0,i._olMap.forEachFeatureAtPixel(a,function(t,e){r.feature=r._delegate}),r.target=r._delegate,r.windowPosition={x:a[0],y:a[1]},r.wgs84Position={lng:i._olMap.getCoordinateFromPixel(a)[0],lat:i._olMap.getCoordinateFromPixel(a)[1],alt:0};var s=vw(i._olMap.getCoordinateFromPixel(a),"EPSG:4326","EPSG:3857");r._position={x:s[0],y:s[1]},r.type=t,e&&e({feature:n,instanceId:void 0,layer:r.layer,overlay:n,position:r._position,surfacePosition:r._position,target:n.target,wgs84Position:r.wgs84Position,wgs84SurfacePosition:r.wgs84Position,windowPosition:r.windowPosition})}},this._delegate.on(t,this._eventStates[t])}},{key:"on",value:function(t,e){this._on(t,e)}},{key:"_off",value:function(t,e,r){this._eventStates[t]&&(this._delegate.un(t,this._eventStates[t]),this._eventStates[t]=void 0)}},{key:"off",value:function(t,e){this._off(t,e)}},{key:"_setLabel",value:function(t,e){this._styles.text=t,e||(e={}),this._styles.font=e.font||"13px Microsoft YaHei",this._styles.textPixelOffset=e.pixelOffset||{x:0,y:0},this._styles.textFillColor=e.fillColor||"#666",this._styles.textOutlineWidth=e.outlineWidth||3,this._styles.textOutlineColor=e.outlineColor||"#fff",this._setStyle(this._styles)}},{key:"setLabel",value:function(t,e){this._setLabel(t,e)}},{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._styles[e]=t[e]);var r,n,o;n=new oE({color:this._styles.fillColor||"rgba(255,255,255,0.3)"}),r=new iE({color:this._styles.fillColor||"#1E90FF",width:this._styles.lineWidth||2}),o=new fR({font:this._styles.font||"13px Microsoft YaHei",fill:new oE({color:this._styles.textFillColor||"#666"}),stroke:new iE({color:this._styles.textOutlineColor||"#fff",width:this._styles.textOutlineWidth||3}),text:this._styles.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0});var i=new fE({fill:n,stroke:r,text:o});t&&t.zIndex&&i.setZIndex(t.zIndex),this._delegate.setStyle(i)}},{key:"setStyle",value:function(t){this._setStyle(t)}}])&&hR(e.prototype,r),n&&hR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dR(t){"@babel/helpers - typeof";return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===dR(i=function(t,e){if("object"!==dR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function mR(t,e){return(mR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_R(t);if(e){var o=_R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _R(t){return(_R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mR(t,e)}(i,yR);var e,r,n,o=bR(i);function i(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this))._style={position:je.CENTER_CENTER.replace("_","-")},n._position={alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0};var a=zt.create("div","");e&&"string"==typeof e?a.innerHTML=e:e&&e instanceof Element&&a.appendChild(e),n._element=a;var s=new lR({element:a,className:"div-icon",positioning:"center-center"});return s.setPosition([t[0],t[1]]),n._delegate=s.element,n._divIconOverlay=s,n._type="divIcon",n}return e=i,(r=[{key:"id",get:function(){return this._bid},set:function(t){this._bid=t}},{key:"delegate",get:function(){return this._delegate}},{key:"show",get:function(){return this._show},set:function(t){return this._show=t,this._delegate.style.visibility=this._show?"visible":"hidden",this}},{key:"position",get:function(){return this._position},set:function(t){if(t)return this._position={alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._divIconOverlay.setPosition([this._position.lng,this._position.lat]),this}},{key:"content",get:function(){return this._delegate.childNodes||[]},set:function(t){if(t&&"string"==typeof t)this._delegate.innerHTML=t;else if(t&&t instanceof Element){for(;this._delegate.hasChildNodes();)this._delegate.removeChild(this._delegate.firstChild);this._delegate.appendChild(t)}return this}},{key:"getId",value:function(){return this._bid}},{key:"setStyle",value:function(t){return t&&0!==Object.keys(t).length?(t.className&&zt.addClass(this._divIconOverlay.element,t.className),t.position&&this._divIconOverlay.setPositioning(t.position.replace("_","-")),Bt.merge(this._style,t),delete t.className&&delete t.position,Bt.merge(this._divIconOverlay.element.style,t),this):this}},{key:"_on",value:function(t,e){this._divIconOverlay.getElement().children[0][{onmousedown:"onmousedown",onmouseup:"onmouseup",click:"onclick",oncontextmenu:"oncontextmenu",dblclick:"ondblclick",pointermove:"onmousemove",onwheel:"onwheel"}[t.split("_")[0]]]=e}},{key:"on",value:function(t,e){var r=this;this._on(t,function(t){var n={x:t.clientX,y:t.clientY};r.windowPosition=n,e&&e({feature:r,instanceId:void 0,layer:r.layer,overlay:r,position:{x:vw([r._position._lng,r._position._lat],"EPSG:4326","EPSG:3857")[0],y:vw([r._position._lng,r._position._lat],"EPSG:4326","EPSG:3857")[1]},surfacePosition:{x:vw([r._position._lng,r._position._lat],"EPSG:4326","EPSG:3857")[0],y:vw([r._position._lng,r._position._lat],"EPSG:4326","EPSG:3857")[1]},target:r,wgs84Position:{x:r._position._lng,y:r._position._lat},wgs84SurfacePosition:{x:r._position._lng,y:r._position._lat},windowPosition:r.windowPosition})})}},{key:"off",value:function(t){this._divIconOverlay.getElement().children[0][{onmousedown:"onmousedown",onmouseup:"onmouseup",click:"onclick",oncontextmenu:"oncontextmenu",dblclick:"ondblclick",pointermove:"onmousemove",onwheel:"onwheel"}[t.split("_")[0]]]=void 0}},{key:"setLabel",value:function(){}}])&&vR(e.prototype,r),n&&vR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wR(t){"@babel/helpers - typeof";return(wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===wR(i=function(t,e){if("object"!==wR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var PR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setPoints(e),this.geo_type="RootTest"}var e,r,n;return e=t,(r=[{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t,e){this.points=t||[],this._radius=e,this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"generate",value:function(){}},{key:"finishDrawing",value:function(){}}])&&OR(e.prototype,r),n&&OR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),CR={MARKER:"marker",POLYLINE:"polyline",POLYGON:"polygon",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle",ARC:"arc",ATTACK_ARROW:"attack_arrow",CLOSED_CURVE:"closed_curve",CURVE:"curve",DOUBLE_ARROW:"double_arrow",FINE_ARROW:"fine_arrow",ASSAULT_DIRECTION:"assault_direction",FREEHAND_LINE:"freehand_line",FREEHAND_POLYGON:"freehand_polygon",GATHERING_PLACE:"gathering_place",LUNE:"lune",SECTOR:"sector",SQUAD_COMBAT:"squad_combat",STRAIGHT_ARROW:"straight_arrow",TAILED_ATTACK_ARROW:"tailed_attack_arrow",TAILED_SQUAD_COMBAT:"tailed_squad_combat"};function SR(t){"@babel/helpers - typeof";return(SR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ER(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return TR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TR(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function TR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===SR(i=function(t,e){if("object"!==SR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function xR(t,e,r){var n,o=ER(Reflect.ownKeys(e));try{for(o.s();!(n=o.n()).done;){var i=n.value;if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,a)}}}catch(t){o.e(t)}finally{o.f()}r&&e.__proto__&&t.__proto__&&(t.__proto__=e.__proto__)}var AR=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=(s=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i,a=ER(e);try{for(a.s();!(i=a.n()).done;)xR(this,new(0,i.value)(n))}catch(t){a.e(t)}finally{a.f()}},u=void 0,l=void 0,u&&jR(s.prototype,u),l&&jR(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s),o=0,i=e;o<i.length;o++){var a=i[o];xR(n,a),xR(n.prototype,a.prototype,!0)}var s,u,l;return n};function RR(t){"@babel/helpers - typeof";return(RR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===RR(i=function(t,e){if("object"!==RR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==RR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function IR(t,e){return(IR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function MR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DR(t);if(e){var o=DR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DR(t){return(DR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IR(t,e)}(i,AR(PR,pO));var e,r,n,o=MR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.MARKER,e.fixPointCount=1,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){var t=this.points[0];this.setCoordinates(t)}}])&&kR(e.prototype,r),n&&kR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NR(t){"@babel/helpers - typeof";return(NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===NR(i=function(t,e){if("object"!==NR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BR(t,e){return(BR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=HR(t);if(e){var o=HR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return GR(this,r)}}function GR(t,e){if(e&&("object"===NR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zR(t)}function zR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HR(t){return(HR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BR(t,e)}(i,yR);var e,r,n,o=WR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new LR([t]),e._delegate=new MS({geometry:e._element}),e._overlayType="point",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._globalID=null,e._style={size:30,fillColor:"rgb(255,1,1)",font:"13px Microsoft YaHei",textPixelOffset:{x:0,y:0},textFillColor:"#fff",textOutlineWidth:.5,textOutlineColor:"#fff"},e._initPos=[t],e._posArr=e._element.getPoints(),e._positions={lng:t[0],lat:t[1],alt:0},GR(e,zR(e))}return e=i,(r=[{key:"position",get:function(){return{alt:0,heading:0,lat:this._delegate.getGeometry().getCoordinates()[1],lng:this._delegate.getGeometry().getCoordinates()[0],pitch:0,roll:0}},set:function(t){t instanceof Array==0||Array.length<2||(this._position={alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._delegate.getGeometry().setCoordinates(t))}},{key:"_setLabel",value:function(t,e){this._style.text=t,e||(e={}),this._style.font=e.font||"13px Microsoft YaHei",this._style.textPixelOffset=e.pixelOffset||{x:0,y:0},this._style.textFillColor=e.fillColor||"#666",this._style.textOutlineWidth=e.outlineWidth||3,this._style.textOutlineColor=e.outlineColor||"#fff",this._setStyle(this._style)}},{key:"setLabel",value:function(t,e){this._setLabel(t,e)}},{key:"setStyle",value:function(t){for(var e in t=t||{})t[e]&&(this._styles[e]=t[e]);new iE({color:t.fillColor||"#1E90FF",width:t.width||2}),new fR({font:t.font||"13px Microsoft YaHei",fill:new oE({color:t.textFillColor||"#666"}),stroke:new iE({color:t.textOutlineColor||"#fff",width:t.textOutlineWidth||3}),text:t.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0}),this._delegate.setStyle(new fE({image:new nE({radius:6,snapToPixel:!1,fill:new oE({color:t.fillColor||"#fff"}),stroke:new iE({color:t.outlineColor||"#00f",width:t.outlineWidth||3})}),zIndex:1/0}))}}])&&FR(e.prototype,r),n&&FR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),VR=n(3),ZR=n.n(VR);function YR(t){"@babel/helpers - typeof";return(YR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===YR(i=function(t,e){if("object"!==YR(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==YR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function KR(t,e){return(KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$R(t);if(e){var o=$R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return qR(this,r)}}function qR(t,e){if(e&&("object"===YR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return JR(t)}function JR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $R(t){return($R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KR(t,e)}(i,yR);var e,r,n,o=QR(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._element=new LR([t]),r._delegate=new MS({geometry:r._element}),r._overlayType="billboard",r._allowDrillPicking=!1,r._attr={},r._bid=Bt.uuid(),r._contextMenu=[],r._id=Bt.uuid(),r._state="added",r._initPos=r._element.getPoints(),r._posArr=r._element.getPoints(),r._zIndex=999,r._position={lng:t[0],lat:t[1],alt:0},r._styles={size:[50,50],anchor:[.5,1],icon:e,text:"",font:"13px Microsoft YaHei",pixelOffset:{x:0,y:0},fillColor:"#fff",outlineWidth:.5,outlineColor:"#000"},r._anchor=je.BOTTOM_CENTER,e&&r._setStyle(r._styles),qR(r,JR(r))}return e=i,(r=[{key:"show",set:function(t){if(void 0!=t){this._show=t;var e=this;setTimeout(function(){e._getImageSrc(e._styles.size,function(){t?e._setStyle(e._styles):(e._delegate.setStyle(null),e.layer._delegate.setStyle(null))})})}}},{key:"icon",get:function(){return this._styles.icon},set:function(t){t&&(this._styles.icon=t,this._setStyle(this._styles))}},{key:"size",get:function(){return this._styles.size},set:function(t){this._styles.size=t,this._setStyle(this._styles)}},{key:"position",get:function(){return this._position},set:function(t){2==t.length&&(this._position={alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._posArr=ZR()([t]),this._initPos=ZR()([t]),this._element.setPoints([t]))}},{key:"_setLabel",value:function(t,e){for(var r in this._styles.text=t,e||(e={}),e)e[r]||delete e[r];Bt.merge(this._styles,e),this._setStyle(this._styles)}},{key:"setLabel",value:function(t,e){this._setLabel(t,e)}},{key:"anchor",get:function(){return this._anchor},set:function(t){switch(t){case je.TOP_LEFT:this._styles.anchor=[0,0];break;case je.TOP_CENTER:this._styles.anchor=[.5,0];break;case je.TOP_RIGHT:this._styles.anchor=[1,0];break;case je.BOTTOM_LEFT:this._styles.anchor=[0,1];break;case je.BOTTOM_CENTER:this._styles.anchor=[.5,1];break;case je.BOTTOM_RIGHT:this._styles.anchor=[1,1];break;case je.CENTER_CENTER:this._styles.anchor=[.5,.5]}this._setStyle(this._styles)}},{key:"_setStyle",value:function(t){var e=this;for(var r in t)t[r]&&(this._styles[r]=t[r]);if("object"==YR(this._styles.icon)){var n=this;n._styles.icon.load(function(){requestAnimationFrame(function t(){n._getImageSrc(n._styles.size,function(t){n._delegate.setStyle(new fE({image:new aT({anchor:[.5,.5],crossOrigin:"anonymous",rotateWithView:!0,src:t}),text:new fR({font:n._styles.font,fill:new oE({color:n._styles.fillColor}),stroke:new iE({color:n._styles.outlineColor,width:n._styles.outlineWidth}),text:n._styles.text||"",offsetX:n._styles.pixelOffset.x,offsetY:n._styles.pixelOffset.y})}))},n._styles.icon.get_canvas().toDataURL("image/png")),requestAnimationFrame(t)})})}else this._getImageSrc(this._styles.size,function(t){var r={image:new aT({anchor:e._styles.anchor,crossOrigin:"anonymous",rotateWithView:!0,src:t}),text:new fR({font:e._styles.font||"13px Microsoft YaHei",fill:new oE({color:e._styles.fillColor||"#fff"}),stroke:new iE({color:e._styles.outlineColor||"#000",width:e._styles.outlineWidth||.5}),text:e._styles.text||"",offsetX:e._styles.pixelOffset.x||0,offsetY:e._styles.pixelOffset.y||0})};e._styles.icon||delete r.image;var n=new fE(r);e._delegate.setStyle(n)})}},{key:"setStyle",value:function(t){this._setStyle(t)}},{key:"_getImageSrc",value:function(t,e,r){var n,o,i,a=this._styles,s=new Image;s.src=r||(a.icon||""),s.setAttribute("crossOrigin","Anonymous");var u=this;s.onload=function(){o=u._styles.size[0],i=u._styles.size[1];var t=document.createElement("canvas");t.width=o,t.height=i,t.getContext("2d").drawImage(s,0,0,o,i),n=t.toDataURL(),e&&e(n)}}},{key:"_baseFeature",value:function(t){var e=new fE({image:new aT({anchor:[.5,.5],crossOrigin:"anonymous",rotateWithView:!0,src:t}),text:new fR({font:"13px Microsoft YaHei",fill:new oE({color:"#666"}),stroke:new iE({color:"#fff",width:3}),text:"",offsetX:15,offsetY:15})});this._delegate.setStyle(e)}}])&&XR(e.prototype,r),n&&XR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ek(t){"@babel/helpers - typeof";return(ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ek(i=function(t,e){if("object"!==ek(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ek(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function nk(t,e){return(nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ok(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ik(t);if(e){var o=ik(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ek(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ik(t){return(ik=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ak=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nk(t,e)}(i,AR(PR,AA));var e,r,n,o=ok(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.POLYLINE,e.geo_type="LineString",e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(t){this.getPointCount()<2||(t&&(this.points=t),this.setCoordinates(this.points))}}])&&rk(e.prototype,r),n&&rk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sk(t){"@babel/helpers - typeof";return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===sk(i=function(t,e){if("object"!==sk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function lk(t,e){return(lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ck(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fk(t);if(e){var o=fk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fk(t){return(fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lk(t,e)}(i,yR);var e,r,n,o=ck(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new ak(t.map(function(t){return[new Number(t[0]),new Number(t[1])]})),e._delegate=new MS({geometry:e._element}),e._overlayType="arrowLine",e._state="added",e._initPos=e._element.getPoints(),e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._styles={lineColor:"rgba(255,255,255, 0)",fillColor:"rgba(18,150,219, 0)",width:8,img:fo,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},e.setStyle(e._styles),e}return e=i,(r=[{key:"positions",get:function(){return this._positions},set:function(t){t.length<2||(this._initPos=ZR()(t),this._posArr=ZR()(t),this._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),this._element.setPoints(t))}},{key:"setStyle",value:function(t){var e=this;this._delegate.setStyle(function(r,n){var o=r.getGeometry(),i=e._defaultStyles(t),a=o.getLength(),s=50*n,u=Math.floor(a/s),l=[],c=[0];o.forEachSegment(function(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=Math.atan2(n,r);c.unshift(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))+c[0]),l.push(o)});for(var f=function(e){var r=o.getCoordinateAt(e/u),n=e*s,a=c.findIndex(function(t){return t<=n});i.push(new fE({geometry:new pO(r),image:new aT({src:t.img||fo,opacity:.5,anchor:[.5,.5],rotateWithView:!0,rotation:-l[c.length-a-1],scale:.06}),zIndex:t.zIndex||999}))},p=1;p<u;++p)f(p);return i})}},{key:"_getExtentByGpsList",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(t,e){var r,n=vw(e,"EPSG:4326",void 0!==r?r:"EPSG:3857");return(null===t[0]||n[0]<t[0])&&(t[0]=n[0]),(null===t[1]||n[1]<t[1])&&(t[1]=n[1]),(null===t[2]||n[0]>t[2])&&(t[2]=n[0]),(null===t[3]||n[1]>t[3])&&(t[3]=n[1]),t},[null,null,null,null])}},{key:"_fitViewByGpsList",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.map&&e&&!(e.length<2)){var r=this._getExtentByGpsList(e);t.fit(r,{constrainResolution:!1,padding:[100,100,100,100]})}}},{key:"_defaultStyles",value:function(t){var e=t.width||8;return[new fE({stroke:new iE({color:"rgba(255,255,255, 0)",width:e+4})}),new fE({stroke:new iE({color:"rgba(18,150,219, 0)",width:e})})]}}])&&uk(e.prototype,r),n&&uk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hk(t){"@babel/helpers - typeof";return(hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===hk(i=function(t,e){if("object"!==hk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function dk(t,e){return(dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_k(t);if(e){var o=_k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mk(this,r)}}function mk(t,e){if(e&&("object"===hk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bk(t)}function bk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _k(t){return(_k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dk(t,e)}(i,yR);var e,r,n,o=vk(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new LR([t]),e._delegate=new MS({geometry:e._element}),e._overlayType="flashPoint",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._position={lng:t[0],lat:t[1],alt:0},e._globalID=null,e._style={size:30,fillColor:"rgb(255,1,1)",font:"13px Microsoft YaHei",textPixelOffset:{x:0,y:0},textFillColor:"#666",textOutlineWidth:3,textOutlineColor:"#fff"},e._flashAnimate(),mk(e,bk(e))}return e=i,(r=[{key:"position",get:function(){return this._position},set:function(t){2==t.length&&(this._position={alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._posArr=ZR()([t]),this._initPos=ZR()([t]),this._element.setPoints([t]))}},{key:"_flashAnimate",value:function(){var t,e=0,r=this;t=requestAnimationFrame(function n(){e>=r._style.size&&(e=0);var o=((r._style.size-e)*(1/r._style.size)).toFixed(2);-1!=r._style.fillColor.indexOf("#")&&(r._style.fillColor=r.colorRGB(r._style.fillColor));var i=r._style.fillColor.split("(")[1].split(")")[0].split(","),a=new nE({radius:.8*e,stroke:new iE({color:"rgba("+i[0]+","+i[1]+","+i[2]+","+o+")",width:2*e*.8})}),s=new fE({image:a,text:new fR({font:r._style.font||"13px Microsoft YaHei",fill:new oE({color:r._style.textFillColor||"#666"}),stroke:new iE({color:r._style.textOutlineColor||"#fff",width:r._style.textOutlineWidth||3}),text:r._style.text||"",offsetX:r._style.textPixelOffset.x||0,offsetY:r._style.textPixelOffset.y||0})});r._delegate.setStyle(s),e+=.9,t=requestAnimationFrame(n)}),this._globalID=t}},{key:"_flashAnimateClose",value:function(){cancelAnimationFrame(this._globalID)}},{key:"_setLabel",value:function(t,e){this._style.text=t,e||(e={}),this._style.font=e.font||"13px Microsoft YaHei",this._style.textPixelOffset=e.pixelOffset||{x:0,y:0},this._style.textFillColor=e.fillColor||"#666",this._style.textOutlineWidth=e.outlineWidth||3,this._style.textOutlineColor=e.outlineColor||"#fff",this._setStyle(this._style)}},{key:"setLabel",value:function(t,e){this._setLabel(t,e)}},{key:"colorRGB",value:function(t,e){var r="number"==typeof e;if(!/^(#?)[a-fA-F0-9]{6}$/.test(t))return"";for(var n=t.replace(/#/,""),o=[],i="",a=0;a<3;a++){var s=n.substring(2*a,2*a+2),u=parseInt(s,16);o.push(u)}return i=o.join(),i="rgb"+(r?"a":"")+"("+i+(r?","+e:"")+")"}},{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._style[e]=t[e])}},{key:"setStyle",value:function(t){this._setStyle(t)}},{key:"remove",value:function(){return!!this.layer&&(this.layer.removeOverlay(this),!0)}}])&&yk(e.prototype,r),n&&yk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wk(t){"@babel/helpers - typeof";return(wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ok(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===wk(i=function(t,e){if("object"!==wk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Pk(t,e){return(Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ck(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Sk(t);if(e){var o=Sk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Sk(t){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ek=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pk(t,e)}(i,yR);var e,r,n,o=Ck(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new ak(t.map(function(t){return[new Number(t[0]),new Number(t[1])]})),e._delegate=new MS({geometry:e._element}),e._overlayType="polyline",e._state="added",e._initPos=e._element.getPoints(),e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._styles={fillColor:"rgba(255,255,255,0.3)",width:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},e}return e=i,(r=[{key:"positions",get:function(){return this._positions},set:function(t){t.length<2||(this._initPos=ZR()(t),this._posArr=ZR()(t),this._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),this._element.setPoints(t))}},{key:"setStyle",value:function(t){var e;if(t){for(var r in t)t[r]&&(this._styles[r]=t[r]);var n,o;n=new iE({color:t.fillColor||"#1E90FF",width:t.width||2}),o=new fR({font:t.font||"13px Microsoft YaHei",fill:new oE({color:t.textFillColor||"#666"}),stroke:new iE({color:t.textOutlineColor||"#fff",width:t.textOutlineWidth||3}),text:t.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0}),e=new fE({stroke:n,text:o}),t.zIndex&&e.setZIndex(t.zIndex)}else null==t&&(e=null);this._delegate.setStyle(e)}}])&&Ok(e.prototype,r),n&&Ok(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tk(t){"@babel/helpers - typeof";return(Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Tk(i=function(t,e){if("object"!==Tk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Tk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function xk(t,e){return(xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ak(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rk(t);if(e){var o=Rk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rk(t){return(Rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xk(t,e)}(i,AR(PR,EO));var e,r,n,o=Ak(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.POLYGON,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(t){this.getPointCount()<2||(t&&(this.points=t),this.setCoordinates([this.points]))}}])&&jk(e.prototype,r),n&&jk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),Ik=n(5);function Mk(t){"@babel/helpers - typeof";return(Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===Mk(i=function(t,e){if("object"!==Mk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function Lk(t,e){return(Lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fk(t);if(e){var o=Fk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fk(t){return(Fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lk(t,e)}(i,yR);var e,r,n,o=Nk(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new kk(t),e._delegate=new SA.Feature({geometry:e._element}),e._overlayType="polygon",e._state="added",e._initPos=Object(Ik.clonedeep)(t),e._posArr=Object(Ik.clonedeep)(t),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._minPointCount=3,e}return e=i,(r=[{key:"positions",get:function(){return this._positions},set:function(t){t.length<this._minPointCount||(this._initPos=Object(Ik.clonedeep)(t),this._posArr=Object(Ik.clonedeep)(t),this._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),this._element.setPoints(Object(Ik.clonedeep)(t)))}},{key:"center",get:function(){var t=me(this._element.getPoints().map(function(t){return{lng:t[0],lat:t[1],alt:0}}));return{lng:t.lng,lat:t.lat,alt:0}}}])&&Dk(e.prototype,r),n&&Dk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),Wk={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4,HELPER_HIDDEN_DIV:"p-helper-hidden-div",HELPER_CONTROL_POINT_DIV:"p-helper-control-point-div",SE_DISABLED:"se_disabled"};function Gk(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function zk(t){for(var e=0,r=0;r<t.length-1;r++)e+=Gk(t[r],t[r+1]);return e}function Hk(t){return Math.pow(zk(t),.99)}function Uk(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Vk(t,e,r){var n=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=[n[0]-t[1]+e[1],n[1]+t[0]-e[0]],i=[(t[0]+r[0])/2,(t[1]+r[1])/2];return function(t,e,r,n){if(t[1]==e[1]){var o=(n[0]-r[0])/(n[1]-r[1]),i=o*(t[1]-r[1])+r[0],a=t[1];return[i,a]}if(r[1]==n[1]){var s=(e[0]-t[0])/(e[1]-t[1]);return i=s*(r[1]-t[1])+t[0],a=r[1],[i,a]}return s=(e[0]-t[0])/(e[1]-t[1]),o=(n[0]-r[0])/(n[1]-r[1]),a=(s*t[1]-t[0]-o*r[1]+r[0])/(s-o),[i=s*a-s*t[1]+t[0],a]}(n,o,i,[i[0]-t[1]+r[1],i[1]+t[0]-r[0]])}function Zk(t,e){var r,n=Math.asin(Math.abs(e[1]-t[1])/Gk(t,e));return e[1]>=t[1]&&e[0]>=t[0]?r=n+Math.PI:e[1]>=t[1]&&e[0]<t[0]?r=Wk.TWO_PI-n:e[1]<t[1]&&e[0]<t[0]?r=n:e[1]<t[1]&&e[0]>=t[0]&&(r=Math.PI-n),r}function Yk(t,e,r){var n=Zk(e,t)-Zk(e,r);return n<0?n+Wk.TWO_PI:n}function Xk(t,e,r){return(r[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(r[0]-t[0])}function Kk(t,e,r,n,o){var i=1-(t=Math.max(Math.min(t,1),0)),a=t*t,s=a*t,u=i*i,l=u*i;return[l*e[0]+3*u*t*r[0]+3*i*a*n[0]+s*o[0],l*e[1]+3*u*t*r[1]+3*i*a*n[1]+s*o[1]]}function Qk(t,e,r,n,o){var i=Zk(t,e),a=o?i+r:i-r,s=n*Math.cos(a),u=n*Math.sin(a);return[e[0]+s,e[1]+u]}function qk(t,e,r,n){var o,i,a=[],s=n-r;s=s<0?s+Wk.TWO_PI:s;for(var u=0;u<=Wk.FITTING_COUNT;u++){var l=r+s*u/Wk.FITTING_COUNT;o=t[0]+e*Math.cos(l),i=t[1]+e*Math.sin(l),a.push([o,i])}return a}function Jk(t,e,r,n){var o=$k(e,r,n),i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),a=o[0]/i,s=o[1]/i,u=Gk(e,r),l=Gk(r,n);if(i>Wk.ZERO_TOLERANCE)if(Xk(e,r,n)){var c=t*u,f=r[0]-c*s,p=r[1]+c*a,h=[f,p];c=t*l;var y=[f=r[0]+c*s,p=r[1]-c*a]}else c=t*u,h=[f=r[0]+c*s,p=r[1]-c*a],c=t*l,y=[f=r[0]-c*s,p=r[1]+c*a];else h=[f=r[0]+t*(e[0]-r[0]),p=r[1]+t*(e[1]-r[1])],y=[f=r[0]+t*(n[0]-r[0]),p=r[1]+t*(n[1]-r[1])];return[h,y]}function $k(t,e,r){var n=t[0]-e[0],o=t[1]-e[1],i=Math.sqrt(n*n+o*o);n/=i,o/=i;var a=r[0]-e[0],s=r[1]-e[1],u=Math.sqrt(a*a+s*s);return[n+(a/=u),o+(s/=u)]}function tI(e){var r=e[0],n=e[1],o=e[2],i=Jk(0,r,n,o)[0],a=$k(r,n,o);if(Math.sqrt(a[0]*a[0]+a[1]*a[1])>Wk.ZERO_TOLERANCE)var s=Uk(r,n),u=r[0]-s[0],l=r[1]-s[1],c=2/Gk(r,n),f=-c*l,p=c*u,h=f*f-p*p,y=2*f*p,d=p*p-f*f,v=i[0]-s[0],m=i[1]-s[1],b=s[0]+h*v+y*m,_=s[1]+y*v+d*m;else b=r[0]+t*(n[0]-r[0]),_=r[1]+t*(n[1]-r[1]);return[b,_]}function eI(e){var r=e.length,n=e[r-3],o=e[r-2],i=e[r-1],a=Jk(0,n,o,i)[1],s=$k(n,o,i);if(Math.sqrt(s[0]*s[0]+s[1]*s[1])>Wk.ZERO_TOLERANCE)var u=Uk(o,i),l=i[0]-u[0],c=i[1]-u[1],f=2/Gk(o,i),p=-f*c,h=f*l,y=p*p-h*h,d=2*p*h,v=h*h-p*p,m=a[0]-u[0],b=a[1]-u[1],_=u[0]+y*m+d*b,g=u[1]+d*m+v*b;else _=i[0]+t*(o[0]-i[0]),g=i[1]+t*(o[1]-i[1]);return[_,g]}function rI(t){if(t.length<=2)return t;for(var e=[],r=t.length-1,n=0;n<=1;n+=.01){for(var o=0,i=0,a=0;a<=r;a++){var s=nI(r,a),u=Math.pow(n,a),l=Math.pow(1-n,r-a);o+=s*u*l*t[a][0],i+=s*u*l*t[a][1]}e.push([o,i])}return e.push(t[r]),e}function nI(t,e){return oI(t)/(oI(e)*oI(t-e))}function oI(t){if(t<=1)return 1;if(2==t)return 2;if(3==t)return 6;if(4==t)return 24;if(5==t)return 120;for(var e=1,r=1;r<=t;r++)e*=r;return e}function iI(t){if(t.length<=2)return t;var e=[],r=t.length-2-1;e.push(t[0]);for(var n=0;n<=r;n++)for(var o=0;o<=1;o+=.05){for(var i=0,a=0,s=0;s<=2;s++){var u=aI(s,o);i+=u*t[n+s][0],a+=u*t[n+s][1]}e.push([i,a])}return e.push(t[t.length-1]),e}function aI(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0}function sI(t){"@babel/helpers - typeof";return(sI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===sI(i=function(t,e){if("object"!==sI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function lI(t,e){return(lI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fI(t);if(e){var o=fI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fI(t){return(fI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lI(t,e)}(i,AR(PR,EO));var e,r,n,o=cI(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.CIRCLE,e.fixPointCount=2,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=Gk(t,this.points[1]);this.setCoordinates([this.generatePoints(t,e)])}}},{key:"generatePoints",value:function(t,e){for(var r,n,o,i=[],a=0;a<=Wk.FITTING_COUNT;a++)o=2*Math.PI*a/Wk.FITTING_COUNT,r=t[0]+e*Math.cos(o),n=t[1]+e*Math.sin(o),i.push([r,n]);return i}}])&&uI(e.prototype,r),n&&uI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hI(t){"@babel/helpers - typeof";return(hI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===hI(i=function(t,e){if("object"!==hI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function dI(t,e){return(dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_I(t);if(e){var o=_I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mI(this,r)}}function mI(t,e){if(e&&("object"===hI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bI(t)}function bI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _I(t){return(_I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dI(t,e)}(i,yR);var e,r,n,o=vI(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this);var n=t.map(Number);if(e){var a=e/new sw("EPSG:4326").getMetersPerUnit(),s=r._generatePoints(n,a);r._initPos=[n,s[0]],r._element=new pI([n,s[0]])}else r._element=new pI([n]),r._initPos=[n];return r._delegate=new MS({geometry:r._element}),r._overlayType="circle",r._state="added",r._posArr=[n],r._positions={lng:n[0],lat:n[1],alt:0},r._center={alt:0,heading:0,lat:n[1],lng:n[0],pitch:0,roll:0},r._radius=e,r.pts=r._element.getFlatCoordinates(),mI(r,bI(r))}return e=i,(r=[{key:"center",get:function(){var t=this._element.points[0];return{alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0}},set:function(t){console.error("center",t);var e=t.map(Number);this._center={alt:0,heading:0,lat:e[1],lng:e[0],pitch:0,roll:0};var r=new sw("EPSG:4326").getMetersPerUnit(),n=this._radius/r,o=this._generatePoints(e,n);this._initPos=[e,o[0]],this._posArr=[e],this._element.setPoints(this._initPos)}},{key:"radius",get:function(){var t=new sw("EPSG:4326").getMetersPerUnit();return Gk(this.delegate.getGeometry().points[0],this.delegate.getGeometry().points[1])*t},set:function(t){this._radius=t;var e=t/new sw("EPSG:4326").getMetersPerUnit(),r=this._element.points[0],n=this._generatePoints(r,e);this._initPos=[r,n[0]],this._element.setPoints([r,n[0]])}},{key:"_generatePoints",value:function(t,e){for(var r,n,o,i=[],a=0;a<=Wk.FITTING_COUNT;a++)o=2*Math.PI*a/Wk.FITTING_COUNT,r=t[0]+e*Math.cos(o),n=t[1]+e*Math.sin(o),i.push([r,n]);return i}}])&&yI(e.prototype,r),n&&yI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wI(t){"@babel/helpers - typeof";return(wI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===wI(i=function(t,e){if("object"!==wI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function PI(t,e){return(PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function CI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=TI(t);if(e){var o=TI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return SI(this,r)}}function SI(t,e){if(e&&("object"===wI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return EI(t)}function EI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TI(t){return(TI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}(i,yR);var e,r,n,o=CI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._circleElement=new pI([t],e),r._element=r._circleElement,r._delegate=new EA.a.Feature({geometry:r._circleElement}),r._overlayType="diffuseCircle",r._allowDrillPicking=!1,r._attr={},r._bid=Bt.uuid(),r._contextMenu=[],r._id=Bt.uuid(),r._state="added",2==r._delegate.R.target.points[0][0].length?r._posArr=r._delegate.R.target.points[0]:r._posArr=r._delegate.R.target.points,r._initPos=t,r._posArr=r._element.getPoints(),r._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),r._style={size:30,fillColor:"rgb(255,1,1)",font:"13px Microsoft YaHei",textPixelOffset:{x:0,y:0},textFillColor:"#666",textOutlineWidth:3,textOutlineColor:"#fff"},"[object Array]"!=Object.prototype.toString.call(t[0])?r._center={_alt:0,_heading:0,_lat:t[1],_lng:t[0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0}:r._center={_alt:0,_heading:0,_lat:t[0][1],_lng:t[0][0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[0][1],lng:t[0][0],pitch:0,roll:0},r._radius=r._delegate.R.target._radius,r._flashAnimate(),SI(r,EI(r))}return e=i,(r=[{key:"center",get:function(){return 2!=this._posArr.length?this._center:{_alt:0,_heading:0,_lat:this._posArr[0][1],_lng:this._posArr[0][0],_pitch:0,_roll:0,alt:0,heading:0,lat:this._posArr[0][1],lng:this._posArr[0][0],pitch:0,roll:0}},set:function(t){this._center={_alt:0,_heading:0,_lat:t[1],_lng:t[0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._posArr=[t],this._circleElement.generate(t,this._radius)}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t,this._circleElement.generate([this.center.lng,this.center.lat],t)}},{key:"_flashAnimate",value:function(){var t,e,r=0,n=this,o=0;e=requestAnimationFrame(function i(){1==n._posArr.length?2==n._posArr[0].length&&(t=nw(n._posArr[0][0],n._posArr[0][1])):2==n._posArr.length&&(t=nw(n._posArr[0],n._posArr[1])),t&&r>=t&&(r=0),o++,n.radius=r;var a=t/540;a&&(r+=a),e=requestAnimationFrame(i),600==o&&(o=0),setTimeout(function(){var e=(1/t*(t-r)).toFixed(2);"NaN"==e&&(e=1),-1!=n._style.fillColor.indexOf("#")&&(n._style.fillColor=n.colorRGB(n._style.fillColor));var o,i,a,s=n._styles.fillColor.split("(")[1].split(")")[0].split(",");n._styles.fillColor="rgba("+s[0]+","+s[1]+","+s[2]+","+e+")",n._styles.lineColor="rgba("+s[0]+","+s[1]+","+s[2]+","+(Number(e)+.1)+")",i=new oE({color:n._styles.fillColor||"rgba(255,255,255,0.3)"}),o=new iE({color:n._styles.lineColor||"#1E90FF",width:n._styles.lineWidth||2}),a=new fR({font:n._styles.font||"13px Microsoft YaHei",fill:new oE({color:n._styles.textFillColor||"#666"}),stroke:new iE({color:n._styles.textOutlineColor||"#fff",width:n._styles.textOutlineWidth||3}),text:n._styles.text||"",offsetX:n._styles.textPixelOffset.x||0,offsetY:n._styles.textPixelOffset.y||0});var u=new fE({fill:i,stroke:o,text:a});n._delegate.setStyle(u)},5)}),this._globalID=e}},{key:"_flashAnimateClose",value:function(){cancelAnimationFrame(this._globalID)}},{key:"colorRGB",value:function(t,e){var r="number"==typeof e;if(!/^(#?)[a-fA-F0-9]{6}$/.test(t))return"";for(var n=t.replace(/#/,""),o=[],i="",a=0;a<3;a++){var s=n.substring(2*a,2*a+2),u=parseInt(s,16);o.push(u)}return i=o.join(),i="rgb"+(r?"a":"")+"("+i+(r?","+e:"")+")"}}])&&OI(e.prototype,r),n&&OI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xI(t){"@babel/helpers - typeof";return(xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===xI(i=function(t,e){if("object"!==xI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function RI(t,e){return(RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DI(t);if(e){var o=DI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return II(this,r)}}function II(t,e){if(e&&("object"===xI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return MI(t)}function MI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DI(t){return(DI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}(i,yR);var e,r,n,o=kI(i);function i(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._circleElement=new pI([t],e),r._element=r._circleElement,r._delegate=new EA.a.Feature({geometry:r._circleElement}),r._overlayType="scanCircle",r._allowDrillPicking=!1,r._attr={},r._bid=Bt.uuid(),r._contextMenu=[],r._id=Bt.uuid(),r._initPos=t,r._state="added",r._target=r._delegate.R.target,2==r._delegate.R.target.points[0][0].length?r._posArr=r._delegate.R.target.points[0]:r._posArr=r._delegate.R.target.points,r._positions=(n=[],r._delegate.R.target.points.forEach(function(t){n.push({lng:t[0],lat:t[1],alt:0})}),n),r._style={size:30,fillColor:"rgb(255,1,1)",font:"13px Microsoft YaHei",textPixelOffset:{x:0,y:0},textFillColor:"#666",textOutlineWidth:3,textOutlineColor:"#fff"},"[object Array]"!=Object.prototype.toString.call(t[0])?r._center={_alt:0,_heading:0,_lat:t[1],_lng:t[0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0}:r._center={_alt:0,_heading:0,_lat:t[0][1],_lng:t[0][0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[0][1],lng:t[0][0],pitch:0,roll:0},r._delegate._delegate=MI(r),r._radius=r._delegate.R.target._radius,r._flashAnimate(),II(r,MI(r))}return e=i,(r=[{key:"center",get:function(){return 2!=this._posArr.length?this._center:{_alt:0,_heading:0,_lat:this._posArr[0][1],_lng:this._posArr[0][0],_pitch:0,_roll:0,alt:0,heading:0,lat:this._posArr[0][1],lng:this._posArr[0][0],pitch:0,roll:0}},set:function(t){this._center={_alt:0,_heading:0,_lat:t[1],_lng:t[0],_pitch:0,_roll:0,alt:0,heading:0,lat:t[1],lng:t[0],pitch:0,roll:0},this._posArr=[t],this._circleElement.generate(t,this._radius)}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t,this._circleElement.generate([this.center.lng,this.center.lat],t)}},{key:"_flashAnimate",value:function(){var t,e,r,n,o=this,i=new Image,a=document.createElement("canvas");a.width=500,a.height=500;var s=a.getContext("2d");s.translate(250,250),s.fillStyle="rgba(255, 1, 1, 1.2)",s.beginPath(),s.moveTo(0,0),s.arc(0,0,250,0,.3*Math.PI),s.closePath();var u=s.createRadialGradient(125,-125,170,100,300,150);u.addColorStop(0,"#ff1111"),u.addColorStop(.2,"#ff111199"),u.addColorStop(.4,"#ff111199"),u.addColorStop(.6,"#ff111199"),u.addColorStop(.8,"#ff111122"),u.addColorStop(.9,"#ff111111"),u.addColorStop(1,"#ff110000"),s.fillStyle=u,s.fill(),s.closePath(),s.save();var l=0;t=requestAnimationFrame(function u(){t=requestAnimationFrame(u),s.clearRect(0,0,500,500);var c=-(l+=.2),f=Math.PI/180*c;s.restore(),s.save(),s.rotate(f),s.beginPath(),s.beginPath(),s.moveTo(0,0),s.arc(0,0,250,0,.3*Math.PI),s.closePath();var p=s.createRadialGradient(125,-125,170,120,345,150);p.addColorStop(0,"#ff1111"),p.addColorStop(.2,"#ff111199"),p.addColorStop(.4,"#ff111199"),p.addColorStop(.6,"#ff111199"),p.addColorStop(.8,"#ff111144"),p.addColorStop(.9,"#ff111111"),p.addColorStop(1,"#ff110000"),s.fillStyle=p,s.fill(),s.closePath(),r=new oE,i.src=a.toDataURL("image/png"),r.setColor(s.createPattern(a,"no-repeat")),setTimeout(function(){e=new iE({color:o._styles.lineColor||"#1E90FF",width:o._styles.lineWidth||2}),n=new fR({font:o._styles.font||"13px Microsoft YaHei",fill:new oE({color:o._styles.textFillColor||"#666"}),stroke:new iE({color:o._styles.textOutlineColor||"#fff",width:o._styles.textOutlineWidth||3}),text:o._styles.text||"",offsetX:o._styles.textPixelOffset.x||0,offsetY:o._styles.textPixelOffset.y||0});var t=new fE({fill:r,stroke:e,text:n});o._delegate.setStyle(t)},5)}),this._globalID=t}},{key:"_flashAnimateClose",value:function(){cancelAnimationFrame(this._globalID)}},{key:"colorRGB",value:function(t,e){var r="number"==typeof e;if(!/^(#?)[a-fA-F0-9]{6}$/.test(t))return"";for(var n=t.replace(/#/,""),o=[],i="",a=0;a<3;a++){var s=n.substring(2*a,2*a+2),u=parseInt(s,16);o.push(u)}return i=o.join(),i="rgb"+(r?"a":"")+"("+i+(r?","+e:"")+")"}}])&&AI(e.prototype,r),n&&AI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NI(t){"@babel/helpers - typeof";return(NI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===NI(i=function(t,e){if("object"!==NI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BI(t,e){return(BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GI(t);if(e){var o=GI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GI(t){return(GI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}(i,AR(PR,EO));var e,r,n,o=WI(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.ELLIPSE,e.fixPointCount=2,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=this.points[1],r=Uk(t,e),n=Math.abs((t[0]-e[0])/2),o=Math.abs((t[1]-e[1])/2);this.setCoordinates([this.generatePoints(r,n,o)])}}},{key:"generatePoints",value:function(t,e,r){for(var n,o,i,a=[],s=0;s<=Wk.FITTING_COUNT;s++)i=2*Math.PI*s/Wk.FITTING_COUNT,n=t[0]+e*Math.cos(i),o=t[1]+r*Math.sin(i),a.push([n,o]);return a}}])&&FI(e.prototype,r),n&&FI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HI(t){"@babel/helpers - typeof";return(HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===HI(i=function(t,e){if("object"!==HI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==HI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function VI(t,e){return(VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ZI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KI(t);if(e){var o=KI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return YI(this,r)}}function YI(t,e){if(e&&("object"===HI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return XI(t)}function XI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KI(t){return(KI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}(i,yR);var e,r,n,o=ZI(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new zI(t),e._delegate=new MS({geometry:e._element}),e._overlayType="ellipse",e._state="added",e._initPos=t.map(function(t){return[t[0],t[1]]}),e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),YI(e,XI(e))}return e=i,(r=[{key:"positions",get:function(){return this._positions},set:function(t){t.length<2||(this._initPos=ZR()(t),this._posArr=ZR()(t),this._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),this._element.setPoints(t))}}])&&UI(e.prototype,r),n&&UI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qI(t){"@babel/helpers - typeof";return(qI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qI(i=function(t,e){if("object"!==qI(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $I(t,e){return($I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eM(t);if(e){var o=eM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eM(t){return(eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$I(t,e)}(i,AR(PR,EO));var e,r,n,o=tM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.RECTANGLE,e.fixPointCount=2,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=this.points[1],r=Math.min(t[0],e[0]),n=Math.max(t[0],e[0]),o=Math.min(t[1],e[1]),i=Math.max(t[1],e[1]),a=[r,i],s=[n,i],u=[n,o],l=[r,o];this.setCoordinates([[a,s,u,l]])}}}])&&JI(e.prototype,r),n&&JI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nM(t){"@babel/helpers - typeof";return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===nM(i=function(t,e){if("object"!==nM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function iM(t,e){return(iM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lM(t);if(e){var o=lM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return sM(this,r)}}function sM(t,e){if(e&&("object"===nM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uM(t)}function uM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lM(t){return(lM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iM(t,e)}(i,yR);var e,r,n,o=aM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new rM(t),e._delegate=new MS({geometry:e._element}),e._overlayType="rectangle",e._state="added",e._initPos=e._element.getPoints(),e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),sM(e,uM(e))}return e=i,(r=[{key:"positions",get:function(){return this._positions},set:function(t){t.length<2||(this._initPos=ZR()(t),this._posArr=ZR()(t),this._positions=t.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}}),this._element.setPoints(t))}},{key:"center",get:function(){var t=this._element.getPoints(),e=t[0],r=t[1],n=Math.min(e[0],r[0]),o=Math.max(e[0],r[0]),i=lb([n,Math.min(e[1],r[1]),o,Math.max(e[1],r[1])]);return{lng:i[0],lat:i[1],alt:0}}}])&&oM(e.prototype,r),n&&oM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fM(t){"@babel/helpers - typeof";return(fM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===fM(i=function(t,e){if("object"!==fM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function hM(t,e){return(hM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=dM(t);if(e){var o=dM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function dM(t){return(dM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hM(t,e)}(i,AR(PR,EO));var e,r,n,o=yM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.ATTACK_ARROW,e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.headTailFactor=.8,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2))if(2!=this.getPointCount()){var t=this.getPoints(),e=t[0],r=t[1];Xk(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Uk(e,r)].concat(t.slice(2)),o=this.getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Gk(e,r)/Hk(n),u=this.getArrowBodyPoints(n,i,a,s),l=u.length,c=[e].concat(u.slice(0,l/2));c.push(i);var f=[r].concat(u.slice(l/2,l));f.push(a),c=iI(c),f=iI(f),this.setCoordinates([c.concat(o,f.reverse())])}else this.setCoordinates([this.points])}},{key:"getArrowHeadPoints",value:function(t,e,r){var n=Hk(t),o=n*this.headHeightFactor,i=t[t.length-1];n=Gk(i,t[t.length-2]);var a=Gk(e,r);o>a*this.headTailFactor&&(o=a*this.headTailFactor);var s=o*this.headWidthFactor,u=o*this.neckWidthFactor,l=(o=o>n?n:o)*this.neckHeightFactor,c=Qk(t[t.length-2],i,0,o,!0),f=Qk(t[t.length-2],i,0,l,!0),p=Qk(i,c,Wk.HALF_PI,s,!1),h=Qk(i,c,Wk.HALF_PI,s,!0);return[Qk(i,f,Wk.HALF_PI,u,!1),p,i,h,Qk(i,f,Wk.HALF_PI,u,!0)]}},{key:"getArrowBodyPoints",value:function(t,e,r,n){for(var o=zk(t),i=Hk(t)*n,a=(i-Gk(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Yk(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Gk(t[c-1],t[c]))/o*a)/Math.sin(f),h=Qk(t[c-1],t[c],Math.PI-f,p,!0),y=Qk(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}}])&&pM(e.prototype,r),n&&pM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mM(t){"@babel/helpers - typeof";return(mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===mM(i=function(t,e){if("object"!==mM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function _M(t,e){return(_M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wM(t);if(e){var o=wM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wM(t){return(wM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_M(t,e)}(i,Bk);var e,r,n,o=gM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new vM(t),e._delegate=new MS({geometry:e._element}),e._overlayType="attackArrow",e._minPointCount=3,e}return e=i,r&&bM(e.prototype,r),n&&bM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function PM(t){"@babel/helpers - typeof";return(PM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===PM(i=function(t,e){if("object"!==PM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==PM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function SM(t,e){return(SM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=TM(t);if(e){var o=TM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===PM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function TM(t){return(TM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SM(t,e)}(i,AR(PR,EO));var e,r,n,o=EM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.CLOSED_CURVE,e.t=.3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!((t=this.getPointCount())<2))if(2==t)this.setCoordinates([this.points]);else{var t,e=this.getPoints();e.push(e[0],e[1]);for(var r=[],n=0;n<e.length-2;n++){var o=Jk(this.t,e[n],e[n+1],e[n+2]);r=r.concat(o)}r=[r[(t=r.length)-1]].concat(r.slice(0,t-1));var i=[];for(n=0;n<e.length-2;n++){var a=e[n],s=e[n+1];i.push(a);for(var u=0;u<=Wk.FITTING_COUNT;u++){var l=Kk(u/Wk.FITTING_COUNT,a,r[2*n],r[2*n+1],s);i.push(l)}i.push(s)}this.setCoordinates([i])}}}])&&CM(e.prototype,r),n&&CM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xM(t){"@babel/helpers - typeof";return(xM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===xM(i=function(t,e){if("object"!==xM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function RM(t,e){return(RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IM(t);if(e){var o=IM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function IM(t){return(IM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RM(t,e)}(i,Bk);var e,r,n,o=kM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new jM(t),e._delegate=new MS({geometry:e._element}),e._overlayType="closedCurve",e._minPointCount=3,e}return e=i,r&&AM(e.prototype,r),n&&AM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function DM(t){"@babel/helpers - typeof";return(DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===DM(i=function(t,e){if("object"!==DM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==DM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function NM(t,e){return(NM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BM(t);if(e){var o=BM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===DM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BM(t){return(BM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NM(t,e)}(i,AR(PR,AA));var e,r,n,o=FM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.CURVE,e.t=.3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){var t=this.getPointCount();t<2||(2==t?this.setCoordinates(this.points):this.setCoordinates(function(t,e){for(var r=[tI(e)],n=0;n<e.length-2;n++){var o=e[n],i=e[n+1],a=Jk(t,o,i,e[n+2]);r=r.concat(a)}var s=eI(e);r.push(s);var u=[];for(n=0;n<e.length-1;n++){for(o=e[n],i=e[n+1],u.push(o),t=0;t<Wk.FITTING_COUNT;t++){var l=Kk(t/Wk.FITTING_COUNT,o,r[2*n],r[2*n+1],i);u.push(l)}u.push(i)}return u}(this.t,this.points)))}}])&&LM(e.prototype,r),n&&LM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function GM(t){"@babel/helpers - typeof";return(GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===GM(i=function(t,e){if("object"!==GM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==GM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function HM(t,e){return(HM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=YM(t);if(e){var o=YM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return VM(this,r)}}function VM(t,e){if(e&&("object"===GM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZM(t)}function ZM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YM(t){return(YM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HM(t,e)}(i,yR);var e,r,n,o=UM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new WM(t),e._delegate=new MS({geometry:e._element}),e._overlayType="curve",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._styles={fillColor:"rgba(255,255,255,0.3)",width:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},VM(e,ZM(e))}return e=i,(r=[{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._styles[e]=t[e]);var r,n;r=new iE({color:t.fillColor||"#1E90FF",width:t.width||2}),n=new fR({font:t.font||"13px Microsoft YaHei",fill:new oE({color:t.textFillColor||"#666"}),stroke:new iE({color:t.textOutlineColor||"#fff",width:t.textOutlineWidth||3}),text:t.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0});var o=new fE({stroke:r,text:n});this._delegate.setStyle(o)}},{key:"setStyle",value:function(t){this._setStyle(t)}}])&&zM(e.prototype,r),n&&zM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function KM(t){"@babel/helpers - typeof";return(KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===KM(i=function(t,e){if("object"!==KM(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==KM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function qM(t,e){return(qM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function JM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$M(t);if(e){var o=$M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===KM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $M(t){return($M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qM(t,e)}(i,AR(PR,EO));var e,r,n,o=JM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.DOUBLE_ARROW,e.headHeightFactor=.25,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.connPoint=null,e.tempPoint4=null,e.fixPointCount=4,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!((i=this.getPointCount())<2))if(2!=i){var t,e,r=this.points[0],n=this.points[1],o=this.points[2],i=this.getPointCount();this.tempPoint4=3==i?this.getTempPoint4(r,n,o):this.points[3],this.connPoint=3==i||4==i?Uk(r,n):this.points[4],Xk(r,n,o)?(t=this.getArrowPoints(r,this.connPoint,this.tempPoint4,!1),e=this.getArrowPoints(this.connPoint,n,o,!0)):(t=this.getArrowPoints(n,this.connPoint,o,!1),e=this.getArrowPoints(this.connPoint,r,this.tempPoint4,!0));var a=t.length,s=(a-5)/2,u=t.slice(0,s),l=t.slice(s,s+5),c=t.slice(s+5,a),f=e.slice(0,s),p=e.slice(s,s+5),h=e.slice(s+5,a);f=rI(f);var y=rI(h.concat(u.slice(1)));c=rI(c);var d=f.concat(p,y,l,c);this.setCoordinates([d])}else this.setCoordinates([this.points])}},{key:"getArrowPoints",value:function(t,e,r,n){var o=Uk(t,e),i=Gk(o,r),a=Qk(r,o,0,.3*i,!0),s=Qk(r,o,0,.5*i,!0),u=[o,a=Qk(o,a,Wk.HALF_PI,i/5,n),s=Qk(o,s,Wk.HALF_PI,i/4,n),r],l=this.getArrowHeadPoints(u,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),c=l[0],f=l[4],p=Gk(t,e)/Hk(u)/2,h=this.getArrowBodyPoints(u,c,f,p),y=h.length,d=h.slice(0,y/2),v=h.slice(y/2,y);return d.push(c),v.push(f),(d=d.reverse()).push(e),(v=v.reverse()).push(t),d.reverse().concat(l,v)}},{key:"finishDrawing",value:function(){3==this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4),null!=this.connPoint&&this.points.push(this.connPoint)}},{key:"getArrowHeadPoints",value:function(t,e,r){var n=Hk(t)*this.headHeightFactor,o=t[t.length-1],i=(Gk(e,r),n*this.headWidthFactor),a=n*this.neckWidthFactor,s=n*this.neckHeightFactor,u=Qk(t[t.length-2],o,0,n,!0),l=Qk(t[t.length-2],o,0,s,!0),c=Qk(o,u,Wk.HALF_PI,i,!1),f=Qk(o,u,Wk.HALF_PI,i,!0);return[Qk(o,l,Wk.HALF_PI,a,!1),c,o,f,Qk(o,l,Wk.HALF_PI,a,!0)]}},{key:"getArrowBodyPoints",value:function(t,e,r,n){for(var o=zk(t),i=Hk(t)*n,a=(i-Gk(e,r))/2,s=0,u=[],l=[],c=1;c<t.length-1;c++){var f=Yk(t[c-1],t[c],t[c+1])/2,p=(i/2-(s+=Gk(t[c-1],t[c]))/o*a)/Math.sin(f),h=Qk(t[c-1],t[c],Math.PI-f,p,!0),y=Qk(t[c-1],t[c],f,p,!1);u.push(h),l.push(y)}return u.concat(l)}},{key:"getTempPoint4",value:function(t,e,r){var n,o,i,a=Uk(t,e),s=Gk(a,r),u=Yk(t,a,r);return u<Wk.HALF_PI?(o=s*Math.sin(u),i=s*Math.cos(u),n=Qk(a,Qk(t,a,Wk.HALF_PI,o,!1),Wk.HALF_PI,i,!0)):u>=Wk.HALF_PI&&u<Math.PI?(o=s*Math.sin(Math.PI-u),i=s*Math.cos(Math.PI-u),n=Qk(a,Qk(t,a,Wk.HALF_PI,o,!1),Wk.HALF_PI,i,!1)):u>=Math.PI&&u<1.5*Math.PI?(o=s*Math.sin(u-Math.PI),i=s*Math.cos(u-Math.PI),n=Qk(a,Qk(t,a,Wk.HALF_PI,o,!0),Wk.HALF_PI,i,!0)):(o=s*Math.sin(2*Math.PI-u),i=s*Math.cos(2*Math.PI-u),n=Qk(a,Qk(t,a,Wk.HALF_PI,o,!0),Wk.HALF_PI,i,!1)),n}}])&&QM(e.prototype,r),n&&QM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function eD(t){"@babel/helpers - typeof";return(eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===eD(i=function(t,e){if("object"!==eD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==eD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function nD(t,e){return(nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iD(t);if(e){var o=iD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===eD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function iD(t){return(iD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nD(t,e)}(i,Bk);var e,r,n,o=oD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new tD(t),e._delegate=new MS({geometry:e._element}),e._overlayType="doubleArrow",e._minPointCount=4,e}return e=i,r&&rD(e.prototype,r),n&&rD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function sD(t){"@babel/helpers - typeof";return(sD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===sD(i=function(t,e){if("object"!==sD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function lD(t,e){return(lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fD(t);if(e){var o=fD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fD(t){return(fD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}(i,AR(PR,EO));var e,r,n,o=cD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.FINE_ARROW,e.tailWidthFactor=.15,e.neckWidthFactor=.2,e.headWidthFactor=.25,e.headAngle=Math.PI/8.5,e.neckAngle=Math.PI/13,e.fixPointCount=2,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.getPoints(),e=t[0],r=t[1],n=Hk(t),o=n*this.tailWidthFactor,i=n*this.neckWidthFactor,a=n*this.headWidthFactor,s=Qk(r,e,Wk.HALF_PI,o,!0),u=Qk(r,e,Wk.HALF_PI,o,!1),l=Qk(e,r,this.headAngle,a,!1),c=Qk(e,r,this.headAngle,a,!0),f=[s,Qk(e,r,this.neckAngle,i,!1),l,r,c,Qk(e,r,this.neckAngle,i,!0),u];this.setCoordinates([f])}}}])&&uD(e.prototype,r),n&&uD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hD(t){"@babel/helpers - typeof";return(hD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===hD(i=function(t,e){if("object"!==hD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function dD(t,e){return(dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mD(t);if(e){var o=mD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mD(t){return(mD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dD(t,e)}(i,Bk);var e,r,n,o=vD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new pD(t),e._delegate=new MS({geometry:e._element}),e._overlayType="fineArrow",e._minPointCount=2,e}return e=i,r&&yD(e.prototype,r),n&&yD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function _D(t){"@babel/helpers - typeof";return(_D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===_D(i=function(t,e){if("object"!==_D(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function wD(t,e){return(wD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PD(t);if(e){var o=PD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PD(t){return(PD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wD(t,e)}(i,pD);var e,r,n,o=OD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.ASSAULT_DIRECTION,e.tailWidthFactor=.2,e.neckWidthFactor=.25,e.headWidthFactor=.3,e.headAngle=Math.PI/4,e.neckAngle=.17741*Math.PI,e.setPoints(t),e}return e=i,r&&gD(e.prototype,r),n&&gD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function SD(t){"@babel/helpers - typeof";return(SD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ED(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===SD(i=function(t,e){if("object"!==SD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function TD(t,e){return(TD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xD(t);if(e){var o=xD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xD(t){return(xD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TD(t,e)}(i,Bk);var e,r,n,o=jD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new CD(t),e._delegate=new MS({geometry:e._element}),e._overlayType="assaultDirection",e._minPointCount=2,e}return e=i,r&&ED(e.prototype,r),n&&ED(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function RD(t){"@babel/helpers - typeof";return(RD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===RD(i=function(t,e){if("object"!==RD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==RD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function ID(t,e){return(ID=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function MD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DD(t);if(e){var o=DD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DD(t){return(DD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ID(t,e)}(i,AR(PR,AA));var e,r,n,o=MD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.FREEHAND_LINE,e.freehand=!0,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){this.getPointCount()<2||this.setCoordinates(this.points)}}])&&kD(e.prototype,r),n&&kD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ND(t){"@babel/helpers - typeof";return(ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===ND(i=function(t,e){if("object"!==ND(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ND(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BD(t,e){return(BD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=HD(t);if(e){var o=HD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return GD(this,r)}}function GD(t,e){if(e&&("object"===ND(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zD(t)}function zD(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HD(t){return(HD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BD(t,e)}(i,yR);var e,r,n,o=WD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new LD(t),e._delegate=new MS({geometry:e._element}),e._overlayType="freehandLine",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._styles={fillColor:"rgba(255,255,255,0.3)",width:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},GD(e,zD(e))}return e=i,(r=[{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._styles[e]=t[e]);var r,n;r=new iE({color:t.fillColor||"#1E90FF",width:t.width||2}),n=new fR({font:t.font||"13px Microsoft YaHei",fill:new oE({color:t.textFillColor||"#666"}),stroke:new iE({color:t.textOutlineColor||"#fff",width:t.textOutlineWidth||3}),text:t.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0});var o=new fE({stroke:r,text:n});this._delegate.setStyle(o)}},{key:"setStyle",value:function(t){this._setStyle(t)}}])&&FD(e.prototype,r),n&&FD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function VD(t){"@babel/helpers - typeof";return(VD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===VD(i=function(t,e){if("object"!==VD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==VD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function YD(t,e){return(YD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KD(t);if(e){var o=KD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===VD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function KD(t){return(KD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YD(t,e)}(i,AR(PR,EO));var e,r,n,o=XD(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.FREEHAND_POLYGON,e.freehand=!0,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){this.getPointCount()<2||this.setCoordinates([this.points])}}])&&ZD(e.prototype,r),n&&ZD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qD(t){"@babel/helpers - typeof";return(qD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qD(i=function(t,e){if("object"!==qD(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function $D(t,e){return($D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nL(t);if(e){var o=nL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return eL(this,r)}}function eL(t,e){if(e&&("object"===qD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rL(t)}function rL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nL(t){return(nL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$D(t,e)}(i,yR);var e,r,n,o=tL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new QD(t),e._delegate=new MS({geometry:e._element}),e._overlayType="freehandPolygon",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),eL(e,rL(e))}return e=i,r&&JD(e.prototype,r),n&&JD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function iL(t){"@babel/helpers - typeof";return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===iL(i=function(t,e){if("object"!==iL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==iL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function sL(t,e){return(sL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lL(t);if(e){var o=lL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===iL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lL(t){return(lL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sL(t,e)}(i,AR(PR,EO));var e,r,n,o=uL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.GATHERING_PLACE,e.t=.4,e.fixPointCount=3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){var t=this.getPoints();if(!(t.length<2)){if(2==this.getPointCount()){var e=Uk(t[0],t[1]),r=Gk(t[0],e)/.9,n=Qk(t[0],e,Wk.HALF_PI,r,!0);t=[t[0],n,t[1]]}e=Uk(t[0],t[2]);t.push(e,t[0],t[1]);for(var o=[],i=0;i<t.length-2;i++){var a=t[i],s=t[i+1],u=t[i+2],l=Jk(this.t,a,s,u);o=o.concat(l)}var c=o.length;o=[o[c-1]].concat(o.slice(0,c-1));var f=[];for(i=0;i<t.length-2;i++){a=t[i],s=t[i+1],f.push(a);for(var p=0;p<=Wk.FITTING_COUNT;p++){n=Kk(p/Wk.FITTING_COUNT,a,o[2*i],o[2*i+1],s);f.push(n)}f.push(s)}this.setCoordinates([f])}}}])&&aL(e.prototype,r),n&&aL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fL(t){"@babel/helpers - typeof";return(fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===fL(i=function(t,e){if("object"!==fL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function hL(t,e){return(hL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=dL(t);if(e){var o=dL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function dL(t){return(dL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hL(t,e)}(i,Bk);var e,r,n,o=yL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new cL(t),e._delegate=new MS({geometry:e._element}),e._overlayType="gatheringPlace",e._minPointCount=3,e}return e=i,r&&pL(e.prototype,r),n&&pL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function mL(t){"@babel/helpers - typeof";return(mL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===mL(i=function(t,e){if("object"!==mL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function _L(t,e){return(_L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wL(t);if(e){var o=wL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wL(t){return(wL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_L(t,e)}(i,AR(PR,EO));var e,r,n,o=gL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.LUNE,e.fixPointCount=3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.getPoints();if(2==this.getPointCount()){var e=Uk(t[0],t[1]),r=Gk(t[0],e),n=Qk(t[0],e,Wk.HALF_PI,r);t.push(n)}var o=t[0],i=t[1],a=t[2],s=Vk(o,i,a),u=Gk(o,s),l=Zk(o,s),c=Zk(i,s);if(Xk(o,i,a))var f=c,p=l;else f=l,p=c;(t=qk(s,u,f,p)).push(t[0]),this.setCoordinates([t])}}}])&&bL(e.prototype,r),n&&bL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function PL(t){"@babel/helpers - typeof";return(PL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===PL(i=function(t,e){if("object"!==PL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==PL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function SL(t,e){return(SL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xL(t);if(e){var o=xL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return TL(this,r)}}function TL(t,e){if(e&&("object"===PL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jL(t)}function jL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xL(t){return(xL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SL(t,e)}(i,yR);var e,r,n,o=EL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new OL(t),e._delegate=new MS({geometry:e._element}),e._overlayType="lune",e._allowDrillPicking=!1,e._attr={},e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),TL(e,jL(e))}return e=i,r&&CL(e.prototype,r),n&&CL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function RL(t){"@babel/helpers - typeof";return(RL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===RL(i=function(t,e){if("object"!==RL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==RL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function IL(t,e){return(IL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ML(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DL(t);if(e){var o=DL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DL(t){return(DL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IL(t,e)}(i,AR(PR,EO));var e,r,n,o=ML(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.SECTOR,e.fixPointCount=3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2))if(2==this.getPointCount())this.setCoordinates([this.points]);else{var t=this.getPoints(),e=t[0],r=t[1],n=t[2],o=qk(e,Gk(r,e),Zk(r,e),Zk(n,e));o.push(e,o[0]),this.setCoordinates([o])}}}])&&kL(e.prototype,r),n&&kL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NL(t){"@babel/helpers - typeof";return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===NL(i=function(t,e){if("object"!==NL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BL(t,e){return(BL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GL(t);if(e){var o=GL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GL(t){return(GL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BL(t,e)}(i,Bk);var e,r,n,o=WL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new LL(t),e._delegate=new MS({geometry:e._element}),e._overlayType="sector",e._minPointCount=3,e}return e=i,r&&FL(e.prototype,r),n&&FL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function HL(t){"@babel/helpers - typeof";return(HL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===HL(i=function(t,e){if("object"!==HL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==HL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function VL(t,e){return(VL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ZL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=YL(t);if(e){var o=YL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function YL(t){return(YL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VL(t,e)}(i,vM);var e,r,n,o=ZL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.SQUAD_COMBAT,e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!((a=this.getPointCount())<2)){var t=this.getPoints(),e=this.getTailPoints(t),r=this.getArrowHeadPoints(t,e[0],e[1]),n=r[0],o=r[4],i=this.getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[1]].concat(i.slice(a/2,a));u.push(o),s=iI(s),u=iI(u),this.setCoordinates([s.concat(r,u.reverse())])}}},{key:"getTailPoints",value:function(t){var e=Hk(t)*this.tailWidthFactor;return[Qk(t[1],t[0],Wk.HALF_PI,e,!1),Qk(t[1],t[0],Wk.HALF_PI,e,!0)]}}])&&UL(e.prototype,r),n&&UL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function KL(t){"@babel/helpers - typeof";return(KL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===KL(i=function(t,e){if("object"!==KL(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==KL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function qL(t,e){return(qL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function JL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$L(t);if(e){var o=$L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===KL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $L(t){return($L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qL(t,e)}(i,Bk);var e,r,n,o=JL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new XL(t),e._delegate=new MS({geometry:e._element}),e._overlayType="squadCombat",e._state="added",e._initPos=t,e._minPointCount=2,e}return e=i,r&&QL(e.prototype,r),n&&QL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function eN(t){"@babel/helpers - typeof";return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===eN(i=function(t,e){if("object"!==eN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==eN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function nN(t,e){return(nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iN(t);if(e){var o=iN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===eN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function iN(t){return(iN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nN(t,e)}(i,AR(PR,AA));var e,r,n,o=oN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.STRAIGHT_ARROW,e.fixPointCount=2,e.maxArrowLength=3e6,e.arrowLengthScale=5,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.getPoints(),e=t[0],r=t[1],n=Gk(e,r)/this.arrowLengthScale;n=n>this.maxArrowLength?this.maxArrowLength:n;var o=Qk(e,r,Math.PI/6,n,!1),i=Qk(e,r,Math.PI/6,n,!0);this.setCoordinates([e,r,o,r,i])}}}])&&rN(e.prototype,r),n&&rN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sN(t){"@babel/helpers - typeof";return(sN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===sN(i=function(t,e){if("object"!==sN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function lN(t,e){return(lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fN(t);if(e){var o=fN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fN(t){return(fN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lN(t,e)}(i,Bk);var e,r,n,o=cN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new aN(t),e._delegate=new MS({geometry:e._element}),e._overlayType="straightArrow",e._state="added",e._styles={fillColor:"rgba(255,255,255,0.3)",width:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},e._minPointCount=2,e}return e=i,(r=[{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._styles[e]=t[e]);var r,n;r=new iE({color:t.fillColor||"#1E90FF",width:t.width||2}),n=new fR({font:t.font||"13px Microsoft YaHei",fill:new oE({color:t.textFillColor||"#666"}),stroke:new iE({color:t.textOutlineColor||"#fff",width:t.textOutlineWidth||3}),text:t.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0});var o=new fE({stroke:r,text:n});this._delegate.setStyle(o)}},{key:"setStyle",value:function(t){this._setStyle(t)}}])&&uN(e.prototype,r),n&&uN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hN(t){"@babel/helpers - typeof";return(hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===hN(i=function(t,e){if("object"!==hN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function dN(t,e){return(dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mN(t);if(e){var o=mN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mN(t){return(mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dN(t,e)}(i,vM);var e,r,n,o=vN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.TAILED_ATTACK_ARROW,e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.headTailFactor=.8,e.swallowTailFactor=1,e.swallowTailPnt=null,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!((p=this.getPointCount())<2))if(2!=this.getPointCount()){var t=this.getPoints(),e=t[0],r=t[1];Xk(t[0],t[1],t[2])&&(e=t[1],r=t[0]);var n=[Uk(e,r)].concat(t.slice(2)),o=this.getArrowHeadPoints(n,e,r),i=o[0],a=o[4],s=Gk(e,r),u=Hk(n),l=u*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=Qk(n[1],n[0],0,l,!0);var c=s/u,f=this.getArrowBodyPoints(n,i,a,c),p=f.length,h=[e].concat(f.slice(0,p/2));h.push(i);var y=[r].concat(f.slice(p/2,p));y.push(a),h=iI(h),y=iI(y),this.setCoordinates([h.concat(o,y.reverse(),[this.swallowTailPnt,h[0]])])}else this.setCoordinates([this.points])}}])&&yN(e.prototype,r),n&&yN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _N(t){"@babel/helpers - typeof";return(_N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===_N(i=function(t,e){if("object"!==_N(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function wN(t,e){return(wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ON(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PN(t);if(e){var o=PN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PN(t){return(PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wN(t,e)}(i,Bk);var e,r,n,o=ON(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new bN(t),e._delegate=new MS({geometry:e._element}),e._overlayType="tailedAttackArrow",e._state="added",e._minPointCount=3,e}return e=i,r&&gN(e.prototype,r),n&&gN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function SN(t){"@babel/helpers - typeof";return(SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===SN(i=function(t,e){if("object"!==SN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function TN(t,e){return(TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xN(t);if(e){var o=xN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xN(t){return(xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TN(t,e)}(i,vM);var e,r,n,o=jN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.TAILED_SQUAD_COMBAT,e.headHeightFactor=.18,e.headWidthFactor=.3,e.neckHeightFactor=.85,e.neckWidthFactor=.15,e.tailWidthFactor=.1,e.swallowTailFactor=1,e.swallowTailPnt=null,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){if(!((a=this.getPointCount())<2)){var t=this.getPoints(),e=this.getTailPoints(t),r=this.getArrowHeadPoints(t,e[0],e[2]),n=r[0],o=r[4],i=this.getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(n);var u=[e[2]].concat(i.slice(a/2,a));u.push(o),s=iI(s),u=iI(u),this.setCoordinates([s.concat(r,u.reverse(),[e[1],s[0]])])}}},{key:"getTailPoints",value:function(t){var e=Hk(t)*this.tailWidthFactor,r=Qk(t[1],t[0],Wk.HALF_PI,e,!1),n=Qk(t[1],t[0],Wk.HALF_PI,e,!0),o=e*this.swallowTailFactor;return[r,Qk(t[1],t[0],0,o,!0),n]}}])&&EN(e.prototype,r),n&&EN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function RN(t){"@babel/helpers - typeof";return(RN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===RN(i=function(t,e){if("object"!==RN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==RN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function IN(t,e){return(IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function MN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DN(t);if(e){var o=DN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DN(t){return(DN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IN(t,e)}(i,Bk);var e,r,n,o=MN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._element=new AN(t),e._delegate=new MS({geometry:e._element}),e._overlayType="tailedSquadCombat",e._minPointCount=2,e}return e=i,r&&kN(e.prototype,r),n&&kN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function NN(t){"@babel/helpers - typeof";return(NN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===NN(i=function(t,e){if("object"!==NN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BN(t,e){return(BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GN(t);if(e){var o=GN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GN(t){return(GN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BN(t,e)}(i,AR(PR,AA));var e,r,n,o=WN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=CR.ARC,e.fixPointCount=3,e.setPoints(t),e}return e=i,(r=[{key:"generate",value:function(){var t=this.getPointCount();if(!(t<2))if(2==t)this.setCoordinates(this.points);else{var e=this.points[0],r=this.points[1],n=this.points[2],o=Vk(e,r,n),i=Gk(e,o),a=Zk(e,o),s=Zk(r,o);if(Xk(e,r,n))var u=s,l=a;else u=a,l=s;this.setCoordinates(qk(o,i,u,l))}}}])&&FN(e.prototype,r),n&&FN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HN(t){"@babel/helpers - typeof";return(HN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===HN(i=function(t,e){if("object"!==HN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==HN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function VN(t,e){return(VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ZN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KN(t);if(e){var o=KN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return YN(this,r)}}function YN(t,e){if(e&&("object"===HN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return XN(t)}function XN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KN(t){return(KN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VN(t,e)}(i,yR);var e,r,n,o=ZN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._element=new zN(t),e._delegate=new MS({geometry:e._element}),e._allowDrillPicking=!1,e._attr={},e._overlayType="arc",e._bid=Bt.uuid(),e._contextMenu=[],e._id=Bt.uuid(),e._state="added",e._initPos=t,e._posArr=e._element.getPoints(),e._positions=t.map(function(t){return{lng:t[0],lat:t[1],alt:0}}),e._styles={fillColor:"rgba(255,255,255,0.3)",width:2,font:"13px Microsoft YaHei",textFillColor:"#666",textOutlineColor:"#fff",textOutlineWidth:3,text:"",textPixelOffset:{x:0,y:0}},YN(e,XN(e))}return e=i,(r=[{key:"_setStyle",value:function(t){for(var e in t)t[e]&&(this._styles[e]=t[e]);var r,n;r=new iE({color:this._styles.fillColor||"#1E90FF",width:this._styles.width||2}),n=new fR({font:this._styles.font||"13px Microsoft YaHei",fill:new oE({color:this._styles.textFillColor||"#666"}),stroke:new iE({color:this._styles.textOutlineColor||"#fff",width:this._styles.textOutlineWidth||3}),text:this._styles.text||"",offsetX:this._styles.textPixelOffset.x||0,offsetY:this._styles.textPixelOffset.y||0});var o=new fE({stroke:r,text:n});this._delegate.setStyle(o)}},{key:"setStyle",value:function(t){this._setStyle(t)}}])&&UN(e.prototype,r),n&&UN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qN(t){"@babel/helpers - typeof";return(qN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===qN(i=function(t,e){if("object"!==qN(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var $N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"createPlot",value:function(t,e){switch(t){case"icon":return new tk(e[0]);case"flash_point":return new gk(e[0]);case CR.MARKER:return new tk(e[0]);case CR.POLYLINE:return new Ek(e);case CR.POLYGON:return new Bk(e);case CR.CIRCLE:return new gI(e[0]);case"diffuse_circle":return new jI(e);case CR.ELLIPSE:return new QI(e);case CR.RECTANGLE:return new cM(e);case CR.ARC:return new QN(e);case CR.ATTACK_ARROW:return new OM(e);case CR.CLOSED_CURVE:return new MM(e);case CR.CURVE:return new XM(e);case CR.DOUBLE_ARROW:return new aD(e);case CR.FINE_ARROW:return new bD(e);case CR.ASSAULT_DIRECTION:return new AD(e);case CR.FREEHAND_LINE:return new UD(e);case CR.FREEHAND_POLYGON:return new oL(e);case CR.GATHERING_PLACE:return new vL(e);case CR.LUNE:return new AL(e);case CR.SECTOR:return new zL(e);case CR.SQUAD_COMBAT:return new tN(e);case CR.STRAIGHT_ARROW:return new pN(e);case CR.TAILED_ATTACK_ARROW:return new CN(e);case CR.TAILED_SQUAD_COMBAT:return new LN(e)}return null}}],(r=null)&&JN(e.prototype,r),n&&JN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tF(t){"@babel/helpers - typeof";return(tF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===tF(i=function(t,e){if("object"!==tF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function rF(t,e){return(rF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=oF(t);if(e){var o=oF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function oF(t){return(oF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rF(t,e)}(i,Wb);var e,r,n,o=nF(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t)).feature=e,r}return e=i,r&&eF(e.prototype,r),n&&eF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();iF.ACTIVATE="activate_feature",iF.DEACTIVATE="deactivate_feature",iF.DRAW_END="draw_end",iF.DRAW_START="draw_start";var aF=iF;var sF=0;function uF(t){var e="_p_id_";return t[e]=t[e]||sF++,t[e]}function lF(t){var e,r,n,o;for(r=1,n=arguments.length;r<n;r++)for(e in o=arguments[r])t[e]=o[e];return t}function cF(t,e,r,n){if(t.on&&"function"==typeof t.on&&r&&e){var o=function(t){r.call(n||null,t)};return"dblclick"===e?(document.oncontextmenu=function(){return!1},setTimeout(function(){t.getViewport().oncontextmenu=o},50)):t.on(e,o),o}}function fF(t,e,r){t.un&&"function"==typeof t.un&&r&&e&&("dblclick"===e?t.getViewport().oncontextmenu=void 0:t.un(e,r))}function pF(t){"@babel/helpers - typeof";return(pF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===pF(i=function(t,e){if("object"!==pF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function yF(t,e){return(yF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vF(t);if(e){var o=vF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function vF(t){return(vF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yF(t,e)}(i,t_);var e,r,n,o=dF(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).points=null,e.plot=null,e.feature=null,e.plotType=null,e.mapViewport=null,e.dblClickZoomInteraction=null;var r=new iE({color:"rgba(255,0,0,1)",width:2}),n=new oE({color:"rgba(255,0,0,1)"});return e.style=new fE({fill:n,stroke:r}),e.featureSource=new qS,e.drawOverlay=new vT({source:e.featureSource}),e.drawOverlay.setStyle(e.style),e.olMap=t.olMap,e._delegate=void 0,e.setMap(t.olMap),e.help_overlay_ele=document.createElement("div"),e.help_overlay_ele.className="tooltip hidden se-tooltip",e.help_overlay=new bA({element:e.help_overlay_ele,offset:[15,0],positioning:"center-left"}),e._isMoving=!1,e}return e=i,(r=[{key:"setMap",value:function(t){this.map=t,this.mapViewport=this.map.getViewport()}},{key:"activate",value:function(t,e){var r=this;if(this.deactivate(),this.deactivateMapTools(),this.plotType=t,this.drawOverlay.setMap(this.map),e&&"polyline"==t){var n=new iE({color:e.fillColor,width:2});this.style.setStroke(n),this.drawOverlay.setStyle(this.style)}this._initTip(t),this._ls_mapfirstclick=cF(this.map,"click",this.mapFirstClickHandler,this),this._firstMousemove=cF(this.map,"pointermove",this._firstMousemoveHandler,this),document.oncontextmenu=function(){return!1},this.map.getViewport().oncontextmenu=function(){fF(r.map,"click",r._ls_mapfirstclick),fF(r.map,"pointermove",r._firstMousemoveHandler),r._ls_mapfirstclick=null,r._firstMousemove=null,r.help_overlay.setMap(null),r.map.getViewport().oncontextmenu=void 0}}},{key:"_initTip",value:function(t){this.olMap.addOverlay(this.help_overlay);var e=this._getPlotName(t);this.help_overlay_ele.innerHTML="当前绘制类型："+e.split("_")[0]+"，需要"+e.split("_")[1]+"个点<br>按下鼠标左键确定位置<br>按下鼠标右键取消绘制"}},{key:"_setTipContent",value:function(t){if(this.help_overlay_ele){var e=this._getPlotName(this.plotType),r=t.total?"当前绘制类型：进攻方向，需要".concat(t.total,"个点<br>"):"当前绘制类型："+e.split("_")[0]+"，最少需要3个点<br>",n="已有".concat(t.current-1,"个点，")+"按下鼠标左键确定第".concat(t.current,"个点<br>"),o=t.total?"点击继续绘制":"按下鼠标右键结束绘制";this.help_overlay_ele.innerHTML=t.freehand?"当前随意绘制。单击结束":r+n+o}}},{key:"_firstMousemoveHandler",value:function(t){this.help_overlay.setPosition(t.coordinate)}},{key:"_getPlotName",value:function(t){return{icon:"点_1",flash_point:"闪烁点_1",arc:"弧线_3",curve:"曲线_2",polyline:"折线_2",freehand_line:"自由线_2",circle:"圆_2",diffuse_circle:"扩散圆_2",scan_circle:"扫描圆_2",ellipse:"椭圆_2",lune:"弓形_3",sector:"扇形_3",closed_curve:"曲线面_3",polygon:"多边形_3",rectangle:"矩形_2",freehand_polygon:"自由面_3",gathering_place:"聚集地",double_arrow:"钳击_4",straight_arrow:"直箭头_2",fine_arrow:"细直箭头_2",assault_direction:"突击方向_2",attack_arrow:"进攻箭头_3",tailed_attack_arrow:"进攻箭头（尾）_3",squad_combat:"分队战斗行动_3",tailed_squad_combat:"分队战斗行动（尾）_3"}[t]}},{key:"deactivate",value:function(){this.disconnectEventHandlers(),this.map.removeLayer(this.drawOverlay),this.featureSource.clear(),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.activateMapTools()}},{key:"isDrawing",value:function(){return null!=this.plotType}},{key:"mapFirstClickHandler",value:function(t){this.points.push(t.coordinate);var e=$N.createPlot(this.plotType,this.points);this.plot=e._element,this._delegate=e,this.feature=e._delegate,this.map._onDrawAnchor&&this.map._onDrawAnchor({_alt:0,_heading:0,_lat:this.points[0][1],_lng:this.points[0][0],_pitch:0,_roll:0,alt:0,heading:0,lat:this.points[0][1],lng:this.points[0][0],pitch:0,roll:0}),this.featureSource.addFeature(this.feature),fF(this.map,"click",this._ls_mapfirstclick),this._ls_mapfirstclick=null,this._setTipContent({freehand:this.plot.freehand,current:this.plot.getPointCount(),total:this.plot.fixPointCount,position:t.coordinate}),this.plot.fixPointCount!=this.plot.getPointCount()?(this._ls_mapNextClick=cF(this.map,"click",this.mapNextClickHandler,this),this.plot.freehand||(this._ls_dbclick=cF(this.map,"dblclick",this.mapDoubleClickHandler,this)),fF(this.map,"pointermove",this._firstMousemoveHandler),this._ls_mapfirstclick=null,this._ls_pointmove=cF(this.map,"pointermove",this.mapMouseMoveHandler,this)):this.mapDoubleClickHandler(t)}},{key:"mapMouseMoveHandler",value:function(t){var e=t.coordinate;if(!(Gk(e,this.points[this.points.length-1])<Wk.ZERO_TOLERANCE)){if(this._isMoving=!0,this.plot.freehand)this.points.push(e),this.plot.setPoints(this.points);else{var r=this.points.concat([e]);this.plot.setPoints(r)}this._setTipContent({freehand:this.plot.freehand,current:this.plot.getPointCount(),total:this.plot.fixPointCount,position:t.coordinate})}}},{key:"mapNextClickHandler",value:function(t){!this.plot.freehand&&Gk(t.coordinate,this.points[this.points.length-1])<Wk.ZERO_TOLERANCE||(this.points.push(t.coordinate),this.map._onDrawAnchor&&this.map._onDrawAnchor({_alt:0,_heading:0,_lat:this.points[this.points.length-1][1],_lng:this.points[this.points.length-1][0],_pitch:0,_roll:0,alt:0,heading:0,lat:this.points[this.points.length-1][1],lng:this.points[this.points.length-1][0],pitch:0,roll:0}),this.plot.setPoints(this.points),this._isMoving=!1,this._setTipContent({freehand:this.plot.freehand,current:this.plot.getPointCount(),total:this.plot.fixPointCount,position:t.coordinate}),this.plot.fixPointCount!=this.plot.getPointCount()?this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(t):this.mapDoubleClickHandler(t))}},{key:"mapDoubleClickHandler",value:function(t){this.disconnectEventHandlers(),this.plot.finishDrawing(),t.preventDefault(),this.drawEnd()}},{key:"disconnectEventHandlers",value:function(){fF(this.map,"click",this._ls_mapfirstclick),fF(this.map,"click",this._ls_mapNextClick),fF(this.map,"pointermove",this._ls_pointmove),fF(this.map,"dblclick",this._ls_dbclick),this._ls_mapfirstclick=null,this._ls_mapNextClick=null,this._ls_pointmove=null,this._ls_dbclick=null}},{key:"drawEnd",value:function(t){this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.feature&&this.feature.set("isMoving",this._isMoving),this.dispatchEvent(new aF(aF.DRAW_END,this.feature)),this.feature=null,this._isMoving=!1,this.help_overlay.setMap(null)}},{key:"drawEnd2",value:function(t){this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.feature=null}},{key:"stop",value:function(t){return this.feature&&this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.feature&&this.feature.set("isMoving",this._isMoving),t&&this.dispatchEvent(new aF(aF.DRAW_END,this.feature)),this.feature=null,this._isMoving=!1,this.help_overlay.setMap(null),this}},{key:"deactivateMapTools",value:function(){for(var t=this.map.getInteractions(),e=t.getLength(),r=0;r<e;r++){var n=t.item(r);if(n instanceof ol.interaction.DoubleClickZoom){this.dblClickZoomInteraction=n,t.remove(n);break}}}},{key:"activateMapTools",value:function(){null!=this.dblClickZoomInteraction&&(this.map.getInteractions().push(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)}}])&&hF(e.prototype,r),n&&hF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bF(t,e,r,n){var o=document.createElement(t);return o.className=e||"",n&&(o.id=n),r&&r.appendChild(o),o}function _F(t){return document.getElementById(t)}function gF(t,e,r){return"_p_dom_event_"+t+"_"+uF(e)+(r?"_"+uF(r):"")}function wF(t,e,r,n){var o=gF(e,r,n),i=t[o];return i?this:(i=function(e){return r.call(n||t,e)},"addEventListener"in t?t.addEventListener(e,i,!1):"attachEvent"in t&&t.attachEvent("on"+e,i),t[o]=i,this)}function OF(t,e,r,n){var o=gF(e,r,n),i=t[o];return i?("removeEventListener"in t?t.removeEventListener(e,i,!1):"detachEvent"in t&&t.detachEvent("on"+e,i),t[o]=null,this):this}function PF(t){"@babel/helpers - typeof";return(PF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===PF(i=function(t,e){if("object"!==PF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==PF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function SF(t,e){return(SF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jF(t);if(e){var o=jF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return TF(this,r)}}function TF(t,e){if(e&&("object"===PF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jF(t){return(jF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SF(t,e)}(i,t_);var e,r,n,o=EF(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t?((e=o.call(this)).activePlot=null,e.startPoint=null,e.ghostControlPoints=null,e.controlPoints=null,e.map=t.olMap,e.mapViewport=e.map.getViewport(),e.mouseOver=!1,e.elementTable={},e.activeControlPointId=null,e.mapDragPan=null,e._ls_pointermove=null,e._ls_pointdrag=null,e._ls_pointerdown=null,e._ls_pointup=null,e._is_controlpoint_pointermove=null,e):TF(e)}return e=i,(r=[{key:"initHelperDom",value:function(){if(this.map&&this.activePlot){var t=this.getMapParentElement();if(t)for(var e=function(t,e,r){var n=document.createElement(t);return n.style.display="none",r&&(n.id=r),e&&e.appendChild(n),n}("div",t,Wk.HELPER_HIDDEN_DIV),r=this.getControlPoints(),n=0;n<r.length;n++){var o=Wk.HELPER_CONTROL_POINT_DIV+"-"+n;bF("div",Wk.HELPER_CONTROL_POINT_DIV,e,o),this.elementTable[o]=n}}}},{key:"getMapParentElement",value:function(){var t=this.map.getTargetElement();if(t)return t.parentNode}},{key:"destroyHelperDom",value:function(){if(this.controlPoints){for(var t=0;t<this.controlPoints.length;t++){this.map.removeOverlay(this.controlPoints[t]);var e=_F(Wk.HELPER_CONTROL_POINT_DIV+"-"+t);e&&OF(e,"mousedown",this.controlPointMouseDownHandler,this)}this.controlPoints=null}var r=this.getMapParentElement(),n=_F(Wk.HELPER_HIDDEN_DIV);n&&r&&function(t,e){e&&t&&e.removeChild(t)}(n,r)}},{key:"initControlPoints",value:function(){var t=this;if(this.map){this.controlPoints=[];for(var e=this.getControlPoints(),r=0;r<e.length;r++){var n=Wk.HELPER_CONTROL_POINT_DIV+"-"+r,o=_F(n),i=new bA({id:n,position:e[r],positioning:"center-center",element:o});this.controlPoints.push(i),this.map.addOverlay(i),wF(o,"mousedown",this.controlPointMouseDownHandler,this),wF(o,"touchstart",this.controlPointMouseDownHandler,this)}this._is_controlpoint_pointermove=function(e){t.controlPointMouseMoveHandler(e)},this.map.mapBrowserEventHandler_.addEventListener("pointermove",this._is_controlpoint_pointermove)}}},{key:"controlPointMouseDownHandler",value:function(t){t.preventDefault();var e=t.target.id;this.activeControlPointId=e,wF(t.target,"mouseup",this.controlPointMouseUpHandler,this),wF(t.target,"touchend",this.controlPointMouseUpHandler,this)}},{key:"controlPointMouseMoveHandler",value:function(t){var e=t.coordinate;if(this.activeControlPointId){var r=this.activePlot._element,n=this.elementTable[this.activeControlPointId];r.updatePoint(e,n);var o=this.map.getOverlayById(this.activeControlPointId);"billboard"===this.activePlot._overlayType||"flashPoint"===this.activePlot._overlayType?(this.activePlot._posArr=[e],this._onEditMoving&&this._onEditMoving(this.activePlot.center),this._selectedOverlay=o):this._onEditMoving&&this._onEditMoving(this.activePlot.center),o.setPosition(e)}}},{key:"controlPointMouseUpHandler",value:function(t){this.activeControlPointId=null,OF(t.target,"mouseup",this.controlPointMouseUpHandler,this),OF(t.target,"touchend",this.controlPointMouseUpHandler,this)}},{key:"activate",value:function(t,e,r){if(this._onEditMoving=r,t&&t.delegate.getGeometry()&&t!=this.activePlot){var n=t.delegate.getGeometry();n.isPlot&&n.isPlot()&&(t.delegate._onEditState=!0,this.deactivate(!1),this.activePlot=t,this._ls_pointermove=cF(this.map,"pointermove",this.plotMouseOverOutHandler,this),this._ls_pointerdown=cF(this.map,"pointerdown",this.plotMouseDownHandler,this),this.initHelperDom(),this.initControlPoints(),this.map.render())}}},{key:"getControlPoints",value:function(){if(!this.activePlot)return[];var t=this.activePlot.delegate.getGeometry();return"circle"==this.activePlot._overlayType||"scanCircle"==this.activePlot._overlayType?t.getPoints():"diffuseCircle"==this.activePlot._overlayType?this.activePlot._initPos:t.getPoints()}},{key:"plotMouseOverOutHandler",value:function(t){if("billboard"!=this.activePlot._overlayType&&"flashPoint"!=this.activePlot._overlayType){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});e&&e==this.activePlot.delegate?this.mouseOver||(this.mouseOver=!0,this.map.getViewport().style.cursor="move"):this.mouseOver&&(this.mouseOver=!1,this.map.getViewport().style.cursor="default")}}},{key:"plotMouseDownHandler",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});e&&e==this.activePlot.delegate&&(t.preventDefault(),this.ghostControlPoints=this.getControlPoints(),this.startPoint=t.coordinate,this.disableMapDragPan(),this._ls_pointup=cF(this.map,"pointerup",this.plotMouseUpHandler,this),this._ls_pointdrag=cF(this.map,"pointerdrag",this.plotMouseMoveHandler,this))}},{key:"plotMouseMoveHandler",value:function(t){if("billboard"!=this.activePlot._overlayType&&"flashPoint"!=this.activePlot._overlayType){t.stopPropagation(),t.preventDefault();for(var e=t.coordinate,r=e[0]-this.startPoint[0],n=e[1]-this.startPoint[1],o=[],i=0;i<this.ghostControlPoints.length;i++){var a=this.ghostControlPoints[i],s=[a[0]+r,a[1]+n];o.push(s);var u=Wk.HELPER_CONTROL_POINT_DIV+"-"+i,l=this.map.getOverlayById(u);this._onEditMoving&&this._onEditMoving(this.activePlot.center),l.setPosition(s),l.setPositioning("center-center")}this.activePlot._element.setPoints(o)}}},{key:"plotMouseUpHandler",value:function(t){this.enableMapDragPan(),fF(this.map,"pointerup",this._ls_pointup),fF(this.map,"pointerdrag",this._ls_pointdrag),this._ls_pointup=null,this._ls_pointdrag=null}},{key:"disconnectEventHandlers",value:function(){fF(this.map,"pointermove",this._ls_pointermove),fF(this.map,"pointerdown",this._ls_pointerdown),fF(this.map,"pointerup",this._ls_pointup),fF(this.map,"pointerdrag",this._ls_pointdrag),this._ls_pointermove=null,this._ls_pointerdown=null,this._ls_pointup=null,this._ls_pointdrag=null,this._is_controlpoint_pointermove&&(this.map.mapBrowserEventHandler_.removeEventListener("pointermove",this._is_controlpoint_pointermove),this._is_controlpoint_pointermove=null)}},{key:"deactivate",value:function(t){this.activePlot&&(1==t?"billboard"===this.activePlot._overlayType||"flashPoint"===this.activePlot._overlayType?this.activePlot._initPos=this.activePlot._delegate.getGeometry().getPoints():this.activePlot.positions=this.activePlot._delegate.getGeometry().getPoints():"billboard"===this.activePlot._overlayType||"flashPoint"===this.activePlot._overlayType?this.activePlot.position=this.activePlot._initPos[0]:"circle"===this.activePlot._overlayType?this.activePlot.center=this.activePlot._initPos[0]:this.activePlot.positions=this.activePlot._initPos,this.activePlot.delegate._onEditState=!1);this.activePlot&&this.activePlot,this.activePlot=null,this.mouseOver=!1,this.destroyHelperDom(),this.disconnectEventHandlers(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null}},{key:"disableMapDragPan",value:function(){for(var t=this.map.getInteractions(),e=t.getLength(),r=0;r<e;r++){var n=t.item(r);if(n){this.mapDragPan=n,n.setActive(!1);break}}}},{key:"enableMapDragPan",value:function(){null!=this.mapDragPan&&(this.mapDragPan.setActive(!0),this.mapDragPan=null)}}])&&CF(e.prototype,r),n&&CF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function AF(t){"@babel/helpers - typeof";return(AF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===AF(i=function(t,e){if("object"!==AF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==AF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function kF(t,e){return(kF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=MF(t);if(e){var o=MF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===AF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function MF(t){return(MF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kF(t,e)}(i,Wb);var e,r,n,o=IF(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t)).feature_operator=e,r}return e=i,r&&RF(e.prototype,r),n&&RF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();DF.ACTIVATE="activate_feature",DF.DEACTIVATE="deactivate_feature";var LF=DF;function NF(t){"@babel/helpers - typeof";return(NF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===NF(i=function(t,e){if("object"!==NF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==NF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function BF(t,e){return(BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GF(t);if(e){var o=GF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GF(t){return(GF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BF(t,e)}(i,Wb);var e,r,n,o=WF(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t)).drawstate=e,r}return e=i,r&&FF(e.prototype,r),n&&FF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();zF.ADD_CONTROL_POINT="add_control_point",zF.ADDING_MOUSE_MOVE="adding_mouse_move";var HF=zF;function UF(t){"@babel/helpers - typeof";return(UF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===UF(i=function(t,e){if("object"!==UF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==UF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var ZF=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._style={},this.isDestoryed=!1}var e,r,n;return e=t,(r=[{key:"parse",value:function(){return new Style}},{key:"serialize",value:function(){return t=this._style,JSON.parse(JSON.stringify(t));var t}},{key:"setStyle",value:function(t){this._style=t}},{key:"destory",value:function(){this._style={},this.isDestoryed=!0}}])&&VF(e.prototype,r),n&&VF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function YF(t){"@babel/helpers - typeof";return(YF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===YF(i=function(t,e){if("object"!==YF(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==YF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function KF(t,e){return(KF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qF(t);if(e){var o=qF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===YF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qF(t){return(qF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KF(t,e)}(i,ZF);var e,r,n,o=QF(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._style={image:{icon:{src:"./img/marker-begin.png",offset:[0,0],opacity:1,scale:1,anchor:[.5,.5]}}},t}return e=i,(r=[{key:"parse",value:function(){var t=null;return this._style.image&&this._style.image.icon&&(t=new aT(this._style.image.icon)),new fE({image:t})}}])&&XF(e.prototype,r),n&&XF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $F(t){"@babel/helpers - typeof";return($F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===$F(i=function(t,e){if("object"!==$F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function eB(t,e){return(eB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nB(t);if(e){var o=nB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nB(t){return(nB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eB(t,e)}(i,ZF);var e,r,n,o=rB(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._style={stroke:{color:"#FF0000",width:3,lineDash:[10,10,10]}},t}return e=i,(r=[{key:"parse",value:function(){var t=null;return this._style.stroke&&(t=new iE(this._style.stroke)),new fE({stroke:t})}}])&&tB(e.prototype,r),n&&tB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function iB(t){"@babel/helpers - typeof";return(iB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===iB(i=function(t,e){if("object"!==iB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==iB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function sB(t,e){return(sB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lB(t);if(e){var o=lB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===iB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lB(t){return(lB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sB(t,e)}(i,ZF);var e,r,n,o=uB(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._style={fill:{color:"rgba(0,255,0,0.4)"},stroke:{color:"#FF0000",width:2}},t}return e=i,(r=[{key:"parse",value:function(){var t,e=null;return this._style.fill&&(t=new oE(this._style.fill)),this._style.stroke&&(e=new iE(this._style.stroke)),new fE({fill:t,stroke:e})}}])&&aB(e.prototype,r),n&&aB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fB(t){"@babel/helpers - typeof";return(fB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===fB(i=function(t,e){if("object"!==fB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var hB=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"createFTStyle",value:function(t){switch(t){case CR.MARKER:return new JF;case CR.POLYLINE:return new oB;case CR.POLYGON:return new cB}return new cB}}],(r=null)&&pB(e.prototype,r),n&&pB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yB(t){"@babel/helpers - typeof";return(yB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===yB(i=function(t,e){if("object"!==yB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==yB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var vB=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="未命名",this.feature=e,this.layer=r,this.isDestoryed=!1,this.guid=(!0?"yxxxxxxyxx":"xxxxxxxx-xxxx-yxxx-yxxx-xxxxxxxxxxxx").replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}).toLowerCase(),this.attrs={},this._initStyle(n),this._addToLayer()}var e,r,n;return e=t,(r=[{key:"_initStyle",value:function(t){var e=hB.createFTStyle(this.getType()),r=e.parse();r.setZIndex(t),this.feature.setStyle(r),this.ft_style=e}},{key:"_addToLayer",value:function(){}},{key:"setStyle",value:function(t){if(t){var e=this.getZIndex();this.ft_style.setStyle(t);var r=this.ft_style.parse();r.setZIndex(e),this.feature.setStyle(r)}}},{key:"getStyle",value:function(){return this.ft_style.serialize()}},{key:"getZIndex",value:function(){return this.feature.getStyle().getZIndex()}},{key:"getType",value:function(){return this.feature.R.target.type}},{key:"setName",value:function(t){this.name=t}},{key:"getName",value:function(){return this.name}},{key:"disable",value:function(){this.feature.set(Wk.SE_DISABLED,!0)}},{key:"enable",value:function(){this.feature.set(Wk.SE_DISABLED,!1)}},{key:"getAttribute",value:function(t){return this.attrs[t]}},{key:"setAttribute",value:function(t,e){this.attrs[t]=e}},{key:"removeAttribute",value:function(t){return!!this.attrs[t]&&(delete this.attrs[t],!0)}},{key:"iteratorAttribute",value:function(t,e){for(var r in this.attrs)t&&"function"==typeof t&&t.call(e,r)}},{key:"setCoordinates",value:function(t){var e=this.feature.values_.geometry;e&&e.setPoints(t)}},{key:"destory",value:function(){this.isDestoryed=!0,this.feature=null,this.layer=null,this.attrs={},this.ft_style.destory()}},{key:"serialize",value:function(){var t=this.feature.values_.geometry;return t?{config:{cresda_flag:!0,z_index:this.getZIndex(),disabled:!!this.feature.get(Wk.SE_DISABLED)},name:this.getName(),ext_attr:this.attrs,plotting_type:t.type,geo_type:t.geo_type,geo_data:{coordinates:t.getPoints(),type:t.geo_type},style:this.getStyle()}:{}}}])&&dB(e.prototype,r),n&&dB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mB(t,e,r){return e>=t.length||r>=t.length?null:(t[e]=t.splice(r,1,t[e])[0],t)}function bB(t,e){e!=t.length-1&&mB(t,e,e+1)}function _B(t,e){0!=e&&mB(t,e,e-1)}function gB(t,e){e!=t.length-1&&mB(t,e,t.length-1)}function wB(t,e){0!=e&&mB(t,e,0)}function OB(t){"@babel/helpers - typeof";return(OB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===OB(i=function(t,e){if("object"!==OB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==OB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function CB(t,e){return(CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=EB(t);if(e){var o=EB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===OB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function EB(t){return(EB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CB(t,e)}(i,t_);var e,r,n,o=SB(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this)).map=t,r.defaults={},r.opts={},r.feature_operators=[],r.showLayer=null,r.plotEdit=null,r.plotDraw=null,r.help_overlay=null,r.help_overlay_ele=null,r._ls_mapclick=null,lF(r.opts,r.defaults,e),r.showLayer=r._createShowLayer(),r.plotEdit=new xF(t),r.plotDraw=new mF(t),r._bindListener(),r.options={},r}return e=i,(r=[{key:"_bindListener",value:function(){var t=this;this.plotDraw.on(aF.DRAW_END,function(e){t._onDrawEnd(e)}),this.plotDraw.on(HF.ADD_CONTROL_POINT,function(e){t.help_overlay||t._createHelpOverlay(),t._setHelpOverlayState(e.drawstate)}),this.plotDraw.on(HF.ADDING_MOUSE_MOVE,function(e){t.help_overlay||t._createHelpOverlay(),t._setHelpOverlayState(e.drawstate)}),this.plotEdit.on(aF.ACTIVATE,function(e){t.dispatchEvent(new LF(LF.ACTIVATE,t._getFeatureOperator(e.feature,t.showLayer)))}),this.plotEdit.on(aF.DEACTIVATE,function(e){t.dispatchEvent(new LF(LF.DEACTIVATE,t._getFeatureOperator(e.feature,t.showLayer)))}),this._ls_mapclick=this.map.on("click",function(e){if(t.plotDraw&&!t.plotDraw.isDrawing())t.map.forEachFeatureAtPixel(e.pixel,function(t,e){return t})}).listener}},{key:"_unbindListener",value:function(){this.plotDraw.un([HF.ADD_CONTROL_POINT,HF.ADDING_MOUSE_MOVE,aF.DRAW_END]),this.plotEdit.un([aF.ACTIVATE,aF.DEACTIVATE]),this._ls_mapclick&&(this.map.un("click",this._ls_mapclick),this._ls_mapclick=null)}},{key:"_createHelpOverlay",value:function(){this.help_overlay_ele&&this.help_overlay_ele.parentNode.removeChild(this.help_overlay_ele),this.help_overlay_ele=document.createElement("div"),this.help_overlay_ele.className="tooltip hidden se-tooltip",this.help_overlay=new bA({element:this.help_overlay_ele,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.help_overlay)}},{key:"_removeHelpOverlay",value:function(){this.help_overlay_ele&&(this.help_overlay_ele.parentNode.removeChild(this.help_overlay_ele),this.help_overlay_ele=null),this.help_overlay&&(this.map.removeOverlay(this.help_overlay),this.help_overlay=null)}},{key:"_createShowLayer",value:function(){var t=new EA.a.layer.Vector({source:new EA.a.source.Vector});return t.setMap(this.map),t}},{key:"_onDrawEnd",value:function(t){var e=t.feature;this._removeHelpOverlay(),this.options.drawEndCallback(e)}},{key:"_setHelpOverlayState",value:function(t){if(this.help_overlay_ele){var e=t.total?"图元共".concat(t.total,"个控制点，"):"当前图元控制点无限制，",r="当前是第".concat(t.current,"个,"),n=t.total?"点击继续绘制。":"双击结束绘制";this.help_overlay_ele.innerHTML=t.freehand?"当前随意绘制。单击结束":e+r+n,this.help_overlay.setPosition(t.position)}}},{key:"_addFeature",value:function(t,e){var r=this._getFeatureOperator(t,this.showLayer,e||this.feature_operators.length+1);return this.feature_operators.push(r),r}},{key:"_sortByZindex",value:function(){this.feature_operators.sort(function(t,e){return t.feature.getStyle().zIndex-e.feature.getStyle().zIndex})}},{key:"_getFeatureOperatorIndex",value:function(t){for(var e=0;e<this.feature_operators.length;e++)if(t.guid==this.feature_operators[e].guid)return e}},{key:"_resetZIndex",value:function(){this.feature_operators.map(function(t,e){var r=t.feature.getStyle().clone();r.setZIndex(e+1),t.feature.setStyle(r)})}},{key:"_getFeatureOperator",value:function(t,e,r){for(var n=0;n<this.feature_operators.length;n++){var o=this.feature_operators[n];if(o.feature==t)return o}return new vB(t,e,r)}},{key:"loadFromService",value:function(t,e,r){t||r()}},{key:"saveToService",value:function(t,e,r){t||r()}},{key:"addFeature",value:function(t,e,r){this.plotDraw.activate(t),this.options.drawEndCallback=r,this.showLayer=e}},{key:"removeFeature",value:function(t){this.showLayer.getSource().removeFeature(t.feature),this.plotEdit.deactivate();var e=this._getFeatureOperatorIndex(t);t.destory(),this.feature_operators.splice(e,1),this._sortByZindex(),this._resetZIndex()}},{key:"clearFeatures",value:function(t){var e=this;return this.plotEdit.deactivate(),this.feature_operators.map(function(t){e.showLayer.getSource().removeFeature(t.feature),t.destory()},this),this.feature_operators.splice(0,this.feature_operators.length),this}},{key:"moveUp",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);bB(this.feature_operators,e),this._resetZIndex()}},{key:"moveDown",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);_B(this.feature_operators,e),this._resetZIndex()}},{key:"setToTop",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);gB(this.feature_operators,e),this._resetZIndex()}},{key:"setToBottom",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);wB(this.feature_operators,e),this._resetZIndex()}},{key:"destory",value:function(){this.clearFeatures(),this.showLayer.setMap(null),this.showLayer=null,this._unbindListener(),this.plotEdit.deactivate(),this.plotEdit=null,this.plotDraw.deactivate(),this.plotEdit=null,this.map.removeOverlay(this.help_overlay),this.help_overlay=null,this.help_overlay_ele=null,this.map=null}}])&&PB(e.prototype,r),n&&PB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jB(t){"@babel/helpers - typeof";return(jB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===jB(i=function(t,e){if("object"!==jB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function AB(){return(AB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RB(t,e){return(RB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IB(t);if(e){var o=IB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function IB(t){return(IB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RB(t,e)}(i,TB);var e,r,n,o=kB(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).isTracking=!1,r.track_coordinates=[],r}return e=i,(r=[{key:"_createMarkers",value:function(t,e,r){var n=$N.createPlot(CR.MARKER,[[e,t]]),o=new MS(n);o.set(Wk.SE_DISABLED,!0,!0);var i=this._addFeature(o,1);return i.attrs={},i.setStyle({image:{icon:{src:r?"./images/marker-begin.png":"./images/marker-current.png",anchor:[.5,1]}}}),i}},{key:"_createLine",value:function(t){var e=$N.createPlot(CR.POLYLINE,t),r=new MS(e);r.set(Wk.SE_DISABLED,!0,!0);var n=this._addFeature(r,1);return n.attrs={},n}},{key:"beginTrack",value:function(t,e){this.isTracking||(this.isTracking=!0,this.fo_begin_points=this._createMarkers(t,e,!0),this.track_coordinates.push([e,t]))}},{key:"updateTrack",value:function(t,e){this.track_coordinates.push([e,t]),this.track_coordinates.length<2||(this.fo_end_points||(this.fo_end_points=this._createMarkers(t,e)),this.fo_end_points.setCoordinates([[e,t]]),this.fo_polyline||(this.fo_polyline=this._createLine(this.track_coordinates)),this.fo_polyline.setCoordinates(this.track_coordinates))}},{key:"endTrack",value:function(){this.isTracking=!1}},{key:"setAttribute",value:function(t,e){if(this.fo_polyline)return this.fo_polyline.setAttribute(t,e),!0}},{key:"getAttribute",value:function(t){return this.fo_polyline?this.fo_polyline.getAttribute(t):null}},{key:"destory",value:function(){AB(IB(i.prototype),"destory",this).call(this),this.isTracking=!1,this.track_coordinates=[]}}])&&xB(e.prototype,r),n&&xB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DB(t){"@babel/helpers - typeof";return(DB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===DB(i=function(t,e){if("object"!==DB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==DB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function NB(t,e){return(NB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BB(t);if(e){var o=BB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===DB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BB(t){return(BB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NB(t,e)}(i,t_);var e,r,n,o=FB(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this)).TrackingLayer=MB,r.PlotTypes=CR,r.FeatureOperatorEvent=LF,r.OL=SA,r.map=t.olMap,r.defaults={},r.opts={},r.feature_operators=[],r.showLayer=null,r.plotEdit=null,r.plotDraw=null,r.help_overlay=null,r.help_overlay_ele=null,r._ls_mapclick=null,lF(r.opts,r.defaults,e),r.showLayer=r._createShowLayer(),r.plotEdit=new xF(t),r.plotDraw=new mF(t),r._bindListener(),r.options={},r.selected=null,r}return e=i,(r=[{key:"_bindListener",value:function(){var t=this;this.plotDraw.on(aF.DRAW_END,function(e){t._onDrawEnd(e)}),this.plotDraw.on(HF.ADD_CONTROL_POINT,function(e){t.help_overlay}),this.plotDraw.on(HF.ADDING_MOUSE_MOVE,function(e){t.help_overlay}),this.plotEdit.on(aF.ACTIVATE,function(e){t.dispatchEvent(new LF(LF.ACTIVATE,t._getFeatureOperator(e.feature,t.showLayer)))}),this.plotEdit.on(aF.DEACTIVATE,function(e){t.dispatchEvent(new LF(LF.DEACTIVATE,t._getFeatureOperator(e.feature,t.showLayer)))}),this._ls_mapclick=this.map.on("click",function(e){if(t.plotDraw&&!t.plotDraw.isDrawing()){var r=t.map.forEachFeatureAtPixel(e.pixel,function(t,e){return t});t.selected=r||null}}).listener}},{key:"_unbindListener",value:function(){this.plotDraw.un([HF.ADD_CONTROL_POINT,HF.ADDING_MOUSE_MOVE,aF.DRAW_END]),this.plotEdit.un([aF.ACTIVATE,aF.DEACTIVATE]),this._ls_mapclick&&(this.map.un("click",this._ls_mapclick),this._ls_mapclick=null)}},{key:"_createHelpOverlay",value:function(){this.help_overlay_ele&&this.help_overlay_ele.parentNode.removeChild(this.help_overlay_ele),this.help_overlay_ele=document.createElement("div"),this.help_overlay_ele.className="tooltip hidden se-tooltip",this.help_overlay=new bA({element:this.help_overlay_ele,offset:[15,0],positioning:"center-left"}),this.map.addOverlay(this.help_overlay)}},{key:"_removeHelpOverlay",value:function(){this.help_overlay_ele&&(this.help_overlay_ele.parentNode.removeChild(this.help_overlay_ele),this.help_overlay_ele=null),this.help_overlay&&(this.map.removeOverlay(this.help_overlay),this.help_overlay=null)}},{key:"_createShowLayer",value:function(){var t=new SA.layer.Vector({source:new SA.source.Vector});return t.setMap(this.map),t}},{key:"_onDrawEnd",value:function(t){var e=t.feature;if(e){var r={icon:"点_1",flash_point:"闪烁点_1",arc:"弧线_3",curve:"曲线_2",polyline:"折线_2",freehand_line:"自由线_2",circle:"圆_2",diffuse_circle:"扩散圆_2",scan_circle:"扫描圆_2",ellipse:"椭圆_2",lune:"弓形_3",sector:"扇形_3",closed_curve:"曲线面_3",polygon:"多边形_3",rectangle:"矩形_2",freehand_polygon:"自由面_3",gathering_place:"聚集地",double_arrow:"钳击_4",straight_arrow:"直箭头_2",fine_arrow:"细直箭头_2",assault_direction:"突击方向_2",attack_arrow:"进攻箭头_3",tailed_attack_arrow:"进攻箭头（尾）_3",squad_combat:"分队战斗行动_3",tailed_squad_combat:"分队战斗行动（尾）_3"},n=e.getGeometry().points;r[this.__plotType]&&n.length>Number(r[this.__plotType].split("_")[1])&&(e.get("isMoving")&&n.pop(),e.getGeometry().setPoints(n)),this.map._onDrawAnchor&&(this.map._onDrawAnchor({alt:0,heading:0,lat:n[n.length-1][1],lng:n[n.length-1][0],pitch:0,roll:0}),this.map._onDrawAnchor=void 0);var o=this.plotDraw._delegate;if(o._allowDrillPicking=!1,o._attr={},o._bid=Bt.uuid(),o._contextMenu=[],o._id=Bt.uuid(),o._state="added","circle"===this.plotDraw._delegate._overlayType||"diffuseCircle"===this.plotDraw._delegate._overlayType||"scanCircle"===this.plotDraw._delegate._overlayType){var i=Gk(o._element.points[0],o._element.points[1])/1*new sw("EPSG:4326").getMetersPerUnit();o.radius=i}else"billboard"===this.plotDraw._delegate._overlayType||"flashPoint"===this.plotDraw._delegate._overlayType?o.position=n[0]:o.positions=n.map(function(t){return[t[0],t[1]]});this.options.drawEndCallback(o),o.setStyle(this.options.style)}}},{key:"edit",value:function(t,e,r){this.selected=t,this.plotEdit.activate(this.selected?this.selected:t._delegate,e,r)}},{key:"stop",value:function(t){this.plotEdit.deactivate(t),this.plotDraw.stop(t)}},{key:"_setHelpOverlayState",value:function(t){if(this.help_overlay_ele){var e=t.total?"当前绘制类型：进攻方向，需要".concat(t.total,"个点<br>"):"当前绘制类型："+{icon:"点_1",flash_point:"闪烁点_1",arc:"弧线_3",curve:"曲线_2",polyline:"折线_2",freehand_line:"自由线_2",circle:"圆_2",diffuse_circle:"扩散圆_2",scan_circle:"扫描圆_2",ellipse:"椭圆_2",lune:"弓形_3",sector:"扇形_3",closed_curve:"曲线面_3",polygon:"多边形_3",rectangle:"矩形_2",freehand_polygon:"自由面_3",gathering_place:"聚集地",double_arrow:"钳击_4",straight_arrow:"直箭头_2",fine_arrow:"细直箭头_2",assault_direction:"突击方向_2",attack_arrow:"进攻箭头_3",tailed_attack_arrow:"进攻箭头（尾）_3",squad_combat:"分队战斗行动_3",tailed_squad_combat:"分队战斗行动（尾）_3"}[this.__plotType].split("_")[0]+"，最少需要3个点<br>",r="已有".concat(t.current-1,"个点，")+"按下鼠标左键确定第".concat(t.current,"个点<br>"),n=t.total?"点击继续绘制":"按下鼠标右键结束绘制";this.help_overlay_ele.innerHTML=t.freehand?"当前随意绘制。单击结束":e+r+n,this.help_overlay.setPosition(t.position)}}},{key:"_addFeature",value:function(t,e){var r=this._getFeatureOperator(t,this.showLayer,e||this.feature_operators.length+1);return this.feature_operators.push(r),r}},{key:"_sortByZindex",value:function(){this.feature_operators.sort(function(t,e){return t.feature.getStyle().zIndex-e.feature.getStyle().zIndex})}},{key:"_getFeatureOperatorIndex",value:function(t){for(var e=0;e<this.feature_operators.length;e++)if(t.guid==this.feature_operators[e].guid)return e}},{key:"_resetZIndex",value:function(){this.feature_operators.forEach(function(t,e){var r=t.feature.getStyle().clone();r.setZIndex(e+1),t.feature.setStyle(r)})}},{key:"_getFeatureOperator",value:function(t,e,r){for(var n=0;n<this.feature_operators.length;n++){var o=this.feature_operators[n];if(o.feature==t)return o}return new vB(t,e,r)}},{key:"loadFromService",value:function(t,e,r){t||r()}},{key:"saveToService",value:function(t,e,r){t||r()}},{key:"draw",value:function(t,e,r,n,o){this.__plotType=t,this.plotDraw.activate(t,r),this.options.drawEndCallback=e,this.options.style=r,this.map._onDrawAnchor=o;var i=this.map.getInteractions().getArray().find(function(t){return t instanceof tP});this.map.removeInteraction(i)}},{key:"removeFeature",value:function(t){this.showLayer.getSource().removeFeature(t.feature),this.plotEdit.deactivate();var e=this._getFeatureOperatorIndex(t);t.destory(),this.feature_operators.splice(e,1),this._sortByZindex(),this._resetZIndex()}},{key:"clearFeatures",value:function(t){var e=this;return this.plotEdit.deactivate(),this.feature_operators.forEach(function(t){e.showLayer.getSource().removeFeature(t.feature),t.destory()},this),this.feature_operators.splice(0,this.feature_operators.length),this}},{key:"moveUp",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);bB(this.feature_operators,e),this._resetZIndex()}},{key:"moveDown",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);_B(this.feature_operators,e),this._resetZIndex()}},{key:"setToTop",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);gB(this.feature_operators,e),this._resetZIndex()}},{key:"setToBottom",value:function(t){this._sortByZindex();var e=this._getFeatureOperatorIndex(t);wB(this.feature_operators,e),this._resetZIndex()}},{key:"destory",value:function(){this.clearFeatures(),this.showLayer.setMap(null),this.showLayer=null,this._unbindListener(),this.plotEdit.deactivate(),this.plotEdit=null,this.plotDraw.deactivate(),this.plotEdit=null,this.map.removeOverlay(this.help_overlay),this.help_overlay=null,this.help_overlay_ele=null,this.map=null}}])&&LB(e.prototype,r),n&&LB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function GB(t){"@babel/helpers - typeof";return(GB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===GB(i=function(t,e){if("object"!==GB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==GB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var HB=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.map2d=r,this._measureLayer=new QA("measure"),r.addLayer(this._measureLayer),this.popup=new gR([0,0],""),this.popup.id="measure-2d-point",this.popup.setStyle({className:"measure-2d-popup",position:"top_center"}),this.popup.show=!1,this._measureLayer.addOverlay(this.popup),this.vectorLayer=new rR("measure"),r.addLayer(this.vectorLayer),this.plot=new WB(r,{})}var e,r,n;return e=t,(r=[{key:"measurePos",value:function(t){var e=this;this.plot.stop(),this.plot.draw("icon",function(r){e.vectorLayer.addOverlay(r);var n=[r.position.lng,r.position.lat],o="经度："+n[0].toFixed(5)+"<br>纬度："+n[1].toFixed(5);e.popup.content=o,e.popup.position=n,e.popup.show=!0,e._measureLayer.getOverlayById("measure-2d-point")||e._measureLayer.addOverlay(e.popup),r.on("click",function(t){var r=[t.wgs84Position.lng,t.wgs84Position.lat];t.overlay&&(r=[t.overlay.position.lng,t.overlay.position.lat]),o="经度："+r[0].toFixed(5)+"<br>纬度："+r[1].toFixed(5),e.popup.content=o,e.popup.position=r,e.popup.show=!0}),t&&t()},{},!1)}},{key:"measureDis",value:function(t){var e=this;this.plot.stop();var r=[];this.plot.draw("polyline",function(r){e.vectorLayer.addOverlay(r),t&&t()},{},!1,function(t){r.push(t);var n="";1==r.length?n='<div class="measureDistance">起点</div>':n='<div class="measureDistance">'+e.formatLength(r)+"</div>";var o=new gR([t.lng,t.lat,1],n);e._measureLayer.addOverlay(o)})}},{key:"measureArea",value:function(t){var e=this;this.plot.stop();var r=[],n=0,o=new gR([0,0,1],"");this._measureLayer.addOverlay(o),this.plot.draw("polygon",function(r){e.vectorLayer.addOverlay(r),t&&t()},{fillColor:"rgba(255,0,0,0.6)"},!1,function(t){r.push(t),r.length>2&&(o.position=[me(r).lng,me(r).lat],n=e.formatArea(r),o.content='<div class="measureDistance">'+n+"</div>")})}},{key:"measureClear",value:function(){return this._measureLayer.clear(),this.vectorLayer.clear(),this}},{key:"destroy",value:function(){this.map2d.removeLayer(this._measureLayer),this.map2d.removeLayer(this.vectorLayer),this._measureLayer=null,this.vectorLayer=null,this.plot.destroy(),this.popup=null,this.map2d=null,this.olMap=null}},{key:"formatArea",value:function(t){var e=ve(t),r=null;return e<1e6?r=e.toFixed(2)+"平方米":e>=1e6&&e<1e10?r=(e/1e6).toFixed(2)+"平方公里":e>=1e10&&(r=(e/1e6/1e4).toFixed(2)+"万平方公里"),r}},{key:"formatLength",value:function(t){var e=be(t),r=null;return e<1e3?r=(e/1).toFixed(2)+"米":e>=1e3&&e<1e7?r=(e/1e3).toFixed(2)+"公里":e>=1e7&&(r=(e/1e3/1e4).toFixed(2)+"万公里"),r}}])&&zB(e.prototype,r),n&&zB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UB(t){"@babel/helpers - typeof";return(UB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===UB(i=function(t,e){if("object"!==UB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==UB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var ZB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.viewObj=this.olMap.getView()}var e,r,n;return e=t,(r=[{key:"add",value:function(t){if(!(Number(this.viewObj.getZoom().toFixed(4))<5)){var e,r=this.viewObj;e=t.center?[t.center[0],t.center[1]]:this.viewObj.getCenter();var n=this.viewObj.getRotation();"left"==t.type?n-=Math.PI/2:"right"==t.type?n+=Math.PI/2:"back"==t.type&&(n=0),r.animate({center:e,rotation:n,duration:1e3/t.speed})}}}])&&VB(e.prototype,r),n&&VB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function YB(t){"@babel/helpers - typeof";return(YB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===YB(i=function(t,e){if("object"!==YB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==YB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var KB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.viewObj=this.olMap.getView(),this.setZoomGetHeight=function(t){return t>=21?43:t>=20?48:t>=19?115:t>=18?295:t>=17?660:t>=16?1300:t>=15?2600:t>=14?6400:t>=13?13200:t>=12?26e3:t>=11?67985:t>=10?139780:t>=9?250600:t>=8?38e4:t>=7?64e4:t>=6?128e4:t>=5?26e5:t>=4?61e5:t>=3?119e5:2e7}}var e,r,n;return e=t,(r=[{key:"getMsg",value:function(){var t=Number(this.viewObj.getZoom().toFixed(4)),e=(3779.5275590551*this.olMap.getView().getResolution()).toFixed(4);return{scale:"1:"+Math.round(1e3*e),level:t,height:this.setZoomGetHeight(t)}}},{key:"screenPos",value:function(t){var e=this.olMap.getCoordinateFromPixel([t.x,t.y]);return{lng:Number(e[0].toFixed(6)),lat:Number(e[1].toFixed(6))}}}])&&XB(e.prototype,r),n&&XB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QB(t){"@babel/helpers - typeof";return(QB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===QB(i=function(t,e){if("object"!==QB(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==QB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var JB=function(t,e,r){return e&&qB(t.prototype,e),r&&qB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.olMap=e,this.measure=new HB(this.olMap,r),this.compass=new ZB(this.olMap),this.mapBaseMsg=new KB(this.olMap)});function $B(t){"@babel/helpers - typeof";return($B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tW(){return(tW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===$B(i=function(t,e){if("object"!==$B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function nW(t,e,r){return e&&rW(t.prototype,e),r&&rW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oW(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iW(t,e)}function iW(t,e){return(iW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uW(t);if(e){var o=uW(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sW(t)}(this,r)}}function sW(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uW(t){return(uW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lW=function(t){oW(r,BO);var e=aW(r);function r(){return eW(this,r),e.apply(this,arguments)}return nW(r,[{key:"createRenderer",value:function(){return new tg(this)}}]),r}(),cW=function(t){oW(r,GO);var e=aW(r);function r(t){var n;eW(this,r);var o=t||{width:150,height:150};(n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})).boundHandleRotationChanged_=n.handleRotationChanged_.bind(sW(n)),n.collapsed_=void 0===o.collapsed||o.collapsed,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1),n.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,n.viewExtent_=void 0;var i=void 0!==o.className?o.className:"ol-overviewmap",a=void 0!==o.tipLabel?o.tipLabel:"Overview map",s=void 0!==o.collapseLabel?o.collapseLabel:"«";"string"==typeof s?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=s):n.collapseLabel_=s;var u=void 0!==o.label?o.label:"»";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u):n.label_=u;var l=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=a,c.appendChild(l),c.addEventListener(Xb.CLICK,n.handleClick_.bind(sW(n)),!1),n.ovmapDiv_=document.createElement("div"),n.ovmapDiv_.className="ol-overviewmap-map",n.ovmapDiv_.style.width=o.width+"px",n.ovmapDiv_.style.height=o.height+"px",n.view_=o.view,n.ovmap_=new lW({view:o.view});var f=n.ovmap_;o.layers&&o.layers.forEach(function(t){f.addLayer(t)});var p=document.createElement("div");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",n.boxOverlay_=new bA({position:[0,0],positioning:yA.CENTER_CENTER,element:p}),n.ovmap_.addOverlay(n.boxOverlay_);var h=i+" "+j_+" "+x_+(n.collapsed_&&n.collapsible_?" "+A_:"")+(n.collapsible_?"":" ol-uncollapsible"),y=n.element;y.className=h,y.appendChild(n.ovmapDiv_),y.appendChild(c);var d=sW(n),v=n.boxOverlay_,m=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=f.getEventCoordinateInternal(r);v.setPosition(n)},b=function t(e){var r=f.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)};return n.boxOverlay_.getElement().addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",b)}),n.options=o,n}return nW(r,[{key:"setMap",value:function(t){var e=this.getMap();if(t!==e){if(e){var n=e.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(tW(uW(r.prototype),"setMap",this).call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Kb(t,Gb.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var o=t.getView();o&&(this.bindView_(o),o.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}},{key:"handleMapPropertyChange_",value:function(t){if(t.key===gg.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}else this.ovmap_.isRendered()||t.key!==gg.TARGET&&t.key!==gg.SIZE||this.ovmap_.updateSize()}},{key:"bindView_",value:function(t){if(!this.view_){var e=new IO({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(Mg,this.boundHandleRotationChanged_),this.handleRotationChanged_()}},{key:"unbindView_",value:function(t){t.removeChangeListener(Mg,this.boundHandleRotationChanged_)}},{key:"handleRotationChanged_",value:function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}},{key:"validateExtent_",value:function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!eb(n,this.viewExtent_)){this.viewExtent_=n;var o=e.getSize(),i=e.getView().calculateExtentInternal(o),a=e.getPixelFromCoordinateInternal(hb(n)),s=e.getPixelFromCoordinateInternal(ub(n)),u=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c=o[0],f=o[1];u<.1*c||l<.1*f||u>.75*c||l>.75*f?this.resetExtent_():Km(i,n)||this.recenter_()}}}},{key:"resetExtent_",value:function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),o=e.getView(),i=Math.log(7.5)/Math.LN2;!function(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}(n,1/(.1*Math.pow(2,i/2))),o.fitInternal(TO(n))}},{key:"recenter_",value:function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())}},{key:"updateBox_",value:function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),o=e.getView(),i=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.getCenterInternal(),l=n.getResolution(),c=o.getResolution(),f=r[0]*l/c,p=r[1]*l/c;if(a.setPosition(u),s){s.style.width=f+"px",s.style.height=p+"px";var h="rotate("+i+"rad)";s.style.transform=h}}}},{key:"updateBoxAfterOvmapIsRendered_",value:function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Qb(this.ovmap_,mg,function(t){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}},{key:"handleClick_",value:function(t){t.preventDefault(),this.handleToggle_()}},{key:"handleToggle_",value:function(){this.element.classList.toggle(A_),this.collapsed_?(N_(this.collapseLabel_,this.label_),this.target_.style.width=this.options.width+"px",this.target_.style.height=this.options.height+"px"):(N_(this.label_,this.collapseLabel_),this.target_.style.width="15px",this.target_.style.height="15px"),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"setRotateWithView",value:function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}},{key:"getOverviewMap",value:function(){return this.ovmap_}},{key:"render",value:function(t){this.validateExtent_(),this.updateBox_()}}]),r}();function fW(t){"@babel/helpers - typeof";return(fW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===fW(i=function(t,e){if("object"!==fW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}function hW(t,e){return(hW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yW(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=dW(t);if(e){var o=dW(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function dW(t){return(dW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hW(t,e)}(i,GO);var e,r,n,o=yW(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=t||{};(e=o.call(this,{element:zt.create("div","steering-wheel"),target:r.target})).reverseText=r.reverseText?r.reverseText:"逆时针转动",e.recoveryText=r.recoveryText?r.recoveryText:"恢复正北方向",e.forwordText=r.forwordText?r.forwordText:"顺时针转动";var n=void 0!==r.delta?r.delta:1,a=void 0!==r.roateDelta?r.roateDelta:Math.PI/10,s=zt.create("div","steering-wheel-ring");return e.element.appendChild(s),e._pan=zt.create("div","steering-wheel-pan",s),e._left=zt.create("div","steering-wheel-left",s),e._right=zt.create("div","steering-wheel-right",s),e._add=zt.create("div","steering-wheel-add",e.element),e._sub=zt.create("div","steering-wheel-sub",e.element),e._left.onclick=function(t){t=t||window.event,e.rotateClick(-a),t.preventDefault()},e._pan.onclick=function(t){t=t||window.event,e.recoveryClick(),t.preventDefault()},e._right.onclick=function(t){t=t||window.event,e.rotateClick(a),t.preventDefault()},e._add.onclick=function(t){t=t||window.event,e.zoomByDelta_(n),t.preventDefault()},e._sub.onclick=function(t){t=t||window.event,e.zoomByDelta_(-n),t.preventDefault()},e._rotate=0,e}return e=i,(r=[{key:"render",value:function(t){this._pan.style.transform=" rotate("+this._rotate+"deg)"}},{key:"rotateClick",value:function(t){var e=this.getMap().getView(),r=this.getMap().getView().getCenter(),n=this.getMap().getView().getRotation();this._rotate+=180*t/Math.PI,e.animate({center:r,rotation:n+t,easing:Dw})}},{key:"recoveryClick",value:function(){var t=this.getMap().getView(),e=this.getMap().getView().getCenter();this._rotate=0,t.animate({center:e,rotation:0,easing:Dw})}},{key:"zoomByDelta_",value:function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Dw})):e.setZoom(n)}}}}])&&pW(e.prototype,r),n&&pW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mW(t){"@babel/helpers - typeof";return(mW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_W(n.key),n)}}function _W(t){var e=function(t,e){if("object"!==mW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===mW(e)?e:String(e)}var gW=n(4),wW=function(){function t(e){var r,n,o,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(t){if(!t||3!==Object.keys(t).length)throw new Error("请传入合法的cartesian对象 {x, y, z}");var e=new gW.Cartesian3(t.x,t.y,t.z),r=gW.Ellipsoid.WGS84.cartesianToCartographic(e);return{lng:gW.Math.toDegrees(r.longitude),lat:gW.Math.toDegrees(r.latitude),alt:r.height}},(n=_W(n="cartesianTolngLatAlt"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.olMap=null,this.olTileLayerArr=[],this._olTrackCache={},this.olMap=new XP({layers:[],overlays:[],target:e,view:new IO({center:a.center||[110.47028461445241,31.78852627398634],projection:a.crs||"EPSG:4326",zoom:a.zoom||5,maxZoom:18,minZoom:0,extent:[-180,-90,180,90]}),controls:XO({zoom:!1,rotate:!1,attribution:!1})}),this.olMap._offset=[0,0],this.domid=e,this.viewObj=this.olMap.getView(),this.olMap.on("click",function(t){i.olMap.forEachFeatureAtPixel(t.pixel,function(e){return t._olMap=i.olMap,e.dispatchEvent({type:"click",event:t}),e})}),this.olMap.on("dblclick",function(t){i.olMap.forEachFeatureAtPixel(t.pixel,function(e){return t._olMap=i.olMap,e.dispatchEvent({type:"dblclick",event:t}),e})}),this.olMap.on("pointermove",function(t){i.olMap.forEachFeatureAtPixel(t.pixel,function(e){return t._olMap=i.olMap,e.dispatchEvent({type:"pointermove",event:t}),e})}),this.olMap.once("postrender",function(t){s&&s(i)}),this._layerCache={},this.MouseEventType=NA,this._mapEventOl=new WA(this.olMap),this.popup=new CA(this.olMap),this.olMap.addOverlay(this.popup),this.tools=new JB(this.olMap,this),this.overlay=new LA(this.olMap),this.contourLayer=new vT({source:new qS}),this.contourLayer.setMap(this.olMap),this.setHeightGetZoom=function(t){var e=-79.64102;return e+130.22277/(1+Math.pow(t/4271509e5,.05212114))},this.setZoomGetHeight=function(t){return t>=21?43:t>=20?48:t>=19?115:t>=18?295:t>=17?660:t>=16?1300:t>=15?2600:t>=14?6400:t>=13?13200:t>=12?26e3:t>=11?67985:t>=10?139780:t>=9?250600:t>=8?38e4:t>=7?64e4:t>=6?128e4:t>=5?26e5:t>=4?61e5:t>=3?119e5:2e7}}var e,r,n;return e=t,(r=[{key:"init",value:function(){}},{key:"destroy",value:function(){if(this.olMap.getAllLayers&&0!=this.olMap.getAllLayers().length)for(var t=0;t<this.olMap.getAllLayers().length;t++)this.olMap.removeLayer(this.olMap.getAllLayers()[t]),t--;if(this.olMap.getOverlays&&0!=this.olMap.getOverlays().array_.length)for(var e=0;e<this.olMap.getOverlays().array_.length;e++)this.olMap.removeOverlay(this.olMap.getOverlays().array_[e]),e--;document.getElementById(this.domid)&&document.body.removeChild(document.getElementById(this.domid));var r=document.createElement("div");r.id=this.domid,document.body.appendChild(r)}},{key:"_addLayer",value:function(t){switch(!this._layerCache[t.type]&&(this._layerCache[t.type]={}),t.type){case"htmlLayer":t.olMap=this.olMap,this._layerCache[t.type][t.id]=t;break;case"vectorLayer":this._layerCache[t.type][t.id]=t,this.olMap.addLayer(t._delegate),t._olMap=this.olMap}}},{key:"_removeLayer",value:function(t){}},{key:"addLayer",value:function(t){return this._addLayer(t),this}},{key:"getLayer",value:function(t){var e=this.getLayers().filter(function(e){return e.id===t});return e&&e.length?e[0]:void 0}},{key:"exportScene",value:function(){this.olMap.render();var t=document.getElementsByClassName("ol-layer")[0].children[0].toDataURL("image/jpeg");return this.olMap.renderSync(),t}},{key:"getLayers",value:function(){var t=this,e=[];return Object.keys(this._layerCache).forEach(function(r){var n=t._layerCache[r];Object.keys(n).forEach(function(t){e.push(n[t])})}),e}},{key:"removeLayer",value:function(t){return this._removeLayer(t),this}},{key:"addMapLayer",value:function(t){this.olTileLayerArr.push(t),this.olMap.addLayer(t)}},{key:"mapLayerRemoveAll",value:function(){for(var t=0;t<this.olTileLayerArr.length;t++)this.olMap.removeLayer(this.olTileLayerArr[t]);this.olTileLayerArr=[]}},{key:"mapLayerRemove",value:function(t){this.olMap.removeLayer(t);for(var e=0;e<this.olTileLayerArr.length;e++)this.olTileLayerArr[e]==t&&this.olTileLayerArr.splice(e--,1)}},{key:"setSkyBox",value:function(t){}},{key:"setBackgroundColor",value:function(){}},{key:"big",value:function(){var t=Number(this.viewObj.getZoom().toFixed(4));this.viewObj.setZoom(t+=1)}},{key:"small",value:function(){var t=Number(this.viewObj.getZoom().toFixed(4));this.viewObj.setZoom(t-=1)}},{key:"getCurrentExtent",value:function(){var t=this.olMap.getView().calculateExtent();return[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],[t[0],t[1]]]}},{key:"FlyTo",value:function(t){var e=t.longitude,r=t.latitude,n=t.height,o=(t.heading,t.pitch,t.roll,this.setHeightGetZoom(n).toFixed(2));o=o>4?o:4,this.olMap.getView().animate({center:[e,r],zoom:o,duration:2e3})}},{key:"flyToPoint",value:function(t){if(t.destination&&t.range){var e=this.setHeightGetZoom(t.range).toFixed(2);e=e>4?e:4,this.olMap.getView().animate({center:[t.destination[0],t.destination[1]],zoom:e,duration:2e3})}}},{key:"getCamera",value:function(){var t=Number(this.viewObj.getZoom().toFixed(4)),e=Number(this.setZoomGetHeight(t).toFixed(4)),r=this.viewObj.getCenter()[0],n=this.viewObj.getCenter()[1];return{height:e,centerLon:r,centerLat:n,heading:2*Math.PI,pitch:-Math.PI/2,roll:0,cameraPosition:gW.Cartesian3.fromDegrees(r,n,e)}}},{key:"flyToBox",value:function(t){if(t.posArr&&t.posArr.length>1){var e=Um(t.posArr.map(function(t){return[parseFloat(t[0]),parseFloat(t[1])]}));this.viewObj.fit(e,{duration:2e3,maxZoom:18,padding:[100,10,10,100],callback:function(){t.callback&&t.callback()}})}}},{key:"cameraAttitudeSet",value:function(){}},{key:"on",value:function(t,e,r){return this._mapEventOl.on(t,e,r||this),this}},{key:"off",value:function(t,e,r){return this._mapEventOl.off(t,e,r||this),this}},{key:"once",value:function(t,e,r){return this._mapEventOl.once(t,e,r||this),this}},{key:"enableOverViewMap",value:function(t,e){t||console.error("缺少容器或者容器id");this.olMap.getTargetElement();for(var r="string"==typeof t?document.getElementById(t):t,n=[],o=0;o<e.length;o++)n.push(new kS(e[o]));this.overviewMapControl=new cW({height:parseInt(zt.getStyle(r,"height")),width:parseInt(zt.getStyle(r,"width")),target:t,collapsed:!1,layers:n}),this.olMap.addControl(this.overviewMapControl)}},{key:"enableZoomCompass",value:function(t){t="string"==typeof t?document.getElementById(t):t,this.zoomCompass=new vW({target:t}),this.olMap.addControl(this.zoomCompass)}},{key:"disableZoomCompass",value:function(){this.olMap.removeControl(this.zoomCompass)}},{key:"addPerimeterContour",value:function(t){for(var e=[],r=0;r<t.posArr.length;r+=2)e.push([t.posArr[r],t.posArr[r+1]]);var n=2;t.width&&(n=t.width<=100?2:t.width>=160&&t.width<=500?3:t.width>500&&t.width<=1e3?4:t.width>1e3&&t.width<=5e3?5:6);var o=t.color||"rgba(189, 239, 255, 1)",i=new MS({geometry:new AA(e)});i.setStyle(new fE({stroke:new iE({color:o,width:n})})),this.contourLayer.getSource().addFeature(i)}},{key:"RemoveAllPerimeterContour",value:function(){this.contourLayer.getSource().clear()}},{key:"getCanvas",value:function(){var t=this.olMap.getTargetElement().querySelector(".ol-unselectable.ol-layers canvas");return t||this.olMap.getTargetElement().querySelector(".ol-unselectable.ol-layers")}}])&&bW(e.prototype,r),n&&bW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function OW(t){"@babel/helpers - typeof";return(OW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===OW(i=function(t,e){if("object"!==OW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==OW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var CW=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._Chrtc=e,this._olMap=e.olMap,this._cache={},this._delegate=new rR(this._id+"_track_layer"),this._delegate._delegate.setStyle(null),this._olMap.addLayer(this._delegate._delegate),this._params={},this._track={},this._trackCallback=void 0}var e,r,n;return e=t,(r=[{key:"_addTrack",value:function(t){this._trackCallback=t._callback,this._track[t._bid]=t,this._Chrtc._olTrackCache[this._track[t._bid]._id]=!1,this._delegate.addOverlay(t._delegate[0]),this._delegate.addOverlay(t._delegate[1]),this._delegate._track=this._track}},{key:"addTrack",value:function(t){this._addTrack(t)}},{key:"addTracks",value:function(t){for(var e=0;e<t.length;e++)this._addTrack(t[e])}},{key:"_play",value:function(t){for(var e=this,r=this,n=function(n){e._params[t[n]]!={}&&(e._params[t[n]]={});for(var o=0,i=0;i<e._track[t[n]]._posArr.length;i++)i!=e._track[t[n]]._posArr.length-1&&(o+=nw(e._track[t[n]]._posArr[i],e._track[t[n]]._posArr[i+1])/10);e._params[t[n]].speed=(o/(1e3*e._track[t[n]]._speed*600)).toFixed(6),e._params[t[n]].routeNum=0,e._params[t[n]].startPos=e._track[t[n]]._posArr[0],e._params[t[n]].endPos=e._track[t[n]]._posArr[e._params[t[n]].routeNum],e._params[t[n]].routeListArr=e._track[t[n]]._posArr,r._params[t[n]].poltlineFeature=r._track[t[n]]._delegate[0],r._params[t[n]].animate=void 0;var a=r._params[t[n]].routeNum,s=r._params[t[n]].startPos,u=r._params[t[n]].endPos,l=r._params[t[n]].routeListArr,c=r._params[t[n]].poltlineFeature,f=[[r._track[t[n]]._posArr[0][0],e._track[t[n]]._posArr[0][1]]];r._params[t[n]].animate=function e(){r._params[t[n]].pointFeature=r._track[t[n]]._delegate[1];var o=r._params[t[n]].pointFeature,i=r._params[t[n]].speed;if(a<l.length&&o){var p=Math.sqrt(Math.pow(u[1]-s[1],2)+Math.pow(u[0]-s[0],2)),h=u[1]-s[1],y=u[0]-s[0],d=r._getAngle(s[0],s[1],u[0],u[1]),v=i*(h/p),m=i*(y/p);p>=i/2?(s[1]+=v,s[0]+=m,f[a]=[s[0],s[1]],c.positions=f,o.position=s,o.delegate.getStyle()&&o.delegate.getStyle().getImage().setRotation(d)):(r._trackCallback&&r._trackCallback({_alt:0,_heading:0,_lat:l[a][1],_lng:l[a][0],_pitch:0,_roll:0,alt:0,heading:0,lat:l[a][1],lng:l[a][0],pitch:0,roll:0},2==a,a),s=l[++a-1],u=l[a])}else i=0;r._params[t[n]].animate=requestAnimationFrame(e)},cancelAnimationFrame(e._params[t[n]].animate),requestAnimationFrame(e._params[t[n]].animate)},o=0;o<t.length;o++)n(o)}},{key:"_getAngle",value:function(t,e,r,n){var o=(90-n)*Math.PI/180,i=(90-e)*Math.PI/180,a=(r-t)*Math.PI/180,s=Math.cos(o)*Math.cos(i)+Math.sin(o)*Math.sin(i)*Math.cos(a),u=Math.sqrt(1-s*s),l=Math.sin(o)*Math.sin(a)/u,c=180*Math.asin(l)/Math.PI,f=0;return r>t&&n>e?f=c:r>t&&n<e?f=180-c:r<t&&n<e?f=180-c:r<t&&n>e?f=360+c:r>t&&n==e?f=90:r<t&&n==e?f=270:r==t&&n>e?f=0:r==t&&n<e&&(f=180),(f-=88)*Math.PI/180}},{key:"play",value:function(t){this._play(t)}},{key:"pause",value:function(t){for(var e=0;e<t.length;e++)this._params[t[e]].speed=0}},{key:"restore",value:function(t){for(var e=0;e<t.length;e++)this._params[t[e]].speed=(167e-8*this._track[t[e]]._speed).toFixed(6)}},{key:"viewTrack",value:function(t,e){if(this._Chrtc._olTrackCache!={})for(var r in this._Chrtc._olTrackCache)this._Chrtc._olTrackCache[r]=!1;"free"==e.mode?this._Chrtc._olTrackCache[t._id]=!1:this._Chrtc._olTrackCache[t._id]=!0}},{key:"getTrack",value:function(t){return this._track[t]}},{key:"getTracks",value:function(){var t=[];for(var e in this._track)t.push(this._track[e]);return t}},{key:"clear",value:function(){for(var t in this._track)this._params[t]&&(cancelAnimationFrame(this._params[t].animate),this._params[t]=void 0,delete this._params[t]),this._cache={},this._delegate._delegate.getSource().removeFeature(this._track[t]._delegate[0]._delegate),this._delegate._delegate.getSource().removeFeature(this._track[t]._delegate[1]._delegate._track?this._track[t]._delegate[1]._delegate._track._delegate:this._track[t]._delegate[1]._delegate),this._track[t]=void 0,delete this._track[t];return this}},{key:"removeTrack",value:function(t){for(var e=[t._bid],r=0;r<e.length;r++)this._params[e[r]]&&(cancelAnimationFrame(this._params[e[r]].animate),this._params[e[r]]=void 0,delete this._params[e[r]]),this._cache={},this._delegate._delegate.getSource().removeFeature(this._track[e[r]]._delegate[0]._delegate),this._delegate._delegate.getSource().removeFeature(this._track[e[r]]._delegate[1]._delegate._track?this._track[e[r]]._delegate[1]._delegate._track._delegate:this._track[e[r]]._delegate[1]._delegate),this._track[e[r]]=void 0,delete this._track[e[r]];return this}}])&&PW(e.prototype,r),n&&PW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SW(t){"@babel/helpers - typeof";return(SW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===SW(i=function(t,e){if("object"!==SW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==SW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var TW=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=Bt.uuid(),this._bid=void 0,this._callback=n,this._positions=e.map(function(t){return{lng:new Number(t[0]),lat:new Number(t[1]),alt:0}});for(var o=[],i=0;i<e.length;i++)o.push([Number(e[i][0]),Number(e[i][1])]);return this._posArr=o,this._speed=r,this._polyline=new Ek([this._posArr[0],this._posArr[0]]),this._billboard=new gk(this._posArr[0]),this._delegate=[this._polyline,this._billboard,this._posArr[0]],this}var e,r,n;return e=t,(r=[{key:"id",get:function(){return this._bid},set:function(t){this._bid=t}},{key:"trackId",get:function(){return this._id}},{key:"_setModel",value:function(){}},{key:"setModel",value:function(t,e){this._setModel(t,e)}},{key:"setPath",value:function(t,e){var r=this;setTimeout(function(){t?r._polyline.setStyle(e):r._polyline.setStyle(null)},20)}},{key:"setBillboard",value:function(t,e){var r=this;setTimeout(function(){r._billboard.remove(),r._layer=r._billboard.layer;var n=r._billboard.position;r._billboard=new tk([n.lng,n.lat]),r._billboard.icon=t,r._billboard.size=e.size,r._billboard.anchor="center_center",r._layer.addOverlay(r._billboard),r._billboard.layer._track[r._bid]._delegate[1]=r._billboard},20)}},{key:"setFlashPoint",value:function(t){var e=this;setTimeout(function(){e._billboard.layer.remove(e._billboard),e._layer=e._billboard.layer;var r=e._billboard.position;r&&(e._billboard=new gk([r.lng,r.lat]),e._billboard._setStyle(t),e._layer.addOverlay(e._billboard),e._billboard.layer._track[e._bid]._delegate[1]=e._billboard)},20)}},{key:"setLabel",value:function(t,e){var r=this;setTimeout(function(){r._billboard._delegate._track?r._billboard._delegate._track.setLabel(t,e):r._billboard.setLabel(t,e)},20)}}])&&EW(e.prototype,r),n&&EW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jW(t){"@babel/helpers - typeof";return(jW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,void 0,"symbol"===jW(i=function(t,e){if("object"!==jW(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),n)}var o,i}var AW=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"init",value:function(t,e){var r=e.data;e.option;this._id=Bt.uuid(),this._Chrtc=t,this._olMap=t.olMap,this._delegate=void 0;for(var n=[],o=0;o<r.features.length;o++){var i=new EA.a.Feature(new EA.a.geom.Point([r.features[o].geometry.coordinates[0],r.features[o].geometry.coordinates[1]]));n.push(i)}var a=new EA.a.source.Vector({features:n}),s=new EA.a.source.Cluster({distance:40,source:a}),u={},l=new EA.a.layer.Vector({source:s,style:function(t,e){var r,n=t.get("features").length,o=u[n];o||(r="1"==n.toString()?sA:uA,o=new EA.a.style.Style({image:new aT({anchor:[.5,.5],crossOrigin:"anonymous",rotateWithView:!0,src:r}),text:new EA.a.style.Text({text:n.toString(),fill:new EA.a.style.Fill({color:"#fff"})})}),u[n]=o);return o}});this._delegate=l,this._olMap.addLayer(l)}},{key:"destroy",value:function(){this._delegate.getSource().clear(),this._delegate=void 0}}])&&xW(e.prototype,r),n&&xW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),RW=function(t){return t.reduce(function(t,e){return 2*t+e},0)},kW=function(t){for(var e=[],r=7;r>=0;r--)e.push(!!(t&1<<r));return e},IW=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return t instanceof Uint8Array?t[this.pos++]:255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],r=0;r<t;r++)e.push(this.readByte());return e},this.read=function(t){for(var e="",r=0;r<t;r++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},MW=function(t,e){e||(e={});var r=function(e){for(var r=[],n=0;n<e;n++)r.push(t.readBytes(3));return r},n=function(){var e,r;r="";do{e=t.readByte(),r+=t.read(e)}while(0!==e);return r},o=function(o){o.leftPos=t.readUnsigned(),o.topPos=t.readUnsigned(),o.width=t.readUnsigned(),o.height=t.readUnsigned();var i=kW(t.readByte());o.lctFlag=i.shift(),o.interlaced=i.shift(),o.sorted=i.shift(),o.reserved=i.splice(0,2),o.lctSize=RW(i.splice(0,3)),o.lctFlag&&(o.lct=r(1<<o.lctSize+1)),o.lzwMinCodeSize=t.readByte();var a=n();o.pixels=function(t,e){for(var r,n,o=0,i=function(t){for(var r=0,n=0;n<t;n++)e.charCodeAt(o>>3)&1<<(7&o)&&(r|=1<<n),o++;return r},a=[],s=1<<t,u=s+1,l=t+1,c=[],f=function(){c=[],l=t+1;for(var e=0;e<s;e++)c[e]=[e];c[s]=[],c[u]=null};;)if(n=r,(r=i(l))!==s){if(r===u)break;if(r<c.length)n!==s&&c.push(c[n].concat(c[r][0]));else{if(r!==c.length)throw new Error("Invalid LZW code.");c.push(c[n].concat(c[n][0]))}a.push.apply(a,c[r]),c.length===1<<l&&l<12&&l++}else f();return a}(o.lzwMinCodeSize,a),o.interlaced&&(o.pixels=function(t,e){for(var r=new Array(t.length),n=t.length/e,o=function(n,o){var i=t.slice(o*e,(o+1)*e);r.splice.apply(r,[n*e,e].concat(i))},i=[0,4,2,1],a=[8,8,4,2],s=0,u=0;u<4;u++)for(var l=i[u];l<n;l+=a[u])o(l,s),s++;return r}(o.pixels,o.width)),e.img&&e.img(o)},i=function r(){var i={};switch(i.sentinel=t.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(r){switch(r.label=t.readByte(),r.label){case 249:r.extType="gce",function(r){t.readByte();var n=kW(t.readByte());r.reserved=n.splice(0,3),r.disposalMethod=RW(n.splice(0,3)),r.userInput=n.shift(),r.transparencyGiven=n.shift(),r.delayTime=t.readUnsigned(),r.transparencyIndex=t.readByte(),r.terminator=t.readByte(),e.gce&&e.gce(r)}(r);break;case 254:r.extType="com",function(t){t.comment=n(),e.com&&e.com(t)}(r);break;case 1:r.extType="pte",function(r){t.readByte(),r.ptHeader=t.readBytes(12),r.ptData=n(),e.pte&&e.pte(r)}(r);break;case 255:r.extType="app",function(r){switch(t.readByte(),r.identifier=t.read(8),r.authCode=t.read(3),r.identifier){case"NETSCAPE":!function(r){t.readByte(),r.unknown=t.readByte(),r.iterations=t.readUnsigned(),r.terminator=t.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(r)}(r);break;default:!function(t){t.appData=n(),e.app&&e.app[t.identifier]&&e.app[t.identifier](t)}(r)}}(r);break;default:r.extType="unknown",function(t){t.data=n(),e.unknown&&e.unknown(t)}(r)}}(i);break;case",":i.type="img",o(i);break;case";":i.type="eof",e.eof&&e.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(r,0)};!function(){var n={};if(n.sig=t.read(3),n.ver=t.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=t.readUnsigned(),n.height=t.readUnsigned();var o=kW(t.readByte());n.gctFlag=o.shift(),n.colorRes=RW(o.splice(0,3)),n.sorted=o.shift(),n.gctSize=RW(o.splice(0,3)),n.bgColor=t.readByte(),n.pixelAspectRatio=t.readByte(),n.gctFlag&&(n.gct=r(1<<n.gctSize+1)),e.hdr&&e.hdr(n)}(),setTimeout(i,0)},DW=function(t){var e,r,n={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var o in t)n[o]=t[o];n.vp_w&&n.vp_h&&(n.is_vp=!0);var i=null,a=!1,s=null,u=null,l=null,c=null,f=null,p=null,h=null,y=!0,d=!1,v=[],m=[],b=n.gif;void 0===n.auto_play&&(n.auto_play=!b.getAttribute("rel:auto_play")||"1"==b.getAttribute("rel:auto_play"));var _,g,w,O,P=n.hasOwnProperty("on_end")?n.on_end:null,C=n.hasOwnProperty("loop_delay")?n.loop_delay:0,S=n.hasOwnProperty("loop_mode")?n.loop_mode:"auto",E=!n.hasOwnProperty("draw_while_loading")||n.draw_while_loading,T=!!E&&(!n.hasOwnProperty("show_progress_bar")||n.show_progress_bar),j=n.hasOwnProperty("progressbar_height")?n.progressbar_height:25,x=n.hasOwnProperty("progressbar_background_color")?n.progressbar_background_color:"rgba(255,255,255,0.4)",A=n.hasOwnProperty("progressbar_foreground_color")?n.progressbar_foreground_color:"rgba(255,0,22,.8)",R=function(){s=null,u=null,f=l,l=null,p=null},k=function(){try{MW(e,G)}catch(t){D("parse")}},I=function(t,e){_.width=t*H(),_.height=e*H(),w.style.minWidth=t*H()+"px",O.width=t,O.height=e,O.style.width=t+"px",O.style.height=e+"px",O.getContext("2d").setTransform(1,0,0,1,0,0)},M=function(t,e,r){if(r&&T){var o,i,a,s=j;n.is_vp?d?(i=(n.vp_t+n.vp_h-s)/H(),s/=H(),o=n.vp_l/H()+t/e*(n.vp_w/H()),a=_.width/H()):(i=n.vp_t+n.vp_h-s,s=s,o=n.vp_l+t/e*n.vp_w,a=_.width):(i=(_.height-s)/(d?H():1),o=t/e*_.width/(d?H():1),a=_.width/(d?H():1),s/=d?H():1),g.fillStyle=x,g.fillRect(o,i,a-o,s),g.fillStyle=A,g.fillRect(0,i,o,s)}},D=function(t){i=t,r={width:b.width,height:b.height},v=[],g.fillStyle="black",g.fillRect(0,0,n.c_w?n.c_w:r.width,n.c_h?n.c_h:r.height),g.strokeStyle="red",g.lineWidth=3,g.moveTo(0,0),g.lineTo(n.c_w?n.c_w:r.width,n.c_h?n.c_h:r.height),g.moveTo(0,n.c_h?n.c_h:r.height),g.lineTo(n.c_w?n.c_w:r.width,0),g.stroke()},L=function(){p&&(v.push({data:p.getImageData(0,0,r.width,r.height),delay:u}),m.push({x:0,y:0}))},N=function(){var t,e,r,o=-1,a=0,s=function(t){o+=t,l()},u=(t=!1,e=function(){null!==P&&P(b),!1!==S||++a<0?r():(t=!1,y=!1)},r=function r(){if(t=y){s(1);var n=10*v[o].delay;n||(n=100),0==(o+1+v.length)%v.length?(n+=C,setTimeout(e,n)):setTimeout(r,n)}},function(){t||setTimeout(r,0)}),l=function(){var t;(o=parseInt(o,10))>v.length-1&&(o=0),o<0&&(o=0),t=m[o],O.getContext("2d").putImageData(v[o].data,t.x,t.y),g.globalCompositeOperation="copy",g.drawImage(O,0,0)};return{init:function(){i||(n.c_w&&n.c_h||g.scale(H(),H()),n.auto_play?u():(o=0,l()))},step:u,play:function(){y=!0,u()},pause:function(){y=!1},playing:y,move_relative:s,current_frame:function(){return o},length:function(){return v.length},move_to:function(t){o=t,l()}}}(),F=function(t){M(e.pos,e.data.length,t)},B=function(){},W=function(t,e){return function(r){t(r),F(e)}},G={hdr:W(function(t){I((r=t).width,r.height)}),gce:W(function(t){L(),R(),s=t.transparencyGiven?t.transparencyIndex:null,u=t.delayTime,l=t.disposalMethod}),com:W(B),app:{NETSCAPE:W(B)},img:W(function(t){p||(p=O.getContext("2d"));var e=v.length,o=t.lctFlag?t.lct:r.gct;e>0&&(3===f?null!==c?p.putImageData(v[c].data,0,0):p.clearRect(h.leftPos,h.topPos,h.width,h.height):c=e-1,2===f&&p.clearRect(h.leftPos,h.topPos,h.width,h.height));var i=p.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,e){t!==s&&(i.data[4*e+0]=o[t][0],i.data[4*e+1]=o[t][1],i.data[4*e+2]=o[t][2],i.data[4*e+3]=255)}),p.putImageData(i,t.leftPos,t.topPos),d||(g.scale(H(),H()),d=!0),E&&(g.drawImage(O,0,0),E=n.auto_play),h=t},!0),eof:function(t){L(),F(!1),n.c_w&&n.c_h||(_.width=r.width*H(),_.height=r.height*H()),N.init(),a=!1,V&&V(b)}},z=function(){var t=document.createElement("div");_=document.createElement("canvas"),g=_.getContext("2d"),w=document.createElement("div"),O=document.createElement("canvas"),t.width=_.width=b.width,t.height=_.height=b.height,w.style.minWidth=b.width+"px",t.className="jsgif",w.className="jsgif_toolbar",t.appendChild(_),t.appendChild(w),n.c_w&&n.c_h&&I(n.c_w,n.c_h),U=!0},H=function(){return n.max_width&&r&&r.width>n.max_width?n.max_width/r.width:1},U=!1,V=!1,Z=function(t){return!a&&(V=t||!1,a=!0,v=[],R(),c=null,f=null,p=null,h=null,!0)};return{play:N.play,pause:N.pause,move_relative:N.move_relative,move_to:N.move_to,get_playing:function(){return y},get_canvas:function(){return _},get_canvas_scale:function(){return H()},get_loading:function(){return a},get_auto_play:function(){return n.auto_play},get_length:function(){return N.length()},get_current_frame:function(){return N.current_frame()},load_url:function(t,r){if(Z(r)){var n=new XMLHttpRequest;n.open("GET",t,!0),"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in n?n.responseType="arraybuffer":n.setRequestHeader("Accept-Charset","x-user-defined"),n.onloadstart=function(){U||z()},n.onload=function(t){200!=this.status&&D("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var r=this.response;r.toString().indexOf("ArrayBuffer")>0&&(r=new Uint8Array(r)),e=new IW(r),setTimeout(k,0)},n.onprogress=function(t){t.lengthComputable&&M(t.loaded,t.total,!0)},n.onerror=function(){D("xhr")},n.send()}},load:function(t){this.load_url(b.getAttribute("rel:animated_src")||b.src,t)},load_raw:function(t,r){Z(r)&&(U||z(),e=new IW(t),setTimeout(k,0))},set_frame_offset:function(t,e){m[t]?(void 0!==e.x&&(m[t].x=e.x),void 0!==e.y&&(m[t].y=e.y)):m[t]=e}}},LW={};LW.Map=wW,LW.Layer={},LW.Layer.mapServerLayer=kS,LW.Layer.htmlLayer=QA,LW.Layer.vectorLayer=rR,LW.Overlay={},LW.Overlay.DivIcon=gR,LW.Overlay.FlashPoint=gk,LW.Overlay.ArrowLine=pk,LW.Overlay.Point=UR,LW.Overlay.Billboard=tk,LW.Overlay.Polyline=Ek,LW.Overlay.Polygon=Bk,LW.Overlay.Circle=gI,LW.Overlay.DiffuseCircle=jI,LW.Overlay.ScanCircle=LI,LW.Overlay.Ellipse=QI,LW.Overlay.Rectangle=cM,LW.Overlay.AttackArrow=OM,LW.Overlay.ClosedCurve=MM,LW.Overlay.Curve=XM,LW.Overlay.DoubleArrow=aD,LW.Overlay.FineArrow=bD,LW.Overlay.AssaultDirection=AD,LW.Overlay.FreehandLine=UD,LW.Overlay.FreehandPolygon=oL,LW.Overlay.GatheringPlace=vL,LW.Overlay.Lune=AL,LW.Overlay.Sector=zL,LW.Overlay.SquadCombat=tN,LW.Overlay.StraightArrow=pN,LW.Overlay.TailedAttackArrow=CN,LW.Overlay.TailedSquadCombat=LN,LW.Overlay.Arc=QN,LW.TrackController=CW,LW.Track=TW,LW.DCPlot=WB,LW.Cluser=AW,LW.SuperGif=DW;var NW=LW;s.map3D=hA,s.map2D=NW}]);